<!DOCTYPE html>
<!-- saved from url=(0118)https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index -->
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" style="" class="supports cssanimations flexbox csstransforms csstransforms3d js"><link type="text/css" rel="stylesheet" id="dark-mode-custom-link"><link type="text/css" rel="stylesheet" id="dark-mode-general-link"><style lang="en" type="text/css" id="dark-mode-custom-style"></style><style lang="en" type="text/css" id="dark-mode-native-style"></style><head profile="http://www.w3.org/1999/xhtml/vocab"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style>
	  <!--[if IE]><![endif]-->

<meta name="revision" title="87fd853c-baff-4b29-b0e9-8627dba34b5b" product="c32f4e60-db0e-44fd-bca7-9661836d8c1c" revision="a0f04b8223fb6c558eb5478f597f572ac89b5ef7:en-us" page="fbc4c9ee-71b2-411a-9a67-e34244d25e19">
<meta name="generator" content="Drupal 7 (http://drupal.org)">
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/index">
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/index">
<meta property="og:site_name" content="Red Hat Customer Portal">
<meta property="og:type" content="article">
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/index">
<meta property="og:title" content="System Administrator’s Guide Red Hat Enterprise Linux 7 | Red Hat Customer Portal">
<meta property="og:description" content="The System Administrator&#39;s Guide documents relevant information regarding the deployment, configuration, and administration of Red Hat Enterprise Linux 7. It is oriented towards system administrators with a basic understanding of the system.       To expand your expertise, you might also be interested in the Red Hat System Administration I (RH124), Red Hat System Administration II (RH134), Red Hat System Administration III (RH254), or RHCSA Rapid Track (RH199) training courses.       If you want to use Red Hat Enterprise Linux 7 with the Linux Containers functionality, see Product Documentation for Red Hat Enterprise Linux Atomic Host. For an overview of general Linux Containers concept and their current capabilities implemented in Red Hat Enterprise Linux 7, see Overview of Containers in Red Hat Systems. The topics related to containers management and administration are described in the Red Hat Enterprise Linux Atomic Host 7 Managing Containers guide.">
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/index">
<meta name="twitter:title" content="System Administrator’s Guide Red Hat Enterprise Linux 7 | Red Hat Customer Portal">
<meta name="twitter:description" content="The System Administrator&#39;s Guide documents relevant information regarding the deployment, configuration, and administration of Red Hat Enterprise Linux 7. It is oriented towards system administrators with a basic understanding of the system.       To expand your expertise, you might also be interested in the Red Hat System Administration I (RH124), Red Hat System Administration II (RH134), Red Hat System Administration III (RH254), or RHCSA Rapid Track (RH199) training courses.       If you want to use Red Hat Enterprise Linux 7 with the Linux Containers functionality, see Product Documentation for Red Hat Enterprise Linux Atomic Host. For an overview of general Linux Containers concept and their current capabilities implemented in Red Hat Enterprise Linux 7, see Overview of Containers in Red Hat Systems. The topics related to containers management and administration are described in the Red Hat Enterprise Linux Atomic Host 7 Managing Containers guide.">
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png">
  <title>System Administrator’s Guide Red Hat Enterprise Linux 7 | Red Hat Customer Portal</title>
  <!-- CP_PRIMER_HEAD -->

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs07.web.prod.ext.phx2.redhat.com">
<meta name="avalon-version" content="95623937">
<meta name="cp-chrome-build-date" content="2021-07-07T16:46:22.001Z">

<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml">

<title>Red Hat Customer Portal - Access to 24x7 support and knowledge</title>

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "95623937",
        builddate : "2021-07-07T16:46:22.001Z",
        fetchdate : "2021-07-07T14:18:16-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="https://access.redhat.com/webassets/avalon/g/favicon.ico">

<link media="all" rel="stylesheet" type="text/css" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/bootstrap.css">
<link media="all" rel="stylesheet" type="text/css" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/bootstrap-grid.css">
<link media="all" rel="stylesheet" type="text/css" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/main.css">
<link media="all" rel="stylesheet" type="text/css" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/components.css">
<link media="all" rel="stylesheet" type="text/css" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/pages.css">

<link href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/chosen.css" rel="stylesheet" type="text/css">

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<link rel="preload" href="https://static.redhat.com/libs/redhat/redhat-font/2/webfonts/RedHatText/RedHatText-Regular.woff" as="font" type="font/woff" crossorigin="">
<link rel="preload" href="https://static.redhat.com/libs/redhat/redhat-font/2/webfonts/RedHatText/RedHatText-Medium.woff" as="font" type="font/woff" crossorigin="">
<link rel="preload" href="https://static.redhat.com/libs/redhat/redhat-font/2/webfonts/RedHatDisplay/RedHatDisplay-Regular.woff" as="font" type="font/woff" crossorigin="">
<link rel="preload" href="https://static.redhat.com/libs/redhat/redhat-font/2/webfonts/RedHatDisplay/RedHatDisplay-Medium.woff" as="font" type="font/woff" crossorigin="">
<link rel="preload" href="https://static.redhat.com/libs/redhat/redhat-font/2/webfonts/RedHatDisplay/RedHatDisplay-Bold.woff" as="font" type="font/woff" crossorigin="">

<!-- /cssInclude -->
<script type="text/javascript" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/require.js" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->

  <!-- TrustArc -->
  <script src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/trustarc.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-icon/dist/pfe-icon.umd.min" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/pfe-icon.umd.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.4.3/custom-elements-es5-adapter.js" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/custom-elements-es5-adapter.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.4.3/webcomponents-bundle.js" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/webcomponents-bundle.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="https://access.redhat.com/webassets/avalon/j/lib/require-css/require.css.min.js" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/require.css.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="rhn-modal" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rhn-modal.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="status-widget" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/status-widget.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="avatars" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/avatars.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="data-action" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/data-action.js"></script><script type="text/javascript" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/notice" id="truste_0.38381321525904744"></script>

<!-- /CP_PRIMER_HEAD -->
  <link type="text/css" rel="stylesheet" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all">
<link type="text/css" rel="stylesheet" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all">
<link type="text/css" rel="stylesheet" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/messages.css" media="all">
<link type="text/css" rel="stylesheet" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all">
<link type="text/css" rel="stylesheet" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print">
  <link rel="stylesheet" type="text/css" media="all" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/list.css">
  <script src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/js__ZyeOaiFuDejQQbhUV7yg7atYZnj4WLfH77o0scv4068__MZdWWgUEYpsEWLcU0RqkaXMsEyksbpCgnf4XwXRkqz0__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       '87fd853c-baff-4b29-b0e9-8627dba34b5b');
attributes.set('ResourceTitle',    'System Administrator’s Guide');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       'a0f04b8223fb6c558eb5478f597f572ac89b5ef7:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '7');
attributes.set('ProductId',        'Red Hat Enterprise Linux 7');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["7", "/documentation/en-us/red_hat_enterprise_linux/7/"], ["System Administrator\u2019s Guide", "/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__8abcou7ybLtGOLy-V9E-NQlDejOMZmdStjlYfyX9W-k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"0orqpmQhqzV9k28LIcfacvJ1pNL2yo-9oOSwOQy02QI","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs06-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="moment" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/moment.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="drupal-admin-drawer" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/drupal-admin-drawer.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="wc" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/wc.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="prism" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/prism.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="underscore" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/underscore.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfelement/dist/pfelement.umd" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/pfelement.umd.js"></script><link type="text/css" rel="stylesheet" href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/jquery-ui-1.12.1.custom.min.css"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nimbus/tour" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/tour.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="handlebars.runtime" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/handlebars.runtime.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="drupal-admin-drawer-templates" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/templates.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@cpelements/cp-search-autocomplete/dist/cp-search-autocomplete.umd" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/cp-search-autocomplete.umd.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery-ui" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/jquery-ui-1.12.1.custom.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="introjs" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/introjs.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="public_modules/@patternfly/pfe-autocomplete/dist/pfe-autocomplete.umd" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/pfe-autocomplete.umd.js"></script><link href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/css2" rel="stylesheet"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="ieSVGfix" src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ieSVGfix.js"></script><style data-jss="">
.\#honey-offers\,\ \#honey-offers\ div-0-0-1 {
  fontFamily: SuisseIntl, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
}
.\#honey-offers\ a-0-0-2 {
  textDecoration: none;
}
</style></head><span id="warning-container"><i data-reactroot=""></i></span>

<body class="portal-page  kcs_external en loggedOut">
  
  <!-- CP_PRIMER_HEADER -->
<div id="page-wrap" class="page-wrap">
    <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">

      <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
      <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <script>
    chrometwo_require(["wc"], function(wc){    
        wc.include("@cpelements/cp-search-autocomplete/dist/cp-search-autocomplete.umd");
    }); 
</script>

<!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&amp;">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform</a></li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&amp;">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&amp;name=&amp;product=All&amp;category=All&amp;tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated" style="display: block;"><a href="https://access.redhat.com/login?redirectTo=https%3A%2F%2Faccess.redhat.com%2Fdocumentation%2Fen-us%2Fred_hat_enterprise_linux%2F7%2Fhtml-single%2Fsystem_administrators_guide%2Findex" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated" style="display: block;"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link" hidden="hidden">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <span class="sr-only">Red Hat Customer Portal</span>
          <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
            <defs>
            <style>
              .rh-logo-type {
                fill:#fff;
              }
              .rh-logo-hat {
                fill:#e00;
              }
            </style>
            </defs>
            <g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"></path><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"></path><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"></path><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"></path><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"></path><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"></path><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"></path><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"></path><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"></path><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"></path><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"></path><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"></path><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"></path><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"></path><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"></path><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"></path><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"></path><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"></path><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"></path><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"></path><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"></path><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"></path></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"></path></g></g>
          </svg>
        </span>
            </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer-backdrop"></div><div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&amp;">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform</a></li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&amp;">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&amp;name=&amp;product=All&amp;category=All&amp;tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated" style="display: block;"><a href="https://access.redhat.com/login?redirectTo=https%3A%2F%2Faccess.redhat.com%2Fdocumentation%2Fen-us%2Fred_hat_enterprise_linux%2F7%2Fhtml-single%2Fsystem_administrators_guide%2Findex" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated" style="display: block;"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link" hidden="hidden">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="mobile-en" class="selected">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <cp-search-autocomplete class="push-bottom PFElement" path="/webassets/avalon/j/data.json" pfelement="" pfe-type="container"></cp-search-autocomplete>                            
                            <div>Or <a href="https://access.redhat.com/support/cases/#/troubleshoot">troubleshoot an issue</a>.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated" style="display: block;">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login?redirectTo=https%3A%2F%2Faccess.redhat.com%2Fdocumentation%2Fen-us%2Fred_hat_enterprise_linux%2F7%2Fhtml-single%2Fsystem_administrators_guide%2Findex" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/registrations?client_id=https%3A%2F%2Fwww.redhat.com%2Fwapps%2Fugc-oidc&amp;redirect_uri=https%3A%2F%2Fwww.redhat.com%2Fwapps%2Fugc%2Fprotected%2Faccount.html&amp;response_type=code&amp;scope=openid" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link" hidden="hidden">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" data-lang="en" id="en" class="selected">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" data-lang="ja" id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN&amp;redirectTo=https%3A//access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                      <span class="sr-only">Red Hat Customer Portal</span>
                      <span class="logo-crop">
                        <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
                          <defs>
                          <style>
                            .rh-logo-type {
                              fill:#fff;
                            }
                            .rh-logo-hat {
                              fill:#e00;
                            }
                          </style>
                          </defs>
                          <title>Red Hat Customer Portal</title><g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"></path><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"></path><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"></path><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"></path><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"></path><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"></path><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"></path><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"></path><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"></path><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"></path><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"></path><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"></path><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"></path><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"></path><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"></path><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"></path><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"></path><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"></path><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"></path><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"></path><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"></path><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"></path></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"></path></g></g>
                        </svg>
                      </span>
                                            </a>

                    <nav class="primary-nav" style="display: block;">
                        <ul>
                            <li id="nav-products" class="on"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                    <li><a href="https://access.redhat.com/products/red-hat-ansible-automation-platform/">Red Hat Ansible Automation Platform</a></li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-service-aws">Red Hat OpenShift Service on AWS</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        
                                        <li><a href="https://catalog.redhat.com/" class="cta-link cta-link-darkbg">Ecosystem Catalog</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/support/cases/#/troubleshoot">Troubleshoot a product issue</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat's specialized responses to security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&amp;name=&amp;product=All&amp;category=All&amp;tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        <div class="breadcrumbs"><div id="breadcrumbs" class="container"><a href="https://access.redhat.com/products/">Products &amp; Services</a><a href="https://access.redhat.com/documentation/">Product Documentation</a><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/">Red Hat Enterprise Linux</a><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/">7</a>System Administrator’s Guide</div></div></header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
<!-- /CP_PRIMER_HEADER -->
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show affix" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix" style="height: 837px;">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/7/html/system_administrators_guide/">日本語</a></li>
                      <li><a href="https://access.redhat.com/documentation/fr-fr/red_hat_enterprise_linux/7/html/system_administrators_guide/">Français</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/pdf/system_administrators_guide/Red_Hat_Enterprise_Linux-7-System_Administrators_Guide-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/epub/system_administrators_guide/Red_Hat_Enterprise_Linux-7-System_Administrators_Guide-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu" style="height: 722px;"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index">System Administrator’s Guide</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-Basic_System_Configuration">I. Basic System Configuration</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Getting_Started">1. Getting Started</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Basic_Conf_Env">1.1. Basic Configuration of the Environment</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Setting_Date_Time">1.1.1. Introduction to Configuring the Date and Time</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Setting_Syst_Locale">1.1.2. Introduction to Configuring the System Locale</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Setting_Keyboard_Layout">1.1.3. Introduction to Configuring the Keyboard Layout</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Networking">1.2. Configuring and Inspecting Network Access</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Network-access-during-installation">1.2.1. Configuring Network Access During the Installation Process</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Network-access-after-installation-nmcli">1.2.2. Managing Network Connections After the Installation Process Using nmcli</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Network-access-after-installation-nmtui">1.2.3. Managing Network Connections After the Installation Process Using nmtui</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Networking-Cockpit">1.2.4. Managing Networking in Cockpit</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Managing-Subscriptions">1.3. The Basics of Registering the System and Managing Subscriptions</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Subscriptions-Definition">1.3.1. What Red Hat Subscriptions Are and Which Tasks They Can Be Used For</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Registering-During-Installation">1.3.2. Registering the System During the Installation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Registering-After-Installation">1.3.3. Registering the System after the Installation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Registering-EUS">1.3.4. Registering a System to EUS Content</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Registering-E4S">1.3.5. Registering a System to E4S Content</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Installing-software">1.4. Installing Software</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installation-Prereq">1.4.1. Prerequisites for Software Installation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installation-Intro">1.4.2. Introduction to the System of Software Packaging and Software Repositories</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installation-Basic-Tasks">1.4.3. Managing Basic Software Installation Tasks with Subscription Manager and Yum</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Managing_systemd_Services">1.5. Making systemd Services Start at Boot Time</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Enabling_Disabling_systemd_Services">1.5.1. Enabling or Disabling the Services</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Managing_systemd_Cockpit">1.5.2. Managing Services in Cockpit</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-systemd_Additional_Resources">1.5.3. Additional Resources on systemd Services</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Security">1.6. Enhancing System Security with a Firewall, SELinux and SSH Logings</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Firewall">1.6.1. Ensuring the Firewall Is Enabled and Running</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-SELinux">1.6.2. Ensuring the Appropriate State of SELinux</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-SSH">1.6.3. Using SSH-based Authentication</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Managing_User_Accounts">1.7. The Basics of Managing User Accounts</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Cmdline_Tools_User_Accounts">1.7.1. The Most Basic Command-Line Tools to Manage User Accounts and Groups</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-User_Accounts_Cockpit">1.7.2. Managing User Accounts in Cockpit</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Mechanism">1.8. Dumping the Crashed Kernel Using the kdump Mechanism</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Definition">1.8.1. What kdump Is and Which Tasks It Can Be Used For</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Enablement_During_Installation">1.8.2. Enabling and Activating kdump During the Installation Process</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Enablement_After_Installation">1.8.3. Ensuring That kdump Is Installed and Enabled after the Installation Process</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_in_Cockpit">1.8.4. Configuring kdump in Cockpit</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Additional_Kdump">1.8.5. Additional Resources on kdump</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Creating_Syst_Backup">1.9. Performing System Rescue and Creating System Backup with ReaR</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-ReaR_Definition">1.9.1. What ReaR Is and Which Tasks It Can Be Used For</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Quickstart_Install_Rear">1.9.2. Quickstart to Installation and Configuration of ReaR</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Quickstart_Rescue_System">1.9.3. Quickstart to Creation of the Rescue System with ReaR</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Quickstart_ReaR_Backup">1.9.4. Quickstart to Configuration of ReaR with the Backup Software</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Log_Files">1.10. Using the Log Files to Troubleshoot Problems</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Handl_syslog">1.10.1. Services Handling the syslog Messages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Storing_syslog">1.10.2. Subdirectories Storing the syslog Messages</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-RH_support">1.11. Accessing Red Hat Support</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-RH_support_CP">1.11.1. Obtaining Red Hat Support Through Red Hat Customer Portal</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-SOS_report">1.11.2. Using the SOS Report to Troubleshoot Problems</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Keyboard_Configuration">2. System Locale and Keyboard Configuration</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Setting_the_System_Locale">2.1. Setting the System Locale</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Displaying_the_Current_Status">2.1.1. Displaying the Current Status</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Listing_Available_Locales">2.1.2. Listing Available Locales</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Setting_the_Locale">2.1.3. Setting the Locale</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Locales_With_Kickstart">2.1.4. Making System Locale Settings Permanent when Installing with Kickstart</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Changing_the_Keyboard_Layout">2.2. Changing the Keyboard Layout</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Displaying_the_Current_Settings">2.2.1. Displaying the Current Settings</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Listing_Available_Keymaps">2.2.2. Listing Available Keymaps</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Setting_the_Keymap">2.2.3. Setting the Keymap</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Keyboard_Configuration-Resources">2.3. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Configuring_the_Date_and_Time">3. Configuring the Date and Time</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl">3.1. Using the timedatectl Command</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl-Display">3.1.1. Displaying the Current Date and Time</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl-Time">3.1.2. Changing the Current Time</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl-Date">3.1.3. Changing the Current Date</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl-Time_Zone">3.1.4. Changing the Time Zone</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl-NTP">3.1.5. Synchronizing the System Clock with a Remote Server</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-date">3.2. Using the date Command</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-date-Display">3.2.1. Displaying the Current Date and Time</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-date-Time">3.2.2. Changing the Current Time</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-date-Date">3.2.3. Changing the Current Date</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-hwclock">3.3. Using the hwclock Command</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect2-displaying-time-hwclock">3.3.1. Displaying the Current Date and Time</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect3-changing-date-time-hwclock">3.3.2. Setting the Date and Time</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect4-synchronizing-date-time-hwclock">3.3.3. Synchronizing the Date and Time</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Date_and_Time-Resources">3.4. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Managing_Users_and_Groups">4. Managing Users and Groups</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-users-groups-introduction">4.1. Introduction to Users and Groups</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-groups-private-groups">4.1.1. User Private Groups</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-groups-shadow-utilities">4.1.2. Shadow Passwords</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-users-configui">4.2. Managing Users in a Graphical Environment</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-redhat-config-users-list">4.2.1. Using the Users Settings Tool</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-users-tools">4.3. Using Command-Line Tools</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-tools-users-add">4.3.1. Adding a New User</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-tools-groups-add">4.3.2. Adding a New Group</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-to-existing-groups">4.3.3. Adding an Existing User to an Existing Group</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-tools-groups-directories">4.3.4. Creating Group Directories</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-setting-default-permissions-for-new-files-using-umask">4.3.5. Setting Default Permissions for New Files Using umask</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Users_and_Groups-Resources">4.4. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Access_Control_Lists">5. Access Control Lists</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-acls-mounting">5.1. Mounting File Systems</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#acls-mounting-nfs">5.1.1. NFS</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#acls-setting">5.2. Setting Access ACLs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#acls-setting-default">5.3. Setting Default ACLs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#acls-retrieving">5.4. Retrieving ACLs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#acls-archiving">5.5. Archiving File Systems With ACLs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#acls-compat-older">5.6. Compatibility with Older Systems</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#acls-additional-resources">5.7. ACL References</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges">6. Gaining Privileges</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Gaining_Privileges-The_su_Command">6.1. Configuring Administrative Access Using the su Utility</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Gaining_Privileges-The_sudo_Command">6.2. Configuring Administrative Access Using the sudo Utility</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Gaining_Privileges-Additional_Resources">6.3. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-Subscription_and_Support">II. Subscription and Support</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions">7. Registering the System and Managing Subscriptions</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-Registering_the_System_and_Attaching_Subscriptions">7.1. Registering the System and Attaching Subscriptions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-Managing_Repositories">7.2. Managing Software Repositories</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-Removing_Subscriptions">7.3. Removing Subscriptions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-References">7.4. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Red_Hat_Support_Tool">8. Accessing Support Using the Red Hat Support Tool</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing_the_Red_Hat_Support_Tool">8.1. Installing the Red Hat Support Tool</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Registering_the_Red_Hat_Support_Tool_Using_the_Command_Line">8.2. Registering the Red Hat Support Tool Using the Command Line</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_the_Red_Hat_Support_Tool_in_Interactive_Shell_Mode">8.3. Using the Red Hat Support Tool in Interactive Shell Mode</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_the_Red_Hat_Support_Tool">8.4. Configuring the Red Hat Support Tool</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Saving_Settings_to_the_Configuration_Files">8.4.1. Saving Settings to the Configuration Files</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Opening_and_Updating_Support_Cases_Using_Interactive_Mode">8.5. Opening and Updating Support Cases Using Interactive Mode</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Viewing_Support_Cases_on_the_Command_Line">8.6. Viewing Support Cases on the Command Line</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Red_Hat_Support_Tool-Additional_Resources">8.7. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-Installing_and_Managing_Software">III. Installing and Managing Software</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-yum">9. Yum</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Checking_For_and_Updating_Packages">9.1. Checking For and Updating Packages</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Checking_For_Updates">9.1.1. Checking For Updates</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Updating_Packages">9.1.2. Updating Packages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-yum-upgrade-system">9.1.3. Upgrading the System Off-line with ISO and Yum</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Working_with_Packages">9.2. Working with Packages</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Searching_Packages">9.2.1. Searching Packages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Listing_Packages">9.2.2. Listing Packages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Displaying_Package_Information">9.2.3. Displaying Package Information</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing">9.2.4. Installing Packages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Downloading">9.2.5. Downloading Packages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Removing">9.2.6. Removing Packages</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Working_with_Package_Groups">9.3. Working with Package Groups</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec2-Listing_Package_Groups">9.3.1. Listing Package Groups</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec2-Installing_a_Package_Group">9.3.2. Installing a Package Group</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Removing_a_Package_Group">9.3.3. Removing a Package Group</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Transaction_History">9.4. Working with Transaction History</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Transaction_History-Listing">9.4.1. Listing Transactions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Transaction_History-Examining">9.4.2. Examining Transactions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Transaction_History-Reverting">9.4.3. Reverting and Repeating Transactions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Transaction_History-New">9.4.4. Starting New Transaction History</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_Yum_and_Yum_Repositories">9.5. Configuring Yum and Yum Repositories</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_main_Options">9.5.1. Setting [main] Options</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_repository_Options">9.5.2. Setting [repository] Options</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_Yum_Variables">9.5.3. Using Yum Variables</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Viewing_the_Current_Configuration">9.5.4. Viewing the Current Configuration</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Managing_Yum_Repositories">9.5.5. Adding, Enabling, and Disabling a Yum Repository</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Yum_Repository">9.5.6. Creating a Yum Repository</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Adding_the_Optional_and_Supplementary_Repositories">9.5.7. Adding the Optional and Supplementary Repositories</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Yum_Plugins">9.6. Yum Plug-ins</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Enabling_Configuring_and_Disabling_Yum_Plugins">9.6.1. Enabling, Configuring, and Disabling Yum Plug-ins</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing_More_Yum_Plugins">9.6.2. Installing Additional Yum Plug-ins</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Plugin_Descriptions">9.6.3. Working with Yum Plug-ins</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Automatically_refreshing_the_package_database_and_download_updates">9.7. Automatically Refreshing Package Database and Downloading Updates with Yum-cron</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Enabling_automatic_installation_of_updates">9.7.1. Enabling Automatic Installation of Updates</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_up_optional_email_notifications">9.7.2. Setting up Optional Email Notifications</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Enabling_or_disabling_specific_repositories">9.7.3. Enabling or Disabling Specific Repositories</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Testing_yum-cron_settings">9.7.4. Testing Yum-cron Settings</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Disabling_yum-cron_messages">9.7.5. Disabling Yum-cron messages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Automatically_cleaning_packages">9.7.6. Automatically Cleaning Packages</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Resources">9.8. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-Infrastructure_Services">IV. Infrastructure Services</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd">10. Managing Services with systemd</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Introduction">10.1. Introduction to systemd</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Introduction-Features">10.1.1. Main Features</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Compatibility_Changes">10.1.2. Compatibility Changes</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services">10.2. Managing System Services</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-List">10.2.1. Listing Services</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Status">10.2.2. Displaying Service Status</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Start">10.2.3. Starting a Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Stop">10.2.4. Stopping a Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Restart">10.2.5. Restarting a Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Enable">10.2.6. Enabling a Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Disable">10.2.7. Disabling a Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Start_confl">10.2.8. Starting a Conflicting Service</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets">10.3. Working with systemd Targets</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-View_Default">10.3.1. Viewing the Default Target</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-View_Current">10.3.2. Viewing the Current Target</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Change_Default">10.3.3. Changing the Default Target</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Change_Current">10.3.4. Changing the Current Target</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Rescue">10.3.5. Changing to Rescue Mode</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Emergency">10.3.6. Changing to Emergency Mode</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Power">10.4. Shutting Down, Suspending, and Hibernating the System</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Power-Halt">10.4.1. Shutting Down the System</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Power-Reboot">10.4.2. Restarting the System</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Power-Suspend">10.4.3. Suspending the System</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Power-Hibernate">10.4.4. Hibernating the System</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Remote">10.5. Controlling systemd on a Remote Machine</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_Files">10.6. Creating and Modifying systemd Unit Files</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Structure">10.6.1. Understanding the Unit File Structure</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Create">10.6.2. Creating Custom Unit Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Convert">10.6.3. Converting SysV Init Scripts to Unit Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Modify">10.6.4. Modifying Existing Unit Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Instantiated_Units">10.6.5. Working with Instantiated Units</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Considerations">10.7. Additional Considerations While Managing Services</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Resources">10.8. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Accessbility">11. Configuring a System for Accessibility</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#configure_brltty">11.1. Configuring the brltty Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#switch_univ_access_on">11.2. Switch On Always Show Universal Access Menu</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#enable_festival">11.3. Enabling the Festival Speech Synthesis System</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-OpenSSH">12. OpenSSH</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-ssh-protocol">12.1. The SSH Protocol</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-why">12.1.1. Why Use SSH?</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-features">12.1.2. Main Features</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-versions">12.1.3. Protocol Versions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-conn">12.1.4. Event Sequence of an SSH Connection</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-ssh-configuration">12.2. Configuring OpenSSH</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-configuration-configs">12.2.1. Configuration Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-configuration-sshd">12.2.2. Starting an OpenSSH Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-configuration-requiring">12.2.3. Requiring SSH for Remote Connections</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-configuration-keypairs">12.2.4. Using Key-based Authentication</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-ssh-clients">12.3. OpenSSH Clients</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-clients-ssh">12.3.1. Using the ssh Utility</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-clients-scp">12.3.2. Using the scp Utility</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-clients-sftp">12.3.3. Using the sftp Utility</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-ssh-beyondshell">12.4. More Than a Secure Shell</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-beyondshell-x11">12.4.1. X11 Forwarding</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-beyondshell-tcpip">12.4.2. Port Forwarding</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenSSH-Resources">12.5. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-TigerVNC">13. TigerVNC</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-vnc-server">13.1. VNC Server</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-vnc-installation">13.1.1. Installing VNC Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-configuring-vnc-server">13.1.2. Configuring VNC Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-starting-vncserver">13.1.3. Starting VNC Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#vnc-based-on-xinetd">13.1.4. VNC setup based on xinetd with XDMCP for GDM</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-terminating-vnc-session">13.1.5. Terminating a VNC Session</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-vnc-sharing-an-existing-desktop">13.2. Sharing an Existing Desktop</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-vnc-viewer">13.3. VNC Viewer</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-installing-vncviewer">13.3.1. Installing VNC Viewer</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-connecting-vnc-server">13.3.2. Connecting to VNC Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-using_ssh">13.3.3. Connecting to VNC Server Using SSH</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-TigerVNC-Additional_Resources">13.4. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-Servers">V. Servers</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Web_Servers">14. Web Servers</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-The_Apache_HTTP_Server">14.1. The Apache HTTP Server</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-version2-changes">14.1.1. Notable Changes</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-version2-migrating">14.1.2. Updating the Configuration</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-running">14.1.3. Running the httpd Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-editing">14.1.4. Editing the Configuration Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-dso">14.1.5. Working with Modules</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-virtualhosts">14.1.6. Setting Up Virtual Hosts</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-mod_ssl">14.1.7. Setting Up an SSL Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-mod_ssl-enabling">14.1.8. Enabling the mod_ssl Module</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-mod_nss-enabling">14.1.9. Enabling the mod_nss Module</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-mod_ssl-keypair">14.1.10. Using an Existing Key and Certificate</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-mod_ssl-genkey">14.1.11. Generating a New Key and Certificate</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Configure_the_Firewall_for_HTTP_and_HTTPS_Using_the_CLI">14.1.12. Configure the Firewall for HTTP and HTTPS Using the Command Line</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-resources">14.1.13. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Mail_Servers">15. Mail Servers</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-protocols">15.1. Email Protocols</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-protocols-send">15.1.1. Mail Transport Protocols</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-protocols-client">15.1.2. Mail Access Protocols</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-types">15.2. Email Program Classifications</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-types-mta">15.2.1. Mail Transport Agent</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-types-mda">15.2.2. Mail Delivery Agent</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-types-mua">15.2.3. Mail User Agent</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-mta">15.3. Mail Transport Agents</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-mta-postfix">15.3.1. Postfix</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-mta-sendmail">15.3.2. Sendmail</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-mta-fetchmail">15.3.3. Fetchmail</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-switchmail">15.3.4. Mail Transport Agent (MTA) Configuration</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-mda">15.4. Mail Delivery Agents</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-procmail-configuration">15.4.1. Procmail Configuration</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-procmail-recipes">15.4.2. Procmail Recipes</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-mua">15.5. Mail User Agents</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-security">15.5.1. Securing Communication</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-conf-mailserver">15.6. Configuring Mail Server with Antispam and Antivirus</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-email-conf-spamfiltering">15.6.1. Configuring Spam Filtering for Mail Transport Agent or Mail Delivery Agent</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-email-conf-antivirus_protection">15.6.2. Configuring Antivirus Protection</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-spamassasin-clamav_epel">15.6.3. Using the EPEL Repository to install Antispam and Antivirus Software</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-additional-resources">15.7. Additional Resources</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-installed-docs">15.7.1. Installed Documentation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-online-documentation">15.7.2. Online Documentation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-related-books">15.7.3. Related Books</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-File_and_Print_Servers">16. File and Print Servers</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Samba">16.1. Samba</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#the_samba_services">16.1.1. The Samba Services</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility">16.1.2. Verifying the smb.conf File by Using the testparm Utility</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#understanding_the_samba_security_modes">16.1.3. Understanding the Samba Security Modes</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_standalone_server">16.1.4. Setting up Samba as a Standalone Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_domain_member">16.1.5. Setting up Samba as a Domain Member</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#configuring_file_shares_on_a_samba_server">16.1.6. Configuring File Shares on a Samba Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_samba_print_server">16.1.7. Setting up a Samba Print Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tuning_the_performance_of_a_samba_server">16.1.8. Tuning the Performance of a Samba Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#frequently_used_samba_command_line_utilities">16.1.9. Frequently Used Samba Command-line Utilities</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#additional_resources">16.1.10. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-FTP">16.2. FTP</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ftp-protocol">16.2.1. The File Transfer Protocol</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ftp-servers-vsftpd">16.2.2. The vsftpd Server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ftp-resources">16.2.3. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Printer_Configuration">16.3. Print Settings</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Starting_Print_Settings_Config">16.3.1. Starting the Print Settings Configuration Tool</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_Printer">16.3.2. Starting Printer Setup</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Adding_Other_Printer">16.3.3. Adding a Local Printer</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-jetdirect-printer">16.3.4. Adding an AppSocket/HP JetDirect printer</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-ipp-printer">16.3.5. Adding an IPP Printer</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-printing-LPDLPR-printer">16.3.6. Adding an LPD/LPR Host or Printer</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-smb-printer">16.3.7. Adding a Samba (SMB) printer</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-select-model">16.3.8. Selecting the Printer Model and Finishing</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-test-page">16.3.9. Printing a Test Page</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-edit">16.3.10. Modifying Existing Printers</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-additional-resources">16.3.11. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Database_Servers">17. Database Servers</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-MariaDB">17.1. MariaDB</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#installing-mariadb">17.1.1. Installing the MariaDB server</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#configuring-mariadb-for-networking">17.1.2. Configuring the MariaDB server for networking</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#backing-up-mariadb">17.1.3. Backing up MariaDB data</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_the_chrony_Suite">18. Configuring NTP Using the chrony Suite</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Introduction_to_the_chrony_Suite">18.1. Introduction to the chrony Suite</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-differences_between_ntpd_and_chronyd">18.1.1. Differences Between ntpd and chronyd</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Choosing_between_NTP_daemon">18.1.2. Choosing Between NTP Daemons</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Understanding_chrony_and-its_configuration">18.2. Understanding chrony and Its Configuration</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Understanding_chronyd">18.2.1. Understanding chronyd and chronyc</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Understanding_the_chrony_configuration_commands">18.2.2. Understanding the chrony Configuration Commands</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Security_with_chronyc">18.2.3. Security with chronyc</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Using_chrony">18.3. Using chrony</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Installing_chrony">18.3.1. Installing chrony</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Checking_the_Status_of_chronyd">18.3.2. Checking the Status of chronyd</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Starting_chronyd">18.3.3. Starting chronyd</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Stopping_chronyd">18.3.4. Stopping chronyd</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Checking_if_chrony_is_synchronized">18.3.5. Checking if chrony is Synchronized</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Manually_Adjusting-the-System_Clock">18.3.6. Manually Adjusting the System Clock</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Setting_up_chrony_for_different_environments">18.4. Setting Up chrony for Different Environments</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Setting_up_chrony_for_a_system_in_an_isolated_network">18.4.1. Setting Up chrony for a System in an Isolated Network</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Using_chronyc">18.5. Using chronyc</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Using_chronyc_chronyc_to_control_chronyd">18.5.1. Using chronyc to Control chronyd</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-hw_timestamping">18.6. Chrony with HW timestamping</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-definition-hw-timestamping">18.6.1. Understanding Hardware Timestamping</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-verifying-hw-timestamping">18.6.2. Verifying Support for Hardware Timestamping</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-enabling-hw-timestamping">18.6.3. Enabling Hardware Timestamping</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-configuraing-polling-interval">18.6.4. Configuring Client Polling Interval</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-enabling-interleaved-mode">18.6.5. Enabling Interleaved Mode</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-configuration-many-clients">18.6.6. Configuring Server for Large Number of Clients</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-verifying-hardware-timestamping">18.6.7. Verifying Hardware Timestamping</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-configuring-PTP-NTP-bridge">18.6.8. Configuring PTP-NTP bridge</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-additional_resources">18.7. Additional Resources</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-chrony-docs-inst">18.7.1. Installed Documentation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-chrony_Online_Documentation">18.7.2. Online Documentation</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd">19. Configuring NTP Using ntpd</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Introduction_to_NTP">19.1. Introduction to NTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-NTP_Strata">19.2. NTP Strata</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Understanding_NTP">19.3. Understanding NTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Understanding_the_Drift_File">19.4. Understanding the Drift File</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-UTC_timezones_and_DST">19.5. UTC, Timezones, and DST</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Authentication_Options_for_NTP">19.6. Authentication Options for NTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Managing_the_Time_on_Virtual_Machines">19.7. Managing the Time on Virtual Machines</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Understanding_Leap_Seconds">19.8. Understanding Leap Seconds</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Understanding_the_ntpd_Configuration_File">19.9. Understanding the ntpd Configuration File</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Understanding_the_ntpd_Sysconfig_File">19.10. Understanding the ntpd Sysconfig File</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Disabling_chrony">19.11. Disabling chrony</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Checking_if_the_NTP_Daemon_is_Installed">19.12. Checking if the NTP Daemon is Installed</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Installing_the_NTP_Daemon_ntpd">19.13. Installing the NTP Daemon (ntpd)</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Checking_the_Status_of_NTP">19.14. Checking the Status of NTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configure_the_Firewall_to_Allow_Incoming_NTP_Packets">19.15. Configure the Firewall to Allow Incoming NTP Packets</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Change_the_firewall_settings">19.15.1. Change the Firewall Settings</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Open_Ports_in_the_firewall_for_ntp_packets">19.15.2. Open Ports in the Firewall for NTP Packets</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configure_ntpdate_Servers">19.16. Configure ntpdate Servers</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configure_NTP">19.17. Configure NTP</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Configure_Access_Control_to_an_NTP_service">19.17.1. Configure Access Control to an NTP Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configure_Rate_Limiting_Access_to_an_NTP_Service">19.17.2. Configure Rate Limiting Access to an NTP Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Adding_a_Peer_Address">19.17.3. Adding a Peer Address</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Adding_a_Server_Address">19.17.4. Adding a Server Address</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Adding_a_Broadcast_or_Mutlticast_Server_Address">19.17.5. Adding a Broadcast or Multicast Server Address</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Adding_a_Manycast_Client_Address">19.17.6. Adding a Manycast Client Address</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Adding_a_Broadcastclient_Address">19.17.7. Adding a Broadcast Client Address</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Adding_a_manycastserver_Address">19.17.8. Adding a Manycast Server Address</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Adding_a_multicastclient_Address">19.17.9. Adding a Multicast Client Address</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_the_Burst_Option">19.17.10. Configuring the Burst Option</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_the_iburst_Option">19.17.11. Configuring the iburst Option</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_Symmetric_Authentication_Using_a_Key">19.17.12. Configuring Symmetric Authentication Using a Key</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_the_Poll_Interval">19.17.13. Configuring the Poll Interval</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_Server_Preference">19.17.14. Configuring Server Preference</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_the_Time-To-Live_for_NTP_Packets">19.17.15. Configuring the Time-to-Live for NTP Packets</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_The_Version_of_NTP_to_use">19.17.16. Configuring the NTP Version to Use</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configuring_the_Hardware_Clock_update">19.18. Configuring the Hardware Clock Update</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configuring_Clock_Sources">19.19. Configuring Clock Sources</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-ntpd_additional-resources">19.20. Additional Resources</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ntpd-docs-inst">19.20.1. Installed Documentation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ntpd_useful-websites">19.20.2. Useful Websites</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_PTP_Using_ptp4l">20. Configuring PTP Using ptp4l</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Introduction_to_PTP">20.1. Introduction to PTP</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Understanding_PTP">20.1.1. Understanding PTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Advantages_of_PTP">20.1.2. Advantages of PTP</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_PTP">20.2. Using PTP</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Checking_for_Driver_and_Hardware_Support">20.2.1. Checking for Driver and Hardware Support</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing_PTP">20.2.2. Installing PTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Starting_ptp4l">20.2.3. Starting ptp4l</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_PTP_with_Multiple_Interfaces">20.3. Using PTP with Multiple Interfaces</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Specifying_a_Configuration_File">20.4. Specifying a Configuration File</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_the_PTP_Management_Client">20.5. Using the PTP Management Client</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Synchronizing_the_Clocks">20.6. Synchronizing the Clocks</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Verifying_Time_Synchronization">20.7. Verifying Time Synchronization</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Serving_PTP_Time_with_NTP">20.8. Serving PTP Time with NTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Serving_NTP_Time_with_PTP">20.9. Serving NTP Time with PTP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Synchronize_to_PTP_or_NTP_Time_Using_timemaster">20.10. Synchronize to PTP or NTP Time Using timemaster</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Starting_timemaster_as_a_Service">20.10.1. Starting timemaster as a Service</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Understanding_the_timemaster_Configuration_File">20.10.2. Understanding the timemaster Configuration File</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_timemaster_Options">20.10.3. Configuring timemaster Options</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Improving_Accuracy">20.11. Improving Accuracy</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-PTP_additional_resources">20.12. Additional Resources</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-PTP-docs-inst">20.12.1. Installed Documentation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-PTP_useful-websites">20.12.2. Useful Websites</a></li></ol></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-Monitoring_and_Automation">VI. Monitoring and Automation</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-System_Monitoring_Tools">21. System Monitoring Tools</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-sysinfo-system-processes">21.1. Viewing System Processes</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-system-processes-ps">21.1.1. Using the ps Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-system-processes-top">21.1.2. Using the top Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-system-processes-system_monitor">21.1.3. Using the System Monitor Tool</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-sysinfo-memory-usage">21.2. Viewing Memory Usage</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-memory-usage-free">21.2.1. Using the free Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-memory-usage-system_monitor">21.2.2. Using the System Monitor Tool</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-sysinfo-cpu">21.3. Viewing CPU Usage</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-cpu-system_monitor">21.3.1. Using the System Monitor Tool</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-sysinfo-filesystems">21.4. Viewing Block Devices and File Systems</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-filesystems-lsblk">21.4.1. Using the lsblk Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-filesystems-blkid">21.4.2. Using the blkid Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-filesystems-findmnt">21.4.3. Using the findmnt Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-filesystems-df">21.4.4. Using the df Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-filesystems-du">21.4.5. Using the du Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-filesystems-system_monitor">21.4.6. Using the System Monitor Tool</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-sysinfo-hardware">21.5. Viewing Hardware Information</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-hardware-lspci">21.5.1. Using the lspci Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-hardware-lsusb">21.5.2. Using the lsusb Command</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-hardware-lscpu">21.5.3. Using the lscpu Command</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Checking_for_Hardware_Errors">21.6. Checking for Hardware Errors</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP">21.7. Monitoring Performance with Net-SNMP</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP-Installing">21.7.1. Installing Net-SNMP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP-Running">21.7.2. Running the Net-SNMP Daemon</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP-Configuring">21.7.3. Configuring Net-SNMP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP-Retrieving">21.7.4. Retrieving Performance Data over SNMP</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP-Extending">21.7.5. Extending Net-SNMP</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-sysinfo-additional-resources">21.8. Additional Resources</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-sysinfo-installed-docs">21.8.1. Installed Documentation</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-OpenLMI">22. OpenLMI</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-OpenLMI-About">22.1. About OpenLMI</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-About-Features">22.1.1. Main Features</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-About-Capabilities">22.1.2. Management Capabilities</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-Install">22.2. Installing OpenLMI</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-Install-Managed">22.2.1. Installing OpenLMI on a Managed System</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-Install-Client">22.2.2. Installing OpenLMI on a Client System</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring-SSL-Certificates-for-OpenPegasus">22.3. Configuring SSL Certificates for OpenPegasus</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring-SSL-Certificates-for-Pegasus-Managing-Self-Signed-Certificates">22.3.1. Managing Self-signed Certificates</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring-SSL-Certificates-for-Pegasus-Managing-Authority-Signed-Certificates-With-Identity-Management">22.3.2. Managing Authority-signed Certificates with Identity Management (Recommended)</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring-SSL-Certificates-for-Pegasus-Managing-Authority-Signed-Certificates-Manually">22.3.3. Managing Authority-signed Certificates Manually</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell">22.4. Using LMIShell</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Use">22.4.1. Starting, Using, and Exiting LMIShell</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Connect">22.4.2. Connecting to a CIMOM</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Namespaces">22.4.3. Working with Namespaces</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Classes">22.4.4. Working with Classes</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Instances">22.4.5. Working with Instances</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Instance_Names">22.4.6. Working with Instance Names</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Associated_Objects">22.4.7. Working with Associated Objects</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Association_Objects">22.4.8. Working with Association Objects</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Indications">22.4.9. Working with Indications</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell-Examples">22.4.10. Example Usage</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-Scripts">22.5. Using OpenLMI Scripts</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-Resources">22.6. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Viewing_and_Managing_Log_Files">23. Viewing and Managing Log Files</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-logfiles-locating">23.1. Locating Log Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-basic_configuration_of_rsyslog">23.2. Basic Configuration of Rsyslog</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Filters">23.2.1. Filters</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Actions">23.2.2. Actions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Templates">23.2.3. Templates</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-global_directives">23.2.4. Global Directives</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-log_rotation">23.2.5. Log Rotation</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Increasing_the_limit_of_open_files">23.2.6. Increasing the Limit of Open Files</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-using_the_new_configuration_format">23.3. Using the New Configuration Format</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Rulesets">23.3.1. Rulesets</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-compatibility_with_sysklogd">23.3.2. Compatibility with sysklogd</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-working_with_queues_in_rsyslog">23.4. Working with Queues in Rsyslog</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-defining_queues">23.4.1. Defining Queues</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Creating_a_New_Directory_for_rsyslog_Log_Files">23.4.2. Creating a New Directory for rsyslog Log Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-managing_queues">23.4.3. Managing Queues</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_the_New_Syntax_for_rsyslog_queues">23.4.4. Using the New Syntax for rsyslog queues</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-configuring_rsyslog_on_a_logging_server">23.5. Configuring rsyslog on a Logging Server</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_The_New_Template_Syntax_on_a_Logging_Server">23.5.1. Using The New Template Syntax on a Logging Server</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-using_rsyslog_modules">23.6. Using Rsyslog Modules</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-importing_text_files">23.6.1. Importing Text Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-exporting_messages_to_a_database">23.6.2. Exporting Messages to a Database</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-enabling_encrypted_transport">23.6.3. Enabling Encrypted Transport</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-using_RELP">23.6.4. Using RELP</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-interaction_of_rsyslog_and_journal">23.7. Interaction of Rsyslog and Journal</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-structured_logging_with_rsyslog">23.8. Structured Logging with Rsyslog</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-importing_data_from_journal">23.8.1. Importing Data from Journal</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-filtering_structured_messages">23.8.2. Filtering Structured Messages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-parsing_JSON">23.8.3. Parsing JSON</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-storing_messages_in_the_mongodb">23.8.4. Storing Messages in the MongoDB</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-debugging_rsyslog">23.9. Debugging Rsyslog</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Using_the_Journal">23.10. Using the Journal</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Viewing_Log_Files">23.10.1. Viewing Log Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Access_Control">23.10.2. Access Control</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Using_The_Live_View">23.10.3. Using The Live View</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Filtering_Messages">23.10.4. Filtering Messages</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Enabling_Persistent_Storage">23.10.5. Enabling Persistent Storage</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-managing_log_files_in_a_graphical_environment">23.11. Managing Log Files in a Graphical Environment</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-logfiles-viewing">23.11.1. Viewing Log Files</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-logfiles-adding">23.11.2. Adding a Log File</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-logfiles-examining">23.11.3. Monitoring Log Files</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-log-files-additional-resources">23.12. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Automating_System_Tasks">24. Automating System Tasks</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Scheduling_a_Recurring_Job_Using_Cron">24.1. Scheduling a Recurring Job Using Cron</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Prerequisites_for_Cron_Jobs">24.1.1. Prerequisites for Cron Jobs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Cron_Job">24.1.2. Scheduling a Cron Job</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Scheduling_a_Recurring_Asynchronous_Job_Using_Anacron">24.2. Scheduling a Recurring Asynchronous Job Using Anacron</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Prerequisites_for_Anacron_Jobs">24.2.1. Prerequisites for Anacrob Jobs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_an_Anacron_Job">24.2.2. Scheduling an Anacron Job</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Job_to_Run_at_a_Specific_Time_Using_at">24.3. Scheduling a Job to Run at a Specific Time Using at</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Prerequisites_for_At_Jobs">24.3.1. Prerequisites for At Jobs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_an_At_Job">24.3.2. Scheduling an At Job</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Job_to_Run_on_System_Load_Drop_Using_batch">24.4. Scheduling a Job to Run on System Load Drop Using batch</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Prerequisites_for_Batch_Jobs">24.4.1. Prerequisites for Batch Jobs</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Batch_Job">24.4.2. Scheduling a Batch Job</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-one-time_script_on_next_boot_using_systemd_unit_file">24.5. Scheduling a Job to Run on Next Boot Using a systemd Unit File</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Automating_System_Tasks-Resources">24.6. Additional Resources</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-abrt">25. Automatic Bug Reporting Tool (ABRT)</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-intro">25.1. Introduction to ABRT</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-installation">25.2. Installing ABRT and Starting its Services</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-installation-gui">25.2.1. Installing the ABRT GUI</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-installation-cli">25.2.2. Installing ABRT for the Command Line</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-installation-supp-tools">25.2.3. Installing Supplementary ABRT Tools</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-starting">25.2.4. Starting the ABRT Services</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-crash_detection_test">25.2.5. Testing ABRT Crash Detection</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-config">25.3. Configuring ABRT</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-config-events">25.3.1. Configuring Events</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-config-custom">25.3.2. Creating Custom Events</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-tasks-automatic_reporting">25.3.3. Setting Up Automatic Reporting</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-detecting-sw-problems">25.4. Detecting Software Problems</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-supported-ccpp">25.4.1. Detecting C and C++ Crashes</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-supported-python">25.4.2. Detecting Python Exceptions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-supported-ruby">25.4.3. Detecting Ruby Exceptions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-supported-java">25.4.4. Detecting Java Exceptions</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-supported-xorg">25.4.5. Detecting X.Org Crashes</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-supported-oops">25.4.6. Detecting Kernel Oopses and Panics</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-handling-problems">25.5. Handling Detected Problems</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-handling-problems-cli">25.5.1. Using the Command Line Tool</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-handling-problems-gui">25.5.2. Using the GUI</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-additional-resources">25.6. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-Kernel_Customization_with_Bootloader">VII. Kernel Customization with Bootloader</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Working_with_the_GRUB_2_Boot_Loader">26. Working with GRUB 2</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Introduction_to_GRUB_2">26.1. Introduction to GRUB 2</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_the_GRUB_2_Boot_Loader">26.2. Configuring GRUB 2</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Making_Temporary_Changes_to_a_GRUB_2_Menu">26.3. Making Temporary Changes to a GRUB 2 Menu</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Making_Persistent_Changes_to_a_GRUB_2_Menu_Using_the_grubby_Tool">26.4. Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Customizing_the_GRUB_2_Configuration_File">26.5. Customizing the GRUB 2 Configuration File</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Changing_the_Default_Boot_Entry">26.5.1. Changing the Default Boot Entry</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Editing_a_Menu_Entry">26.5.2. Editing a Menu Entry</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Adding_a_new_Entry">26.5.3. Adding a new Entry</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_only_a_Custom_Menu">26.5.4. Creating a Custom Menu</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Protecting_GRUB_2_with_a_Password">26.6. Protecting GRUB 2 with a Password</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Reinstalling_GRUB_2">26.7. Reinstalling GRUB 2</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-grub2-reinstall_on_BIOS-Based_Machines">26.7.1. Reinstalling GRUB 2 on BIOS-Based Machines</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-grub2-reinstall_on_UEFI-Based_Machines">26.7.2. Reinstalling GRUB 2 on UEFI-Based Machines</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Resetting_and_Reinstalling_GRUB_2">26.7.3. Resetting and Reinstalling GRUB 2</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Upgrading_from_GRUB_Legacy_to_GRUB_2">26.8. Upgrading from GRUB Legacy to GRUB 2</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-GRUB_2_over_a_Serial_Console">26.9. GRUB 2 over a Serial Console</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_GRUB_2_for_single_boot">26.9.1. Configuring GRUB 2 for a single boot</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_GRUB_2_for_persistent_change">26.9.2. Configuring GRUB 2 for a persistent change</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_new_GRUB_2_file">26.9.3. Configuring a new GRUB 2 file</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_screen_to_Connect_to_the_Serial_Console">26.9.4. Using screen to Connect to the Serial Console</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Terminal_Menu_Editing_During_Boot">26.10. Terminal Menu Editing During Boot</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Booting_to_Rescue_Mode">26.10.1. Booting to Rescue Mode</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Booting_to_Emergency_Mode">26.10.2. Booting to Emergency Mode</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Booting_to_the_Debug_Shell">26.10.3. Booting to the Debug Shell</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Changing_and_Resetting_the_Root_Password">26.10.4. Changing and Resetting the Root Password</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-UEFI_Secure_Boot">26.11. Unified Extensible Firmware Interface (UEFI) Secure Boot</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-UEFI_Secure_Boot_Support_in_Red_Hat_Enterprise_Linux">26.11.1. UEFI Secure Boot Support in Red Hat Enterprise Linux 7</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Working_with_the_GRUB_2_Boot_Loader-Additional_Resources">26.12. Additional Resources</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#part-System_Backup_and_Recovery">VIII. System Backup and Recovery</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Relax-and-Recover_ReaR">27. Relax-and-Recover (ReaR)</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Basic_ReaR_Usage">27.1. Basic ReaR Usage</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#installing_rear">27.1.1. Installing ReaR</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Config_ReaR">27.1.2. Configuring ReaR</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Create_Resc_System">27.1.3. Creating a Rescue System</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#scheduling_rear">27.1.4. Scheduling ReaR</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Perf_Syst_Rescue">27.1.5. Performing a System Rescue</a></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Integrating_ReaR_with_Backup_Software">27.2. Integrating ReaR with Backup Software</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-BuiltIn_Backup_Method">27.2.1. The Built-in Backup Method</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Supported_Backup_Methods">27.2.2. Supported Backup Methods</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Unsupported_Backup_Methods">27.2.3. Unsupported Backup Methods</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#creating_multiple_backups">27.2.4. Creating Multiple Backups</a></li></ol></li></ol></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-CDP">28. Choosing Suitable Red Hat Product</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#appe-Access-Labs">29. Red Hat Customer Portal Labs Relevant to System Administration</a></li><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#app-Revision_History">30. Revision History</a><ol class="menu"><li class=" leaf"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#pref-Acknowledgments">30.1. Acknowledgments</a></li></ol></li></ol></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner">
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum#Red-Hat-Enterprise-Linux/?intcmp=701f2000001D4OtAAK&amp;" class="cta-link">Red Hat Enterprise Linux</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title">
  
      
  
  <h1 class="title" itemprop="name">System Administrator’s Guide</h1>
  
  </div>
<div class="panel-pane pane-page-body">
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm140569346896816"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">7</span></div><div><h2 class="subtitle">Deployment, configuration, and administration of RHEL 7</h2></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				The <em class="citetitle">System Administrator's Guide</em> documents relevant information regarding the deployment, configuration, and administration of Red&nbsp;Hat Enterprise&nbsp;Linux&nbsp;7. It is oriented towards system administrators with a basic understanding of the system.
			</div><div class="para">
				<div class="admonition note"><div class="admonition_header">Note</div><div><div class="para">
						To expand your expertise, you might also be interested in the <a class="ulink" href="http://www.redhat.com/en/services/training/rh124-red-hat-system-administration-i?cr=cp|tr|pdtxt|00004">Red Hat System Administration I (RH124)</a>, <a class="ulink" href="http://www.redhat.com/en/services/training/rh134-red-hat-system-administration-ii?cr=cp|tr|pdtxt|00004">Red Hat System Administration II (RH134)</a>, <a class="ulink" href="http://www.redhat.com/en/services/training/rh254-red-hat-system-administration-iii?cr=cp|tr|pdtxt|00004">Red Hat System Administration III (RH254)</a>, or <a class="ulink" href="http://www.redhat.com/en/services/training/rh199-rhcsa-rapid-track-course?cr=cp|tr|pdtxt|00004">RHCSA Rapid Track (RH199)</a> training courses.
					</div></div></div>

			</div><div class="para">
				If you want to use Red&nbsp;Hat&nbsp;Enterprise Linux&nbsp;7 with the Linux Containers functionality, see <a class="ulink" href="https://access.redhat.com/documentation/en/red-hat-enterprise-linux-atomic-host/?version=7">Product Documentation for Red&nbsp;Hat Enterprise&nbsp;Linux Atomic Host</a>. For an overview of general Linux Containers concept and their current capabilities implemented in Red&nbsp;Hat Enterprise&nbsp;Linux&nbsp;7, see <a class="ulink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/overview_of_containers_in_red_hat_systems/">Overview of Containers in Red&nbsp;Hat Systems</a>. The topics related to containers management and administration are described in the <a class="ulink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/"> Red Hat&nbsp;Enterprise Linux&nbsp;Atomic Host&nbsp;7 Managing Containers</a> guide.
			</div></div></div></div><hr></div><div class="part" id="part-Basic_System_Configuration"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;I.&nbsp;Basic System Configuration</h1></div></div></div><div class="partintro" id="idm140569389819168"><div><!--Empty--></div><p>
				This part covers basic post-installation tasks and basic system administration tasks such as keyboard configuration, date and time configuration, managing users and groups, and gaining privileges.
			</p></div><section class="chapter" id="ch-Getting_Started"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;1.&nbsp;Getting Started</h2></div></div></div><p>
				This chapter covers the basic tasks that you might need to perform just after you have installed Red Hat Enterprise Linux 7.
			</p><p>
				Note that these items may include tasks that are usually done already during the installation proces, but they do not have to be done necessarily, such as the registration of the system. The subchapters dealing with such tasks provide a brief summary of how this can be achived during the installation and links to related documentation in a special section.
			</p><p>
				For detailed information on Red Hat Enterprise Linux 7 installation, consult <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/index.html">Red Hat Enterprise Linux 7 Installation Guide</a>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					This chapter mentions some commands to be performed. The commands that need to be entered by the <code class="literal">root</code> user have <code class="literal">#</code> in the prompt, while the commands that can be performed by a regular user, have <code class="literal">$</code> in their prompt.
				</p></div></div><p>
				For further information on common post-installation tasks, you can see also <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/part-after-installation">Red Hat Enterprise Linux 7 Installation Guide</a>.
			</p><p>
				Although all post-installation tasks can be achieved through the command line, you can also use the <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span> tool to perform some of them.
			</p><h3 id="what_cockpit_is_and_which_tasks_it_can_be_used_for">What Cockpit Is and Which Tasks It Can Be Used For</h3><p>
				<span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span> is a system administration tool that provides a user interface for monitoring and administering servers through a web browser.
			</p><p>
				<span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span> enables to perform these tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Monitoring basic system features, such as hardware, internet connection, or performance characteristics
					</li><li class="listitem">
						Analyzing the content of the system log files
					</li><li class="listitem">
						Configuring basic networking features, such as interfaces, network logs, packet sizes
					</li><li class="listitem">
						Managing user accounts
					</li><li class="listitem">
						Monitoring and configuring system services
					</li><li class="listitem">
						Creating diagnostic reports
					</li><li class="listitem">
						Setting kernel dump configuration
					</li><li class="listitem">
						Configuring SELinux
					</li><li class="listitem">
						Managing system subscriptions
					</li><li class="listitem">
						Accessing the terminal
					</li></ul></div><p>
				For more information on installing and using <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/getting_started_with_cockpit/">Red Hat Enterprise Linux 7 Getting Started with Cockpit Guide</a>.
			</p><section class="section" id="sec-Basic_Conf_Env"><div class="titlepage"><div><div><h2 class="title">1.1.&nbsp;Basic Configuration of the Environment</h2></div></div></div><p>
					Basic configuration of the environment includes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Date and Time
						</li><li class="listitem">
							System Locales
						</li><li class="listitem">
							Keyboard Layout
						</li></ul></div><p>
					Setting of these items is normally a part of the installation process.
				</p><p>
					For more information, see the appropriate source according to the installation method:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							When installing with the Anaconda installer, see:
						</p><p class="simpara">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-date-time-configuration-x86">Date&amp;Time</a>, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-language-support-x86">Language Support</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-keyboard-configuration-x86">Keyboard Configuration</a> in Red Hat Enterprise Linux 7 Installation Guide
						</p></li><li class="listitem"><p class="simpara">
							When installing with the Kickstart file, consult:
						</p><p class="simpara">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-kickstart-syntax#sect-kickstart-commands">Kickstart Commands and Options </a> in Red Hat Enterprise Linux 7 Installation Guide.
						</p></li></ul></div><p>
					If you need to reconfigure the basic characteristics of the environment after the installation, follow the instructions in this section.
				</p><section class="section" id="Setting_Date_Time"><div class="titlepage"><div><div><h3 class="title">1.1.1.&nbsp;Introduction to Configuring the Date and Time</h3></div></div></div><p>
						Accurate time keeping is important for a number of reasons. In Red Hat Enterprise Linux 7, time keeping is ensured by the <code class="literal">NTP</code> protocol, which is implemented by a daemon running in user space. The user space daemon updates the system clock running in the kernel. The system clock can keep time by using various clock sources.
					</p><p>
						Red Hat Enterprise Linux 7 uses the following daemons to implement <code class="literal">NTP</code>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">chronyd</code>
							</p><p class="simpara">
								The <code class="literal">chronyd</code> daemon is used by default. It is available from the <span class="strong strong"><strong><span class="package package">chrony</span></strong></span> package. For more information on configuring and using <code class="literal">NTP</code> with <code class="literal">chronyd</code>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_the_chrony_Suite" title="Chapter 18. Configuring NTP Using the chrony Suite">Chapter&nbsp;18, <em>Configuring NTP Using the chrony Suite</em></a>.
							</p></li><li class="listitem"><p class="simpara">
								<code class="literal">ntpd</code>
							</p><p class="simpara">
								The <code class="literal">ntpd</code> daemon is available from the <span class="strong strong"><strong><span class="package package">ntp</span></strong></span> package. For more information on configuring and using <code class="literal">NTP</code> with <code class="literal">ntpd</code>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd" title="Chapter 19. Configuring NTP Using ntpd">Chapter&nbsp;19, <em>Configuring NTP Using ntpd</em></a>.
							</p></li></ul></div><p>
						If you want to use <code class="literal">ntpd</code> instead of default <code class="literal">chronyd</code>, you need to disable <code class="literal">chronyd</code>, install, enable and configure <code class="literal">ntpd</code> as shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd" title="Chapter 19. Configuring NTP Using ntpd">Chapter&nbsp;19, <em>Configuring NTP Using ntpd</em></a>.
					</p><h5 id="displaying_the_current_date_and_time">Displaying the Current Date and Time</h5><p>
						To display the current date and time, use one of the following commands:
					</p><pre class="literallayout">~]$ <code class="literal command">date</code></pre><pre class="literallayout">~]$ <code class="literal command">timedatectl</code></pre><p>
						Note that the <code class="literal command">timedatectl</code> command provides more verbose output, including universal time, currently used time zone, the status of the Network Time Protocol (NTP) configuration, and some additional information.
					</p><p>
						For more information on configuring the date and time, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Configuring_the_Date_and_Time" title="Chapter 3. Configuring the Date and Time">Chapter&nbsp;3, <em>Configuring the Date and Time</em></a>.
					</p></section><section class="section" id="Setting_Syst_Locale"><div class="titlepage"><div><div><h3 class="title">1.1.2.&nbsp;Introduction to Configuring the System Locale</h3></div></div></div><p>
						System-wide locale settings are stored in the <code class="literal">/etc/locale.conf</code> file, which is read at early boot by the <code class="literal">systemd</code> daemon. The locale settings configured in <code class="literal">/etc/locale.conf</code> are inherited by every service or user, unless individual programs or individual users override them.
					</p><p>
						Basic tasks to handle the system locales:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Listing available system locale settings:
							</p><pre class="literallayout">~]$ <code class="literal command">localectl list-locales</code></pre></li><li class="listitem"><p class="simpara">
								Displaying current status of the system locales settings:
							</p><pre class="literallayout">~]$ <code class="literal command">localectl status</code></pre></li><li class="listitem"><p class="simpara">
								Setting or changing the default system locale settings:
							</p><pre class="literallayout">~]# localectl set-locale LANG=locale</pre></li></ul></div><p>
						For more information on configuring the system locale, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Keyboard_Configuration" title="Chapter 2. System Locale and Keyboard Configuration">Chapter&nbsp;2, <em>System Locale and Keyboard Configuration</em></a>.
					</p></section><section class="section" id="Setting_Keyboard_Layout"><div class="titlepage"><div><div><h3 class="title">1.1.3.&nbsp;Introduction to Configuring the Keyboard Layout</h3></div></div></div><p>
						The keyboard layout settings control the layout used on the text console and graphical user interfaces.
					</p><p>
						Basic tasks to handle the keyboard layout include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Listing available keymaps:
							</p><pre class="literallayout">~]$ <code class="literal command">localectl list-keymaps</code></pre></li><li class="listitem"><p class="simpara">
								Displaying current status of keymap settings:
							</p><pre class="literallayout">~]$ <code class="literal command">localectl status</code></pre></li><li class="listitem"><p class="simpara">
								Setting or changing the default system keymap:
							</p><pre class="literallayout">~]# localectl set-keymap</pre></li></ul></div><p>
						For more information on configuring the keyboard layout, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Keyboard_Configuration" title="Chapter 2. System Locale and Keyboard Configuration">Chapter&nbsp;2, <em>System Locale and Keyboard Configuration</em></a>.
					</p></section></section><section class="section" id="sec-Networking"><div class="titlepage"><div><div><h2 class="title">1.2.&nbsp;Configuring and Inspecting Network Access</h2></div></div></div><p>
					The network access is usually configured during the installation process. However, the installation process does not prompt you to configure network interfaces on some common installation paths. Consequently, it is possible that the network access is not configured after the installation. If this happens, you can configure network access after installation.
				</p><p>
					For a quickstart to configuring network access during the installation, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Network-access-during-installation" title="1.2.1. Configuring Network Access During the Installation Process">Section&nbsp;1.2.1, “Configuring Network Access During the Installation Process”</a>. To configure network access after the installation, you can use either the <span class="strong strong"><strong><span class="application application">nmcli</span></strong></span> command-line utility, described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/networking_guide/index#sec-Configuring_IP_Networking_with_nmcli">Red Hat Enterprise Linux 7 Networking Guide</a> or the <span class="strong strong"><strong><span class="application application">nmtui</span></strong></span> text user interface utility, described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/networking_guide/index#sec-Configure_a_Network_Team_Using_the_Text_User_Interface_nmtui++"> Red Hat Enterprise Linux 7 Networking Guide</a>.
				</p><p>
					The <span class="strong strong"><strong><span class="application application">nmcli</span></strong></span> and <span class="strong strong"><strong><span class="application application">nmtui</span></strong></span> utilities also enable you to add one or more new network connections, as well as modify and inspect the existing connections. If you want to create and manage network connections with <span class="strong strong"><strong><span class="application application">nmcli</span></strong></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Network-access-after-installation-nmcli" title="1.2.2. Managing Network Connections After the Installation Process Using nmcli">Section&nbsp;1.2.2, “Managing Network Connections After the Installation Process Using nmcli”</a>. If you want to create and manage network connections with <span class="strong strong"><strong><span class="application application">nmtui</span></strong></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Network-access-after-installation-nmtui" title="1.2.3. Managing Network Connections After the Installation Process Using nmtui">Section&nbsp;1.2.3, “Managing Network Connections After the Installation Process Using nmtui”</a>.
				</p><section class="section" id="sec-Network-access-during-installation"><div class="titlepage"><div><div><h3 class="title">1.2.1.&nbsp;Configuring Network Access During the Installation Process</h3></div></div></div><p>
						Ways to configure network access during the installation proces:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <span class="guibutton">Network &amp; Hostname</span> menu at the Installation Summary screen in the graphical user interface of the <span class="strong strong"><strong><span class="application application">Anaconda</span></strong></span> installation program
							</li><li class="listitem">
								The <span class="guibutton">Network settings</span> option in the text mode of the <span class="strong strong"><strong><span class="application application">Anaconda</span></strong></span> installation program
							</li><li class="listitem">
								The Kickstart file
							</li></ul></div><p>
						When the system boots for the first time after the installation has finished, any network interfaces which you configured during the installation are automatically activated.
					</p><p>
						For detailed information on configuration of network access during installation process, see <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/index.html">Red Hat Enterprise Linux 7 Installation Guide</a>.
					</p></section><section class="section" id="sec-Network-access-after-installation-nmcli"><div class="titlepage"><div><div><h3 class="title">1.2.2.&nbsp;Managing Network Connections After the Installation Process Using nmcli</h3></div></div></div><p>
						Run the following commands as the <code class="literal">root</code> user to manage network connections using the <span class="strong strong"><strong><span class="application application">nmcli</span></strong></span> utility.
					</p><p>
						To create a new connection:
					</p><pre class="literallayout">~]# nmcli con add type <span class="emphasis"><em>type of the connection</em></span> "con-name" <span class="emphasis"><em>connection name</em></span> ifname <span class="emphasis"><em>ifname</em></span> interface-name <span class="emphasis"><em>the name of the interface</em></span> ipv4 address <span class="emphasis"><em>ipv4 address</em></span> gw4 address <span class="emphasis"><em>gateway address</em></span></pre><p>
						To modify the existing connection:
					</p><pre class="literallayout">~]# nmcli con mod "con-name"</pre><p>
						To display all connections:
					</p><pre class="literallayout">~]# nmcli con show</pre><p>
						To display the active connection:
					</p><pre class="literallayout">~]# nmcli con show --active</pre><p>
						To display all configuration settings of a particular connection:
					</p><pre class="literallayout">~]# nmcli con show "con-name"</pre><p>
						For more information on the <span class="strong strong"><strong><span class="application application">nmcli</span></strong></span> command-line utility, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/sec-configuring_ip_networking_with_nmcli">Red Hat Enterprise Linux 7 Networking Guide</a>.
					</p></section><section class="section" id="sec-Network-access-after-installation-nmtui"><div class="titlepage"><div><div><h3 class="title">1.2.3.&nbsp;Managing Network Connections After the Installation Process Using nmtui</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">NetworkManager</span></strong></span> text user interface (TUI) utility, <span class="strong strong"><strong><span class="application application">nmtui</span></strong></span>, provides a text interface to configure networking by controlling <span class="strong strong"><strong><span class="application application">NetworkManager</span></strong></span>.
					</p><p>
						For more information about installing and using the <span class="strong strong"><strong><span class="application application">nmtui</span></strong></span> text interface tool, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/networking_guide/index#sec-Configure_a_Network_Team_Using_the_Text_User_Interface_nmtui">Red Hat Enterprise Linux 7 Networking Guide</a>.
					</p></section><section class="section" id="sec-Networking-Cockpit"><div class="titlepage"><div><div><h3 class="title">1.2.4.&nbsp;Managing Networking in Cockpit</h3></div></div></div><p>
						In <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span>, the <span class="guibutton">Networking</span> menu enables you:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To display currently received and sent packets
							</li><li class="listitem">
								To display the most important characteristics of available network interfaces
							</li><li class="listitem">
								To display content of the networking logs.
							</li><li class="listitem">
								To add various types of network interfaces (bond, team, bridge, VLAN)
							</li></ul></div><div class="figure" id="figu-Manag-networking-cockpit"><p class="title"><strong>Figure&nbsp;1.1.&nbsp;Managing Networking in Cockpit</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/Networking_n.png" class="rh_docs--zoom" title="Networking n"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/Networking_n.png" alt="Networking n"></a></div></div></div></section></section><section class="section" id="sec-Managing-Subscriptions"><div class="titlepage"><div><div><h2 class="title">1.3.&nbsp;The Basics of Registering the System and Managing Subscriptions</h2></div></div></div><section class="section" id="sec-Subscriptions-Definition"><div class="titlepage"><div><div><h3 class="title">1.3.1.&nbsp;What Red Hat Subscriptions Are and Which Tasks They Can Be Used For</h3></div></div></div><p>
						The products installed on Red Hat Enterprise Linux 7, including the operating system itself, are covered by subscriptions.
					</p><p>
						A subscription to Red Hat Content Delivery Network is used to track:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Registered systems
							</li><li class="listitem">
								Products installed on those system
							</li><li class="listitem">
								Subscriptions attached to those product
							</li></ul></div></section><section class="section" id="sec-Registering-During-Installation"><div class="titlepage"><div><div><h3 class="title">1.3.2.&nbsp;Registering the System During the Installation</h3></div></div></div><p>
						This section provides a brief summary of registering Red Hat Enterprise Linux 7 during the installation process. If your operating system is not registered after the installation, you can find what might have been missed during the installation by reading through this section. For detailed information, consult <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide">Red Hat Enterprise Linux 7 Installation Guide</a>.
					</p><p>
						Basically, there are two ways to register the system during the installation:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Normally, registration is a part of the <span class="strong strong"><strong><span class="application application">Initial Setup configuration</span></strong></span> process. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/chap-initial-setup">Red Hat Enterprise Linux 7 Installation Guide</a>.
							</li><li class="listitem">
								Another option is to run <span class="strong strong"><strong><span class="application application">Subscription manager as a post-installation script</span></strong></span>, which performs the automatic registration at the moment when the installation is complete and before the system is rebooted for the first time. To ensure this, modify the %post section of the Kickstart file. For more detailed information on running Subscription manager as a post-installation script, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-kickstart-syntax#sect-kickstart-postinstall">Red Hat Enterprise Linux 7 Installation Guide</a>.
							</li></ul></div></section><section class="section" id="sec-Registering-After-Installation"><div class="titlepage"><div><div><h3 class="title">1.3.3.&nbsp;Registering the System after the Installation</h3></div></div></div><p>
						If you have not registered your system during installation process, you can do it afterwards by applying the following procedure. Note that all commands in this procedure need to be performed as the <code class="literal">root</code> user.
					</p><div class="orderedlist" id="Reg-your-system"><p class="title"><strong>Registering and Subscribing Your System</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Register your system:
							</p><pre class="literallayout">~]# subscription-manager register</pre><p class="simpara">
								The command will prompt you to enter your Red Hat Customer Portal user name and password.
							</p></li><li class="listitem"><p class="simpara">
								Determine the pool ID of a subscription that you require:
							</p><pre class="literallayout">~]# subscription-manager list --available</pre><p class="simpara">
								This command displays all available subscriptions for your Red Hat account. For every subscription, various characteristics are displayed, including the pool ID.
							</p></li><li class="listitem"><p class="simpara">
								Attach the appropriate subscription to your system by replacing <span class="emphasis"><em>pool_id</em></span> with the pool ID determined in the previous step:
							</p><pre class="literallayout">~]# subscription-manager attach --pool=<span class="emphasis"><em>pool_id</em></span></pre></li></ol></div><p>
						For more information on registration of your system and attachment of the Red Hat Content Delivery Network subscriptions, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions" title="Chapter 7. Registering the System and Managing Subscriptions">Chapter&nbsp;7, <em>Registering the System and Managing Subscriptions</em></a>.
					</p></section><section class="section" id="sec-Registering-EUS"><div class="titlepage"><div><div><h3 class="title">1.3.4.&nbsp;Registering a System to EUS Content</h3></div></div></div><p>
						To access the Extended Update Support (EUS) content, register your system as follows:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Verify that EUS entitlements are available:
							</p><pre class="literallayout">~]# subscription-manager list --available --matches="*Extended Update Support"</pre><pre class="literallayout">    +-------------------------------------------+
        Available Subscriptions
    +-------------------------------------------+
    Subscription Name:   Extended Update Support
    Provides:            Red Hat Enterprise Linux High Availability for x86_64 - Extended Update Support
                         Red Hat Enterprise Linux Resilient Storage for x86_64 - Extended Update Support
                         Red Hat Enterprise Linux for x86_64 - Extended Update Support
                         Red Hat EUCJP Support (for RHEL Server) - Extended Update Support
                         RHEL for SAP - Extended Update Support
                         Red Hat Enterprise Linux Load Balancer (for RHEL Server) - Extended Update Support
                         Red Hat Enterprise Linux Scalable File System (for RHEL Server) - Extended Update Support
                         Red Hat CodeReady Linux Builder for x86_64 - Extended Update Support
                         RHEL for SAP HANA - Extended Update Support
                         Red Hat Enterprise Linux High Performance Networking (for RHEL Server) - Extended Update Support
                         Oracle Java (for RHEL Server) - Extended Update Support
                         Red Hat S-JIS Support (for RHEL Server) - Extended Update Support
    SKU:                 RH00030
    Contract:            12069074
    Pool ID:             8a99f9ac7238188b01723d9c8a8a06a9
    Provides Management: No
    Available:           8
    Suggested:           0
    Service Level:       Layered
    Service Type:        L1-L3
    Subscription Type:   Instance Based
    Starts:              05/22/2020
    Ends:                05/21/2021
    System Type:         Physical</pre></li><li class="listitem"><p class="simpara">
								Attach the applicable subscription using the Pool identifier:
							</p><pre class="literallayout">~]# subscription-manager attach --pool <span class="emphasis"><em>8a99f9ac7238188b01723d9c8a8a06a9</em></span></pre></li><li class="listitem"><p class="simpara">
								Replace the default repositories enabled for the system with the EUS variants:
							</p><pre class="literallayout">~]# subscription-manager repos --disable \*</pre></li><li class="listitem"><p class="simpara">
								Enable the repositories which represent the EUS content set for the RHEL revision in use:
							</p><pre class="literallayout">~]# subscription-manager repos --enable rhel-7-server-eus-rpms</pre></li><li class="listitem"><p class="simpara">
								Select the required and supported release for the end system:
							</p><pre class="literallayout">~]# subscription-manager release --set 7.6</pre></li></ol></div><p>
						For currently supported EUS releases, see <a class="link" href="https://access.redhat.com/support/policy/updates/errata/#Extended_Update_Support">Extended Update Support Add-on</a>.
					</p></section><section class="section" id="sec-Registering-E4S"><div class="titlepage"><div><div><h3 class="title">1.3.5.&nbsp;Registering a System to E4S Content</h3></div></div></div><p>
						The following procedure describes how to register a system and utilize the E4S content.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Register your system using the following command:
							</p><pre class="literallayout">~]# subscription-manager register</pre></li><li class="listitem"><p class="simpara">
								Verify that E4S entitlements are available:
							</p><pre class="literallayout">~]# subscription-manager list --available --matches="*Update Services for SAP Solutions*"</pre><pre class="literallayout">+-------------------------------------------+
    Available Subscriptions
+-------------------------------------------+
Subscription Name:   Red Hat Enterprise Linux for SAP Solutions, Standard (Physical or Virtual Nodes)
Provides:            dotNET on RHEL Beta (for RHEL Server)
                     Red Hat CodeReady Linux Builder for x86_64
                     Red Hat Enterprise Linux for SAP HANA for x86_64
                     Red Hat Ansible Engine
                     RHEL for SAP HANA - Update Services for SAP Solutions
                     Red Hat Enterprise Linux Scalable File System (for RHEL Server) - Extended Update Support
                     RHEL for SAP HANA - Extended Update Support
                     Red Hat Enterprise Linux Atomic Host Beta
                     Red Hat Beta
                     Red Hat EUCJP Support (for RHEL Server) - Extended Update Support
                     Red Hat Enterprise Linux High Availability for x86_64
                     Red Hat Enterprise Linux Load Balancer (for RHEL Server) - Extended Update Support
                     dotNET on RHEL (for RHEL Server)
                     Red Hat CodeReady Linux Builder for x86_64 - Extended Update Support
                     Red Hat Enterprise Linux High Availability - Update Services for SAP Solutions
                     Red Hat Enterprise Linux Resilient Storage for x86_64 - Extended Update Support
                     Red Hat Enterprise Linux High Availability for x86_64 - Extended Update Support
                     Oracle Java (for RHEL Server)
                     Red Hat Enterprise Linux Server - Update Services for SAP Solutions
                     Red Hat Software Collections (for RHEL Server)
                     Red Hat Enterprise Linux Scalable File System (for RHEL Server)
                     Red Hat Enterprise Linux High Performance Networking (for RHEL Server) - Extended Update Support
                     RHEL for SAP - Update Services for SAP Solutions
                     Oracle Java (for RHEL Server) - Extended Update Support
                     Red Hat Enterprise Linux Atomic Host
                     Red Hat Developer Tools (for RHEL Server)
                     Red Hat Software Collections Beta (for RHEL Server)
                     Red Hat Enterprise Linux Server
                     Red Hat Enterprise Linux for SAP Applications for x86_64
                     Red Hat Developer Tools Beta (for RHEL Server)
                     Red Hat Enterprise Linux for x86_64
                     Red Hat Enterprise Linux for x86_64 - Extended Update Support
                     RHEL for SAP - Extended Update Support
                     Red Hat Developer Toolset (for RHEL Server)
                     Red Hat S-JIS Support (for RHEL Server) - Extended Update Support
SKU:                 RH00764
Contract:            11977725
Pool ID:             8a85f99c6c4825eb016c4a30d3493064
Provides Management: Yes
Available:           18
Suggested:           0
Service Level:       Standard
Service Type:        L1-L3
Subscription Type:   Instance Based
Starts:              03/29/2020
Ends:                12/31/2021
System Type:         Physical</pre></li><li class="listitem"><p class="simpara">
								Attach the applicable subscription using the Pool identifier:
							</p><pre class="literallayout">~]# subscription-manager attach --pool=#################</pre></li><li class="listitem"><p class="simpara">
								Replace the default repositories enabled for the system with the EUS variants:
							</p><pre class="literallayout">~]# subscription-manager repos --disable="*"</pre></li><li class="listitem"><p class="simpara">
								Enable the repositories which represent the E4S content set for the RHEL revision in use:
							</p><pre class="literallayout">~]# subscription-manager --enable=rhel-7-server-e4s-rpms</pre></li><li class="listitem"><p class="simpara">
								Clear the repository cache and release lock the system to a valid release for E4S which supports your SAP application:
							</p><pre class="literallayout">~]# yum clean all &amp;&amp; subscription-manager release --set=7.7</pre></li></ol></div></section></section><section class="section" id="Installing-software"><div class="titlepage"><div><div><h2 class="title">1.4.&nbsp;Installing Software</h2></div></div></div><p>
					This section provides information to guide you through the basics of software installation on a Red Hat Enterprise Linux 7 system. It mentions the prerequisites that you need to fulfil to be able to install software in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installation-Prereq" title="1.4.1. Prerequisites for Software Installation">Section&nbsp;1.4.1, “Prerequisites for Software Installation”</a>, provides the basic information on software packaging and software repositories in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installation-Intro" title="1.4.2. Introduction to the System of Software Packaging and Software Repositories">Section&nbsp;1.4.2, “Introduction to the System of Software Packaging and Software Repositories”</a>, and references the ways to perform basic tasks related to software installation in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installation-Basic-Tasks" title="1.4.3. Managing Basic Software Installation Tasks with Subscription Manager and Yum">Section&nbsp;1.4.3, “Managing Basic Software Installation Tasks with Subscription Manager and Yum”</a>.
				</p><section class="section" id="sec-Installation-Prereq"><div class="titlepage"><div><div><h3 class="title">1.4.1.&nbsp;Prerequisites for Software Installation</h3></div></div></div><p>
						The Red Hat Content Delivery Network subscription service provides a mechanism to handle Red Hat software inventory and enables you to install additional software or update already installed packages. You can start installing software once you have registered your system and attached a subscription, as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Managing-Subscriptions" title="1.3. The Basics of Registering the System and Managing Subscriptions">Section&nbsp;1.3, “The Basics of Registering the System and Managing Subscriptions”</a>.
					</p></section><section class="section" id="sec-Installation-Intro"><div class="titlepage"><div><div><h3 class="title">1.4.2.&nbsp;Introduction to the System of Software Packaging and Software Repositories</h3></div></div></div><p>
						All software on a Red Hat Enterprise Linux system is divided into RPM packages, which are stored in particular repositories. When a system is subscribed to the Red Hat Content Delivery Network, a repository file is created in the <code class="literal">/etc/yum.repos.d/</code> directory.
					</p><p>
						Use the <code class="literal command">yum</code> utility to manage package operations:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Searching information about packages
							</li><li class="listitem">
								Installing packages
							</li><li class="listitem">
								Updating packages
							</li><li class="listitem">
								Removing packages
							</li><li class="listitem">
								Checking the list of currently available repositories
							</li><li class="listitem">
								Adding or removing a repository
							</li><li class="listitem">
								Enabling or disabling a repository
							</li></ul></div><p>
						For information on basic tasks related to the installation of software, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installation-Basic-Tasks" title="1.4.3. Managing Basic Software Installation Tasks with Subscription Manager and Yum">Section&nbsp;1.4.3, “Managing Basic Software Installation Tasks with Subscription Manager and Yum”</a>. For further information on managing software repositories, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-Managing_Repositories" title="7.2. Managing Software Repositories">Section&nbsp;7.2, “Managing Software Repositories”</a>. For detailed information on using the <code class="literal command">yum</code> utility, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-yum" title="Chapter 9. Yum">Chapter&nbsp;9, <em>Yum</em></a>.
					</p></section><section class="section" id="sec-Installation-Basic-Tasks"><div class="titlepage"><div><div><h3 class="title">1.4.3.&nbsp;Managing Basic Software Installation Tasks with Subscription Manager and Yum</h3></div></div></div><p>
						The most basic software-installation tasks that you might need after the operating system has been installed include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Listing all available repositories:
							</p><pre class="literallayout">~]# subscription-manager repos --list</pre></li><li class="listitem"><p class="simpara">
								Listing all currently enabled repositories:
							</p><pre class="literallayout">~]$ <code class="literal command">yum repolist</code></pre></li><li class="listitem"><p class="simpara">
								Enabling or disabling a repository:
							</p><pre class="literallayout">~]# subscription-manager repos --enable <span class="emphasis"><em>repository</em></span></pre><pre class="literallayout">~]# subscription-manager repos --disable <span class="emphasis"><em>repository</em></span></pre></li><li class="listitem"><p class="simpara">
								Searching for packages matching a specific string:
							</p><pre class="literallayout">~]$ <code class="literal command">yum search</code> <span class="emphasis"><em>string</em></span></pre></li><li class="listitem"><p class="simpara">
								Installing a package:
							</p><pre class="literallayout">~]# yum install <span class="emphasis"><em>package_name</em></span></pre></li><li class="listitem"><p class="simpara">
								Updating all packages and their dependencies:
							</p><pre class="literallayout">~]# yum update</pre></li><li class="listitem"><p class="simpara">
								Updating a package:
							</p><pre class="literallayout">~]# yum update <span class="emphasis"><em>package_name</em></span></pre></li><li class="listitem"><p class="simpara">
								Uninstalling a package and any packages that depend on it:
							</p><pre class="literallayout">~]# yum remove <span class="emphasis"><em>package_name</em></span></pre></li><li class="listitem"><p class="simpara">
								Listing information on all installed and available packages:
							</p><pre class="literallayout">~]$ <code class="literal command">yum list all</code></pre></li><li class="listitem"><p class="simpara">
								Listing information on all installed packages:
							</p><pre class="literallayout">~]$ <code class="literal command">yum list installed</code></pre></li></ul></div></section></section><section class="section" id="sec-Managing_systemd_Services"><div class="titlepage"><div><div><h2 class="title">1.5.&nbsp;Making systemd Services Start at Boot Time</h2></div></div></div><p>
					Systemd is a system and service manager for Linux operating systems that introduces the concept of systemd units. For more information on systemd, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Introduction" title="10.1. Introduction to systemd">Section&nbsp;10.1, “Introduction to systemd”</a>.
				</p><p>
					This section provides the information on how to ensure that a service is enabled or disabled at boot time. It also explains how to manage the services through <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span>.
				</p><section class="section" id="sec-Enabling_Disabling_systemd_Services"><div class="titlepage"><div><div><h3 class="title">1.5.1.&nbsp;Enabling or Disabling the Services</h3></div></div></div><p>
						You can determine services that are enabled or disabled at boot time already during the installation process, or you can enable or disable a service on an installed operating system.
					</p><p>
						To create the list of services enabled or disabled at boot time during the installation process, use the <code class="literal option">services</code> option in the Kickstart file:
					</p><pre class="literallayout">services [--disabled=list] [--enabled=list]</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The list of disabled services is processed before the list of enabled services. Therefore, if a service appears on both lists, it will be enabled. The list of the services should be given in the comma separated format. Do not include spaces in the list of services. For detailed information, refer to <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-kickstart-syntax">Red Hat Enterprise Linux 7 Installation Guide.</a>
						</p></div></div><p>
						To enable or disable a service on an already installed operating system:
					</p><pre class="literallayout">~]# systemctl enable<span class="emphasis"><em>service_name</em></span></pre><pre class="literallayout">~]# systemctl disable<span class="emphasis"><em>service_name</em></span></pre><p>
						For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services" title="10.2. Managing System Services">Section&nbsp;10.2, “Managing System Services”</a>.
					</p></section><section class="section" id="sec-Managing_systemd_Cockpit"><div class="titlepage"><div><div><h3 class="title">1.5.2.&nbsp;Managing Services in Cockpit</h3></div></div></div><p>
						In <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span>, select <span class="guibutton">Services</span> to manage systemd targets, services, sockets, timers and paths. There you can check their status, start or stop them, enable or disable them.
					</p><div class="figure" id="figu-Manag-systemd-cockpit"><p class="title"><strong>Figure&nbsp;1.2.&nbsp;Managing Services in Cockpit</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/systemd_n.png" class="rh_docs--zoom" title="systemd n"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/systemd_n.png" alt="systemd n"></a></div></div></div></section><section class="section" id="sec-systemd_Additional_Resources"><div class="titlepage"><div><div><h3 class="title">1.5.3.&nbsp;Additional Resources on systemd Services</h3></div></div></div><p>
						For more information on systemd, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p></section></section><section class="section" id="sec-Security"><div class="titlepage"><div><div><h2 class="title">1.6.&nbsp;Enhancing System Security with a Firewall, SELinux and SSH Logings</h2></div></div></div><p>
					Computer security is the protection of computer systems from the theft or damage to their hardware, software, or information, as well as from disruption or misdirection of the services they provide. Ensuring computer security is therefore an essential task not only in the enterprises processing sensitive data or handling some business transactions.
				</p><p>
					Computer security includes a wide variety of features and tools. This section covers only the basic security features that you need to configure after you have installed the operating system. For detailed information on securing Red Hat Enterprise Linux 7, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/index">Red Hat Enterprise Linux 7 Security Guide</a>.
				</p><section class="section" id="sec-Firewall"><div class="titlepage"><div><div><h3 class="title">1.6.1.&nbsp;Ensuring the Firewall Is Enabled and Running</h3></div></div></div><section class="section" id="sec-Firewall-definition"><div class="titlepage"><div><div><h4 class="title">1.6.1.1.&nbsp;What a Firewall Is and How It Enhances System Security</h4></div></div></div><p>
							A firewall is a network security system that monitors and controls the incoming and outgoing network traffic based on predetermined security rules. A firewall typically establishes a barrier between a trusted, secure internal network and another outside network.
						</p><p>
							On Red Hat Enterprise Linux 7, the firewall is provided by the <code class="literal">firewalld</code> service, which is automatically enabled during the installation of Red Hat Enterprise Linux. However, if you explicitly disabled the service, for example in the kickstart configuration, you can re-enable it, as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Reenabling-Firewall" title="1.6.1.2. Re-enabling the firewalld Service">Section&nbsp;1.6.1.2, “Re-enabling the firewalld Service”</a>. For overview of firewall setting options in the Kickstart file, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-kickstart-syntax#sect-kickstart-commands">Red Hat Enterprise Linux 7 Installation Guide</a>.
						</p></section><section class="section" id="sec-Reenabling-Firewall"><div class="titlepage"><div><div><h4 class="title">1.6.1.2.&nbsp;Re-enabling the firewalld Service</h4></div></div></div><p>
							In case that the <code class="literal">firewalld</code> service is disabled after the installation, Red Hat recommends to consider re-enabling it.
						</p><p>
							You can display the current status of <code class="literal">firewalld</code> even as a regular user:
						</p><pre class="literallayout">~]$ <code class="literal command">systemctl status firewalld</code></pre><p>
							If <code class="literal">firewalld</code> is not enabled and running, switch to the <code class="literal">root</code> user, and change its status:
						</p><pre class="literallayout">~]# systemctl start firewalld</pre><pre class="literallayout">~]# systemctl enable firewalld</pre><p>
							For further information on post-installation procedures related to <code class="literal">firewalld</code>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/sec-post-installation_procedures">Red Hat Enterprise Linux 7 Security Guide</a>. For detailed information on configuring and using firewall, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/sec-using_firewalls">Red Hat Enterprise Linux 7 Security Guide</a>
						</p></section></section><section class="section" id="sec-SELinux"><div class="titlepage"><div><div><h3 class="title">1.6.2.&nbsp;Ensuring the Appropriate State of SELinux</h3></div></div></div><section class="section" id="sec-SELinux-definition"><div class="titlepage"><div><div><h4 class="title">1.6.2.1.&nbsp;What SELinux Is and How It Enhances System Security</h4></div></div></div><p>
							<span class="strong strong"><strong><span class="application application">Security Enhanced Linux (SELinux)</span></strong></span> is an additional layer of system security that determines which process can access which files, directories, and ports.
						</p><h6 id="selinux_states">SELinux States</h6><p>
							<span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> has two possible states:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Enabled
								</li><li class="listitem">
									Disabled
								</li></ul></div><p>
							When <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> is disabled, only Discretionary Access Control (DAC) rules are used.
						</p><h6 id="selinux_modes">SELinux Modes</h6><p>
							When <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> is enabled, it can run in one of the following modes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Enforcing
								</li><li class="listitem">
									Permissive
								</li></ul></div><p>
							Enforcing mode means that <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> policies is enforced. <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> denies access based on <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> policy rules, and enables only the interactions that are particularly allowed. Enforcing mode is the default mode after the installation and it is also the safest <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> mode.
						</p><p>
							Permissive mode means that <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> policies is not enforced. <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> does not deny access, but denials are logged for actions that would have been denied if running in enforcing mode. Permissive mode is the default mode during the installation. Operating in permissive mode is also useful in some specific cases, for example if you require access to the Access Vector Cache (AVC) denials when troubleshooting problems.
						</p><p>
							For further information on <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> in Red Hat Enterprise Linux 7, see <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/">Red Hat Enterprise Linux 7 SELinux User’s and Administrator’s Guide</a>.
						</p></section><section class="section" id="sec-SELinux-ensure-required-state"><div class="titlepage"><div><div><h4 class="title">1.6.2.2.&nbsp;Ensuring the Required State of SELinux</h4></div></div></div><p>
							By default, <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> operates in permissive mode during the installation and in enforcing mode when the installation has finished.
						</p><p>
							However, in some specific situations, <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> might be explicitly set to permissive mode or it might even be disabled on the installed operating system. This can be set for example in the kickstart configuration. For overview of SELinux setting options in the Kickstart file, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-kickstart-syntax#sect-kickstart-commands">Red Hat Enterprise Linux 7 Installation Guide</a>.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Red Hat recommends to keep your system in enforcing mode.
							</p></div></div><p>
							To display the current SELinux mode, and to set the mode as needed:
						</p><div class="orderedlist" id="Setting-SELinux-state"><p class="title"><strong>Ensuring the Required State of SELinux</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Display the current <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> mode in effect:
								</p><pre class="literallayout">~]$ <code class="literal command">getenforce</code></pre></li><li class="listitem"><p class="simpara">
									If needed, switch between the SELinux modes.
								</p><p class="simpara">
									The switch can be either temporary or permanent. A temporary switch is not persistent across reboots, while permanent switch is.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											To temporary switch to either enforcing or permissive mode:
										</p><pre class="literallayout">~]# setenforce Enforcing</pre><pre class="literallayout">~]# setenforce Permissive</pre></li><li class="listitem"><p class="simpara">
											To permanently set the <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> mode, modify the <span class="emphasis"><em>SELINUX</em></span> variable in the <code class="literal">/etc/selinux/config</code> configuration file.
										</p><p class="simpara">
											For example, to switch <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> to enforcing mode:
										</p><pre class="literallayout"># This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#   enforcing - SELinux security policy is enforced.
#   permissive - SELinux prints warnings instead of enforcing.
#   disabled - No SELinux policy is loaded.
SELINUX=enforcing</pre></li></ul></div></li></ol></div></section><section class="section" id="sec-SELinux-in-Cockpit"><div class="titlepage"><div><div><h4 class="title">1.6.2.3.&nbsp;Managing SELinux in Cockpit</h4></div></div></div><p>
							In <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span>, use the <span class="guibutton">SELinux</span> option to turn <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> enforcing policy on or off.
						</p><p>
							By default, <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> enforcing policy in <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span> is on, and <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> operates in enforcing mode. By turning it off, you can switch <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> into permissive mode. Note that such deviation from the default configuration in the /etc/sysconfig/selinux file is automatically reverted on the next boot.
						</p><div class="figure" id="figu-Manag-selinux-cockpit"><p class="title"><strong>Figure&nbsp;1.3.&nbsp;Managing SELinux in Cockpit</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/selinux_on_n.png" class="rh_docs--zoom" title="selinux on n"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/selinux_on_n.png" alt="selinux on n"></a></div></div></div></section></section><section class="section" id="sec-SSH"><div class="titlepage"><div><div><h3 class="title">1.6.3.&nbsp;Using SSH-based Authentication</h3></div></div></div><section class="section" id="sec-SSH-definition"><div class="titlepage"><div><div><h4 class="title">1.6.3.1.&nbsp;What SSH-based Authentication Is and How It Enhances System Security</h4></div></div></div><p>
							If you want to secure your communication with another computer, you can use SSH-based authentication.
						</p><p>
							Secure Shell (SSH) is a protocol which facilitates client-server communication and allows users to log in to any host system running SSH remotely. SSH encrypts the connection. The client transmits its authentication information to the server using encryption, and all data sent and received during a session are transferred under the encryption.
						</p><p>
							SSH enables its users to authenticate without a password. To do so, SSH uses a private-public key scheme.
						</p><p>
							For further information about SSH safeguards, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-features" title="12.1.2. Main Features">Section&nbsp;12.1.2, “Main Features”</a>.
						</p></section><section class="section" id="sec-SSH-connection"><div class="titlepage"><div><div><h4 class="title">1.6.3.2.&nbsp;Establishing an SSH Connection</h4></div></div></div><p>
							To be able to use SSH connection, create a pair of two keys consisting of a public and a private key.
						</p><div class="orderedlist" id="establish-ssh-con"><p class="title"><strong>Creating the Key Files and Copying Them to the Server</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Generate a public and a private key:
								</p><pre class="literallayout">~]$ <code class="literal command">ssh-keygen</code></pre><p class="simpara">
									Both keys are stored in the <code class="literal">~/.ssh/</code> directory:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">~/.ssh/id_rsa.pub</code> - public key
										</li><li class="listitem"><p class="simpara">
											<code class="literal">~/.ssh/id_rsa</code> - private key
										</p><p class="simpara">
											The public key does not need to be secret. It is used to verify the private key. The private key is secret. You can choose to protect the private key with the passphrase that you specify during the key generation process. With the passphrase, authentication is even more secure, but is no longer password-less. You can avoid this using the <code class="literal command">ssh-agent</code> command. In this case, you will enter the passphrase only once - at the beginning of a session. For more information on <code class="literal command">ssh-agent</code> configuration, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-configuration-keypairs" title="12.2.4. Using Key-based Authentication">Section&nbsp;12.2.4, “Using Key-based Authentication”</a>.
										</p></li></ul></div></li><li class="listitem"><p class="simpara">
									Copy the most recently modified public key to a remote machine you want to log into:
								</p><pre class="literallayout">~]# ssh-copy-id USER@hostname</pre><p class="simpara">
									As a result, you are now able to enter the system in a secure way, but without entering a password.
								</p></li></ol></div></section><section class="section" id="sec-SSH-disabling-root-login"><div class="titlepage"><div><div><h4 class="title">1.6.3.3.&nbsp;Disabling SSH Root Login</h4></div></div></div><p>
							To increase system security, you can disable SSH access for the <code class="literal">root</code> user, which is enabled by default.
						</p><p>
							For more information on this topic, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/sec-controlling_root_access#sec-Disallowing_Root_Access">Red Hat Enterprise Linux 7 Security Guide</a>.
						</p><div class="orderedlist" id="Disable-SSH-Root-Login"><p class="title"><strong>Disabling SSH Root Login</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Access the <code class="literal">/etc/ssh/sshd_config</code> file:
								</p><pre class="literallayout">~]# vi /etc/ssh/sshd_config</pre></li><li class="listitem"><p class="simpara">
									Change the line that reads <code class="literal">#PermitRootLogin yes</code> to:
								</p><pre class="literallayout">PermitRootLogin no</pre></li><li class="listitem"><p class="simpara">
									Restart the <code class="literal">sshd</code> service:
								</p><pre class="literallayout">~]# systemctl restart sshd</pre></li></ol></div></section></section></section><section class="section" id="sec-Managing_User_Accounts"><div class="titlepage"><div><div><h2 class="title">1.7.&nbsp;The Basics of Managing User Accounts</h2></div></div></div><p>
					Red Hat Enterprise Linux 7 is a multi-user operating system, which enables multiple users on different computers to access a single system installed on one machine. Every user operates under its own account, and managing user accounts thus represents a core element of Red Hat Enterprise Linux system administration.
				</p><h4 id="normal_and_system_accounts">Normal and System Accounts</h4><p>
					Normal accounts are created for users of a particular system. Such accounts can be added, removed, and modified during normal system administration.
				</p><p>
					System accounts represent a particular applications identifier on a system. Such accounts are generally added or manipulated only at software installation time, and they are not modified later.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						System accounts are presumed to be available locally on a system. If these accounts are configured and provided remotely, such as in the instance of an LDAP configuration, system breakage and service start failures can occur.
					</p></div></div><p>
					For system accounts, user IDs below 1000 are reserved. For normal accounts, you can use IDs starting at 1000. However, the recommended practice is to assign IDs starting at 5000. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-users-groups-introduction" title="4.1. Introduction to Users and Groups">Section&nbsp;4.1, “Introduction to Users and Groups”</a> for more information. The guidelines for assigning IDs can be found in the <code class="literal">/etc/login.defs</code> file.
				</p><pre class="literallayout"># Min/max values for automatic uid selection in useradd
#
UID_MIN         1000
UID_MAX         60000
# System accounts
SYS_UID_MIN        201
SYS_UID_MAX        999</pre><h4 id="what_groups_are_and_which_purposes_they_can_be_used_for">What Groups Are and Which Purposes They Can Be Used For</h4><p>
					A group is an entity which ties together multiple user accounts for a common purpose, such as granting access to particular files.
				</p><section class="section" id="sec-Cmdline_Tools_User_Accounts"><div class="titlepage"><div><div><h3 class="title">1.7.1.&nbsp;The Most Basic Command-Line Tools to Manage User Accounts and Groups</h3></div></div></div><p>
						The most basic tasks to manage user accounts and groups, and the appropriate command-line tools, include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Displaying user and group IDs:
							</p><pre class="literallayout">~]$ <code class="literal command">id</code></pre></li><li class="listitem"><p class="simpara">
								Creating a new user account:
							</p><pre class="literallayout">~]# useradd [options] <span class="emphasis"><em>user_name</em></span></pre></li><li class="listitem"><p class="simpara">
								Assigning a new password to a user account belonging to <span class="emphasis"><em>username</em></span>:
							</p><pre class="literallayout">~]# passwd <span class="emphasis"><em>user_name</em></span></pre></li><li class="listitem"><p class="simpara">
								Adding a user to a group:
							</p><pre class="literallayout">~]# usermod -a -G group_name user_name</pre></li></ul></div><p>
						For detailed information on managing users and groups, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Managing_Users_and_Groups" title="Chapter 4. Managing Users and Groups">Chapter&nbsp;4, <em>Managing Users and Groups</em></a>.
					</p><p>
						If you want to use graphical user interface to manage users and groups, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-users-configui" title="4.2. Managing Users in a Graphical Environment">Section&nbsp;4.2, “Managing Users in a Graphical Environment”</a>.
					</p></section><section class="section" id="sec-User_Accounts_Cockpit"><div class="titlepage"><div><div><h3 class="title">1.7.2.&nbsp;Managing User Accounts in Cockpit</h3></div></div></div><p>
						To manage accounts in <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span>, select the <span class="guibutton">Accounts</span> menu.
					</p><div class="figure" id="figu-Manag-user-accounts"><p class="title"><strong>Figure&nbsp;1.4.&nbsp;Managing User Accounts in Cockpit</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/Accounts_n.png" class="rh_docs--zoom" title="Accounts n"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/Accounts_n.png" alt="Accounts n"></a></div></div></div></section></section><section class="section" id="sec-kdump_Mechanism"><div class="titlepage"><div><div><h2 class="title">1.8.&nbsp;Dumping the Crashed Kernel Using the kdump Mechanism</h2></div></div></div><p>
					This section provides an introduction to the Kernel crash dump mechanism, also called <span class="strong strong"><strong><span class="application application">kdump</span></strong></span>, and briefly explains what <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> is used for in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Definition" title="1.8.1. What kdump Is and Which Tasks It Can Be Used For">Section&nbsp;1.8.1, “What kdump Is and Which Tasks It Can Be Used For”</a>.
				</p><p>
					Activation of the <code class="literal">kdump</code> service is a part of the installation process, and by default, <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> was enabled during the installation. This section summarizes how to activate <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> during the installation in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Enablement_During_Installation" title="1.8.2. Enabling and Activating kdump During the Installation Process">Section&nbsp;1.8.2, “Enabling and Activating kdump During the Installation Process”</a>, and how to manually enable the <code class="literal">kdump</code> service if it is disabled after the installation in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_Enablement_After_Installation" title="1.8.3. Ensuring That kdump Is Installed and Enabled after the Installation Process">Section&nbsp;1.8.3, “Ensuring That kdump Is Installed and Enabled after the Installation Process”</a>.
				</p><p>
					You can also use <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span> to configure <span class="strong strong"><strong><span class="application application">kdump</span></strong></span>. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-kdump_in_Cockpit" title="1.8.4. Configuring kdump in Cockpit">Section&nbsp;1.8.4, “Configuring kdump in Cockpit”</a> for more information.
				</p><section class="section" id="sec-kdump_Definition"><div class="titlepage"><div><div><h3 class="title">1.8.1.&nbsp;What kdump Is and Which Tasks It Can Be Used For</h3></div></div></div><p>
						In case of a system crash, you can use the Kernel crash dump mechanism called <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> that enables you to save the content of the system’s memory for later analysis. The <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> mechanism relies on the kexec system call, which can be used to boot a Linux kernel from the context of another kernel, bypass BIOS, and preserve the contents of the first kernel’s memory that would otherwise be lost.
					</p><p>
						When kernel crash occurs, <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> uses kexec to boot into a second kernel (a capture kernel), which resides in a reserved part of the system memory that is inaccessible to the first kernel. The second kernel captures the contents of the crashed kernel’s memory (a crash dump) and saves it.
					</p></section><section class="section" id="sec-kdump_Enablement_During_Installation"><div class="titlepage"><div><div><h3 class="title">1.8.2.&nbsp;Enabling and Activating kdump During the Installation Process</h3></div></div></div><p>
						During the installation, enablement and activation of <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> can be done either in the Anaconda installer or using the <code class="literal command">%addon com_redhat_kdump</code> command in the Kickstart file.
					</p><p>
						For more information, see the appropriate source according to the installation method:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								When installing with the Anaconda installer, see:
							</p><p class="simpara">
								<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kdump-x86.html">Installing Using Anaconda</a> in Red Hat Enterprise Linux 7 Installation Guide.
							</p></li><li class="listitem"><p class="simpara">
								When installing with the Kickstart file, see:
							</p><p class="simpara">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-kickstart-syntax#sect-kickstart-commands">Kickstart Commands and Options</a> in Red Hat Enterprise Linux 7 Installation Guide.
							</p></li></ul></div></section><section class="section" id="sec-kdump_Enablement_After_Installation"><div class="titlepage"><div><div><h3 class="title">1.8.3.&nbsp;Ensuring That kdump Is Installed and Enabled after the Installation Process</h3></div></div></div><p>
						To ensure that <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> is installed and to configure it:
					</p><div class="orderedlist" id="install-conf-kdump"><p class="title"><strong>Checking Whether kdump Is Installed and Configuring kdump</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To check whether <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> is installed on your system:
							</p><pre class="literallayout">~]$ <code class="literal command">rpm -q kexec-tools</code></pre></li><li class="listitem"><p class="simpara">
								If not installed, to install <span class="strong strong"><strong><span class="application application">kdump</span></strong></span>, enter as the <code class="literal">root</code> user:
							</p><pre class="literallayout">~]# yum install kexec-tools</pre></li><li class="listitem"><p class="simpara">
								To configure <span class="strong strong"><strong><span class="application application">kdump</span></strong></span>:
							</p><p class="simpara">
								Use either the command line or graphical user interface.
							</p><p class="simpara">
								Both options are described in detail in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/kernel_crash_dump_guide/chap-installing-configuring-kdump">Red Hat Enterprise Linux 7 Kernel Crash Dump Guide.</a>
							</p><p class="simpara">
								If you need to install the graphical configuration tool:
							</p><pre class="literallayout">~]# yum install system-config-kdump</pre></li></ol></div></section><section class="section" id="sec-kdump_in_Cockpit"><div class="titlepage"><div><div><h3 class="title">1.8.4.&nbsp;Configuring kdump in Cockpit</h3></div></div></div><p>
						In <span class="strong strong"><strong><span class="application application">Cockpit</span></strong></span>, select <span class="guibutton">Kernel dump configuration</span> to verify:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								the <span class="strong strong"><strong><span class="application application">kdump</span></strong></span> status
							</li><li class="listitem">
								the amount of memory reserved for <span class="strong strong"><strong><span class="application application">kdump</span></strong></span>
							</li><li class="listitem">
								the location of the crash dump files
							</li></ul></div><div class="figure" id="figu-Conf-kdump-cockpit"><p class="title"><strong>Figure&nbsp;1.5.&nbsp;Configuring kdump in Cockpit</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/kdump_n.png" class="rh_docs--zoom" title="kdump n"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/kdump_n.png" alt="kdump n"></a></div></div></div></section><section class="section" id="sec-kdump_Additional_Kdump"><div class="titlepage"><div><div><h3 class="title">1.8.5.&nbsp;Additional Resources on kdump</h3></div></div></div><p>
						For more information on <span class="strong strong"><strong><span class="application application">kdump</span></strong></span>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/kernel_crash_dump_guide/index">Red Hat Enterprise Linux 7 Kernel Crash Dump Guide.</a>
					</p></section></section><section class="section" id="sec-Creating_Syst_Backup"><div class="titlepage"><div><div><h2 class="title">1.9.&nbsp;Performing System Rescue and Creating System Backup with ReaR</h2></div></div></div><p>
					When a software or hardware failure breaks the operating system, you need a mechanism to rescue the system. It is also useful to have the system backup saved. Red Hat recommends using the Relax-and-Recover (ReaR) tool to fulfil both these needs.
				</p><section class="section" id="sec-ReaR_Definition"><div class="titlepage"><div><div><h3 class="title">1.9.1.&nbsp;What ReaR Is and Which Tasks It Can Be Used For</h3></div></div></div><p>
						ReaR is a disaster recovery and system migration utility which enables you to create the complete rescue system. By default, this rescue system restores only the storage layout and the boot loader, but not the actual user and system files.
					</p><p>
						Additionally, certain backup software enables you to integrate ReaR for disaster recovery.
					</p><p>
						ReaR enables to perform the following tasks:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Booting a rescue system on the new hardware
							</li><li class="listitem">
								Replicating the original storage layout
							</li><li class="listitem">
								Restoring user and system files
							</li></ul></div></section><section class="section" id="sec-Quickstart_Install_Rear"><div class="titlepage"><div><div><h3 class="title">1.9.2.&nbsp;Quickstart to Installation and Configuration of ReaR</h3></div></div></div><p>
						To install ReaR, enter as the <code class="literal">root</code> user:
					</p><pre class="literallayout">~]# yum install rear</pre><p>
						Use the settings in the <code class="literal">/etc/rear/local.conf</code> file to configure ReaR.
					</p><p>
						For further information see, <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Basic_ReaR_Usage" title="27.1. Basic ReaR Usage">Section&nbsp;27.1, “Basic ReaR Usage”</a>.
					</p></section><section class="section" id="sec-Quickstart_Rescue_System"><div class="titlepage"><div><div><h3 class="title">1.9.3.&nbsp;Quickstart to Creation of the Rescue System with ReaR</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">To create the rescue system, perform the following command as the <code class="literal">root</code> user</span></dt><dd><!--Empty--></dd></dl></div><pre class="literallayout">~]# rear mkrescue</pre><p>
						For further information on creating the rescue system with ReaR, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Create_Resc_System" title="27.1.3. Creating a Rescue System">Section&nbsp;27.1.3, “Creating a Rescue System”</a>.
					</p></section><section class="section" id="sec-Quickstart_ReaR_Backup"><div class="titlepage"><div><div><h3 class="title">1.9.4.&nbsp;Quickstart to Configuration of ReaR with the Backup Software</h3></div></div></div><p>
						ReaR contains a fully-integrated built-in, or internal, backup method called NETFS.
					</p><p>
						To make ReaR use its internal backup method, add these lines to the <code class="literal">/etc/rear/local.conf</code> file:
					</p><pre class="literallayout">BACKUP=NETFS
BACKUP_URL=backup location</pre><p>
						You can also configure ReaR to keep the previous backup archives when the new ones are created by adding the following line to <code class="literal">/etc/rear/local.conf</code>:
					</p><pre class="literallayout">NETFS_KEEP_OLD_BACKUP_COPY=y</pre><p>
						To make the backups incremental, meaning that only the changed files are backed up on each run, add this line to <code class="literal">/etc/rear/local.conf</code>:
					</p><pre class="literallayout">BACKUP_TYPE=incremental</pre><p>
						For detailed information about using the ReaR NETFS internal backup method, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-BuiltIn_Backup_Method" title="27.2.1. The Built-in Backup Method">Section&nbsp;27.2.1, “The Built-in Backup Method”</a>.
					</p><p>
						For information on supported external backup methods and unsupported backup methods, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Supported_Backup_Methods" title="27.2.2. Supported Backup Methods">Section&nbsp;27.2.2, “Supported Backup Methods”</a> and <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Unsupported_Backup_Methods" title="27.2.3. Unsupported Backup Methods">Section&nbsp;27.2.3, “Unsupported Backup Methods”</a>.
					</p></section></section><section class="section" id="sec-Log_Files"><div class="titlepage"><div><div><h2 class="title">1.10.&nbsp;Using the Log Files to Troubleshoot Problems</h2></div></div></div><p>
					When troubleshooting a problem, you may appreciate the log files that contain different information and messages about the operating system. The logging system in Red Hat Enterprise Linux 7 is based on the built-in <span class="strong strong"><strong><span class="application application">syslog</span></strong></span> protocol. Particular programs use this system to record events and organize them into log files, which are useful when auditing the operating system and troubleshooting various problems.
				</p><p>
					For more information on log files, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Viewing_and_Managing_Log_Files" title="Chapter 23. Viewing and Managing Log Files">Chapter&nbsp;23, <em>Viewing and Managing Log Files</em></a>.
				</p><section class="section" id="sec-Handl_syslog"><div class="titlepage"><div><div><h3 class="title">1.10.1.&nbsp;Services Handling the syslog Messages</h3></div></div></div><p>
						The syslog messages are handled by two services:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								the <code class="literal">systemd-journald</code> daemon - Collects messages from the kernel, the early stages of the boot process, standard output and error of daemons as they start up and run, and syslog, and forwards the messages to the <code class="literal">rsyslog</code> service for further processing.
							</li><li class="listitem">
								the <code class="literal">rsyslog</code> service - Sorts the syslog messages by type and priority, and writes them to the files in the <code class="literal">/var/log</code> directory, where the logs are persistently stored.
							</li></ul></div></section><section class="section" id="sec-Storing_syslog"><div class="titlepage"><div><div><h3 class="title">1.10.2.&nbsp;Subdirectories Storing the syslog Messages</h3></div></div></div><p>
						The syslog messages are stored in various subdirectories under the <code class="literal">/var/log</code> directory according to what kind of messages and logs they contain:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">var/log/messages</code> - all syslog messages except those mentioned below
							</li><li class="listitem">
								<code class="literal">var/log/secure</code> - security and authentication-related messages and errors
							</li><li class="listitem">
								<code class="literal">var/log/maillog</code> - mail server-related messages and errors
							</li><li class="listitem">
								<code class="literal">var/log/cron</code> - log files related to periodically executed tasks
							</li><li class="listitem">
								<code class="literal">var/log/boot.log</code> - log files related to system startup
							</li></ul></div></section></section><section class="section" id="sec-RH_support"><div class="titlepage"><div><div><h2 class="title">1.11.&nbsp;Accessing Red Hat Support</h2></div></div></div><p>
					To obtain support from Red Hat, use the <a class="link" href="https://access.redhat.com/">Red Hat Customer Portal</a>, which provides access to everything available with your subscription.
				</p><p>
					This section describes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Obtaining Red Hat support, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-RH_support_CP" title="1.11.1. Obtaining Red Hat Support Through Red Hat Customer Portal">Section&nbsp;1.11.1, “Obtaining Red Hat Support Through Red Hat Customer Portal”</a>
						</li><li class="listitem">
							Using the <span class="strong strong"><strong><span class="application application">SOS report</span></strong></span> to troubleshoot problems, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-SOS_report" title="1.11.2. Using the SOS Report to Troubleshoot Problems">Section&nbsp;1.11.2, “Using the SOS Report to Troubleshoot Problems”</a>
						</li></ul></div><section class="section" id="sec-RH_support_CP"><div class="titlepage"><div><div><h3 class="title">1.11.1.&nbsp;Obtaining Red Hat Support Through Red Hat Customer Portal</h3></div></div></div><p>
						By using the <a class="link" href="https://access.redhat.com/support">Red Hat Customer Portal</a> you can:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Open a new support case
							</li><li class="listitem">
								Initiate a live chat with a Red Hat expert
							</li><li class="listitem">
								Contact a Red Hat expert by making a call or sending an email
							</li></ul></div><p>
						To access the Red Hat Customer Portal, go to <a class="link" href="https://access.redhat.com/">https://access.redhat.com.</a>.
					</p><p>
						To work with Red Hat Customer Portal services related to Red Hat support, you can use:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Web browser
							</li><li class="listitem">
								<span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span>
							</li></ul></div><section class="section" id="sec-RH_support_tool_definiton"><div class="titlepage"><div><div><h4 class="title">1.11.1.1.&nbsp;What the Red Hat Support Tool Is and Which Tasks It Can Be Used For</h4></div></div></div><p>
							The <span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span> is a command-line based tool which provides a text console interface to the subscription-based Red Hat access services. This tool is contained in the <span class="strong strong"><strong><span class="package package">redhat-support-tool</span></strong></span> package.
						</p><p>
							The <span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span> enables you to perform support-related tasks, such as:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Opening or updating support cases
								</li><li class="listitem">
									Searching in the Red Hat knowledge base solutions
								</li><li class="listitem">
									Analyzing Python and Java errors
								</li></ul></div><p>
							To start the tool in interactive mode:
						</p><pre class="literallayout">~]$ <code class="literal command">redhat-support-tool</code>
Welcome to the Red Hat Support Tool.
Command (? for help):</pre><p>
							In interactive mode, enter <span class="guibutton">?</span> to display the available commands:
						</p><pre class="literallayout">Command (? for help): ?</pre><p>
							For more information about the installation and use of the Red Hat Support Tool, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Red_Hat_Support_Tool" title="Chapter 8. Accessing Support Using the Red Hat Support Tool">Chapter&nbsp;8, <em>Accessing Support Using the Red Hat Support Tool</em></a>, and the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/articles/445443"> Red Hat Access: Red Hat Support Tool</a>.
						</p></section></section><section class="section" id="sec-SOS_report"><div class="titlepage"><div><div><h3 class="title">1.11.2.&nbsp;Using the SOS Report to Troubleshoot Problems</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">SOS report</span></strong></span> collects configuration details, system information and diagnostic information from a Red Hat Enterprise Linux system. Attach the report when you open a support case.
					</p><p>
						Note that the <span class="strong strong"><strong><span class="application application">SOS report</span></strong></span> is provided in the <span class="strong strong"><strong><span class="package package">sos</span></strong></span> package, which is not installed with the default minimal installation of Red Hat Enterprise Linux 7.
					</p><p>
						To install the <span class="strong strong"><strong><span class="package package">sos</span></strong></span> package:
					</p><pre class="literallayout">~]# yum install sos</pre><p>
						To generate an <span class="strong strong"><strong><span class="application application">SOS report</span></strong></span>:
					</p><pre class="literallayout">~]# sosreport</pre><p>
						To attach the <span class="strong strong"><strong><span class="application application">sos report</span></strong></span> to your support case, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/751083"> How can I attach a file to a Red Hat support case?</a>. Note that you will be prompted to enter the number of the support case, when attaching the <span class="strong strong"><strong><span class="application application">sos report</span></strong></span>.
					</p><p>
						For more information on <span class="strong strong"><strong><span class="application application">SOS report</span></strong></span>, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/3592"> What is a sosreport and how to create one in Red Hat Enterprise Linux 4.6 and later?</a>.
					</p></section></section></section><section class="chapter" id="ch-Keyboard_Configuration"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;2.&nbsp;System Locale and Keyboard Configuration</h2></div></div></div><p>
				The <span class="emphasis"><em>system locale</em></span> specifies the language settings of system services and user interfaces. The <span class="emphasis"><em>keyboard layout</em></span> settings control the layout used on the text console and graphical user interfaces.
			</p><p>
				These settings can be made by modifying the <code class="literal">/etc/locale.conf</code> configuration file or by using the <span class="strong strong"><strong><span class="application application">localectl</span></strong></span> utility. Also, you can use the graphical user interface to perform the task; for a description of this method, see <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/">Red Hat Enterprise Linux 7 Installation Guide</a>.
			</p><section class="section" id="s1-Setting_the_System_Locale"><div class="titlepage"><div><div><h2 class="title">2.1.&nbsp;Setting the System Locale</h2></div></div></div><p>
					System-wide locale settings are stored in the <code class="literal">/etc/locale.conf</code> file, which is read at early boot by the <code class="literal">systemd</code> daemon. The locale settings configured in <code class="literal">/etc/locale.conf</code> are inherited by every service or user, unless individual programs or individual users override them.
				</p><p>
					The basic file format of <code class="literal">/etc/locale.conf</code> is a newline-separated list of variable assignments. For example, German locale with English messages in <code class="literal">/etc/locale.conf</code> looks as follows:
				</p><pre class="literallayout">LANG=de_DE.UTF-8
LC_MESSAGES=C</pre><p>
					Here, the LC_MESSAGES option determines the locale used for diagnostic messages written to the standard error output. To further specify locale settings in <code class="literal">/etc/locale.conf</code>, you can use several other options, the most relevant are summarized in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tab-locale_options" title="Table 2.1. Options configurable in /etc/locale.conf">Table&nbsp;2.1, “Options configurable in /etc/locale.conf”</a>. See the <code class="literal">locale(7)</code> manual page for detailed information on these options. Note that the LC_ALL option, which represents all possible options, should not be configured in <code class="literal">/etc/locale.conf</code>.
				</p><div class="table" id="tab-locale_options"><p class="title"><strong>Table&nbsp;2.1.&nbsp;Options configurable in /etc/locale.conf</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569360706816" scope="col">Option</th><th align="left" valign="top" id="idm140569359870192" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569360706816"> <p>
									LANG
								</p>
								 </td><td align="left" valign="top" headers="idm140569359870192"> <p>
									Provides a default value for the system locale.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569360706816"> <p>
									LC_COLLATE
								</p>
								 </td><td align="left" valign="top" headers="idm140569359870192"> <p>
									Changes the behavior of functions which compare strings in the local alphabet.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569360706816"> <p>
									LC_CTYPE
								</p>
								 </td><td align="left" valign="top" headers="idm140569359870192"> <p>
									Changes the behavior of the character handling and classification functions and the multibyte character functions.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569360706816"> <p>
									LC_NUMERIC
								</p>
								 </td><td align="left" valign="top" headers="idm140569359870192"> <p>
									Describes the way numbers are usually printed, with details such as decimal point versus decimal comma.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569360706816"> <p>
									LC_TIME
								</p>
								 </td><td align="left" valign="top" headers="idm140569359870192"> <p>
									Changes the display of the current time, 24-hour versus 12-hour clock.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569360706816"> <p>
									LC_MESSAGES
								</p>
								 </td><td align="left" valign="top" headers="idm140569359870192"> <p>
									Determines the locale used for diagnostic messages written to the standard error output.
								</p>
								 </td></tr></tbody></table></div></div><section class="section" id="s2-Displaying_the_Current_Status"><div class="titlepage"><div><div><h3 class="title">2.1.1.&nbsp;Displaying the Current Status</h3></div></div></div><p>
						The <code class="literal command">localectl</code> command can be used to query and change the system locale and keyboard layout settings. To show the current settings, use the <code class="literal option">status</code> option:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">status</code></pre><div class="example" id="idm140569398146960"><p class="title"><strong>Example&nbsp;2.1.&nbsp;Displaying the Current Status</strong></p><div class="example-contents"><p>
							The output of the previous command lists the currently set locale, keyboard layout configured for the console and for the X11 window system.
						</p><pre class="literallayout">~]$ localectl status
  System Locale: LANG=en_US.UTF-8
    VC Keymap: us
   X11 Layout: n/a</pre></div></div></section><section class="section" id="s2-Listing_Available_Locales"><div class="titlepage"><div><div><h3 class="title">2.1.2.&nbsp;Listing Available Locales</h3></div></div></div><p>
						To list all locales available for your system, type:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">list-locales</code></pre><div class="example" id="idm140569360651792"><p class="title"><strong>Example&nbsp;2.2.&nbsp;Listing Locales</strong></p><div class="example-contents"><p>
							Imagine you want to select a specific English locale, but you are not sure if it is available on the system. You can check that by listing all English locales with the following command:
						</p><pre class="literallayout">~]$ localectl list-locales | grep <code class="literal">en_</code>
en_AG
en_AG.utf8
en_AU
en_AU.iso88591
en_AU.utf8
en_BW
en_BW.iso88591
en_BW.utf8

<span class="emphasis"><em>output truncated</em></span></pre></div></div></section><section class="section" id="s2-Setting_the_Locale"><div class="titlepage"><div><div><h3 class="title">2.1.3.&nbsp;Setting the Locale</h3></div></div></div><p>
						To set the default system locale, use the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">set-locale</code> <code class="literal option">LANG</code>=<span class="emphasis"><em>locale</em></span></pre><p>
						Replace <span class="emphasis"><em>locale</em></span> with the locale name, found with the <code class="literal command">localectl</code> <code class="literal option">list-locales</code> command. The above syntax can also be used to configure parameters from <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tab-locale_options" title="Table 2.1. Options configurable in /etc/locale.conf">Table&nbsp;2.1, “Options configurable in /etc/locale.conf”</a>.
					</p><div class="example" id="idm140569375142864"><p class="title"><strong>Example&nbsp;2.3.&nbsp;Changing the Default Locale</strong></p><div class="example-contents"><p>
							For example, if you want to set British English as your default locale, first find the name of this locale by using <code class="literal option">list-locales</code>. Then, as <code class="literal">root</code>, type the command in the following form:
						</p><pre class="literallayout">~]# localectl set-locale LANG=<code class="literal">en_GB.utf8</code></pre></div></div></section><section class="section" id="s2-Locales_With_Kickstart"><div class="titlepage"><div><div><h3 class="title">2.1.4.&nbsp;Making System Locale Settings Permanent when Installing with Kickstart</h3></div></div></div><p>
						When Red Hat Enterprise Linux is installed with the Red Hat Kickstart installation method, setting of the system locales might not be persistent after an upgrade of the operating system.
					</p><p>
						When the <code class="literal command">%packages</code> section of the Kickstart file includes the <code class="literal option">--instLang</code> option, the <code class="literal command">_install_langs</code> RPM macro is set to the particular value for this installation, and the set of installed locales is adjusted accordingly. However, this adjustment affects only this installation, not subsequent upgrades. If an upgrade reinstalls the <span class="strong strong"><strong><span class="package package">glibc</span></strong></span> package, the entire set of locales is upgraded instead of only the locales you requested during the installation.
					</p><p>
						To avoid this, make the choice of locales permanent. You have these options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If you have not started the Kickstart installation, modify the Kickstart file to include instructions for setting RPM macros globally by applying this procedure: <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Setting_RPM_kickstart" title="Setting RPM macros during the Kickstart installation">Setting RPM macros during the Kickstart installation</a>
							</li><li class="listitem">
								If you have already installed the system, set RPM macros globally on the system by applying this procedure: <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Setting_RPM_globally" title="Setting RPM macros globally">Setting RPM macros globally</a>
							</li></ul></div><div class="orderedlist" id="Setting_RPM_kickstart"><p class="title"><strong>Setting RPM macros during the Kickstart installation</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Modify the <code class="literal command">%post</code> section of the Kickstart file:
							</p><pre class="literallayout">LANG=<span class="emphasis"><em>en_US</em></span>
echo "%_install_langs $LANG" &gt; /etc/rpm/macros.language-conf

awk '(NF==0amp amp!done){print "override_install_langs='$LANG'";done=1}{print}' \
   &lt; /etc/yum.conf &gt; /etc/yum.conf.new
mv /ec/yum.conf.new /etc/yum.conf</pre></li></ol></div><div class="orderedlist" id="Setting_RPM_globally"><p class="title"><strong>Setting RPM macros globally</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the RPM configuration file at <code class="literal">/etc/rpm/macros.language-conf</code> with the following contents:
							</p><pre class="literallayout">%_install_langs <span class="emphasis"><em>LANG</em></span></pre><p class="simpara">
								<span class="emphasis"><em>LANG</em></span> is the value of the <code class="literal option">instLang</code> option.
							</p></li><li class="listitem"><p class="simpara">
								Update the <code class="literal">/etc/yum.conf</code> file with:
							</p><pre class="literallayout">override_install_langs=<span class="emphasis"><em>LANG</em></span></pre></li></ol></div></section></section><section class="section" id="s1-Changing_the_Keyboard_Layout"><div class="titlepage"><div><div><h2 class="title">2.2.&nbsp;Changing the Keyboard Layout</h2></div></div></div><p>
					The keyboard layout settings enable the user to control the layout used on the text console and graphical user interfaces.
				</p><section class="section" id="s2-Displaying_the_Current_Settings"><div class="titlepage"><div><div><h3 class="title">2.2.1.&nbsp;Displaying the Current Settings</h3></div></div></div><p>
						As mentioned before, you can check your current keyboard layout configuration with the following command:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">status</code></pre><div class="example" id="idm140569346981040"><p class="title"><strong>Example&nbsp;2.4.&nbsp;Displaying the Keyboard Settings</strong></p><div class="example-contents"><p>
							In the following output, you can see the keyboard layout configured for the virtual console and for the X11 window system.
						</p><pre class="literallayout">~]$ localectl status
  System Locale: LANG=en_US.utf8
    VC Keymap: us
   X11 Layout: us</pre></div></div></section><section class="section" id="s2-Listing_Available_Keymaps"><div class="titlepage"><div><div><h3 class="title">2.2.2.&nbsp;Listing Available Keymaps</h3></div></div></div><p>
						To list all available keyboard layouts that can be configured on your system, type:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">list-keymaps</code></pre><div class="example" id="idm140569391224576"><p class="title"><strong>Example&nbsp;2.5.&nbsp;Searching for a Particular Keymap</strong></p><div class="example-contents"><p>
							You can use <code class="literal command">grep</code> to search the output of the previous command for a specific keymap name. There are often multiple keymaps compatible with your currently set locale. For example, to find available Czech keyboard layouts, type:
						</p><pre class="literallayout">~]$ <code class="literal command">localectl</code> <code class="literal option">list-keymaps</code> | <code class="literal command">grep</code> <code class="literal">cz</code>
cz
cz-cp1250
cz-lat2
cz-lat2-prog
cz-qwerty
cz-us-qwertz
sunt5-cz-us
sunt5-us-cz</pre></div></div></section><section class="section" id="s2-Setting_the_Keymap"><div class="titlepage"><div><div><h3 class="title">2.2.3.&nbsp;Setting the Keymap</h3></div></div></div><p>
						To set the default keyboard layout for your system, use the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">set-keymap</code> <span class="emphasis"><em>map</em></span></pre><p>
						Replace <span class="emphasis"><em>map</em></span> with the name of the keymap taken from the output of the <code class="literal command">localectl</code> <code class="literal option">list-keymaps</code> command. Unless the <code class="literal option">--no-convert</code> option is passed, the selected setting is also applied to the default keyboard mapping of the X11 window system, after converting it to the closest matching X11 keyboard mapping. This also applies in reverse, you can specify both keymaps with the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">set-x11-keymap</code> <span class="emphasis"><em>map</em></span></pre><p>
						If you want your X11 layout to differ from the console layout, use the <code class="literal option">--no-convert</code> option.
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">--no-convert</code> <code class="literal option">set-x11-keymap</code> <span class="emphasis"><em>map</em></span></pre><p>
						With this option, the X11 keymap is specified without changing the previous console layout setting.
					</p><div class="example" id="idm140569384700336"><p class="title"><strong>Example&nbsp;2.6.&nbsp;Setting the X11 Keymap Separately</strong></p><div class="example-contents"><p>
							Imagine you want to use German keyboard layout in the graphical interface, but for console operations you want to retain the US keymap. To do so, type as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# localectl --no-convert set-x11-keymap <span class="emphasis"><em>de</em></span></pre><p>
							Then you can verify if your setting was successful by checking the current status:
						</p><pre class="literallayout">~]$ localectl status
  System Locale: LANG=de_DE.UTF-8
    VC Keymap: us
   X11 Layout: de</pre></div></div><p>
						Apart from keyboard layout (<span class="emphasis"><em>map</em></span>), three other options can be specified:
					</p><pre class="literallayout"><code class="literal command">localectl</code> <code class="literal option">set-x11-keymap</code> <span class="emphasis"><em>map</em></span> <span class="emphasis"><em>model</em></span> <span class="emphasis"><em>variant</em></span> <span class="emphasis"><em>options</em></span></pre><p>
						Replace <span class="emphasis"><em>model</em></span> with the keyboard model name, <span class="emphasis"><em>variant</em></span> and <span class="emphasis"><em>options</em></span> with keyboard variant and option components, which can be used to enhance the keyboard behavior. These options are not set by default. For more information on X11 Model, X11 Variant, and X11 Options see the <code class="literal">kbd(4)</code> man page.
					</p></section></section><section class="section" id="sect-Keyboard_Configuration-Resources"><div class="titlepage"><div><div><h2 class="title">2.3.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on how to configure the keyboard layout on Red Hat Enterprise Linux, see the resources listed below:
				</p><h4 id="brid-Keyboard_Configuration-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">localectl</code>(1) — The manual page for the <code class="literal command">localectl</code> command line utility documents how to use this tool to configure the system locale and keyboard layout.
						</li><li class="listitem">
							<code class="literal">loadkeys</code>(1) — The manual page for the <code class="literal command">loadkeys</code> command provides more information on how to use this tool to change the keyboard layout in a virtual console.
						</li></ul></div><h4 id="brid-Keyboard_Configuration-Resources-Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a> provides more information on <code class="literal">systemd</code> and documents how to use the <code class="literal command">systemctl</code> command to manage system services.
						</li></ul></div></section></section><section class="chapter" id="chap-Configuring_the_Date_and_Time"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;3.&nbsp;Configuring the Date and Time</h2></div></div></div><p>
				Modern operating systems distinguish between the following two types of clocks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A <span class="emphasis"><em>real-time clock</em></span> (<span class="strong strong"><strong>RTC</strong></span>), commonly referred to as a <span class="emphasis"><em>hardware clock</em></span>, (typically an integrated circuit on the system board) that is completely independent of the current state of the operating system and runs even when the computer is shut down.
					</li><li class="listitem">
						A <span class="emphasis"><em>system clock</em></span>, also known as a <span class="emphasis"><em>software clock</em></span>, that is maintained by the kernel and its initial value is based on the real-time clock. Once the system is booted and the system clock is initialized, the system clock is completely independent of the real-time clock.
					</li></ul></div><p>
				The system time is always kept in <span class="emphasis"><em>Coordinated Universal Time</em></span> (<span class="strong strong"><strong>UTC</strong></span>) and converted in applications to local time as needed. <span class="emphasis"><em>Local time</em></span> is the actual time in your current time zone, taking into account <span class="emphasis"><em>daylight saving time</em></span> (<span class="strong strong"><strong>DST</strong></span>). The real-time clock can use either UTC or local time. UTC is recommended.
			</p><p>
				Red Hat Enterprise Linux 7 offers three command line tools that can be used to configure and display information about the system date and time:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal command">timedatectl</code> utility, which is new in Red Hat Enterprise Linux 7 and is part of <code class="literal">systemd</code>.
					</li><li class="listitem">
						The traditional <code class="literal command">date</code> command.
					</li><li class="listitem">
						The <code class="literal command">hwclock</code> utility for accessing the hardware clock.
					</li></ul></div><section class="section" id="sect-Configuring_the_Date_and_Time-timedatectl"><div class="titlepage"><div><div><h2 class="title">3.1.&nbsp;Using the <code class="literal command">timedatectl</code> Command</h2></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">timedatectl</span></strong></span> utility is distributed as part of the <code class="literal">systemd</code> system and service manager and allows you to review and change the configuration of the system clock. You can use this tool to change the current date and time, set the time zone, or enable automatic synchronization of the system clock with a remote server.
				</p><p>
					For information on how to display the current date and time in a custom format, see also <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-date" title="3.2. Using the date Command">Section&nbsp;3.2, “Using the date Command”</a>.
				</p><section class="section" id="sect-Configuring_the_Date_and_Time-timedatectl-Display"><div class="titlepage"><div><div><h3 class="title">3.1.1.&nbsp;Displaying the Current Date and Time</h3></div></div></div><p>
						To display the current date and time along with detailed information about the configuration of the system and hardware clock, run the <code class="literal command">timedatectl</code> command with no additional command line options:
					</p><pre class="literallayout"><code class="literal command">timedatectl</code></pre><p>
						This displays the local and universal time, the currently used time zone, the status of the Network Time Protocol (<code class="literal">NTP</code>) configuration, and additional information related to DST.
					</p><div class="example" id="exam-Configuring_the_Date_and_Time-timedatectl-Display"><p class="title"><strong>Example&nbsp;3.1.&nbsp;Displaying the Current Date and Time</strong></p><div class="example-contents"><p>
							The following is an example output of the <code class="literal command">timedatectl</code> command on a system that does not use <code class="literal">NTP</code> to synchronize the system clock with a remote server:
						</p><pre class="literallayout">~]$ timedatectl
   Local time: Mon 2016-09-16 19:30:24 CEST
 Universal time: Mon 2016-09-16 17:30:24 UTC
    Timezone: Europe/Prague (CEST, +0200)
   NTP enabled: no
NTP synchronized: no
 RTC in local TZ: no
   DST active: yes
 Last DST change: DST began at
         Sun 2016-03-31 01:59:59 CET
         Sun 2016-03-31 03:00:00 CEST
 Next DST change: DST ends (the clock jumps one hour backwards) at
         Sun 2016-10-27 02:59:59 CEST
         Sun 2016-10-27 02:00:00 CET</pre></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Changes to the status of <code class="literal">chrony</code> or <code class="literal">ntpd</code> will not be immediately noticed by <code class="literal">timedatectl</code>. If changes to the configuration or status of these tools is made, enter the following command:
						</p><pre class="literallayout">~]# systemctl restart systemd-timedated.service</pre></div></div></section><section class="section" id="sect-Configuring_the_Date_and_Time-timedatectl-Time"><div class="titlepage"><div><div><h3 class="title">3.1.2.&nbsp;Changing the Current Time</h3></div></div></div><p>
						To change the current time, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">timedatectl</code> <code class="literal option">set-time</code> <span class="emphasis"><em>HH:MM:SS</em></span></pre><p>
						Replace <span class="emphasis"><em>HH</em></span> with an hour, <span class="emphasis"><em>MM</em></span> with a minute, and <span class="emphasis"><em>SS</em></span> with a second, all typed in two-digit form.
					</p><p>
						This command updates both the system time and the hardware clock. The result it is similar to using both the <code class="literal command">date --set</code> and <code class="literal command">hwclock --systohc</code> commands.
					</p><p>
						The command will fail if an <code class="literal">NTP</code> service is enabled. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl-NTP" title="3.1.5. Synchronizing the System Clock with a Remote Server">Section&nbsp;3.1.5, “Synchronizing the System Clock with a Remote Server”</a> to temporally disable the service.
					</p><div class="example" id="exam-Configuring_the_Date_and_Time-timedatectl-Time"><p class="title"><strong>Example&nbsp;3.2.&nbsp;Changing the Current Time</strong></p><div class="example-contents"><p>
							To change the current time to 11:26 p.m., run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# timedatectl set-time 23:26:00</pre></div></div><p>
						By default, the system is configured to use UTC. To configure your system to maintain the clock in the local time, run the <code class="literal command">timedatectl</code> command with the <code class="literal option">set-local-rtc</code> option as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">timedatectl</code> <code class="literal option">set-local-rtc</code> <span class="emphasis"><em>boolean</em></span></pre><p>
						To configure your system to maintain the clock in the local time, replace <span class="emphasis"><em>boolean</em></span> with <code class="literal">yes</code> (or, alternatively, <code class="literal">y</code>, <code class="literal">true</code>, <code class="literal">t</code>, or <code class="literal">1</code>). To configure the system to use UTC, replace <span class="emphasis"><em>boolean</em></span> with <code class="literal">no</code> (or, alternatively, <code class="literal">n</code>, <code class="literal">false</code>, <code class="literal">f</code>, or <code class="literal">0</code>). The default option is <code class="literal">no</code>.
					</p></section><section class="section" id="sect-Configuring_the_Date_and_Time-timedatectl-Date"><div class="titlepage"><div><div><h3 class="title">3.1.3.&nbsp;Changing the Current Date</h3></div></div></div><p>
						To change the current date, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">timedatectl</code> <code class="literal option">set-time</code> <span class="emphasis"><em>YYYY-MM-DD</em></span></pre><p>
						Replace <span class="emphasis"><em>YYYY</em></span> with a four-digit year, <span class="emphasis"><em>MM</em></span> with a two-digit month, and <span class="emphasis"><em>DD</em></span> with a two-digit day of the month.
					</p><p>
						Note that changing the date without specifying the current time results in setting the time to 00:00:00.
					</p><div class="example" id="exam-Configuring_the_Date_and_Time-timedatectl-Date"><p class="title"><strong>Example&nbsp;3.3.&nbsp;Changing the Current Date</strong></p><div class="example-contents"><p>
							To change the current date to 2 June 2017 and keep the current time (11:26 p.m.), run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# timedatectl set-time 2017-06-02 23:26:00</pre></div></div></section><section class="section" id="sect-Configuring_the_Date_and_Time-timedatectl-Time_Zone"><div class="titlepage"><div><div><h3 class="title">3.1.4.&nbsp;Changing the Time Zone</h3></div></div></div><p>
						To list all available time zones, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">timedatectl</code> <code class="literal option">list-timezones</code></pre><p>
						To change the currently used time zone, type as <code class="literal">root</code>:
					</p><pre class="literallayout">timedatectl set-timezone <span class="emphasis"><em>time_zone</em></span></pre><p>
						Replace <span class="emphasis"><em>time_zone</em></span> with any of the values listed by the <code class="literal command">timedatectl list-timezones</code> command.
					</p><div class="example" id="exam-Configuring_the_Date_and_Time-timedatectl-Time_Zone"><p class="title"><strong>Example&nbsp;3.4.&nbsp;Changing the Time Zone</strong></p><div class="example-contents"><p>
							To identify which time zone is closest to your present location, use the <code class="literal command">timedatectl</code> command with the <code class="literal option">list-timezones</code> command line option. For example, to list all available time zones in Europe, type:
						</p><pre class="literallayout">~]# timedatectl list-timezones | grep Europe
Europe/Amsterdam
Europe/Andorra
Europe/Athens
Europe/Belgrade
Europe/Berlin
Europe/Bratislava
<span class="emphasis"><em>…</em></span></pre><p>
							To change the time zone to <code class="literal">Europe/Prague</code>, type as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# timedatectl set-timezone Europe/Prague</pre></div></div></section><section class="section" id="sect-Configuring_the_Date_and_Time-timedatectl-NTP"><div class="titlepage"><div><div><h3 class="title">3.1.5.&nbsp;Synchronizing the System Clock with a Remote Server</h3></div></div></div><p>
						As opposed to the manual adjustments described in the previous sections, the <code class="literal command">timedatectl</code> command also allows you to enable automatic synchronization of your system clock with a group of remote servers using the <code class="literal">NTP</code> protocol. Enabling NTP enables the <code class="literal">chronyd</code> or <code class="literal">ntpd</code> service, depending on which of them is installed.
					</p><p>
						The <code class="literal">NTP</code> service can be enabled and disabled using a command as follows:
					</p><pre class="literallayout"><code class="literal command">timedatectl</code> <code class="literal option">set-ntp</code> <span class="emphasis"><em>boolean</em></span></pre><p>
						To enable your system to synchronize the system clock with a remote <code class="literal">NTP</code> server, replace <span class="emphasis"><em>boolean</em></span> with <code class="literal">yes</code> (the default option). To disable this feature, replace <span class="emphasis"><em>boolean</em></span> with <code class="literal">no</code>.
					</p><div class="example" id="exam-Configuring_the_Date_and_Time-timedatectl-NTP"><p class="title"><strong>Example&nbsp;3.5.&nbsp;Synchronizing the System Clock with a Remote Server</strong></p><div class="example-contents"><p>
							To enable automatic synchronization of the system clock with a remote server, type:
						</p><pre class="literallayout">~]# timedatectl set-ntp yes</pre><p>
							The command will fail if an <code class="literal">NTP</code> service is not installed. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Installing_chrony" title="18.3.1. Installing chrony">Section&nbsp;18.3.1, “Installing chrony”</a> for more information.
						</p></div></div></section></section><section class="section" id="sect-Configuring_the_Date_and_Time-date"><div class="titlepage"><div><div><h2 class="title">3.2.&nbsp;Using the date Command</h2></div></div></div><p>
					The <code class="literal command">date</code> utility is available on all Linux systems and allows you to display and configure the current date and time. It is frequently used in scripts to display detailed information about the system clock in a custom format.
				</p><p>
					For information on how to change the time zone or enable automatic synchronization of the system clock with a remote server, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl" title="3.1. Using the timedatectl Command">Section&nbsp;3.1, “Using the <code class="literal command">timedatectl</code> Command”</a>.
				</p><section class="section" id="sect-Configuring_the_Date_and_Time-date-Display"><div class="titlepage"><div><div><h3 class="title">3.2.1.&nbsp;Displaying the Current Date and Time</h3></div></div></div><p>
						To display the current date and time, run the <code class="literal command">date</code> command with no additional command line options:
					</p><pre class="literallayout"><code class="literal command">date</code></pre><p>
						This displays the day of the week followed by the current date, local time, abbreviated time zone, and year.
					</p><p>
						By default, the <code class="literal command">date</code> command displays the local time. To display the time in UTC, run the command with the <code class="literal option">--utc</code> or <code class="literal option">-u</code> command line option:
					</p><pre class="literallayout"><code class="literal command">date</code> <code class="literal option">--utc</code></pre><p>
						You can also customize the format of the displayed information by providing the <code class="literal option">+"<span class="emphasis"><em>format</em></span>"</code> option on the command line:
					</p><pre class="literallayout">date +"format"</pre><p>
						Replace <span class="emphasis"><em>format</em></span> with one or more supported control sequences as illustrated in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-Configuring_the_Date_and_Time-date-Display" title="Example 3.6. Displaying the Current Date and Time">Example&nbsp;3.6, “Displaying the Current Date and Time”</a>. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Configuring_the_Date_and_Time-date-Format" title="Table 3.1. Commonly Used Control Sequences">Table&nbsp;3.1, “Commonly Used Control Sequences”</a> for a list of the most frequently used formatting options, or the <code class="literal">date</code>(1) manual page for a complete list of these options.
					</p><div class="table" id="tabl-Configuring_the_Date_and_Time-date-Format"><p class="title"><strong>Table&nbsp;3.1.&nbsp;Commonly Used Control Sequences</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569386417488" scope="col">Control Sequence</th><th align="left" valign="top" id="idm140569386416512" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%H</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The hour in the <span class="emphasis"><em>HH</em></span> format (for example, <code class="literal">17</code>).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%M</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The minute in the <span class="emphasis"><em>MM</em></span> format (for example, <code class="literal">30</code>).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%S</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The second in the <span class="emphasis"><em>SS</em></span> format (for example, <code class="literal">24</code>).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%d</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The day of the month in the <span class="emphasis"><em>DD</em></span> format (for example, <code class="literal">16</code>).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%m</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The month in the <span class="emphasis"><em>MM</em></span> format (for example, <code class="literal">09</code>).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%Y</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The year in the <span class="emphasis"><em>YYYY</em></span> format (for example, <code class="literal">2016</code>).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal">%Z</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The time zone abbreviation (for example, <code class="literal">CEST</code>).
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%F</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The full date in the <span class="emphasis"><em>YYYY-MM-DD</em></span> format (for example, <code class="literal">2016-09-16</code>). This option is equal to <code class="literal option">%Y-%m-%d</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569386417488"> <p>
										<code class="literal option">%T</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569386416512"> <p>
										The full time in the <span class="emphasis"><em>HH:MM:SS</em></span> format (for example, 17:30:24). This option is equal to <code class="literal option">%H:%M:%S</code>
									</p>
									 </td></tr></tbody></table></div></div><div class="example" id="exam-Configuring_the_Date_and_Time-date-Display"><p class="title"><strong>Example&nbsp;3.6.&nbsp;Displaying the Current Date and Time</strong></p><div class="example-contents"><p>
							To display the current date and local time, type the following at a shell prompt:
						</p><pre class="literallayout">~]$ <code class="literal command">date</code>
Mon Sep 16 17:30:24 CEST 2016</pre><p>
							To display the current date and time in UTC, type the following at a shell prompt:
						</p><pre class="literallayout">~]$ <code class="literal command">date --utc</code>
Mon Sep 16 15:30:34 UTC 2016</pre><p>
							To customize the output of the <code class="literal command">date</code> command, type:
						</p><pre class="literallayout">~]$ date +"%Y-%m-%d %H:%M"
2016-09-16 17:30</pre></div></div></section><section class="section" id="sect-Configuring_the_Date_and_Time-date-Time"><div class="titlepage"><div><div><h3 class="title">3.2.2.&nbsp;Changing the Current Time</h3></div></div></div><p>
						To change the current time, run the <code class="literal command">date</code> command with the <code class="literal option">--set</code> or <code class="literal option">-s</code> option as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">date</code> <code class="literal option">--set</code> <span class="emphasis"><em>HH:MM:SS</em></span></pre><p>
						Replace <span class="emphasis"><em>HH</em></span> with an hour, <span class="emphasis"><em>MM</em></span> with a minute, and <span class="emphasis"><em>SS</em></span> with a second, all typed in two-digit form.
					</p><p>
						By default, the <code class="literal command">date</code> command sets the system clock to the local time. To set the system clock in UTC, run the command with the <code class="literal option">--utc</code> or <code class="literal option">-u</code> command line option:
					</p><pre class="literallayout"><code class="literal command">date</code> <code class="literal option">--set</code> <span class="emphasis"><em>HH:MM:SS</em></span> <code class="literal option">--utc</code></pre><div class="example" id="exam-Configuring_the_Date_and_Time-date-Time"><p class="title"><strong>Example&nbsp;3.7.&nbsp;Changing the Current Time</strong></p><div class="example-contents"><p>
							To change the current time to 11:26 p.m., run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# date --set 23:26:00</pre></div></div></section><section class="section" id="sect-Configuring_the_Date_and_Time-date-Date"><div class="titlepage"><div><div><h3 class="title">3.2.3.&nbsp;Changing the Current Date</h3></div></div></div><p>
						To change the current date, run the <code class="literal command">date</code> command with the <code class="literal option">--set</code> or <code class="literal option">-s</code> option as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">date</code> <code class="literal option">--set</code> <span class="emphasis"><em>YYYY-MM-DD</em></span></pre><p>
						Replace <span class="emphasis"><em>YYYY</em></span> with a four-digit year, <span class="emphasis"><em>MM</em></span> with a two-digit month, and <span class="emphasis"><em>DD</em></span> with a two-digit day of the month.
					</p><p>
						Note that changing the date without specifying the current time results in setting the time to 00:00:00.
					</p><div class="example" id="exam-Configuring_the_Date_and_Time-date-Date"><p class="title"><strong>Example&nbsp;3.8.&nbsp;Changing the Current Date</strong></p><div class="example-contents"><p>
							To change the current date to 2 June 2017 and keep the current time (11:26 p.m.), run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# date --set "2017-06-02 23:26:00"</pre></div></div></section></section><section class="section" id="sect-Configuring_the_Date_and_Time-hwclock"><div class="titlepage"><div><div><h2 class="title">3.3.&nbsp;Using the <code class="literal command">hwclock</code> Command</h2></div></div></div><p>
					<code class="literal">hwclock</code> is a utility for accessing the hardware clock, also referred to as the Real Time Clock (RTC). The hardware clock is independent of the operating system you use and works even when the machine is shut down. This utility is used for displaying the time from the hardware clock. <code class="literal">hwclock</code> also contains facilities for compensating for systematic drift in the hardware clock.
				</p><p>
					The hardware clock stores the values of: year, month, day, hour, minute, and second. It is not able to store the time standard, local time or Coordinated Universal Time (UTC), nor set the Daylight Saving Time (DST).
				</p><p>
					The <code class="literal">hwclock</code> utility saves its settings in the <code class="literal">/etc/adjtime</code> file, which is created with the first change you make, for example, when you set the time manually or synchronize the hardware clock with the system time.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In Red Hat Enterprise Linux 6, the <code class="literal command">hwclock</code> command was run automatically on every system shutdown or reboot, but it is not in Red Hat Enterprise Linux 7. When the system clock is synchronized by the Network Time Protocol (NTP) or Precision Time Protocol (PTP), the kernel automatically synchronizes the hardware clock to the system clock every 11 minutes.
					</p></div></div><p>
					For details about NTP, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_the_chrony_Suite" title="Chapter 18. Configuring NTP Using the chrony Suite">Chapter&nbsp;18, <em>Configuring NTP Using the chrony Suite</em></a> and <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd" title="Chapter 19. Configuring NTP Using ntpd">Chapter&nbsp;19, <em>Configuring NTP Using ntpd</em></a>. For information about PTP, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_PTP_Using_ptp4l" title="Chapter 20. Configuring PTP Using ptp4l">Chapter&nbsp;20, <em>Configuring PTP Using ptp4l</em></a>. For information about setting the hardware clock after executing <span class="strong strong"><strong><span class="application application">ntpdate</span></strong></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configuring_the_Hardware_Clock_update" title="19.18. Configuring the Hardware Clock Update">Section&nbsp;19.18, “Configuring the Hardware Clock Update”</a>.
				</p><section class="section" id="sect2-displaying-time-hwclock"><div class="titlepage"><div><div><h3 class="title">3.3.1.&nbsp;Displaying the Current Date and Time</h3></div></div></div><p>
						Running <code class="literal command">hwclock</code> with no command line options as the <code class="literal">root</code> user returns the date and time in local time to standard output.
					</p><pre class="literallayout"><code class="literal command">hwclock</code></pre><p>
						Note that using the <code class="literal option">--utc</code> or <code class="literal option">--localtime</code> options with the <code class="literal command">hwclock</code> command does not mean you are displaying the hardware clock time in UTC or local time. These options are used for setting the hardware clock to keep time in either of them. The time is always displayed in local time. Additionally, using the <code class="literal command">hwclock --utc</code> or <code class="literal command">hwclock --local</code> commands does not change the record in the <code class="literal">/etc/adjtime</code> file. This command can be useful when you know that the setting saved in <code class="literal">/etc/adjtime</code> is incorrect but you do not want to change the setting. On the other hand, you may receive misleading information if you use the command an incorrect way. See the <code class="literal">hwclock</code>(8) manual page for more details.
					</p><div class="example" id="exam-sect3-displaying-time-hwclock"><p class="title"><strong>Example&nbsp;3.9.&nbsp;Displaying the Current Date and Time</strong></p><div class="example-contents"><p>
							To display the current date and the current local time from the hardware clock, run as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# hwclock
Tue 15 Apr 2017 04:23:46 PM CEST   -0.329272 seconds</pre><p>
							CEST is a time zone abbreviation and stands for Central European Summer Time.
						</p></div></div><p>
						For information on how to change the time zone, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring_the_Date_and_Time-timedatectl-Time_Zone" title="3.1.4. Changing the Time Zone">Section&nbsp;3.1.4, “Changing the Time Zone”</a>.
					</p></section><section class="section" id="sect3-changing-date-time-hwclock"><div class="titlepage"><div><div><h3 class="title">3.3.2.&nbsp;Setting the Date and Time</h3></div></div></div><p>
						Besides displaying the date and time, you can manually set the hardware clock to a specific time.
					</p><p>
						When you need to change the hardware clock date and time, you can do so by appending the <code class="literal option">--set</code> and <code class="literal option">--date</code> options along with your specification:
					</p><pre class="literallayout"><code class="literal command">hwclock --set --date <span class="emphasis"><em>"dd mmm yyyy HH:MM"</em></span></code></pre><p>
						Replace <span class="emphasis"><em>dd</em></span> with a day (a two-digit number), <span class="emphasis"><em>mmm</em></span> with a month (a three-letter abbreviation), <span class="emphasis"><em>yyyy</em></span> with a year (a four-digit number), <span class="emphasis"><em>HH</em></span> with an hour (a two-digit number), <span class="emphasis"><em>MM</em></span> with a minute (a two-digit number).
					</p><p>
						At the same time, you can also set the hardware clock to keep the time in either UTC or local time by adding the <code class="literal option">--utc</code> or <code class="literal option">--localtime</code> options, respectively. In this case, <code class="literal">UTC</code> or <code class="literal">LOCAL</code> is recorded in the <code class="literal">/etc/adjtime</code> file.
					</p><div class="example" id="exam6-sect3-setting-time-hwclock"><p class="title"><strong>Example&nbsp;3.10.&nbsp;Setting the Hardware Clock to a Specific Date and Time</strong></p><div class="example-contents"><p>
							If you want to set the date and time to a specific value, for example, to "21:17, October 21, 2016", and keep the hardware clock in UTC, run the command as <code class="literal">root</code> in the following format:
						</p><pre class="literallayout">~]# hwclock --set --date "21 Oct 2016 21:17" --utc</pre></div></div></section><section class="section" id="sect4-synchronizing-date-time-hwclock"><div class="titlepage"><div><div><h3 class="title">3.3.3.&nbsp;Synchronizing the Date and Time</h3></div></div></div><p>
						You can synchronize the hardware clock and the current system time in both directions.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Either you can set the hardware clock to the current system time by using this command:
							</p><pre class="literallayout"><code class="literal command">hwclock --systohc</code></pre><p class="simpara">
								Note that if you use NTP, the hardware clock is automatically synchronized to the system clock every 11 minutes, and this command is useful only at boot time to get a reasonable initial system time.
							</p></li><li class="listitem"><p class="simpara">
								Or, you can set the system time from the hardware clock by using the following command:
							</p><pre class="literallayout"><code class="literal command">hwclock --hctosys</code></pre></li></ul></div><p>
						When you synchronize the hardware clock and the system time, you can also specify whether you want to keep the hardware clock in local time or UTC by adding the <code class="literal option">--utc</code> or <code class="literal option">--localtime</code> option. Similarly to using <code class="literal option">--set</code>, <code class="literal">UTC</code> or <code class="literal">LOCAL</code> is recorded in the <code class="literal">/etc/adjtime</code> file.
					</p><p>
						The <code class="literal command">hwclock --systohc --utc</code> command is functionally similar to <code class="literal command">timedatectl set-local-rtc false</code> and the <code class="literal command">hwclock --systohc --local</code> command is an alternative to <code class="literal command">timedatectl set-local-rtc true</code>.
					</p><div class="example" id="exam4-sect4-synchornizing-systohc-hwclock"><p class="title"><strong>Example&nbsp;3.11.&nbsp;Synchronizing the Hardware Clock with System Time</strong></p><div class="example-contents"><p>
							To set the hardware clock to the current system time and keep the hardware clock in local time, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# hwclock --systohc --localtime</pre><p>
							To avoid problems with time zone and DST switching, it is recommended to keep the hardware clock in UTC. The shown <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam4-sect4-synchornizing-systohc-hwclock" title="Example 3.11. Synchronizing the Hardware Clock with System Time">Example&nbsp;3.11, “Synchronizing the Hardware Clock with System Time”</a> is useful, for example, in case of a multi boot with a Windows system, which assumes the hardware clock runs in local time by default, and all other systems need to accommodate to it by using local time as well. It may also be needed with a virtual machine; if the virtual hardware clock provided by the host is running in local time, the guest system needs to be configured to use local time, too.
						</p></div></div></section></section><section class="section" id="sect-Date_and_Time-Resources"><div class="titlepage"><div><div><h2 class="title">3.4.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on how to configure the date and time in Red Hat Enterprise Linux 7, see the resources listed below.
				</p><h4 id="brid-Date_and_Time-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">timedatectl</code>(1) — The manual page for the <code class="literal command">timedatectl</code> command line utility documents how to use this tool to query and change the system clock and its settings.
						</li><li class="listitem">
							<code class="literal">date</code>(1) — The manual page for the <code class="literal command">date</code> command provides a complete list of supported command line options.
						</li><li class="listitem">
							<code class="literal">hwclock</code>(8) — The manual page for the <code class="literal command">hwclock</code> command provides a complete list of supported command line options.
						</li></ul></div><h4 id="brid-Date_and_Time-Resources-Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Keyboard_Configuration" title="Chapter 2. System Locale and Keyboard Configuration">Chapter&nbsp;2, <em>System Locale and Keyboard Configuration</em></a> documents how to configure the keyboard layout.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a> provides more information on systemd and documents how to use the <code class="literal command">systemctl</code> command to manage system services.
						</li></ul></div></section></section><section class="chapter" id="ch-Managing_Users_and_Groups"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;4.&nbsp;Managing Users and Groups</h2></div></div></div><p>
				The control of users and groups is a core element of Red Hat Enterprise Linux system administration. This chapter explains how to add, manage, and delete users and groups in the graphical user interface and on the command line, and covers advanced topics, such as creating group directories.
			</p><section class="section" id="s1-users-groups-introduction"><div class="titlepage"><div><div><h2 class="title">4.1.&nbsp;Introduction to Users and Groups</h2></div></div></div><p>
					While users can be either people (meaning accounts tied to physical users) or accounts that exist for specific applications to use, groups are logical expressions of organization, tying users together for a common purpose. Users within a group share the same permissions to read, write, or execute files owned by that group.
				</p><p>
					Each user is associated with a unique numerical identification number called a <span class="emphasis"><em>user ID</em></span> (<span class="strong strong"><strong>UID</strong></span>). Likewise, each group is associated with a <span class="emphasis"><em>group ID</em></span> (<span class="strong strong"><strong>GID</strong></span>). A user who creates a file is also the owner and group owner of that file. The file is assigned separate read, write, and execute permissions for the owner, the group, and everyone else. The file owner can be changed only by <code class="literal">root</code>, and access permissions can be changed by both the <code class="literal">root</code> user and file owner.
				</p><p>
					Additionally, Red Hat Enterprise Linux supports <span class="emphasis"><em>access control lists</em></span> (<span class="strong strong"><strong>ACLs</strong></span>) for files and directories which allow permissions for specific users outside of the owner to be set. For more information about this feature, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Access_Control_Lists" title="Chapter 5. Access Control Lists">Chapter&nbsp;5, <em>Access Control Lists</em></a>.
				</p><h4 id="reserved_user_and_group_ids">Reserved User and Group IDs</h4><p>
					Red Hat Enterprise Linux reserves user and group IDs below 1000 for system users and groups. By default, the <span class="strong strong"><strong><span class="application application">User Manager</span></strong></span> does not display the system users. Reserved user and group IDs are documented in the <span class="strong strong"><strong><span class="package package">setup</span></strong></span> package. To view the documentation, use this command:
				</p><pre class="literallayout">cat /usr/share/doc/setup*/uidgid</pre><p>
					The recommended practice is to assign IDs starting at 5,000 that were not already reserved, as the reserved range can increase in the future. To make the IDs assigned to new users by default start at 5,000, change the <code class="literal">UID_MIN</code> and <code class="literal">GID_MIN</code> directives in the <code class="literal">/etc/login.defs</code> file:
				</p><pre class="literallayout">[file contents truncated]
UID_MIN         5000
[file contents truncated]
GID_MIN         5000
[file contents truncated]</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For users created before you changed <code class="literal">UID_MIN</code> and <code class="literal">GID_MIN</code> directives, UIDs will still start at the default 1000.
					</p></div></div><p>
					Even with new user and group IDs beginning with 5,000, it is recommended not to raise IDs reserved by the system above 1000 to avoid conflict with systems that retain the 1000 limit.
				</p><section class="section" id="s2-users-groups-private-groups"><div class="titlepage"><div><div><h3 class="title">4.1.1.&nbsp;User Private Groups</h3></div></div></div><p>
						Red Hat Enterprise Linux uses a <span class="emphasis"><em>user private group</em></span> (<span class="emphasis"><em>UPG</em></span>) scheme, which makes UNIX groups easier to manage. A user private group is created whenever a new user is added to the system. It has the same name as the user for which it was created and that user is the only member of the user private group.
					</p><p>
						User private groups make it safe to set default permissions for a newly created file or directory, allowing both the user and <span class="emphasis"><em>the group of that user</em></span> to make modifications to the file or directory.
					</p><p>
						The setting which determines what permissions are applied to a newly created file or directory is called a <span class="emphasis"><em>umask</em></span> and is configured in the <code class="literal">/etc/bashrc</code> file. Traditionally on UNIX-based systems, the <code class="literal command">umask</code> is set to <code class="literal command">022</code>, which allows only the user who created the file or directory to make modifications. Under this scheme, all other users, <span class="emphasis"><em>including members of the creator’s group</em></span>, are not allowed to make any modifications. However, under the UPG scheme, this "group protection" is not necessary since every user has their own private group. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-setting-default-permissions-for-new-files-using-umask" title="4.3.5. Setting Default Permissions for New Files Using umask">Section&nbsp;4.3.5, “Setting Default Permissions for New Files Using <code class="literal command">umask</code>”</a> for more information.
					</p><p>
						A list of all groups is stored in the <code class="literal">/etc/group</code> configuration file.
					</p></section><section class="section" id="s2-users-groups-shadow-utilities"><div class="titlepage"><div><div><h3 class="title">4.1.2.&nbsp;Shadow Passwords</h3></div></div></div><p>
						In environments with multiple users, it is very important to use <span class="emphasis"><em>shadow passwords</em></span> provided by the <span class="strong strong"><strong><span class="package package">shadow-utils</span></strong></span> package to enhance the security of system authentication files. For this reason, the installation program enables shadow passwords by default.
					</p><p>
						The following is a list of the advantages shadow passwords have over the traditional way of storing passwords on UNIX-based systems:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Shadow passwords improve system security by moving encrypted password hashes from the world-readable <code class="literal">/etc/passwd</code> file to <code class="literal">/etc/shadow</code>, which is readable only by the <code class="literal">root</code> user.
							</li><li class="listitem">
								Shadow passwords store information about password aging.
							</li><li class="listitem">
								Shadow passwords allow to enforce some of the security policies set in the <code class="literal">/etc/login.defs</code> file.
							</li></ul></div><p>
						Most utilities provided by the <span class="strong strong"><strong><span class="package package">shadow-utils</span></strong></span> package work properly whether or not shadow passwords are enabled. However, since password aging information is stored exclusively in the <code class="literal">/etc/shadow</code> file, some utilities and commands do not work without first enabling shadow passwords:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal command">chage</code> utility for setting password aging parameters. For details, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/chap-Hardening_Your_System_with_Tools_and_Services.html#sec-Password_Security">Password Security</a> section in the <span class="emphasis"><em><span class="citetitle citetitle">Red Hat Enterprise Linux 7 Security Guide</span></em></span>.
							</li><li class="listitem">
								The <code class="literal command">gpasswd</code> utility for administrating the <code class="literal">/etc/group</code> file.
							</li><li class="listitem">
								The <code class="literal command">usermod</code> command with the <code class="literal option">-e, --expiredate</code> or <code class="literal option">-f, --inactive</code> option.
							</li><li class="listitem">
								The <code class="literal command">useradd</code> command with the <code class="literal option">-e, --expiredate</code> or <code class="literal option">-f, --inactive</code> option.
							</li></ul></div></section></section><section class="section" id="s1-users-configui"><div class="titlepage"><div><div><h2 class="title">4.2.&nbsp;Managing Users in a Graphical Environment</h2></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">Users</span></strong></span> utility allows you to view, modify, add, and delete local users in the graphical user interface.
				</p><section class="section" id="s2-redhat-config-users-list"><div class="titlepage"><div><div><h3 class="title">4.2.1.&nbsp;Using the Users Settings Tool</h3></div></div></div><p>
						Press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">Users</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">Users</span></strong></span> settings tool appears. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the Space bar. Alternatively, you can open the <span class="strong strong"><strong><span class="application application">Users</span></strong></span> utility from the Settings menu after clicking your user name in the top right corner of the screen.
					</p><p>
						To make changes to the user accounts, first select the <span class="guibutton">Unlock</span> button and authenticate yourself as indicated by the dialog box that appears. Note that unless you have superuser privileges, the application will prompt you to authenticate as <code class="literal">root</code>. To add and remove users, select the <span class="guibutton">+</span> and <span class="guibutton">-</span> button respectively. To add a user to the administrative group <code class="literal">wheel</code>, change the Account Type from <code class="literal">Standard</code> to <code class="literal">Administrator</code>. To edit a user’s language setting, select the language and a drop-down menu appears.
					</p><div class="figure" id="fig-managing-users"><p class="title"><strong>Figure&nbsp;4.1.&nbsp;The Users Settings Tool</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/managing_users.png" class="rh_docs--zoom" title="The Users settings tool"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/managing_users.png" alt="The Users settings tool"></a></div></div></div><p>
						When a new user is created, the account is disabled until a password is set. The Password drop-down menu, shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-managing-users-password" title="Figure 4.2. The Password Menu">Figure&nbsp;4.2, “The Password Menu”</a>, contains the options to set a password by the administrator immediately, choose a password by the user at the first login, or create a guest account with no password required to log in. You can also disable or enable an account from this menu.
					</p><div class="figure" id="fig-managing-users-password"><p class="title"><strong>Figure&nbsp;4.2.&nbsp;The Password Menu</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/managing_users_password.png" alt="The Password menu"></div></div></div></section></section><section class="section" id="s1-users-tools"><div class="titlepage"><div><div><h2 class="title">4.3.&nbsp;Using Command-Line Tools</h2></div></div></div><p>
					Apart from the <span class="strong strong"><strong><span class="application application">Users</span></strong></span> settings tool described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-users-configui" title="4.2. Managing Users in a Graphical Environment">Section&nbsp;4.2, “Managing Users in a Graphical Environment”</a>, which is designed for basic managing of users, you can use command line tools for managing users and groups that are listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-users-tools" title="Table 4.1. Command line utilities for managing users and groups">Table&nbsp;4.1, “Command line utilities for managing users and groups”</a>.
				</p><div class="table" id="table-users-tools"><p class="title"><strong>Table&nbsp;4.1.&nbsp;Command line utilities for managing users and groups</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569398863008" scope="col">Utilities</th><th align="left" valign="top" id="idm140569398861920" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569398863008"> <p>
									<code class="literal command">id</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569398861920"> <p>
									Displays user and group IDs.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569398863008"> <p>
									<code class="literal command">useradd</code>, <code class="literal command">usermod</code>, <code class="literal command">userdel</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569398861920"> <p>
									Standard utilities for adding, modifying, and deleting user accounts.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569398863008"> <p>
									<code class="literal command">groupadd</code>, <code class="literal command">groupmod</code>, <code class="literal command">groupdel</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569398861920"> <p>
									Standard utilities for adding, modifying, and deleting groups.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569398863008"> <p>
									<code class="literal command">gpasswd</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569398861920"> <p>
									Utility primarily used for modification of group password in the <code class="literal">/etc/gshadow</code> file which is used by the <code class="literal command">newgrp</code> command.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569398863008"> <p>
									<code class="literal command">pwck</code>, <code class="literal command">grpck</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569398861920"> <p>
									Utilities that can be used for verification of the password, group, and associated shadow files.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569398863008"> <p>
									<code class="literal command">pwconv</code>, <code class="literal command">pwunconv</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569398861920"> <p>
									Utilities that can be used for the conversion of passwords to shadow passwords, or back from shadow passwords to standard passwords.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569398863008"> <p>
									<code class="literal command">grpconv</code>, <code class="literal command">grpunconv</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569398861920"> <p>
									Similar to the previous, these utilities can be used for conversion of shadowed information for group accounts.
								</p>
								 </td></tr></tbody></table></div></div><section class="section" id="s2-users-tools-users-add"><div class="titlepage"><div><div><h3 class="title">4.3.1.&nbsp;Adding a New User</h3></div></div></div><p>
						To add a new user to the system, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">useradd</code> <span class="emphasis"><em>options</em></span> <span class="emphasis"><em>username</em></span></pre><p>
						…where <span class="emphasis"><em>options</em></span> are command-line options as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-useradd-options" title="Table 4.2. Common useradd command-line options">Table&nbsp;4.2, “Common useradd command-line options”</a>.
					</p><p>
						By default, the <code class="literal command">useradd</code> command creates a locked user account. To unlock the account, run the following command as <code class="literal">root</code> to assign a password:
					</p><pre class="literallayout"><code class="literal command">passwd</code> <span class="emphasis"><em>username</em></span></pre><p>
						Optionally, you can set a password aging policy. See the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/chap-Hardening_Your_System_with_Tools_and_Services.html#sec-Password_Security">Password Security</a> section in the <span class="emphasis"><em><span class="citetitle citetitle">Red Hat Enterprise Linux 7 Security Guide</span></em></span>.
					</p><div class="table" id="table-useradd-options"><p class="title"><strong>Table&nbsp;4.2.&nbsp;Common useradd command-line options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569348229424" scope="col">Option</th><th align="left" valign="top" id="idm140569370333136" scope="col">&nbsp;</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-c</code> '<span class="emphasis"><em>comment</em></span>'
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										<span class="emphasis"><em>comment</em></span> can be replaced with any string. This option is generally used to specify the full name of a user.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-d</code> <span class="emphasis"><em>home_directory</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Home directory to be used instead of default <code class="literal">/home/<span class="emphasis"><em>username</em></span>/</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-e</code> <span class="emphasis"><em>date</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Date for the account to be disabled in the format YYYY-MM-DD.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-f</code> <span class="emphasis"><em>days</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Number of days after the password expires until the account is disabled. If <code class="literal">0</code> is specified, the account is disabled immediately after the password expires. If <code class="literal">-1</code> is specified, the account is not disabled after the password expires.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-g</code> <span class="emphasis"><em>group_name</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Group name or group number for the user’s default (primary) group. The group must exist prior to being specified here.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-G</code> <span class="emphasis"><em>group_list</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										List of additional (supplementary, other than default) group names or group numbers, separated by commas, of which the user is a member. The groups must exist prior to being specified here.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-m</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Create the home directory if it does not exist.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-M</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Do not create the home directory.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-N</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Do not create a user private group for the user.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-p</code> <span class="emphasis"><em>password</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										The password encrypted with <code class="literal command">crypt</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-r</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										Create a system account with a UID less than 1000 and without a home directory.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-s</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										User’s login shell, which defaults to <code class="literal command">/bin/bash</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569348229424"> <p>
										<code class="literal option">-u</code> <span class="emphasis"><em>uid</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370333136"> <p>
										User ID for the user, which must be unique and greater than 999.
									</p>
									 </td></tr></tbody></table></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The default range of IDs for system and normal users has been changed in Red Hat Enterprise Linux 7 from earlier releases. Previously, UID 1-499 was used for system users and values above for normal users. The default range for system users is now 1-999. This change might cause problems when migrating to Red Hat Enterprise Linux 7 with existing users having UIDs and GIDs between 500 and 999. The default ranges of UID and GID can be changed in the <code class="literal">/etc/login.defs</code> file.
						</p></div></div><div id="bh-users-tools-users-add-explanation" class="formalpara"><p class="title"><strong>Explaining the Process</strong></p><p>
							The following steps illustrate what happens if the command <code class="literal command">useradd juan</code> is issued on a system that has shadow passwords enabled:
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								A new line for <code class="literal">juan</code> is created in <code class="literal">/etc/passwd</code>:
							</p><pre class="literallayout">juan:x:1001:1001::/home/juan:/bin/bash</pre><p class="simpara">
								The line has the following characteristics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It begins with the user name <code class="literal">juan</code>.
									</li><li class="listitem">
										There is an <code class="literal">x</code> for the password field indicating that the system is using shadow passwords.
									</li><li class="listitem">
										A UID greater than 999 is created. Under Red Hat Enterprise Linux 7, UIDs below 1000 are reserved for system use and should not be assigned to users.
									</li><li class="listitem">
										A GID greater than 999 is created. Under Red Hat Enterprise Linux 7, GIDs below 1000 are reserved for system use and should not be assigned to users.
									</li><li class="listitem">
										The optional <span class="emphasis"><em>GECOS</em></span> information is left blank. The GECOS field can be used to provide additional information about the user, such as their full name or phone number.
									</li><li class="listitem">
										The home directory for <code class="literal">juan</code> is set to <code class="literal">/home/juan/</code>.
									</li><li class="listitem">
										The default shell is set to <code class="literal command">/bin/bash</code>.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								A new line for <code class="literal">juan</code> is created in <code class="literal">/etc/shadow</code>:
							</p><pre class="literallayout">juan:!!:14798:0:99999:7:::</pre><p class="simpara">
								The line has the following characteristics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It begins with the user name <code class="literal">juan</code>.
									</li><li class="listitem"><p class="simpara">
										Two exclamation marks (<code class="literal">!!</code>) appear in the password field of the <code class="literal">/etc/shadow</code> file, which locks the account.
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											If an encrypted password is passed using the <code class="literal option">-p</code> flag, it is placed in the <code class="literal">/etc/shadow</code> file on the new line for the user.
										</p></div></div></li><li class="listitem">
										The password is set to never expire.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								A new line for a group named <code class="literal">juan</code> is created in <code class="literal">/etc/group</code>:
							</p><pre class="literallayout">juan:x:1001:</pre><p class="simpara">
								A group with the same name as a user is called a <span class="emphasis"><em>user private group</em></span>. For more information on user private groups, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-groups-private-groups" title="4.1.1. User Private Groups">Section&nbsp;4.1.1, “User Private Groups”</a>.
							</p><p class="simpara">
								The line created in <code class="literal">/etc/group</code> has the following characteristics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It begins with the group name <code class="literal">juan</code>.
									</li><li class="listitem">
										An <code class="literal">x</code> appears in the password field indicating that the system is using shadow group passwords.
									</li><li class="listitem">
										The GID matches the one listed for <code class="literal">juan</code>'s primary group in <code class="literal">/etc/passwd</code>.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								A new line for a group named <code class="literal">juan</code> is created in <code class="literal">/etc/gshadow</code>:
							</p><pre class="literallayout">juan:!::</pre><p class="simpara">
								The line has the following characteristics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It begins with the group name <code class="literal">juan</code>.
									</li><li class="listitem">
										An exclamation mark (<code class="literal">!</code>) appears in the password field of the <code class="literal">/etc/gshadow</code> file, which locks the group.
									</li><li class="listitem">
										All other fields are blank.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								A directory for user <code class="literal">juan</code> is created in the <code class="literal">/home</code> directory:
							</p><pre class="literallayout">~]# ls -ld /home/juan
drwx------. 4 juan juan 4096 Mar 3 18:23 /home/juan</pre><p class="simpara">
								This directory is owned by user <code class="literal">juan</code> and group <code class="literal">juan</code>. It has <span class="emphasis"><em>read</em></span>, <span class="emphasis"><em>write</em></span>, and <span class="emphasis"><em>execute</em></span> privileges <span class="emphasis"><em>only</em></span> for the user <code class="literal">juan</code>. All other permissions are denied.
							</p></li><li class="listitem"><p class="simpara">
								The files within the <code class="literal">/etc/skel/</code> directory (which contain default user settings) are copied into the new <code class="literal">/home/juan/</code> directory:
							</p><pre class="literallayout">~]# ls -la /home/juan
total 28
drwx------. 4 juan juan 4096 Mar 3 18:23 .
drwxr-xr-x. 5 root root 4096 Mar 3 18:23 ..
-rw-r--r--. 1 juan juan  18 Jun 22 2010 .bash_logout
-rw-r--r--. 1 juan juan 176 Jun 22 2010 .bash_profile
-rw-r--r--. 1 juan juan 124 Jun 22 2010 .bashrc
drwxr-xr-x. 4 juan juan 4096 Nov 23 15:09 .mozilla</pre></li></ol></div><p>
						At this point, a locked account called <code class="literal">juan</code> exists on the system. To activate it, the administrator must next assign a password to the account using the <code class="literal command">passwd</code> command and, optionally, set password aging guidelines (see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/chap-Hardening_Your_System_with_Tools_and_Services.html#sec-Password_Security">Password Security</a> section in the <span class="emphasis"><em><span class="citetitle citetitle">Red Hat Enterprise Linux 7 Security Guide</span></em></span> for details).
					</p></section><section class="section" id="s2-users-tools-groups-add"><div class="titlepage"><div><div><h3 class="title">4.3.2.&nbsp;Adding a New Group</h3></div></div></div><p>
						To add a new group to the system, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout">groupadd <span class="emphasis"><em>options</em></span> <span class="emphasis"><em>group_name</em></span></pre><p>
						…where <span class="emphasis"><em>options</em></span> are command-line options as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-groupadd-options" title="Table 4.3. Common groupadd command-line options">Table&nbsp;4.3, “Common groupadd command-line options”</a>.
					</p><div class="table" id="table-groupadd-options"><p class="title"><strong>Table&nbsp;4.3.&nbsp;Common groupadd command-line options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569389737200" scope="col">Option</th><th align="left" valign="top" id="idm140569389736112" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569389737200"> <p>
										<code class="literal option">-f</code>, <code class="literal option">--force</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569389736112"> <p>
										When used with <code class="literal option">-g</code> <span class="emphasis"><em>gid</em></span> and <span class="emphasis"><em>gid</em></span> already exists, <code class="literal command">groupadd</code> will choose another unique <span class="emphasis"><em>gid</em></span> for the group.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569389737200"> <p>
										<code class="literal option">-g</code> <span class="emphasis"><em>gid</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569389736112"> <p>
										Group ID for the group, which must be unique and greater than 999.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569389737200"> <p>
										<code class="literal option">-K</code>, <code class="literal option">--key</code> <span class="emphasis"><em>key</em></span>=<span class="emphasis"><em>value</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569389736112"> <p>
										Override <code class="literal">/etc/login.defs</code> defaults.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569389737200"> <p>
										<code class="literal option">-o</code>, <code class="literal option">--non-unique</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569389736112"> <p>
										Allows creating groups with duplicate GID.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569389737200"> <p>
										<code class="literal option">-p</code>, <code class="literal option">--password</code> <span class="emphasis"><em>password</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569389736112"> <p>
										Use this encrypted password for the new group.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569389737200"> <p>
										<code class="literal option">-r</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569389736112"> <p>
										Create a system group with a GID less than 1000.
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="s2-users-to-existing-groups"><div class="titlepage"><div><div><h3 class="title">4.3.3.&nbsp;Adding an Existing User to an Existing Group</h3></div></div></div><p>
						Use the <code class="literal command">usermod</code> utility to add an already existing user to an already existing group.
					</p><p>
						Various options of <code class="literal command">usermod</code> have different impact on user’s primary group and on his or her supplementary groups.
					</p><p>
						To override user’s primary group, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# usermod -g <span class="emphasis"><em>group_name</em></span> <span class="emphasis"><em>user_name</em></span></pre><p>
						To override user’s supplementary groups, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# usermod -G <span class="emphasis"><em>group_name1</em></span>,<span class="emphasis"><em>group_name2</em></span>,... <span class="emphasis"><em>user_name</em></span></pre><p>
						Note that in this case all previous supplementary groups of the user are replaced by the new group or several new groups.
					</p><p>
						To add one or more groups to user’s supplementary groups, run one of the following commands as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# usermod -aG <span class="emphasis"><em>group_name1</em></span>,<span class="emphasis"><em>group_name2</em></span>,... <span class="emphasis"><em>user_name</em></span></pre><pre class="literallayout">~]# usermod --append -G <span class="emphasis"><em>group_name1</em></span>,<span class="emphasis"><em>group_name2</em></span>,... <span class="emphasis"><em>user_name</em></span></pre><p>
						Note that in this case the new group is added to user’s current supplementary groups.
					</p></section><section class="section" id="s2-users-tools-groups-directories"><div class="titlepage"><div><div><h3 class="title">4.3.4.&nbsp;Creating Group Directories</h3></div></div></div><p>
						System administrators usually like to create a group for each major project and assign people to the group when they need to access that project’s files. With this traditional scheme, file management is difficult; when someone creates a file, it is associated with the primary group to which they belong. When a single person works on multiple projects, it becomes difficult to associate the right files with the right group. However, with the UPG scheme, groups are automatically assigned to files created within a directory with the <span class="emphasis"><em>setgid</em></span> bit set. The <span class="emphasis"><em>setgid</em></span> bit makes managing group projects that share a common directory very simple because any files a user creates within the directory are owned by the group that owns the directory.
					</p><p>
						For example, a group of people need to work on files in the <code class="literal">/opt/myproject/</code> directory. Some people are trusted to modify the contents of this directory, but not everyone.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								As <code class="literal">root</code>, create the <code class="literal">/opt/myproject/</code> directory by typing the following at a shell prompt:
							</p><pre class="literallayout"><code class="literal command">mkdir /opt/myproject</code></pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">myproject</code> group to the system:
							</p><pre class="literallayout"><code class="literal command">groupadd myproject</code></pre></li><li class="listitem"><p class="simpara">
								Associate the contents of the <code class="literal">/opt/myproject/</code> directory with the <code class="literal">myproject</code> group:
							</p><pre class="literallayout"><code class="literal command">chown root:myproject /opt/myproject</code></pre></li><li class="listitem"><p class="simpara">
								Allow users in the group to create files within the directory and set the <span class="emphasis"><em>setgid</em></span> bit:
							</p><pre class="literallayout"><code class="literal command">chmod 2775 /opt/myproject</code></pre><p class="simpara">
								At this point, all members of the <code class="literal">myproject</code> group can create and edit files in the <code class="literal">/opt/myproject/</code> directory without the administrator having to change file permissions every time users write new files. To verify that the permissions have been set correctly, run the following command:
							</p><pre class="literallayout">~]# ls -ld /opt/myproject
drwxrwsr-x. 3 root myproject 4096 Mar 3 18:31 /opt/myproject</pre></li><li class="listitem"><p class="simpara">
								Add users to the <code class="literal">myproject</code> group:
							</p><pre class="literallayout"><code class="literal command">usermod -aG myproject <span class="emphasis"><em>username</em></span></code></pre></li></ol></div></section><section class="section" id="s2-setting-default-permissions-for-new-files-using-umask"><div class="titlepage"><div><div><h3 class="title">4.3.5.&nbsp;Setting Default Permissions for New Files Using <code class="literal command">umask</code></h3></div></div></div><p>
						When a process creates a file, the file has certain default permissions, for example, <code class="literal">-rw-rw-r--</code>. These initial permissions are partially defined by the <span class="emphasis"><em>file mode creation mask</em></span>, also called <span class="emphasis"><em>file permission mask</em></span> or <span class="emphasis"><em>umask</em></span>. Every process has its own umask, for example, <span class="strong strong"><strong><span class="application application">bash</span></strong></span> has <span class="emphasis"><em>umask</em></span> <code class="literal">0022</code> by default. Process <span class="emphasis"><em>umask</em></span> can be changed.
					</p><h5 id="what_umask_consists_of">What umask consists of</h5><p>
						A <span class="emphasis"><em>umask</em></span> consists of bits corresponding to standard file permissions. For example, for <span class="emphasis"><em>umask</em></span> <code class="literal">0137</code>, the digits mean that:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">0</code> = no meaning, it is always <code class="literal">0</code> (umask does not affect special bits)
							</li><li class="listitem">
								<code class="literal">1</code> = for owner permissions, the execute bit is set
							</li><li class="listitem">
								<code class="literal">3</code> = for group permissions, the execute and write bits are set
							</li><li class="listitem">
								<code class="literal">7</code> = for others permissions, the execute, write, and read bits are set
							</li></ul></div><p>
						<span class="emphasis"><em>Umasks</em></span> can be represented in binary, octal, or symbolic notation. For example, the octal representation <code class="literal">0137</code> equals symbolic representation <code class="literal">u=rw-,g=r--,o=---</code>. Symbolic notation specification is the reverse of the octal notation specification: it shows the allowed permissions, not the prohibited permissions.
					</p><h5 id="how_umask_works">How umask works</h5><p>
						<span class="emphasis"><em>Umask</em></span> <span class="emphasis"><em>prohibits permissions</em></span> from being set for a file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								When a bit is set in <span class="emphasis"><em>umask</em></span>, it is unset in the file.
							</li><li class="listitem">
								When a bit is not set in <span class="emphasis"><em>umask</em></span>, it can be set in the file, depending on other factors.
							</li></ul></div><p>
						The following figure shows how <span class="emphasis"><em>umask</em></span> <code class="literal">0137</code> affects creating a new file.
					</p><div class="figure" id="fig-umask_example"><p class="title"><strong>Figure&nbsp;4.3.&nbsp;Applying umask when creating a file</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/Users_Groups-Umask_Example.png" class="rh_docs--zoom" title="Users Groups Umask Example"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/Users_Groups-Umask_Example.png" alt="Users Groups Umask Example"></a></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							For security reasons, a regular file cannot have execute permissions by default. Therefore, even if <span class="emphasis"><em>umask</em></span> is <code class="literal">0000</code>, which does not prohibit any permissions, a new regular file still does not have execute permissions. However, directories can be created with execute permissions:
						</p><pre class="literallayout">[john@server tmp]$ umask 0000
[john@server tmp]$ touch file
[john@server tmp]$ mkdir directory
[john@server tmp]$ ls -lh .
total 0
<span class="emphasis"><em>drwxrwxrwx.</em></span> 2 john john 40 Nov 2 13:17 directory
<span class="emphasis"><em>-rw-rw-rw-.</em></span> 1 john john 0 Nov 2 13:17 file</pre></div></div><section class="section" id="sect-umask_in_shells"><div class="titlepage"><div><div><h4 class="title">4.3.5.1.&nbsp;Managing umask in Shells</h4></div></div></div><p>
							For popular shells, such as <code class="literal">bash</code>, <code class="literal">ksh</code>, <code class="literal">zsh</code> and <code class="literal">tcsh</code>, <span class="emphasis"><em>umask</em></span> is managed using the <code class="literal">umask</code> shell <code class="literal command">builtin</code>. Processes started from shell inherit its umask.
						</p><h6 id="displaying_the_current_mask">Displaying the current mask</h6><p>
							To show the current <span class="emphasis"><em>umask</em></span> in octal notation:
						</p><pre class="literallayout">~]$ <code class="literal command">umask</code>
0022</pre><p>
							To show the current <span class="emphasis"><em>umask</em></span> in symbolic notation:
						</p><pre class="literallayout">~]$ <code class="literal command">umask -S</code>
u=rwx,g=rx,o=rx</pre><h6 id="setting_mask_in_shell_using_umask">Setting mask in shell using umask</h6><p>
							To set <span class="emphasis"><em>umask</em></span> for the current shell session using octal notation run:
						</p><pre class="literallayout">~]$ umask octal_mask</pre><p>
							Substitute <span class="emphasis"><em>octal_mask</em></span> with four or less digits from <code class="literal">0</code> to <code class="literal">7</code>. When three or less digits are provided, permissions are set as if the command contained leading zeros. For example, <span class="emphasis"><em>umask</em></span> <code class="literal">7</code> translates to <code class="literal">0007</code>.
						</p><div class="example" id="ex-setting_umask_octal"><p class="title"><strong>Example&nbsp;4.1.&nbsp;Setting umask Using Octal Notation</strong></p><div class="example-contents"><p>
								To prohibit new files from having write and execute permissions for owner and group, and from having any permissions for others:
							</p><pre class="literallayout">~]$ <code class="literal command">umask 0337</code></pre><p>
								Or simply:
							</p><pre class="literallayout">~]$ <code class="literal command">umask 337</code></pre></div></div><p>
							To set <span class="emphasis"><em>umask</em></span> for the current shell session using symbolic notation:
						</p><pre class="literallayout">~]$ umask -S symbolic_mask</pre><div class="example" id="ex-setting_umask_symbolic"><p class="title"><strong>Example&nbsp;4.2.&nbsp;Setting umask Using Symbolic Notation</strong></p><div class="example-contents"><p>
								To set <span class="emphasis"><em>umask</em></span> <code class="literal">0337</code> using symbolic notation:
							</p><pre class="literallayout">~]$ <code class="literal command">umask -S u=r,g=r,o=</code></pre></div></div><h6 id="working_with_the_default_shell_umask">Working with the default shell umask</h6><p>
							Shells usually have a configuration file where their default <span class="emphasis"><em>umask</em></span> is set. For <code class="literal">bash</code>, it is <code class="literal">/etc/bashrc</code>. To show the default <code class="literal">bash</code> umask:
						</p><pre class="literallayout">~]$ <code class="literal command">grep -i -B 1 umask /etc/bashrc</code></pre><p>
							The output shows if <span class="emphasis"><em>umask</em></span> is set, either using the <code class="literal command">umask</code> command or the <code class="literal">UMASK</code> variable. In the following example, <span class="emphasis"><em>umask</em></span> is set to <code class="literal">022</code> using the <code class="literal command">umask</code> command:
						</p><pre class="literallayout">~]$ grep -i -B 1 umask /etc/bashrc
  # By default, we want <span class="emphasis"><em>umask</em></span> to get set. This sets it for non-login shell.
--
  if [ $UID -gt 199 ] &amp;&amp; [ “id -gn” = “id -un” ]; then
    umask 002
  else
    <span class="emphasis"><em>umask 022</em></span></pre><p>
							To change the default <span class="emphasis"><em>umask</em></span> for <code class="literal">bash</code>, change the <code class="literal command">umask</code> command call or the <code class="literal">UMASK</code> variable assignment in <code class="literal">/etc/bashrc</code>. This example changes the default <span class="emphasis"><em>umask</em></span> to <code class="literal">0227</code>:
						</p><pre class="literallayout">  if [ $UID -gt 199 ] &amp;&amp; [ “id -gn” = “id -un” ]; then
    umask 002
  else
    <span class="emphasis"><em>umask 227</em></span></pre><h6 id="working_with_the_default_shell_umask_of_a_specific_user">Working with the default shell umask of a specific user</h6><p>
							By default, <code class="literal">bash</code> <span class="emphasis"><em>umask</em></span> of a new user defaults to the one defined in <code class="literal">/etc/bashrc</code>.
						</p><p>
							To change <code class="literal">bash</code> <span class="emphasis"><em>umask</em></span>for a particular user, add a call to the <code class="literal command">umask</code> command in <code class="literal">$HOME/.bashrc</code> file of that user. For example, to change <code class="literal">bash</code> <span class="emphasis"><em>umask</em></span> of user <code class="literal">john</code> to <code class="literal">0227</code>:
						</p><pre class="literallayout">john@server ~]$ <code class="literal command">echo 'umask 227' &gt;&gt; /home/john/.bashrc</code></pre><h6 id="setting_default_permissions_for_newly_created_home_directories">Setting default permissions for newly created home directories</h6><p>
							To change permissions with which user home directories are created, change the <code class="literal">UMASK</code> variable in the <code class="literal">/etc/login.defs</code> file:
						</p><pre class="literallayout"># The permission mask is initialized to this value. If not specified,
# the permission mask will be initialized to 022.
UMASK <span class="emphasis"><em>077</em></span></pre></section></section></section><section class="section" id="sect-Users_and_Groups-Resources"><div class="titlepage"><div><div><h2 class="title">4.4.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on how to manage users and groups on Red Hat Enterprise Linux, see the resources listed below.
				</p><h4 id="sect-Users_and_Groups-Resources-Installed">Installed Documentation</h4><p>
					For information about various utilities for managing users and groups, see the following manual pages:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">useradd</code>(8) — The manual page for the <code class="literal command">useradd</code> command documents how to use it to create new users.
						</li><li class="listitem">
							<code class="literal">userdel</code>(8) — The manual page for the <code class="literal command">userdel</code> command documents how to use it to delete users.
						</li><li class="listitem">
							<code class="literal">usermod</code>(8) — The manual page for the <code class="literal command">usermod</code> command documents how to use it to modify users.
						</li><li class="listitem">
							<code class="literal">groupadd</code>(8) — The manual page for the <code class="literal command">groupadd</code> command documents how to use it to create new groups.
						</li><li class="listitem">
							<code class="literal">groupdel</code>(8) — The manual page for the <code class="literal command">groupdel</code> command documents how to use it to delete groups.
						</li><li class="listitem">
							<code class="literal">groupmod</code>(8) — The manual page for the <code class="literal command">groupmod</code> command documents how to use it to modify group membership.
						</li><li class="listitem">
							<code class="literal">gpasswd</code>(1) — The manual page for the <code class="literal command">gpasswd</code> command documents how to manage the <code class="literal">/etc/group</code> file.
						</li><li class="listitem">
							<code class="literal">grpck</code>(8) — The manual page for the <code class="literal command">grpck</code> command documents how to use it to verify the integrity of the <code class="literal">/etc/group</code> file.
						</li><li class="listitem">
							<code class="literal">pwck</code>(8) — The manual page for the <code class="literal command">pwck</code> command documents how to use it to verify the integrity of the <code class="literal">/etc/passwd</code> and <code class="literal">/etc/shadow</code> files.
						</li><li class="listitem">
							<code class="literal">pwconv</code>(8) — The manual page for the <code class="literal command">pwconv</code>, <code class="literal command">pwunconv</code>, <code class="literal command">grpconv</code>, and <code class="literal command">grpunconv</code> commands documents how to convert shadowed information for passwords and groups.
						</li><li class="listitem">
							<code class="literal">id</code>(1) — The manual page for the <code class="literal command">id</code> command documents how to display user and group IDs.
						</li><li class="listitem">
							<code class="literal">umask</code>(2) — The manual page for the <code class="literal command">umask</code> command documents how to work with the file mode creation mask.
						</li></ul></div><p>
					For information about related configuration files, see:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">group</code>(5) — The manual page for the <code class="literal">/etc/group</code> file documents how to use this file to define system groups.
						</li><li class="listitem">
							<code class="literal">passwd</code>(5) — The manual page for the <code class="literal">/etc/passwd</code> file documents how to use this file to define user information.
						</li><li class="listitem">
							<code class="literal">shadow</code>(5) — The manual page for the <code class="literal">/etc/shadow</code> file documents how to use this file to set passwords and account expiration information for the system.
						</li></ul></div><h4 id="brid-Users_and_Groups-Resources-Online">Online Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red Hat Enterprise Linux 7 Security Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Security Guide</span></em></span> for Red Hat Enterprise Linux 7 provides additional information how to ensure password security and secure the workstation by enabling password aging and user account locking.
						</li></ul></div><h4 id="brid-Users_and_Groups-Resources-Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li></ul></div></section></section><section class="chapter" id="ch-Access_Control_Lists"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;5.&nbsp;Access Control Lists</h2></div></div></div><p>
				Files and directories have permission sets for the owner of the file, the group associated with the file, and all other users for the system. However, these permission sets have limitations. For example, different permissions cannot be configured for different users. Thus, <span class="emphasis"><em>Access Control Lists</em></span> (ACLs) were implemented.
			</p><p>
				The Red Hat Enterprise Linux kernel provides ACL support for the ext3 file system and NFS-exported file systems. ACLs are also recognized on ext3 file systems accessed via Samba.
			</p><p>
				Along with support in the kernel, the <code class="literal">acl</code> package is required to implement ACLs. It contains the utilities used to add, modify, remove, and retrieve ACL information.
			</p><p>
				The <code class="literal command">cp</code> and <code class="literal command">mv</code> commands copy or move any ACLs associated with files and directories.
			</p><section class="section" id="s1-acls-mounting"><div class="titlepage"><div><div><h2 class="title">5.1.&nbsp;Mounting File Systems</h2></div></div></div><p>
					Before using ACLs for a file or directory, the partition for the file or directory must be mounted with ACL support. If it is a local ext3 file system, it can mounted with the following command:
				</p><p>
					<code class="literal command">mount -t ext3 -o acl <span class="emphasis"><em>device-name</em></span> <span class="emphasis"><em>partition</em></span></code>
				</p><p>
					For example:
				</p><p>
					<code class="literal command">mount -t ext3 -o acl /dev/VolGroup00/LogVol02 /work</code>
				</p><p>
					Alternatively, if the partition is listed in the <code class="literal">/etc/fstab</code> file, the entry for the partition can include the <code class="literal">acl</code> option:
				</p><pre class="literallayout">LABEL=/work   /work    ext3  acl    1 2</pre><p>
					If an ext3 file system is accessed via Samba and ACLs have been enabled for it, the ACLs are recognized because Samba has been compiled with the <code class="literal option">--with-acl-support</code> option. No special flags are required when accessing or mounting a Samba share.
				</p><section class="section" id="acls-mounting-nfs"><div class="titlepage"><div><div><h3 class="title">5.1.1.&nbsp;NFS</h3></div></div></div><p>
						By default, if the file system being exported by an NFS server supports ACLs and the NFS client can read ACLs, ACLs are utilized by the client system.
					</p><p>
						To disable ACLs on NFS shares when configuring the server, include the <code class="literal">no_acl</code> option in the <code class="literal">/etc/exports</code> file. To disable ACLs on an NFS share when mounting it on a client, mount it with the <code class="literal">no_acl</code> option via the command line or the <code class="literal">/etc/fstab</code> file.
					</p></section></section><section class="section" id="acls-setting"><div class="titlepage"><div><div><h2 class="title">5.2.&nbsp;Setting Access ACLs</h2></div></div></div><p>
					There are two types of ACLs: <span class="emphasis"><em>access ACLs</em></span> and <span class="emphasis"><em>default ACLs</em></span>. An access ACL is the access control list for a specific file or directory. A default ACL can only be associated with a directory; if a file within the directory does not have an access ACL, it uses the rules of the default ACL for the directory. Default ACLs are optional.
				</p><p>
					ACLs can be configured:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Per user
						</li><li class="listitem">
							Per group
						</li><li class="listitem">
							Via the effective rights mask
						</li><li class="listitem">
							For users not in the user group for the file
						</li></ol></div><p>
					The <code class="literal command">setfacl</code> utility sets ACLs for files and directories. Use the <code class="literal">-m</code> option to add or modify the ACL of a file or directory:
				</p><pre class="literallayout"># setfacl -m <span class="emphasis"><em>rules</em></span> <span class="emphasis"><em>files</em></span></pre><p>
					Rules (<span class="emphasis"><em>rules</em></span>) must be specified in the following formats. Multiple rules can be specified in the same command if they are separated by commas.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">u:<span class="emphasis"><em>uid</em></span>:<span class="emphasis"><em>perms</em></span></code></span></dt><dd>
								Sets the access ACL for a user. The user name or UID may be specified. The user may be any valid user on the system.
							</dd><dt><span class="term"><code class="literal">g:<span class="emphasis"><em>gid</em></span>:<span class="emphasis"><em>perms</em></span></code></span></dt><dd>
								Sets the access ACL for a group. The group name or GID may be specified. The group may be any valid group on the system.
							</dd><dt><span class="term"><code class="literal">m:<span class="emphasis"><em>perms</em></span></code></span></dt><dd>
								Sets the effective rights mask. The mask is the union of all permissions of the owning group and all of the user and group entries.
							</dd><dt><span class="term"><code class="literal">o:<span class="emphasis"><em>perms</em></span></code></span></dt><dd>
								Sets the access ACL for users other than the ones in the group for the file.
							</dd></dl></div><p>
					Permissions (<span class="emphasis"><em>perms</em></span>) must be a combination of the characters <code class="literal">r</code>, <code class="literal">w</code>, and <code class="literal">x</code> for read, write, and execute.
				</p><p>
					If a file or directory already has an ACL, and the <code class="literal command">setfacl</code> command is used, the additional rules are added to the existing ACL or the existing rule is modified.
				</p><div class="example" id="idm140569385430752"><p class="title"><strong>Example&nbsp;5.1.&nbsp;Give read and write permissions</strong></p><div class="example-contents"><p>
						For example, to give read and write permissions to user andrius:
					</p><pre class="literallayout"># setfacl -m u:andrius:rw /project/somefile</pre></div></div><p>
					To remove all the permissions for a user, group, or others, use the <code class="literal">-x</code> option and do not specify any permissions:
				</p><pre class="literallayout"># setfacl -x <span class="emphasis"><em>rules</em></span> <span class="emphasis"><em>files</em></span></pre><div class="example" id="idm140569377570368"><p class="title"><strong>Example&nbsp;5.2.&nbsp;Remove all permissions</strong></p><div class="example-contents"><p>
						For example, to remove all permissions from the user with UID 500:
					</p><pre class="literallayout"># setfacl -x u:500 /project/somefile</pre></div></div></section><section class="section" id="acls-setting-default"><div class="titlepage"><div><div><h2 class="title">5.3.&nbsp;Setting Default ACLs</h2></div></div></div><p>
					To set a default ACL, add <code class="literal">d:</code> before the rule and specify a directory instead of a file name.
				</p><div class="example" id="idm140569377565728"><p class="title"><strong>Example&nbsp;5.3.&nbsp;Setting default ACLs</strong></p><div class="example-contents"><p>
						For example, to set the default ACL for the <code class="literal">/share/</code> directory to read and execute for users not in the user group (an access ACL for an individual file can override it):
					</p><pre class="literallayout"># setfacl -m d:o:rx /share</pre></div></div></section><section class="section" id="acls-retrieving"><div class="titlepage"><div><div><h2 class="title">5.4.&nbsp;Retrieving ACLs</h2></div></div></div><p>
					To determine the existing ACLs for a file or directory, use the <code class="literal command">getfacl</code> command. In the example below, the <code class="literal command">getfacl</code> is used to determine the existing ACLs for a file.
				</p><div class="example" id="idm140569382113808"><p class="title"><strong>Example&nbsp;5.4.&nbsp;Retrieving ACLs</strong></p><div class="example-contents"><pre class="literallayout"># getfacl home/john/picture.png</pre><p>
						The above command returns the following output:
					</p><pre class="literallayout"># file: home/john/picture.png
# owner: john
# group: john
user::rw-
group::r--
other::r--</pre><p>
						If a directory with a default ACL is specified, the default ACL is also displayed as illustrated below. For example, <code class="literal command">getfacl home/sales/</code> will display similar output:
					</p><pre class="literallayout"># file: home/sales/
# owner: john
# group: john
user::rw-
user:barryg:r--
group::r--
mask::r--
other::r--
default:user::rwx
default:user:john:rwx
default:group::r-x
default:mask::rwx
default:other::r-x</pre></div></div></section><section class="section" id="acls-archiving"><div class="titlepage"><div><div><h2 class="title">5.5.&nbsp;Archiving File Systems With ACLs</h2></div></div></div><p>
					By default, the <code class="literal command">dump</code> command now preserves ACLs during a backup operation. When archiving a file or file system with <code class="literal command">tar</code>, use the <code class="literal command">--acls</code> option to preserve ACLs. Similarly, when using <code class="literal command">cp</code> to copy files with ACLs, include the <code class="literal command">--preserve=mode</code> option to ensure that ACLs are copied across too. In addition, the <code class="literal command">-a</code> option (equivalent to <code class="literal command">-dR --preserve=all</code>) of <code class="literal command">cp</code> also preserves ACLs during a backup along with other information such as timestamps, SELinux contexts, and the like. For more information about <code class="literal command">dump</code>, <code class="literal command">tar</code>, or <code class="literal command">cp</code>, refer to their respective <code class="literal command">man</code> pages.
				</p><p>
					The <code class="literal command">star</code> utility is similar to the <code class="literal command">tar</code> utility in that it can be used to generate archives of files; however, some of its options are different. Refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tb-star-options" title="Table 5.1. Command Line Options for star">Table&nbsp;5.1, “Command Line Options for <code class="literal command">star</code>”</a> for a listing of more commonly used options. For all available options, refer to <code class="literal command">man star</code>. The <code class="literal">star</code> package is required to use this utility.
				</p><div class="table" id="tb-star-options"><p class="title"><strong>Table&nbsp;5.1.&nbsp;Command Line Options for <code class="literal command">star</code></strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569383069536" scope="col">Option</th><th align="left" valign="top" id="idm140569383068448" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-c</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Creates an archive file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-n</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Do not extract the files; use in conjunction with <code class="literal option">-x</code> to show what extracting the files does.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-r</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Replaces files in the archive. The files are written to the end of the archive file, replacing any files with the same path and file name.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-t</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Displays the contents of the archive file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-u</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Updates the archive file. The files are written to the end of the archive if they do not exist in the archive, or if the files are newer than the files of the same name in the archive. This option only works if the archive is a file or an unblocked tape that may backspace.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-x</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Extracts the files from the archive. If used with <code class="literal option">-U</code> and a file in the archive is older than the corresponding file on the file system, the file is not extracted.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-help</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Displays the most important options.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-xhelp</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Displays the least important options.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-/</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									Do not strip leading slashes from file names when extracting the files from an archive. By default, they are stripped when files are extracted.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569383069536"> <p>
									<code class="literal option">-acl</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569383068448"> <p>
									When creating or extracting, archives or restores any ACLs associated with the files and directories.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="acls-compat-older"><div class="titlepage"><div><div><h2 class="title">5.6.&nbsp;Compatibility with Older Systems</h2></div></div></div><p>
					If an ACL has been set on any file on a given file system, that file system has the <code class="literal command">ext_attr</code> attribute. This attribute can be seen using the following command:
				</p><pre class="literallayout"># tune2fs -l <span class="emphasis"><em>filesystem-device</em></span></pre><p>
					A file system that has acquired the <code class="literal command">ext_attr</code> attribute can be mounted with older kernels, but those kernels do not enforce any ACLs which have been set.
				</p><p>
					Versions of the <code class="literal command">e2fsck</code> utility included in version 1.22 and higher of the <code class="literal">e2fsprogs</code> package (including the versions in Red Hat Enterprise Linux 2.1 and 4) can check a file system with the <code class="literal command">ext_attr</code> attribute. Older versions refuse to check it.
				</p></section><section class="section" id="acls-additional-resources"><div class="titlepage"><div><div><h2 class="title">5.7.&nbsp;ACL References</h2></div></div></div><p>
					Refer to the following man pages for more information.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal command">man acl</code> — Description of ACLs
						</li><li class="listitem">
							<code class="literal command">man getfacl</code> — Discusses how to get file access control lists
						</li><li class="listitem">
							<code class="literal command">man setfacl</code> — Explains how to set file access control lists
						</li><li class="listitem">
							<code class="literal command">man star</code> — Explains more about the <code class="literal command">star</code> utility and its many options
						</li></ul></div></section></section><section class="chapter" id="chap-Gaining_Privileges"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;6.&nbsp;Gaining Privileges</h2></div></div></div><p>
				System administrators, and in some cases users, need to perform certain tasks with administrative access. Accessing the system as the <code class="literal">root</code> user is potentially dangerous and can lead to widespread damage to the system and data. This chapter covers ways to gain administrative privileges using the <code class="literal command">setuid</code> programs such as <code class="literal command">su</code> and <code class="literal command">sudo</code>. These programs allow specific users to perform tasks which would normally be available only to the <code class="literal">root</code> user while maintaining a higher level of control and system security.
			</p><p>
				See the <span class="emphasis"><em><span class="citetitle citetitle">Red Hat Enterprise Linux 7 Security Guide</span></em></span> for more information on administrative controls, potential dangers and ways to prevent data loss resulting from improper use of privileged access.
			</p><section class="section" id="sect-Gaining_Privileges-The_su_Command"><div class="titlepage"><div><div><h2 class="title">6.1.&nbsp;Configuring Administrative Access Using the su Utility</h2></div></div></div><p>
					When a user executes the <code class="literal command">su</code> command, they are prompted for the <code class="literal">root</code> password and, after authentication, are given a <code class="literal">root</code> shell prompt.
				</p><p>
					Once logged in using the <code class="literal command">su</code> command, the user <span class="emphasis"><em>is</em></span> the <code class="literal">root</code> user and has absolute administrative access to the system. Note that this access is still subject to the restrictions imposed by SELinux, if it is enabled. In addition, once a user has become <code class="literal">root</code>, it is possible for them to use the <code class="literal command">su</code> command to change to any other user on the system without being prompted for a password.
				</p><p>
					Because this program is so powerful, administrators within an organization may want to limit who has access to the command.
				</p><p>
					One of the simplest ways to do this is to add users to the special administrative group called <span class="emphasis"><em>wheel</em></span>. To do this, type the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# usermod -a -G wheel <span class="emphasis"><em>username</em></span></pre><p>
					In the previous command, replace <span class="emphasis"><em>username</em></span> with the user name you want to add to the <code class="literal">wheel</code> group.
				</p><p>
					You can also use the <span class="strong strong"><strong><span class="application application">Users</span></strong></span> settings tool to modify group memberships, as follows. Note that you need administrator privileges to perform this procedure.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">Users</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">Users</span></strong></span> settings tool appears. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the <span class="keycap"><strong>Spacebar</strong></span>.
						</li><li class="listitem">
							To enable making changes, click the <span class="guibutton">Unlock</span> button, and enter a valid administrator password.
						</li><li class="listitem">
							Click a user icon in the left column to display the user’s properties in the right pane.
						</li><li class="listitem">
							Change the Account Type from <code class="literal">Standard</code> to <code class="literal">Administrator</code>. This will add the user to the <code class="literal">wheel</code> group.
						</li></ol></div><p>
					See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-users-configui" title="4.2. Managing Users in a Graphical Environment">Section&nbsp;4.2, “Managing Users in a Graphical Environment”</a> for more information about the <span class="strong strong"><strong><span class="application application">Users</span></strong></span> tool.
				</p><p>
					After you add the desired users to the <code class="literal">wheel</code> group, it is advisable to only allow these specific users to use the <code class="literal command">su</code> command. To do this, edit the <span class="emphasis"><em>Pluggable Authentication Module</em></span> (PAM) configuration file for <code class="literal command">su</code>, <code class="literal">/etc/pam.d/su</code>. Open this file in a text editor and uncomment the following line by removing the <code class="literal">#</code> character:
				</p><pre class="literallayout">#auth      required    pam_wheel.so use_uid</pre><p>
					This change means that only members of the administrative group <code class="literal">wheel</code> can switch to another user using the <code class="literal command">su</code> command.
				</p></section><section class="section" id="sect-Gaining_Privileges-The_sudo_Command"><div class="titlepage"><div><div><h2 class="title">6.2.&nbsp;Configuring Administrative Access Using the sudo Utility</h2></div></div></div><p>
					The <code class="literal command">sudo</code> command offers another approach to giving users administrative access. When trusted users precede an administrative command with <code class="literal command">sudo</code>, they are prompted for <span class="emphasis"><em>their own</em></span> password. Then, when they have been authenticated and assuming that the command is permitted, the administrative command is executed as if they were the <code class="literal">root</code> user.
				</p><p>
					The basic format of the <code class="literal command">sudo</code> command is as follows:
				</p><pre class="literallayout"><code class="literal command">sudo</code> <span class="emphasis"><em>command</em></span></pre><p>
					In the above example, <span class="emphasis"><em>command</em></span> would be replaced by a command normally reserved for the <code class="literal">root</code> user, such as <code class="literal command">mount</code>.
				</p><p>
					The <code class="literal command">sudo</code> command allows for a high degree of flexibility. For instance, only users listed in the <code class="literal">/etc/sudoers</code> configuration file are allowed to use the <code class="literal command">sudo</code> command and the command is executed in <span class="emphasis"><em>the user’s</em></span> shell, not a <code class="literal">root</code> shell. This means the <code class="literal">root</code> shell can be completely disabled as shown in the <span class="emphasis"><em><span class="citetitle citetitle">Red Hat Enterprise Linux 7 Security Guide</span></em></span>.
				</p><p>
					Each successful authentication using the <code class="literal command">sudo</code> command is logged to the file <code class="literal">/var/log/messages</code> and the command issued along with the issuer’s user name is logged to the file <code class="literal">/var/log/secure</code>. If additional logging is required, use the <code class="literal">pam_tty_audit</code> module to enable TTY auditing for specified users by adding the following line to your <code class="literal">/etc/pam.d/system-auth</code> file:
				</p><pre class="literallayout">session required pam_tty_audit.so disable=<span class="emphasis"><em>pattern</em></span> enable=<span class="emphasis"><em>pattern</em></span></pre><p>
					where <span class="emphasis"><em>pattern</em></span> represents a comma-separated listing of users with an optional use of globs. For example, the following configuration will enable TTY auditing for the <code class="literal">root</code> user and disable it for all other users:
				</p><pre class="literallayout">session required pam_tty_audit.so disable=* enable=root</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Configuring the <code class="literal">pam_tty_audit</code> PAM module for TTY auditing records only TTY input. This means that, when the audited user logs in, <code class="literal">pam_tty_audit</code> records the exact keystrokes the user makes into the <code class="literal">/var/log/audit/audit.log</code> file. For more information, see the pam_tty_audit(8) manual page.
					</p></div></div><p>
					Another advantage of the <code class="literal command">sudo</code> command is that an administrator can allow different users access to specific commands based on their needs.
				</p><p>
					Administrators wanting to edit the <code class="literal command">sudo</code> configuration file, <code class="literal">/etc/sudoers</code>, should use the <code class="literal command">visudo</code> command.
				</p><p>
					To give someone full administrative privileges, type <code class="literal command">visudo</code> and add a line similar to the following in the user privilege specification section:
				</p><pre class="literallayout">juan ALL=(ALL) ALL</pre><p>
					This example states that the user, <code class="literal">juan</code>, can use <code class="literal command">sudo</code> from any host and execute any command.
				</p><p>
					The example below illustrates the granularity possible when configuring <code class="literal command">sudo</code>:
				</p><pre class="literallayout">%users localhost=/usr/sbin/shutdown -h now</pre><p>
					This example states that any member of the <code class="literal">users</code> system group can issue the command <code class="literal command">/sbin/shutdown -h now</code> as long as it is issued from the console.
				</p><p>
					The man page for <code class="literal">sudoers</code> has a detailed listing of options for this file.
				</p><p>
					You can also configure sudo users who do not need to provide any password by using the <code class="literal option">NOPASSWD</code> option in the <code class="literal">/etc/sudoers</code> file:
				</p><pre class="literallayout"><span class="emphasis"><em>user_name</em></span> ALL=(ALL)	NOPASSWD: ALL</pre><p>
					However, even for such users, <code class="literal command">sudo</code> runs Pluggable Authentication Module (PAM) account management modules, which enables checking for restrictions imposed by PAM modules outside of the authentication phase. This ensures that PAM modules work properly. For example, in case of the <code class="literal option">pam_time</code> module, the time-based account restriction does not fail.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Always include <code class="literal command">sudo</code> in the list of allowed services in all PAM-based access control rules. Otherwise, users will receive a "permission denied" error message when they try to access <code class="literal command">sudo</code> but access is forbidden based on current access control rules.
					</p><p>
						For more information, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/3679241">After patching to Red Hat Enterprise Linux 7.6, sudo gives a permission denied error.</a>.
					</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						There are several potential risks to keep in mind when using the <code class="literal command">sudo</code> command. You can avoid them by editing the <code class="literal">/etc/sudoers</code> configuration file using <code class="literal command">visudo</code> as described above. Leaving the <code class="literal">/etc/sudoers</code> file in its default state gives every user in the <code class="literal">wheel</code> group unlimited <code class="literal">root</code> access.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								By default, <code class="literal command">sudo</code> stores the password for a five minute timeout period. Any subsequent uses of the command during this period will not prompt the user for a password. This could be exploited by an attacker if the user leaves his workstation unattended and unlocked while still being logged in. This behavior can be changed by adding the following line to the <code class="literal">/etc/sudoers</code> file:
							</p><pre class="literallayout">Defaults  timestamp_timeout=<span class="emphasis"><em>value</em></span></pre><p class="simpara">
								where <span class="emphasis"><em>value</em></span> is the desired timeout length in minutes. Setting the <span class="emphasis"><em>value</em></span> to 0 causes <code class="literal command">sudo</code> to require a password every time.
							</p></li><li class="listitem"><p class="simpara">
								If an account is compromised, an attacker can use <code class="literal command">sudo</code> to open a new shell with administrative privileges:
							</p><pre class="literallayout"><code class="literal command">sudo /bin/bash</code></pre><p class="simpara">
								Opening a new shell as <code class="literal">root</code> in this or similar fashion gives the attacker administrative access for a theoretically unlimited amount of time, bypassing the timeout period specified in the <code class="literal">/etc/sudoers</code> file and never requiring the attacker to input a password for <code class="literal command">sudo</code> again until the newly opened session is closed.
							</p></li></ul></div></div></div></section><section class="section" id="sect-Gaining_Privileges-Additional_Resources"><div class="titlepage"><div><div><h2 class="title">6.3.&nbsp;Additional Resources</h2></div></div></div><p>
					While programs allowing users to gain administrative privileges are a potential security risk, security itself is beyond the scope of this particular book. You should therefore refer to the resources listed below for more information regarding security and privileged access.
				</p><h4 id="installed_documentation">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">su</code>(1) — The manual page for <code class="literal command">su</code> provides information regarding the options available with this command.
						</li><li class="listitem">
							<code class="literal">sudo</code>(8) — The manual page for <code class="literal command">sudo</code> includes a detailed description of this command and lists options available for customizing its behavior.
						</li><li class="listitem">
							<code class="literal">pam</code>(8) — The manual page describing the use of Pluggable Authentication Modules (PAM) for Linux.
						</li></ul></div><h4 id="online_documentation">Online Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/index.html">Red Hat Enterprise Linux 7 Security Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Security Guide</span></em></span> for Red Hat Enterprise Linux 7 provides a more detailed look at potential security issues pertaining to the <code class="literal command">setuid</code> programs as well as techniques used to alleviate these risks.
						</li></ul></div><h4 id="see_also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Managing_Users_and_Groups" title="Chapter 4. Managing Users and Groups">Chapter&nbsp;4, <em>Managing Users and Groups</em></a> documents how to manage system users and groups in the graphical user interface and on the command line.
						</li></ul></div></section></section></div><div class="part" id="part-Subscription_and_Support"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;II.&nbsp;Subscription and Support</h1></div></div></div><div class="partintro" id="idm140569374247424"><div><!--Empty--></div><p>
				To receive updates to the software on a Red Hat Enterprise Linux system it must be subscribed to the <span class="emphasis"><em>Red Hat Content Delivery Network</em></span> (<span class="strong strong"><strong>CDN</strong></span>) and the appropriate repositories enabled. This part describes how to subscribe a system to the Red Hat Content Delivery Network.
			</p><p>
				Red Hat provides support via the <a class="link" href="http://www.redhat.com/en/services/support">Customer Portal</a>, and you can access this support directly from the command line using the <span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span>. This part describes the use of this command-line tool.
			</p></div><section class="chapter" id="chap-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;7.&nbsp;Registering the System and Managing Subscriptions</h2></div></div></div><p>
				The subscription service provides a mechanism to handle Red Hat software inventory and allows you to install additional software or update already installed programs to newer versions using the <span class="strong strong"><strong><span class="application application">yum</span></strong></span> package manager. In Red Hat Enterprise Linux 7 the recommended way to register your system and attach subscriptions is to use <span class="emphasis"><em>Red Hat Subscription Management</em></span>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					It is also possible to register the system and attach subscriptions after installation during the initial setup process. For detailed information about the initial setup see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/chap-initial-setup.html">Initial Setup</a> chapter in the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/index.html">Installation Guide</a> for Red Hat Enterprise Linux 7. Note that the Initial Setup application is only available on systems installed with the X Window System at the time of installation.
				</p></div></div><section class="section" id="sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-Registering_the_System_and_Attaching_Subscriptions"><div class="titlepage"><div><div><h2 class="title">7.1.&nbsp;Registering the System and Attaching Subscriptions</h2></div></div></div><p>
					Complete the following steps to register your system and attach one or more subscriptions using Red Hat Subscription Management. Note that all <code class="literal command">subscription-manager</code> commands are supposed to be run as <code class="literal">root</code>.
				</p><div class="orderedlist" id="proc-Registering_Using_RHSM"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the following command to register your system. You will be prompted to enter your user name and password. Note that the user name and password are the same as your login credentials for Red Hat Customer Portal.
						</p><pre class="literallayout"><code class="literal command">subscription-manager register</code></pre></li><li class="listitem"><p class="simpara">
							Determine the pool ID of a subscription that you require. To do so, type the following at a shell prompt to display a list of all subscriptions that are available for your system:
						</p><pre class="literallayout"><code class="literal command">subscription-manager list --available</code></pre><p class="simpara">
							For each available subscription, this command displays its name, unique identifier, expiration date, and other details related to your subscription. To list subscriptions for all architectures, add the <code class="literal option">--all</code> option. The pool ID is listed on a line beginning with <code class="literal">Pool ID</code>.
						</p></li><li class="listitem"><p class="simpara">
							Attach the appropriate subscription to your system by entering a command as follows:
						</p><pre class="literallayout">subscription-manager attach --pool=pool_id</pre><p class="simpara">
							Replace <span class="emphasis"><em>pool_id</em></span> with the pool ID you determined in the previous step.
						</p><p class="simpara">
							To verify the list of subscriptions your system has currently attached, at any time, run:
						</p><pre class="literallayout"><code class="literal command">subscription-manager list --consumed</code></pre></li></ol></div><p>
					For more details on how to register your system using Red Hat Subscription Management and associate it with subscriptions, see the designated <a class="link" href="https://access.redhat.com/solutions/253273">solution article</a>. For comprehensive information about subscriptions, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Subscription_Management/">Red Hat Subscription Management</a> collection of guides.
				</p></section><section class="section" id="sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-Managing_Repositories"><div class="titlepage"><div><div><h2 class="title">7.2.&nbsp;Managing Software Repositories</h2></div></div></div><p>
					When a system is subscribed to the Red Hat Content Delivery Network, a repository file is created in the <code class="literal">/etc/yum.repos.d/</code> directory. To verify that, use <span class="strong strong"><strong><span class="application application">yum</span></strong></span> to list all enabled repositories:
				</p><pre class="literallayout"><code class="literal command">yum repolist</code></pre><p>
					Red Hat Subscription Management also allows you to manually enable or disable software repositories provided by Red Hat. To list all available repositories, use the following command:
				</p><pre class="literallayout"><code class="literal command">subscription-manager repos --list</code></pre><p>
					The repository names depend on the specific version of Red Hat Enterprise Linux you are using and are in the following format:
				</p><pre class="literallayout">rhel-<span class="emphasis"><em>version</em></span>-<span class="emphasis"><em>variant</em></span>-rpms
rhel-<span class="emphasis"><em>version</em></span>-<span class="emphasis"><em>variant</em></span>-debug-rpms
rhel-<span class="emphasis"><em>version</em></span>-<span class="emphasis"><em>variant</em></span>-source-rpms</pre><p>
					Where <span class="emphasis"><em>version</em></span> is the Red Hat Enterprise Linux system version (<code class="literal">6</code> or <code class="literal">7</code>), and <span class="emphasis"><em>variant</em></span> is the Red Hat Enterprise Linux system variant (<code class="literal">server</code> or <code class="literal">workstation</code>), for example:
				</p><pre class="literallayout">rhel-<span class="emphasis"><em>7</em></span>-<span class="emphasis"><em>server</em></span>-rpms
rhel-<span class="emphasis"><em>7</em></span>-<span class="emphasis"><em>server</em></span>-debug-rpms
rhel-<span class="emphasis"><em>7</em></span>-<span class="emphasis"><em>server</em></span>-source-rpms</pre><p>
					To enable a repository, enter a command as follows:
				</p><pre class="literallayout"><code class="literal command">subscription-manager repos --enable <span class="emphasis"><em>repository</em></span></code></pre><p>
					Replace <span class="emphasis"><em>repository</em></span> with the name of the repository to enable.
				</p><p>
					Similarly, to disable a repository, use the following command:
				</p><pre class="literallayout"><code class="literal command">subscription-manager repos --disable <span class="emphasis"><em>repository</em></span></code></pre><p>
					<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_Yum_and_Yum_Repositories" title="9.5. Configuring Yum and Yum Repositories">Section&nbsp;9.5, “Configuring Yum and Yum Repositories”</a> provides detailed information about managing software repositories using <span class="strong strong"><strong><span class="application application">yum</span></strong></span>.
				</p><p>
					If you want to update the repositories automatically, you can use the <code class="literal">yum-cron</code> service. For more information, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Automatically_refreshing_the_package_database_and_download_updates" title="9.7. Automatically Refreshing Package Database and Downloading Updates with Yum-cron">Section&nbsp;9.7, “Automatically Refreshing Package Database and Downloading Updates with Yum-cron”</a>.
				</p></section><section class="section" id="sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-Removing_Subscriptions"><div class="titlepage"><div><div><h2 class="title">7.3.&nbsp;Removing Subscriptions</h2></div></div></div><p>
					To remove a particular subscription, complete the following steps.
				</p><div class="orderedlist" id="proc-Removing_Subscriptions"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Determine the serial number of the subscription you want to remove by listing information about already attached subscriptions:
						</p><pre class="literallayout"><code class="literal command">subscription-manager list --consumed</code></pre><p class="simpara">
							The serial number is the number listed as <code class="literal">serial</code>. For instance, <code class="literal">744993814251016831</code> in the example below:
						</p><pre class="literallayout">SKU:        ES0113909
Contract:     01234567
Account:      1234567
Serial:      744993814251016831
Pool ID:      8a85f9894bba16dc014bccdd905a5e23
Active:      False
Quantity Used:   1
Service Level:   SELF-SUPPORT
Service Type:   L1-L3
Status Details:
Subscription Type: Standard
Starts:      02/27/2015
Ends:       02/27/2016
System Type:    Virtual</pre></li><li class="listitem"><p class="simpara">
							Enter a command as follows to remove the selected subscription:
						</p><pre class="literallayout">subscription-manager remove --serial=serial_number</pre><p class="simpara">
							Replace <span class="emphasis"><em>serial_number</em></span> with the serial number you determined in the previous step.
						</p></li></ol></div><p>
					To remove all subscriptions attached to the system, run the following command:
				</p><pre class="literallayout"><code class="literal command">subscription-manager remove --all</code></pre></section><section class="section" id="sect-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-References"><div class="titlepage"><div><div><h2 class="title">7.4.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on how to register your system using Red Hat Subscription Management and associate it with subscriptions, see the resources listed below.
				</p><h4 id="brid-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-RHSM-References-Installed_Documentation">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">subscription-manager</code>(8) — the manual page for Red Hat Subscription Management provides a complete list of supported options and commands.
						</li></ul></div><h4 id="brid-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-RHSM-References-Related_Books">Related Books</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Subscription_Management/">Red Hat Subscription Management</a> collection of guides — These guides contain detailed information how to use Red Hat Subscription Management.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/index.html">Installation Guide</a> — see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/chap-initial-setup.html">Initial Setup</a> chapter for detailed information on how to register during the initial setup process.
						</li></ul></div><h4 id="brid-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions-RHSM-References-See_Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-yum" title="Chapter 9. Yum">Chapter&nbsp;9, <em>Yum</em></a> provides information about using the <span class="strong strong"><strong><span class="application application">yum</span></strong></span> packages manager to install and update software.
						</li></ul></div></section></section><section class="chapter" id="ch-Red_Hat_Support_Tool"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;8.&nbsp;Accessing Support Using the Red Hat Support Tool</h2></div></div></div><p>
				The <span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span>, in the <span class="strong strong"><strong><span class="package package">redhat-support-tool</span></strong></span> package, can function as both an interactive shell and as a single-execution program. It can be run over <code class="literal">SSH</code> or from any terminal. It enables, for example, searching the Red Hat Knowledgebase from the command line, copying solutions directly on the command line, opening and updating support cases, and sending files to Red Hat for analysis.
			</p><section class="section" id="sec-Installing_the_Red_Hat_Support_Tool"><div class="titlepage"><div><div><h2 class="title">8.1.&nbsp;Installing the Red Hat Support Tool</h2></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span> is installed by default on Red Hat Enterprise Linux. If required, to ensure that it is, enter the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# yum install redhat-support-tool</pre></section><section class="section" id="sec-Registering_the_Red_Hat_Support_Tool_Using_the_Command_Line"><div class="titlepage"><div><div><h2 class="title">8.2.&nbsp;Registering the Red Hat Support Tool Using the Command Line</h2></div></div></div><p>
					To register the Red Hat Support Tool to the customer portal using the command line, run the following commands:
				</p><pre class="literallayout" id="proc-Registering_the_Red_Hat_Support_Tool_Using_the_Command_Line">~]# redhat-support-tool config user username</pre><p>
					+ Where <span class="emphasis"><em>username</em></span> is the user name of the Red Hat Customer Portal account.
				</p><pre class="literallayout">~]# redhat-support-tool config password
Please enter the password for <span class="emphasis"><em>username</em></span>:</pre></section><section class="section" id="sec-Using_the_Red_Hat_Support_Tool_in_Interactive_Shell_Mode"><div class="titlepage"><div><div><h2 class="title">8.3.&nbsp;Using the Red Hat Support Tool in Interactive Shell Mode</h2></div></div></div><p>
					To start the tool in interactive mode, enter the following command:
				</p><pre class="literallayout">~]$ <code class="literal command">redhat-support-tool</code>
Welcome to the Red Hat Support Tool.
Command (? for help):</pre><p>
					The tool can be run as an unprivileged user, with a consequently reduced set of commands, or as <code class="literal">root</code>.
				</p><p>
					The commands can be listed by entering the <code class="literal">?</code> character. The program or menu selection can be exited by entering the <code class="literal">q</code> or <code class="literal">e</code> character. You will be prompted for your Red Hat Customer Portal user name and password when you first search the Knowledgebase or support cases. Alternately, set the user name and password for your Red Hat Customer Portal account using interactive mode, and optionally save it to the configuration file.
				</p></section><section class="section" id="sec-Configuring_the_Red_Hat_Support_Tool"><div class="titlepage"><div><div><h2 class="title">8.4.&nbsp;Configuring the Red Hat Support Tool</h2></div></div></div><p>
					When in interactive mode, the configuration options can be listed by entering the command <code class="literal command">config --help</code>:
				</p><pre class="literallayout">~]# redhat-support-tool
Welcome to the Red Hat Support Tool.
Command (? for help): config --help

Usage: config [options] config.option &lt;new option value&gt;

Use the 'config' command to set or get configuration file values.
Options:
 -h, --help  show this help message and exit
 -g, --global Save configuration option in /etc/redhat-support-tool.conf.
 -u, --unset  Unset configuration option.

The configuration file options which can be set are:
 user   : The Red Hat Customer Portal user.
 password : The Red Hat Customer Portal password.
 debug   : CRITICAL, ERROR, WARNING, INFO, or DEBUG
 url    : The support services URL. Default=https://api.access.redhat.com
 proxy_url : A proxy server URL.
 proxy_user: A proxy server user.
 proxy_password: A password for the proxy server user.
 ssl_ca  : Path to certificate authorities to trust during communication.
 kern_debug_dir: Path to the directory where kernel debug symbols should be downloaded and cached. Default=/var/lib/redhat-support-tool/debugkernels

Examples:
- config user
- config user my-rhn-username
- config --unset user</pre><div id="proc-Registering_the_Red_Hat_Support_Tool_Using_Interactive-Mode" class="formalpara"><p class="title"><strong>Registering the Red Hat Support Tool Using Interactive Mode</strong></p><p>
						To register the Red Hat Support Tool to the customer portal using interactive mode, proceed as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the tool by entering the following command:
						</p><pre class="literallayout">~]# redhat-support-tool</pre></li><li class="listitem"><p class="simpara">
							Enter your Red Hat Customer Portal user name:
						</p><pre class="literallayout">Command (? for help): <code class="literal command">config user <span class="emphasis"><em>username</em></span></code></pre><p class="simpara">
							To save your user name to the global configuration file, add the <code class="literal option">-g</code> option.
						</p></li><li class="listitem"><p class="simpara">
							Enter your Red Hat Customer Portal password:
						</p><pre class="literallayout">Command (? for help): <code class="literal command">config password</code>
Please enter the password for <span class="emphasis"><em>username</em></span>:</pre></li></ol></div><section class="section" id="sec-Saving_Settings_to_the_Configuration_Files"><div class="titlepage"><div><div><h3 class="title">8.4.1.&nbsp;Saving Settings to the Configuration Files</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span>, unless otherwise directed, stores values and options locally in the home directory of the current user, using the <code class="literal">~/.redhat-support-tool/redhat-support-tool.conf</code> configuration file. If required, it is recommended to save passwords to this file because it is only readable by that particular user. When the tool starts, it will read values from the global configuration file <code class="literal">/etc/redhat-support-tool.conf</code> and from the local configuration file. Locally stored values and options take precedence over globally stored settings.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							It is recommended <span class="emphasis"><em>not</em></span> to save passwords in the global <code class="literal">/etc/redhat-support-tool.conf</code> configuration file because the password is just <code class="literal">base64</code> encoded and can easily be decoded. In addition, the file is world readable.
						</p></div></div><p>
						To save a value or option to the global configuration file, add the <code class="literal option">-g, --global</code> option as follows:
					</p><pre class="literallayout">Command (? for help): <code class="literal command">config <span class="emphasis"><em>setting</em></span> -g <span class="emphasis"><em>value</em></span></code></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							In order to be able to save settings globally, using the <code class="literal option">-g, --global</code> option, the <span class="strong strong"><strong><span class="application application">Red Hat Support Tool</span></strong></span> must be run as <code class="literal">root</code> because normal users do not have the permissions required to write to <code class="literal">/etc/redhat-support-tool.conf</code>.
						</p></div></div><p>
						To remove a value or option from the local configuration file, add the <code class="literal option">-u, --unset</code> option as follows:
					</p><pre class="literallayout">Command (? for help): <code class="literal command">config <span class="emphasis"><em>setting</em></span> -u <span class="emphasis"><em>value</em></span></code></pre><p>
						This will clear, unset, the parameter from the tool and fall back to the equivalent setting in the global configuration file, if available.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When running as an unprivileged user, values stored in the global configuration file cannot be removed using the <code class="literal option">-u, --unset</code> option, but they can be cleared, unset, from the current running instance of the tool by using the <code class="literal option">-g, --global</code> option simultaneously with the <code class="literal option">-u, --unset</code> option. If running as <code class="literal">root</code>, values and options can be removed from the global configuration file using <code class="literal option">-g, --global</code> simultaneously with the <code class="literal option">-u, --unset</code> option.
						</p></div></div></section></section><section class="section" id="sec-Opening_and_Updating_Support_Cases_Using_Interactive_Mode"><div class="titlepage"><div><div><h2 class="title">8.5.&nbsp;Opening and Updating Support Cases Using Interactive Mode</h2></div></div></div><div id="proc-Opening_a_New_Support_Case_Using_Interactive_Mode" class="formalpara"><p class="title"><strong>Opening a New Support Case Using Interactive Mode</strong></p><p>
						To open a new support case using interactive mode, proceed as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the tool by entering the following command:
						</p><pre class="literallayout">~]# redhat-support-tool</pre></li><li class="listitem"><p class="simpara">
							Enter the <code class="literal command">opencase</code> command:
						</p><pre class="literallayout">Command (? for help): <code class="literal command">opencase</code></pre></li><li class="listitem">
							Follow the on screen prompts to select a product and then a version.
						</li><li class="listitem">
							Enter a summary of the case.
						</li><li class="listitem">
							Enter a description of the case and press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>D</strong></span> on an empty line when complete.
						</li><li class="listitem">
							Select a severity of the case.
						</li><li class="listitem">
							Optionally chose to see if there is a solution to this problem before opening a support case.
						</li><li class="listitem"><p class="simpara">
							Confirm you would still like to open the support case.
						</p><pre class="literallayout">Support case <span class="emphasis"><em>0123456789</em></span> has successfully been opened</pre></li><li class="listitem">
							Optionally chose to attach an SOS report.
						</li><li class="listitem">
							Optionally chose to attach a file.
						</li></ol></div><div id="proc-Viewing_and_Updating_an_Existing_Support_Case_Using_Interactive_Mode" class="formalpara"><p class="title"><strong>Viewing and Updating an Existing Support Case Using Interactive Mode</strong></p><p>
						To view and update an existing support case using interactive mode, proceed as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the tool by entering the following command:
						</p><pre class="literallayout">~]# redhat-support-tool</pre></li><li class="listitem"><p class="simpara">
							Enter the <code class="literal command">getcase</code> command:
						</p><pre class="literallayout">Command (? for help): <code class="literal command">getcase <span class="emphasis"><em>case-number</em></span></code></pre><p class="simpara">
							Where <span class="emphasis"><em>case-number</em></span> is the number of the case you want to view and update.
						</p></li><li class="listitem">
							Follow the on screen prompts to view the case, modify or add comments, and get or add attachments.
						</li></ol></div><div id="proc-Modifying_an_Existing_Support_Case_Using_Interactive_Mode" class="formalpara"><p class="title"><strong>Modifying an Existing Support Case Using Interactive Mode</strong></p><p>
						To modify the attributes of an existing support case using interactive mode, proceed as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start the tool by entering the following command:
						</p><pre class="literallayout">~]# redhat-support-tool</pre></li><li class="listitem"><p class="simpara">
							Enter the <code class="literal command">modifycase</code> command:
						</p><pre class="literallayout">Command (? for help): <code class="literal command">modifycase <span class="emphasis"><em>case-number</em></span></code></pre><p class="simpara">
							Where <span class="emphasis"><em>case-number</em></span> is the number of the case you want to view and update.
						</p></li><li class="listitem"><p class="simpara">
							The modify selection list appears:
						</p><pre class="literallayout">Type the number of the attribute to modify or 'e' to return to the previous menu.
 1 Modify Type
 2 Modify Severity
 3 Modify Status
 4 Modify Alternative-ID
 5 Modify Product
 6 Modify Version
End of options.</pre><p class="simpara">
							Follow the on screen prompts to modify one or more of the options.
						</p></li><li class="listitem"><p class="simpara">
							For example, to modify the status, enter <code class="literal">3</code>:
						</p><pre class="literallayout">Selection: 3
 1  Waiting on Customer
 2  Waiting on Red Hat
 3  Closed
Please select a status (or 'q' to exit):</pre></li></ol></div></section><section class="section" id="sec-Viewing_Support_Cases_on_the_Command_Line"><div class="titlepage"><div><div><h2 class="title">8.6.&nbsp;Viewing Support Cases on the Command Line</h2></div></div></div><p>
					Viewing the contents of a case on the command line provides a quick and easy way to apply solutions from the command line.
				</p><p>
					To view an existing support case on the command line, enter a command as follows:
				</p><pre class="literallayout">~]# redhat-support-tool getcase case-number</pre><p>
					Where <span class="emphasis"><em>case-number</em></span> is the number of the case you want to download.
				</p></section><section class="section" id="sec-Red_Hat_Support_Tool-Additional_Resources"><div class="titlepage"><div><div><h2 class="title">8.7.&nbsp;Additional Resources</h2></div></div></div><p>
					The Red Hat Knowledgebase article <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/445443">Red Hat Support Tool</a></span></em></span> has additional information, examples, and video tutorials.
				</p></section></section></div><div class="part" id="part-Installing_and_Managing_Software"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;III.&nbsp;Installing and Managing Software</h1></div></div></div><div class="partintro" id="idm140569378066400"><div><!--Empty--></div><p>
				All software on a Red Hat Enterprise Linux system is divided into RPM packages, which can be installed, upgraded, or removed. This part describes how to manage packages on Red Hat Enterprise Linux using <span class="strong strong"><strong><span class="application application">Yum</span></strong></span>.
			</p></div><section class="chapter" id="ch-yum"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;9.&nbsp;Yum</h2></div></div></div><p>
				<span class="strong strong"><strong><span class="application application">Yum</span></strong></span> is the Red Hat package manager that is able to query for information about available packages, fetch packages from repositories, install and uninstall them, and update an entire system to the latest available version. Yum performs automatic dependency resolution when updating, installing, or removing packages, and thus is able to automatically determine, fetch, and install all available dependent packages.
			</p><p>
				Yum can be configured with new, additional repositories, or <span class="emphasis"><em>package sources</em></span>, and also provides many plug-ins which enhance and extend its capabilities. Yum is able to perform many of the same tasks that <span class="strong strong"><strong><span class="application application">RPM</span></strong></span> can; additionally, many of the command-line options are similar. Yum enables easy and simple package management on a single machine or on groups of them.
			</p><p>
				The following sections assume your system was registered with Red Hat Subscription Management during installation as described in the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/"> Red Hat Enterprise Linux 7 Installation Guide</a>. If your system is not subscribed, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Subscription_and_Support-Registering_a_System_and_Managing_Subscriptions" title="Chapter 7. Registering the System and Managing Subscriptions">Chapter&nbsp;7, <em>Registering the System and Managing Subscriptions</em></a>.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Yum provides secure package management by enabling GPG (Gnu Privacy Guard; also known as GnuPG) signature verification on GPG-signed packages to be turned on for all package repositories (package sources), or for individual repositories. When signature verification is enabled, yum will refuse to install any packages not GPG-signed with the correct key for that repository. This means that you can trust that the <span class="strong strong"><strong><span class="application application">RPM</span></strong></span> packages you download and install on your system are from a trusted source, such as Red Hat, and were not modified during transfer. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_Yum_and_Yum_Repositories" title="9.5. Configuring Yum and Yum Repositories">Section&nbsp;9.5, “Configuring Yum and Yum Repositories”</a> for details on enabling signature-checking with yum.
				</p></div></div><p>
				Yum also enables you to easily set up your own repositories of <span class="strong strong"><strong><span class="application application">RPM</span></strong></span> packages for download and installation on other machines. When possible, yum uses <span class="emphasis"><em>parallel download</em></span> of multiple packages and metadata to speed up downloading.
			</p><p>
				Learning yum is a worthwhile investment because it is often the fastest way to perform system administration tasks, and it provides capabilities beyond those provided by the <span class="strong strong"><strong><span class="application application">PackageKit</span></strong></span> graphical package management tools.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You must have superuser privileges in order to use yum to install, update or remove packages on your system. All examples in this chapter assume that you have already obtained superuser privileges by using either the <code class="literal command">su</code> or <code class="literal command">sudo</code> command.
				</p></div></div><section class="section" id="sec-Checking_For_and_Updating_Packages"><div class="titlepage"><div><div><h2 class="title">9.1.&nbsp;Checking For and Updating Packages</h2></div></div></div><p>
					Yum enables you to check if your system has any updates waiting to be applied. You can list packages that need to be updated and update them as a whole, or you can update a selected individual package.
				</p><section class="section" id="sec-Checking_For_Updates"><div class="titlepage"><div><div><h3 class="title">9.1.1.&nbsp;Checking For Updates</h3></div></div></div><p>
						To see which installed packages on your system have updates available, use the following command:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">check-update</code></pre><div class="example" id="ex-yum_check_update"><p class="title"><strong>Example&nbsp;9.1.&nbsp;Example output of the yum check-update command</strong></p><div class="example-contents"><p>
							The output of <code class="literal command">yum</code> <code class="literal option">check-update</code> can look as follows:
						</p><pre class="literallayout">~]# yum check-update
Loaded plugins: product-id, search-disabled-repos, subscription-manager
dracut.x86_64             033-360.el7_2   rhel-7-server-rpms
dracut-config-rescue.x86_64      033-360.el7_2   rhel-7-server-rpms
kernel.x86_64             3.10.0-327.el7   rhel-7-server-rpms
rpm.x86_64              4.11.3-17.el7   rhel-7-server-rpms
rpm-libs.x86_64            4.11.3-17.el7   rhel-7-server-rpms
rpm-python.x86_64           4.11.3-17.el7   rhel-7-server-rpms
yum.noarch              3.4.3-132.el7   rhel-7-server-rpms</pre><p>
							The packages in the above output are listed as having updates available. The first package in the list is <span class="strong strong"><strong><span class="application application">dracut</span></strong></span>. Each line in the example output consists of several rows, in case of <span class="strong strong"><strong><span class="application application">dracut</span></strong></span>:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">dracut</code> — the name of the package,
								</li><li class="listitem">
									<code class="literal">x86_64</code> — the CPU architecture the package was built for,
								</li><li class="listitem">
									<code class="literal">033</code> — the version of the updated package to be installed,
								</li><li class="listitem">
									<code class="literal">360.el7</code> — the release of the updated package,
								</li><li class="listitem">
									<code class="literal">_2</code> — a build version, added as part of a z-stream update,
								</li><li class="listitem">
									<code class="literal">rhel-7-server-rpms</code> — the repository in which the updated package is located.
								</li></ul></div><p>
							The output also shows that we can update the kernel (the <span class="strong strong"><strong><span class="package package">kernel</span></strong></span> package), yum and RPM themselves (the <span class="strong strong"><strong><span class="package package">yum</span></strong></span> and <span class="strong strong"><strong><span class="package package">rpm</span></strong></span> packages), as well as their dependencies (such as the <span class="strong strong"><strong><span class="package package">rpm-libs</span></strong></span>, and <span class="strong strong"><strong><span class="package package">rpm-python</span></strong></span> packages), all using the <code class="literal command">yum</code> command.
						</p></div></div></section><section class="section" id="sec-Updating_Packages"><div class="titlepage"><div><div><h3 class="title">9.1.2.&nbsp;Updating Packages</h3></div></div></div><p>
						You can choose to update a single package, multiple packages, or all packages at once. If any dependencies of the package or packages you update have updates available themselves, then they are updated too.
					</p><h5 id="bh-Updating_a_Single_Package">Updating a Single Package</h5><p>
						To update a single package, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">yum update <span class="emphasis"><em>package_name</em></span></pre><div class="example" id="ex-yum_update"><p class="title"><strong>Example&nbsp;9.2.&nbsp;Updating the rpm package</strong></p><div class="example-contents"><p>
							To update the <span class="strong strong"><strong><span class="package package">rpm</span></strong></span> package, type:
						</p><pre class="literallayout">~]# yum update rpm
Loaded plugins: langpacks, product-id, subscription-manager
Updating Red Hat repositories.
INFO:rhsm-app.repolib:repos updated: 0
Setting up Update Process
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package rpm.x86_64 0:4.11.1-3.el7 will be updated
--&gt; Processing Dependency: rpm = 4.11.1-3.el7 for package: rpm-libs-4.11.1-3.el7.x86_64
--&gt; Processing Dependency: rpm = 4.11.1-3.el7 for package: rpm-python-4.11.1-3.el7.x86_64
--&gt; Processing Dependency: rpm = 4.11.1-3.el7 for package: rpm-build-4.11.1-3.el7.x86_64
---&gt; Package rpm.x86_64 0:4.11.2-2.el7 will be an update
--&gt; Running transaction check
...
--&gt; Finished Dependency Resolution

Dependencies Resolved
=============================================================================
 Package          Arch    Version     Repository    Size
=============================================================================
Updating:
 rpm            x86_64   4.11.2-2.el7  rhel      1.1 M
Updating for dependencies:
 rpm-build         x86_64   4.11.2-2.el7  rhel      139 k
 rpm-build-libs      x86_64   4.11.2-2.el7  rhel       98 k
 rpm-libs         x86_64   4.11.2-2.el7  rhel      261 k
 rpm-python        x86_64   4.11.2-2.el7  rhel       74 k

Transaction Summary
=============================================================================
Upgrade 1 Package (+4 Dependent packages)

Total size: 1.7 M
Is this ok [y/d/N]:</pre><p>
							This output contains several items of interest:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									<code class="literal">Loaded plugins: langpacks, product-id, subscription-manager</code> — Yum always informs you which yum plug-ins are installed and enabled. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Yum_Plugins" title="9.6. Yum Plug-ins">Section&nbsp;9.6, “Yum Plug-ins”</a> for general information on yum plug-ins, or <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Plugin_Descriptions" title="9.6.3. Working with Yum Plug-ins">Section&nbsp;9.6.3, “Working with Yum Plug-ins”</a> for descriptions of specific plug-ins.
								</li><li class="listitem">
									<code class="literal">rpm.x86_64</code> — you can download and install a new <span class="strong strong"><strong><span class="package package">rpm</span></strong></span> package as well as its dependencies. Transaction check is performed for each of these packages.
								</li><li class="listitem"><p class="simpara">
									Yum presents the update information and then prompts you for confirmation of the update; yum runs interactively by default. If you already know which transactions the <code class="literal command">yum</code> command plans to perform, you can use the <code class="literal option">-y</code> option to automatically answer <code class="literal command">yes</code> to any questions that yum asks (in which case it runs non-interactively). However, you should always examine which changes yum plans to make to the system so that you can easily troubleshoot any problems that might arise. You can also choose to download the package without installing it. To do so, select the <code class="literal option">d</code> option at the download prompt. This launches a background download of the selected package.
								</p><p class="simpara">
									If a transaction fails, you can view yum transaction history by using the <code class="literal command">yum history</code> command as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Transaction_History" title="9.4. Working with Transaction History">Section&nbsp;9.4, “Working with Transaction History”</a>.
								</p></li></ol></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Yum always <span class="emphasis"><em>installs</em></span> a new kernel regardless of whether you are using the <code class="literal command">yum update</code> or <code class="literal command">yum install</code> command.
						</p><p>
							When using <span class="strong strong"><strong><span class="application application">RPM</span></strong></span>, on the other hand, it is important to use the <code class="literal command">rpm -i kernel</code> command which installs a new kernel instead of <code class="literal command">rpm -u kernel</code> which <span class="emphasis"><em>replaces</em></span> the current kernel.
						</p></div></div><p>
						Similarly, it is possible to update a package group. Type as <code class="literal">root</code>:
					</p><pre class="literallayout">yum group update <span class="emphasis"><em>group_name</em></span></pre><p>
						Here, replace <span class="emphasis"><em>group_name</em></span> with a name of the package group you want to update. For more information on package groups, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Working_with_Package_Groups" title="9.3. Working with Package Groups">Section&nbsp;9.3, “Working with Package Groups”</a>.
					</p><p>
						Yum also offers the <code class="literal command">upgrade</code> command that is equal to <code class="literal command">update</code> with enabled <code class="literal option">obsoletes</code> configuration option (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_main_Options" title="9.5.1. Setting [main] Options">Section&nbsp;9.5.1, “Setting [main] Options”</a>). By default, <code class="literal option">obsoletes</code> is turned on in <code class="literal">/etc/yum.conf</code>, which makes these two commands equivalent.
					</p><div id="bh-Updating_All_Packages_and_Their_Dependencies" class="formalpara"><p class="title"><strong>Updating All Packages and Their Dependencies</strong></p><p>
							To update all packages and their dependencies, use the <code class="literal command">yum update</code> command without any arguments:
						</p></div><pre class="literallayout"><code class="literal command">yum update</code></pre><div id="bh-Updating_Security-Related_Packages" class="formalpara"><p class="title"><strong>Updating Security-Related Packages</strong></p><p>
							If packages have security updates available, you can update only these packages to their latest versions. Type as <code class="literal">root</code>:
						</p></div><pre class="literallayout"><code class="literal command">yum update --security</code></pre><p>
						You can also update packages only to versions containing the latest security updates. Type as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">yum update-minimal --security</code></pre><p>
						For example, assume that:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								the <span class="strong strong"><strong><span class="package package">kernel-3.10.0-1</span></strong></span> package is installed on your system;
							</li><li class="listitem">
								the <span class="strong strong"><strong><span class="package package">kernel-3.10.0-2</span></strong></span> package was released as a security update;
							</li><li class="listitem">
								the <span class="strong strong"><strong><span class="package package">kernel-3.10.0-3</span></strong></span> package was released as a bug fix update.
							</li></ul></div><p>
						Then <code class="literal command">yum update-minimal --security</code> updates the package to <span class="strong strong"><strong><span class="package package">kernel-3.10.0-2</span></strong></span>, and <code class="literal command">yum update --security</code> updates the package to <span class="strong strong"><strong><span class="package package">kernel-3.10.0-3</span></strong></span>.
					</p><div id="bh-Automating_Updating" class="formalpara"><p class="title"><strong>Automating Package Updating</strong></p><p>
							To refresh the package database and download updates automatically, you can use the <code class="literal">yum-cron</code> service. For more information, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Automatically_refreshing_the_package_database_and_download_updates" title="9.7. Automatically Refreshing Package Database and Downloading Updates with Yum-cron">Section&nbsp;9.7, “Automatically Refreshing Package Database and Downloading Updates with Yum-cron”</a>.
						</p></div></section><section class="section" id="s1-yum-upgrade-system"><div class="titlepage"><div><div><h3 class="title">9.1.3.&nbsp;Upgrading the System Off-line with ISO and Yum</h3></div></div></div><p>
						For systems that are disconnected from the Internet or Red Hat Network, using the <code class="literal command">yum update</code> command with the Red Hat Enterprise Linux installation ISO image is an easy and quick way to upgrade systems to the latest minor version. The following steps illustrate the upgrading process:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a target directory to mount your ISO image. This directory is not automatically created when mounting, so create it before proceeding to the next step. As <code class="literal">root</code>, type:
							</p><pre class="literallayout">mkdir <span class="emphasis"><em>mount_dir</em></span></pre><p class="simpara">
								Replace <span class="emphasis"><em>mount_dir</em></span> with a path to the mount directory. Typically, users create it as a subdirectory in the <code class="literal">/media</code> directory.
							</p></li><li class="listitem"><p class="simpara">
								Mount the Red Hat Enterprise Linux 7 installation ISO image to the previously created target directory. As <code class="literal">root</code>, type:
							</p><pre class="literallayout">mount -o loop <span class="emphasis"><em>iso_name</em></span> <span class="emphasis"><em>mount_dir</em></span></pre><p class="simpara">
								Replace <span class="emphasis"><em>iso_name</em></span> with a path to your ISO image and <span class="emphasis"><em>mount_dir</em></span> with a path to the target directory. Here, the <code class="literal option">-o</code> <code class="literal option">loop</code> option is required to mount the file as a block device.
							</p></li><li class="listitem"><p class="simpara">
								Copy the <code class="literal">media.repo</code> file from the mount directory to the <code class="literal">/etc/yum.repos.d/</code> directory. Note that configuration files in this directory must have the <span class="emphasis"><em>.repo</em></span> extension to function properly.
							</p><pre class="literallayout">cp <code class="literal">mount_dir/media.repo</code> <code class="literal">/etc/yum.repos.d/new.repo</code></pre><p class="simpara">
								This creates a configuration file for the yum repository. Replace <span class="emphasis"><em>new.repo</em></span> with the filename, for example <span class="emphasis"><em>rhel7.repo</em></span>.
							</p></li><li class="listitem"><p class="simpara">
								Edit the new configuration file so that it points to the Red Hat Enterprise Linux installation ISO. Add the following line into the <code class="literal">/etc/yum.repos.d/<span class="emphasis"><em>new.repo</em></span></code> file:
							</p><pre class="literallayout">baseurl=file:///<span class="emphasis"><em>mount_dir</em></span></pre><p class="simpara">
								Replace <span class="emphasis"><em>mount_dir</em></span> with a path to the mount point.
							</p></li><li class="listitem"><p class="simpara">
								Update all yum repositories including <code class="literal">/etc/yum.repos.d/<span class="emphasis"><em>new.repo</em></span></code> created in previous steps. As <code class="literal">root</code>, type:
							</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">update</code></pre><p class="simpara">
								This upgrades your system to the version provided by the mounted ISO image.
							</p></li><li class="listitem"><p class="simpara">
								After successful upgrade, you can unmount the ISO image. As <code class="literal">root</code>, type:
							</p><pre class="literallayout">umount <span class="emphasis"><em>mount_dir</em></span></pre><p class="simpara">
								where <span class="emphasis"><em>mount_dir</em></span> is a path to your mount directory. Also, you can remove the mount directory created in the first step. As <code class="literal">root</code>, type:
							</p><pre class="literallayout">rmdir <span class="emphasis"><em>mount_dir</em></span></pre></li><li class="listitem"><p class="simpara">
								If you will not use the previously created configuration file for another installation or update, you can remove it. As <code class="literal">root</code>, type:
							</p><pre class="literallayout"><code class="literal command">rm</code> <code class="literal">/etc/yum.repos.d/<span class="emphasis"><em>new.repo</em></span></code></pre></li></ol></div><div class="example" id="idm140569400183360"><p class="title"><strong>Example&nbsp;9.3.&nbsp;Upgrading from Red Hat Enterprise Linux 7.0 to 7.1</strong></p><div class="example-contents"><p>
							If required to upgrade a system without access to the Internet using an ISO image with the newer version of the system, called for example <code class="literal">rhel-server-7.1-x86_64-dvd.iso</code>, create a target directory for mounting, such as <code class="literal">/media/rhel7/</code>. As <code class="literal">root</code>, change into the directory with your ISO image and type:
						</p><pre class="literallayout">~]# mount -o loop
    <code class="literal">rhel-server-7.1-x86_64-dvd.iso</code> <code class="literal">/media/rhel7/</code></pre><p>
							Then set up a yum repository for your image by copying the <code class="literal">media.repo</code> file from the mount directory:
						</p><pre class="literallayout">~]# cp <code class="literal">/media/rhel7/media.repo</code> <code class="literal">/etc/yum.repos.d/rhel7.repo</code></pre><p>
							To make yum recognize the mount point as a repository, add the following line into the <code class="literal">/etc/yum.repos.d/rhel7.repo</code> copied in the previous step:
						</p><pre class="literallayout">baseurl=file:///media/rhel7/</pre><p>
							Now, updating the yum repository will upgrade your system to a version provided by <code class="literal">rhel-server-7.1-x86_64-dvd.iso</code>. As <code class="literal">root</code>, execute:
						</p><pre class="literallayout">~]# yum update</pre><p>
							When your system is successfully upgraded, you can unmount the image, remove the target directory and the configuration file:
						</p><pre class="literallayout">~]# umount <code class="literal">/media/rhel7/</code></pre><pre class="literallayout">~]# rmdir <code class="literal">/media/rhel7/</code></pre><pre class="literallayout">~]# rm
     <code class="literal">/etc/yum.repos.d/rhel7.repo</code></pre></div></div></section></section><section class="section" id="sec-Working_with_Packages"><div class="titlepage"><div><div><h2 class="title">9.2.&nbsp;Working with Packages</h2></div></div></div><p>
					Yum enables you to perform a complete set of operations with software packages, including searching for packages, viewing information about them, installing and removing.
				</p><section class="section" id="sec-Searching_Packages"><div class="titlepage"><div><div><h3 class="title">9.2.1.&nbsp;Searching Packages</h3></div></div></div><p>
						You can search all <span class="strong strong"><strong>RPM</strong></span> package names, descriptions and summaries by using the following command:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">search</code> <span class="emphasis"><em>term</em></span>&amp;hellip;</pre><p>
						Replace <span class="emphasis"><em>term</em></span> with a package name you want to search.
					</p><div class="example" id="ex-searching_for_packages"><p class="title"><strong>Example&nbsp;9.4.&nbsp;Searching for packages matching a specific string</strong></p><div class="example-contents"><p>
							To list all packages that match "vim", "gvim", or "emacs", type:
						</p><pre class="literallayout">~]$ yum search vim gvim emacs
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager
============================= N/S matched: vim ==============================
<span class="emphasis"><em>vim</em></span>-X11.x86_64 : The VIM version of the vi editor for the X Window System
<span class="emphasis"><em>vim</em></span>-common.x86_64 : The common files needed by any version of the VIM editor
[output truncated]

============================ N/S matched: emacs =============================
<span class="emphasis"><em>emacs</em></span>.x86_64 : GNU Emacs text editor
<span class="emphasis"><em>emacs</em></span>-auctex.noarch : Enhanced TeX modes for Emacs
[output truncated]

 Name and summary matches mostly, use "search all" for everything.
Warning: No matches found for: <span class="emphasis"><em>gvim</em></span></pre></div></div><p>
						The <code class="literal command">yum search</code> command is useful for searching for packages you do not know the name of, but for which you know a related term. Note that by default, <code class="literal command">yum search</code> returns matches in package name and summary, which makes the search faster. Use the <code class="literal command">yum search all</code> command for a more exhaustive but slower search.
					</p><div id="bh-Yum-Listing_Packages-Filtering" class="formalpara"><p class="title"><strong>Filtering the Results</strong></p><p>
							All of yum’s list commands allow you to filter the results by appending one or more <span class="emphasis"><em>glob expressions</em></span> as arguments. Glob expressions are normal strings of characters which contain one or more of the wildcard characters <code class="literal command">*</code> (which expands to match any character subset) and <code class="literal command">?</code> (which expands to match any single character).
						</p></div><p>
						Be careful to escape the glob expressions when passing them as arguments to a <code class="literal command">yum</code> command, otherwise the Bash shell will interpret these expressions as <span class="emphasis"><em>pathname expansions</em></span>, and potentially pass all files in the current directory that match the global expressions to <code class="literal command">yum</code>. To make sure the glob expressions are passed to <code class="literal command">yum</code> as intended, use one of the following methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								escape the wildcard characters by preceding them with a backslash character
							</li><li class="listitem">
								double-quote or single-quote the entire glob expression.
							</li></ul></div><p>
						Examples in the following section demonstrate usage of both these methods.
					</p></section><section class="section" id="sec-Listing_Packages"><div class="titlepage"><div><div><h3 class="title">9.2.2.&nbsp;Listing Packages</h3></div></div></div><p>
						To list information on all installed <span class="emphasis"><em>and</em></span> available packages type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">list</code> <code class="literal option">all</code></pre><p>
						To list installed <span class="emphasis"><em>and</em></span> available packages that match inserted glob expressions use the following command:
					</p><pre class="literallayout">yum list glob_expression&amp;hellip;</pre><div class="example" id="ex-Listing_all_ABRT_addons_and_plugins_using_glob_expressions"><p class="title"><strong>Example&nbsp;9.5.&nbsp;Listing ABRT-related packages</strong></p><div class="example-contents"><p>
							Packages with various ABRT add-ons and plug-ins either begin with "abrt-addon-", or "abrt-plugin-". To list these packages, type the following command at a shell prompt. Note how the wildcard characters are escaped with a backslash character:
						</p><pre class="literallayout">~]$ yum list abrt-addon\* abrt-plugin\*
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager
Installed Packages
abrt-addon-ccpp.x86_64          2.1.11-35.el7       @rhel-7-server-rpms
abrt-addon-kerneloops.x86_64       2.1.11-35.el7       @rhel-7-server-rpms
abrt-addon-pstoreoops.x86_64       2.1.11-35.el7       @rhel-7-server-rpms
abrt-addon-python.x86_64         2.1.11-35.el7       @rhel-7-server-rpms
abrt-addon-vmcore.x86_64         2.1.11-35.el7       @rhel-7-server-rpms
abrt-addon-xorg.x86_64          2.1.11-35.el7       @rhel-7-server-rpms</pre></div></div><p>
						To list all packages installed on your system use the <code class="literal">installed</code> keyword. The rightmost column in the output lists the repository from which the package was retrieved.
					</p><pre class="literallayout">yum list installed <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-list_installed_packages"><p class="title"><strong>Example&nbsp;9.6.&nbsp;Listing all installed versions of the krb package</strong></p><div class="example-contents"><p>
							The following example shows how to list all installed packages that begin with "krb" followed by exactly one character and a hyphen. This is useful when you want to list all versions of certain component as these are distinguished by numbers. The entire glob expression is quoted to ensure proper processing.
						</p><pre class="literallayout">~]$ yum list installed "krb?-*"
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager
Installed Packages
krb5-libs.x86_64         1.13.2-10.el7          @rhel-7-server-rpms</pre></div></div><p>
						To list all packages in all enabled repositories that are available to install, use the command in the following form:
					</p><pre class="literallayout">yum list available <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-list_available"><p class="title"><strong>Example&nbsp;9.7.&nbsp;Listing available gstreamer plug-ins</strong></p><div class="example-contents"><p>
							For instance, to list all available packages with names that contain "gstreamer" and then "plugin", run the following command:
						</p><pre class="literallayout">~]$ yum list available gstreamer*plugin\*
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager
Available Packages
gstreamer-plugins-bad-free.i686       0.10.23-20.el7     rhel-7-server-rpms
gstreamer-plugins-base.i686         0.10.36-10.el7     rhel-7-server-rpms
gstreamer-plugins-good.i686         0.10.31-11.el7     rhel-7-server-rpms
gstreamer1-plugins-bad-free.i686      1.4.5-3.el7      rhel-7-server-rpms
gstreamer1-plugins-base.i686        1.4.5-2.el7      rhel-7-server-rpms
gstreamer1-plugins-base-devel.i686     1.4.5-2.el7      rhel-7-server-rpms
gstreamer1-plugins-base-devel.x86_64    1.4.5-2.el7      rhel-7-server-rpms
gstreamer1-plugins-good.i686        1.4.5-2.el7      rhel-7-server-rpms</pre></div></div><div id="bh-Yum-Listing_Packages-Listing_Repositories" class="formalpara"><p class="title"><strong>Listing Repositories</strong></p><p>
							To list the repository ID, name, and number of packages for each <span class="emphasis"><em>enabled</em></span> repository on your system, use the following command:
						</p></div><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">repolist</code></pre><p>
						To list more information about these repositories, add the <code class="literal">-v</code> option. With this option enabled, information including the file name, overall size, date of the last update, and base URL are displayed for each listed repository. As an alternative, you can use the <code class="literal command">repoinfo</code> command that produces the same output.
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">repolist</code> <code class="literal option">-v</code></pre><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">repoinfo</code></pre><p>
						To list both enabled and disabled repositories use the following command. A status column is added to the output list to show which of the repositories are enabled.
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">repolist</code> <code class="literal option">all</code></pre><p>
						By passing <code class="literal option">disabled</code> as a first argument, you can reduce the command output to disabled repositories. For further specification you can pass the ID or name of repositories or related glob_expressions as arguments. Note that if there is an exact match between the repository ID or name and the inserted argument, this repository is listed even if it does not pass the <span class="emphasis"><em>enabled</em></span> or <span class="emphasis"><em>disabled</em></span> filter.
					</p></section><section class="section" id="sec-Displaying_Package_Information"><div class="titlepage"><div><div><h3 class="title">9.2.3.&nbsp;Displaying Package Information</h3></div></div></div><p>
						To display information about one or more packages, use the following command (glob expressions are valid here as well):
					</p><pre class="literallayout">yum info <span class="emphasis"><em>package_name</em></span>&amp;hellip;</pre><p>
						Replace <span class="emphasis"><em>package_name</em></span> with the name of the package.
					</p><div class="example" id="ex-yum_info"><p class="title"><strong>Example&nbsp;9.8.&nbsp;Displaying information on the abrt package</strong></p><div class="example-contents"><p>
							To display information about the <span class="strong strong"><strong><span class="package package">abrt</span></strong></span> package, type:
						</p><pre class="literallayout">~]$ yum info abrt
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager
Installed Packages
Name    : abrt
Arch    : x86_64
Version   : 2.1.11
Release   : 35.el7
Size    : 2.3 M
Repo    : installed
From repo  : rhel-7-server-rpms
Summary   : Automatic bug detection and reporting tool
URL     : https://fedorahosted.org/abrt/
License   : GPLv2+
Description : abrt is a tool to help users to detect defects in applications and
      : to create a bug report with all information needed by maintainer to fix
      : it. It uses plugin system to extend its functionality.</pre></div></div><p>
						The <code class="literal command">yum info <span class="emphasis"><em>package_name</em></span></code> command is similar to the <code class="literal command">rpm -q --info <span class="emphasis"><em>package_name</em></span></code> command, but provides as additional information the name of the yum repository the RPM package was installed from (look for the <code class="literal">From repo:</code> line in the output).
					</p><div id="bh-Using_yumdb" class="formalpara"><p class="title"><strong>Using yumdb</strong></p><p>
							You can also query the yum database for alternative and useful information about a package by using the following command:
						</p></div><pre class="literallayout">yumdb info <span class="emphasis"><em>package_name</em></span></pre><p>
						This command provides additional information about a package, including the check sum of the package (and the algorithm used to produce it, such as SHA-256), the command given on the command line that was invoked to install the package (if any), and the reason why the package is installed on the system (where <code class="literal">user</code> indicates it was installed by the user, and <code class="literal">dep</code> means it was brought in as a dependency).
					</p><div class="example" id="ex-yumdb_info"><p class="title"><strong>Example&nbsp;9.9.&nbsp;Querying yumdb for information on the yum package</strong></p><div class="example-contents"><p>
							To display additional information about the <span class="strong strong"><strong><span class="package package">yum</span></strong></span> package, type:
						</p><pre class="literallayout">~]$ yumdb info yum
Loaded plugins: langpacks, product-id
yum-3.4.3-132.el7.noarch
   changed_by = 1000
   checksum_data = a9d0510e2ff0d04d04476c693c0313a11379053928efd29561f9a837b3d9eb02
   checksum_type = sha256
   command_line = upgrade
   from_repo = rhel-7-server-rpms
   from_repo_revision = 1449144806
   from_repo_timestamp = 1449144805
   installed_by = 4294967295
   origin_url = https://cdn.redhat.com/content/dist/rhel/server/7/7Server/x86_64/os/Packages/yum-3.4.3-132.el7.noarch.rpm
   reason = user
   releasever = 7Server
   var_uuid = 147a7d49-b60a-429f-8d8f-3edb6ce6f4a1</pre></div></div><p>
						For more information on the <code class="literal command">yumdb</code> command, see the <span class="emphasis"><em>yumdb</em></span>(8) manual page.
					</p></section><section class="section" id="sec-Installing"><div class="titlepage"><div><div><h3 class="title">9.2.4.&nbsp;Installing Packages</h3></div></div></div><p>
						To install a single package and all of its non-installed dependencies, enter a command in the following form as <code class="literal">root</code>:
					</p><pre class="literallayout">yum install <span class="emphasis"><em>package_name</em></span></pre><p>
						You can also install multiple packages simultaneously by appending their names as arguments. To do so, type as <code class="literal">root</code>:
					</p><pre class="literallayout">yum install <span class="emphasis"><em>package_name</em></span> <span class="emphasis"><em>package_name</em></span>&amp;hellip;</pre><p>
						If you are installing packages on a <span class="emphasis"><em>multilib</em></span> system, such as an AMD64 or Intel 64 machine, you can specify the architecture of the package (as long as it is available in an enabled repository) by appending <span class="emphasis"><em>.arch</em></span> to the package name:
					</p><pre class="literallayout">yum install <span class="emphasis"><em>package_name</em></span><span class="emphasis"><em>.arch</em></span></pre><div class="example" id="ex-install_multilib"><p class="title"><strong>Example&nbsp;9.10.&nbsp;Installing packages on multilib system</strong></p><div class="example-contents"><p>
							To install the <span class="strong strong"><strong><span class="package package">sqlite</span></strong></span> package for the <code class="literal">i686</code> architecture, type:
						</p><pre class="literallayout">~]# yum install <code class="literal">sqlite.i686</code></pre></div></div><p>
						You can use glob expressions to quickly install multiple similarly named packages. Execute as <code class="literal">root</code>:
					</p><pre class="literallayout">yum install <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-install_with_glob_expressions"><p class="title"><strong>Example&nbsp;9.11.&nbsp;Installing all audacious plugins</strong></p><div class="example-contents"><p>
							Global expressions are useful when you want to install several packages with similar names. To install all audacious plug-ins, use the command in the following form:
						</p><pre class="literallayout">~]# yum install <code class="literal">audacious-plugins-\*</code></pre></div></div><p>
						In addition to package names and glob expressions, you can also provide file names to <code class="literal command">yum install</code>. If you know the name of the binary you want to install, but not its package name, you can give <code class="literal command">yum install</code> the path name. As <code class="literal">root</code>, type:
					</p><pre class="literallayout"><code class="literal command">yum install /usr/sbin/named</code></pre><p>
						Yum then searches through its package lists, finds the package which provides <code class="literal">/usr/sbin/named</code>, if any, and prompts you as to whether you want to install it.
					</p><p>
						As you can see in the above examples, the <code class="literal command">yum install</code> command does not require strictly defined arguments. It can process various formats of package names and glob expressions, which makes installation easier for users. On the other hand, it takes some time until <span class="strong strong"><strong><span class="application application">yum</span></strong></span> parses the input correctly, especially if you specify a large number of packages. To optimize the package search, you can use the following commands to explicitly define how to parse the arguments:
					</p><pre class="literallayout"><code class="literal command">yum install-n</code> <span class="emphasis"><em>name</em></span></pre><pre class="literallayout"><code class="literal command">yum install-na</code> <span class="emphasis"><em>name.architecture</em></span></pre><pre class="literallayout"><code class="literal command">yum install-nevra</code> <span class="emphasis"><em>name-epoch:version-release.architecture</em></span></pre><p>
						With <code class="literal command">install-n</code>, <span class="strong strong"><strong><span class="application application">yum</span></strong></span> interprets <span class="emphasis"><em>name</em></span> as the exact name of the package. The <code class="literal command">install-na</code> command tells <span class="strong strong"><strong><span class="application application">yum</span></strong></span> that the subsequent argument contains the package name and architecture divided by the dot character. With <code class="literal command">install-nevra</code>, <span class="strong strong"><strong><span class="application application">yum</span></strong></span> will expect an argument in the form <span class="emphasis"><em>name-epoch:version-release.architecture</em></span>. Similarly, you can use <code class="literal command">yum remove-n</code>, <code class="literal command">yum remove-na</code>, and <code class="literal command">yum remove-nevra</code> when searching for packages to be removed.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you know you want to install the package that contains the <code class="literal">named</code> binary, but you do not know in which <code class="literal">bin/</code> or <code class="literal">sbin/</code> directory the file is installed, use the <code class="literal command">yum provides</code> command with a glob expression:
						</p><pre class="literallayout">~]# yum provides "*bin/named"
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-
       : manager
32:bind-9.9.4-14.el7.x86_64 : The Berkeley Internet Name Domain (BIND) DNS
              : (Domain Name System) server
Repo    : rhel-7-server-rpms
Matched from:
Filename  : /usr/sbin/named</pre><p>
							<code class="literal command">yum provides "*/<span class="emphasis"><em>file_name</em></span>"</code> is a useful way to find the packages that contain <span class="emphasis"><em>file_name</em></span>.
						</p></div></div><div class="example" id="ex-Installation_Process"><p class="title"><strong>Example&nbsp;9.12.&nbsp;Installation Process</strong></p><div class="example-contents"><p>
							The following example provides an overview of installation with use of <span class="strong strong"><strong><span class="application application">yum</span></strong></span>. To download and install the latest version of the <span class="strong strong"><strong><span class="package package">httpd</span></strong></span> package, execute as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# yum install httpd
Loaded plugins: langpacks, product-id, subscription-manager
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package httpd.x86_64 0:2.4.6-12.el7 will be updated
---&gt; Package httpd.x86_64 0:2.4.6-13.el7 will be an update
--&gt; Processing Dependency: 2.4.6-13.el7 for package: httpd-2.4.6-13.el7.x86_64
--&gt; Running transaction check
---&gt; Package httpd-tools.x86_64 0:2.4.6-12.el7 will be updated
---&gt; Package httpd-tools.x86_64 0:2.4.6-13.el7 will be an update
--&gt; Finished Dependency Resolution

Dependencies Resolved</pre><p>
							After executing the above command, <span class="strong strong"><strong><span class="application application">yum</span></strong></span> loads the necessary plug-ins and runs the transaction check. In this case, <span class="strong strong"><strong><span class="package package">httpd</span></strong></span> is already installed. Since the installed package is older than the latest currently available version, it will be updated. The same applies to the <span class="strong strong"><strong><span class="package package">httpd-tools</span></strong></span> package that <span class="strong strong"><strong><span class="package package">httpd</span></strong></span> depends on. Then, a transaction summary is displayed:
						</p><pre class="literallayout">================================================================================
 Package    Arch   Version         Repository        Size
================================================================================
Updating:
 httpd     x86_64  2.4.6-13.el7      rhel-x86_64-server-7  1.2 M
Updating for dependencies:
 httpd-tools  x86_64  2.4.6-13.el7      rhel-x86_64-server-7   77 k

Transaction Summary
================================================================================
Upgrade 1 Package (+1 Dependent package)

Total size: 1.2 M
Is this ok [y/d/N]:</pre><p>
							In this step <span class="strong strong"><strong><span class="application application">yum</span></strong></span> prompts you to confirm the installation. Apart from <code class="literal option">y</code> (yes) and <code class="literal option">N</code> (no) options, you can choose <code class="literal option">d</code> (download only) to download the packages but not to install them directly. If you choose <code class="literal option">y</code>, the installation proceeds with the following messages until it is finished successfully.
						</p><pre class="literallayout">Downloading packages:
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
 Updating  : httpd-tools-2.4.6-13.el7.x86_64               1/4
 Updating  : httpd-2.4.6-13.el7.x86_64                  2/4
 Cleanup  : httpd-2.4.6-12.el7.x86_64                  3/4
 Cleanup  : httpd-tools-2.4.6-12.el7.x86_64               4/4
 Verifying : httpd-2.4.6-13.el7.x86_64                  1/4
 Verifying : httpd-tools-2.4.6-13.el7.x86_64               2/4
 Verifying : httpd-tools-2.4.6-12.el7.x86_64               3/4
 Verifying : httpd-2.4.6-12.el7.x86_64                  4/4

Updated:
 httpd.x86_64 0:2.4.6-13.el7

Dependency Updated:
 httpd-tools.x86_64 0:2.4.6-13.el7

Complete!</pre></div></div><p>
						To install a previously downloaded package from the local directory on your system, use the following command:
					</p><pre class="literallayout"><code class="literal command">yum localinstall</code> <span class="emphasis"><em>path</em></span></pre><p>
						Replace <span class="emphasis"><em>path</em></span> with the path to the package you want to install.
					</p></section><section class="section" id="sec-Downloading"><div class="titlepage"><div><div><h3 class="title">9.2.5.&nbsp;Downloading Packages</h3></div></div></div><p>
						As shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-Installation_Process" title="Example 9.12. Installation Process">Example&nbsp;9.12, “Installation Process”</a>, at a certain point of installation process you are prompted to confirm the installation with the following message:
					</p><pre class="literallayout">...
Total size: 1.2 M
Is this ok [y/d/N]:
...</pre><p>
						With the <code class="literal option">d</code> option, yum downloads the packages without installing them immediately. You can install these packages later offline with the <code class="literal command">yum localinstall</code> command or you can share them with a different device. Downloaded packages are saved in one of the subdirectories of the cache directory, by default <code class="literal">/var/cache/yum/$basearch/$releasever/packages/</code>. The downloading proceeds in background mode so that you can use <span class="strong strong"><strong><span class="application application">yum</span></strong></span> for other operations in parallel.
					</p></section><section class="section" id="sec-Removing"><div class="titlepage"><div><div><h3 class="title">9.2.6.&nbsp;Removing Packages</h3></div></div></div><p>
						Similarly to package installation, yum enables you to uninstall them. To uninstall a particular package, as well as any packages that depend on it, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">yum remove <span class="emphasis"><em>package_name</em></span>&amp;hellip;</pre><p>
						As when you install multiple packages, you can remove several at once by adding more package names to the command.
					</p><div class="example" id="ex-removing_packages"><p class="title"><strong>Example&nbsp;9.13.&nbsp;Removing several packages</strong></p><div class="example-contents"><p>
							To remove <span class="strong strong"><strong><span class="package package">totem</span></strong></span>, type the following at a shell prompt:
						</p><pre class="literallayout">~]# yum remove totem</pre></div></div><p>
						Similar to <code class="literal command">install</code>, <code class="literal command">remove</code> can take these arguments:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								package names
							</li><li class="listitem">
								glob expressions
							</li><li class="listitem">
								file lists
							</li><li class="listitem">
								package provides
							</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Yum is not able to remove a package without also removing packages which depend on it. This type of operation, which can only be performed by <span class="strong strong"><strong><span class="application application">RPM</span></strong></span>, is not advised, and can potentially leave your system in a non-functioning state or cause applications to not work correctly or crash.
						</p></div></div></section></section><section class="section" id="sec-Working_with_Package_Groups"><div class="titlepage"><div><div><h2 class="title">9.3.&nbsp;Working with Package Groups</h2></div></div></div><p>
					A package group is a collection of packages that serve a common purpose, for instance <span class="emphasis"><em>System Tools</em></span> or <span class="emphasis"><em>Sound and Video</em></span>. Installing a package group pulls a set of dependent packages, saving time considerably. The <code class="literal command">yum groups</code> command is a top-level command that covers all the operations that act on package groups in yum.
				</p><section class="section" id="sec2-Listing_Package_Groups"><div class="titlepage"><div><div><h3 class="title">9.3.1.&nbsp;Listing Package Groups</h3></div></div></div><p>
						The <code class="literal">summary</code> option is used to view the number of installed groups, available groups, available environment groups, and both installed and available language groups:
					</p><pre class="literallayout"><code class="literal command">yum groups</code> <code class="literal option">summary</code></pre><div class="example" id="ex-yum_groups_summary_output"><p class="title"><strong>Example&nbsp;9.14.&nbsp;Example output of yum groups summary</strong></p><div class="example-contents"><pre class="literallayout">~]$ <code class="literal command">yum</code> <code class="literal option">groups</code> <code class="literal option">summary</code>
Loaded plugins: langpacks, product-id, subscription-manager
Available Environment Groups: 12
Installed Groups: 10
Available Groups: 12</pre></div></div><p>
						To list all package groups from yum repositories add the <code class="literal">list</code> option. You can filter the command output by group names.
					</p><pre class="literallayout">yum group list <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><p>
						Several optional arguments can be passed to this command, including <code class="literal option">hidden</code> to list also groups not marked as user visible, and <code class="literal option">ids</code> to list group IDs. You can add <code class="literal option">language</code>, <code class="literal option">environment</code>, <code class="literal option">installed</code>, or <code class="literal option">available</code> options to reduce the command output to a specific group type.
					</p><p>
						To list mandatory and optional packages contained in a particular group, use the following command:
					</p><pre class="literallayout">yum group info <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-group_info"><p class="title"><strong>Example&nbsp;9.15.&nbsp;Viewing information on the LibreOffice package group</strong></p><div class="example-contents"><pre class="literallayout"> ~]$ yum group info <code class="literal">LibreOffice</code>
Loaded plugins: langpacks, product-id, subscription-manager

Group: LibreOffice
 Group-Id: libreoffice
 Description: LibreOffice Productivity Suite
 Mandatory Packages:
 =libreoffice-calc
  libreoffice-draw
 -libreoffice-emailmerge
  libreoffice-graphicfilter
 =libreoffice-impress
 =libreoffice-math
 =libreoffice-writer
 +libreoffice-xsltfilter
 Optional Packages:
  libreoffice-base
  libreoffice-pyuno</pre></div></div><p>
						As you can see in the above example, the packages included in the package group can have different states that are marked with the following symbols:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								" <code class="literal option">-</code> " — Package is not installed and it will not be installed as a part of the package group.
							</li><li class="listitem">
								" <code class="literal option">+</code> " — Package is not installed but it will be installed on the next <code class="literal command">yum upgrade</code> or <code class="literal command">yum group upgrade</code>.
							</li><li class="listitem">
								" <code class="literal option">=</code> " — Package is installed and it was installed as a part of the package group.
							</li><li class="listitem">
								<span class="emphasis"><em>no symbol</em></span> — Package is installed but it was installed outside of the package group. This means that the <code class="literal command">yum group remove</code> will not remove these packages.
							</li></ul></div><p>
						These distinctions take place only when the <code class="literal option">group_command</code> configuration parameter is set to <code class="literal option">objects</code>, which is the default setting. Set this parameter to a different value if you do not want yum to track if a package was installed as a part of the group or separately, which will make "<span class="emphasis"><em>no symbol</em></span>" packages equivalent to "<span class="emphasis"><em>=</em></span>" packages.
					</p><p>
						You can alter the above package states using the <code class="literal command">yum group mark</code> command. For example, <code class="literal command">yum group mark packages</code> marks any given installed packages as members of a specified group. To avoid installation of new packages on group update, use <code class="literal command">yum group mark blacklist</code>. See the <code class="literal">yum</code>(8) man page for more information on capabilities of <code class="literal command">yum group mark</code>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can identify an environmental group with use of the <span class="emphasis"><em>@^</em></span> prefix and a package group can be marked with <span class="emphasis"><em>@</em></span>. When using <code class="literal command">yum</code> <code class="literal option">group</code> <code class="literal option">list</code>, <code class="literal option">info</code>, <code class="literal option">install</code>, or <code class="literal option">remove</code>, pass <span class="emphasis"><em>@group_name</em></span> to specify a package group, <span class="emphasis"><em>@^group_name</em></span> to specify an environmental group, or <span class="emphasis"><em>group_name</em></span> to include both.
						</p></div></div></section><section class="section" id="sec2-Installing_a_Package_Group"><div class="titlepage"><div><div><h3 class="title">9.3.2.&nbsp;Installing a Package Group</h3></div></div></div><p>
						Each package group has a name and a group ID (<span class="emphasis"><em>groupid</em></span>). To list the names of all package groups, and their group IDs, which are displayed in parentheses, type:
					</p><pre class="literallayout"><code class="literal command">yum group list ids</code></pre><div class="example" id="ex-listing_package_groups"><p class="title"><strong>Example&nbsp;9.16.&nbsp;Finding name and groupid of a package group</strong></p><div class="example-contents"><p>
							To find the name or ID of a package group, for example a group related to the KDE desktop environment, type:
						</p><pre class="literallayout">~]$ yum group list ids kde\*
Available environment groups:
  KDE Plasma Workspaces (kde-desktop-environment)
Done</pre><p>
							Some groups are hidden by settings in the configured repositories. For example, on a server, make use of the <code class="literal option">hidden</code> command option to list hidden groups too:
						</p><pre class="literallayout">~]$ yum group list hidden ids kde\*
Loaded plugins: product-id, subscription-manager
Available Groups:
  KDE (kde-desktop)
Done</pre></div></div><p>
						You can install a package group by passing its full group name, without the groupid part, to the <code class="literal command">group install</code> command. As <code class="literal">root</code>, type:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">group install</code> <span class="emphasis"><em>"group name"</em></span></pre><p>
						You can also install by groupid. As <code class="literal">root</code>, execute the following command:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">group install</code> <span class="emphasis"><em>groupid</em></span></pre><p>
						You can pass the groupid or quoted group name to the <code class="literal command">install</code> command if you prepend it with an <span class="keycap"><strong>@</strong></span> symbol, which tells <code class="literal command">yum</code> that you want to perform <code class="literal command">group install</code>. As <code class="literal">root</code>, type:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">install</code> @<span class="emphasis"><em>group</em></span></pre><p>
						Replace <span class="emphasis"><em>group</em></span> with the groupid or quoted group name. The same logic applies to environmental groups:
					</p><pre class="literallayout">yum install @^<span class="emphasis"><em>group</em></span></pre><div class="example" id="ex-installing_kde"><p class="title"><strong>Example&nbsp;9.17.&nbsp;Four equivalent ways of installing the KDE Desktop group</strong></p><div class="example-contents"><p>
							As mentioned before, you can use four alternative, but equivalent ways to install a package group. For KDE Desktop, the commands look as follows:
						</p><pre class="literallayout">~]# yum group install "KDE Desktop"
~]# yum group install kde-desktop
~]# yum install @"KDE Desktop"
~]# yum install @kde-desktop</pre></div></div></section><section class="section" id="sec-Removing_a_Package_Group"><div class="titlepage"><div><div><h3 class="title">9.3.3.&nbsp;Removing a Package Group</h3></div></div></div><p>
						You can remove a package group using syntax similar to the <code class="literal command">install</code> syntax, with use of either name of the package group or its id. As <code class="literal">root</code>, type:
					</p><pre class="literallayout">yum group remove <span class="emphasis"><em>group_name</em></span></pre><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">group remove</code> <span class="emphasis"><em>groupid</em></span></pre><p>
						Also, you can pass the groupid or quoted name to the <code class="literal command">remove</code> command if you prepend it with an <span class="keycap"><strong>@</strong></span>-symbol, which tells yum that you want to perform <code class="literal command">group remove</code>. As <code class="literal">root</code>, type:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">remove</code> @<span class="emphasis"><em>group</em></span></pre><p>
						Replace <span class="emphasis"><em>group</em></span> with the groupid or quoted group name. Similarly, you can replace an environmental group:
					</p><pre class="literallayout">yum remove @^<span class="emphasis"><em>group</em></span></pre><div class="example" id="ex-removing_kde"><p class="title"><strong>Example&nbsp;9.18.&nbsp;Four equivalent ways of removing the <code class="literal">KDE Desktop</code> group</strong></p><div class="example-contents"><p>
							Similarly to install, you can use four alternative, but equivalent ways to remove a package group. For KDE Desktop, the commands look as follows:
						</p><pre class="literallayout">~]# yum group remove "KDE Desktop"
~]# yum group remove kde-desktop
~]# yum remove @"KDE Desktop"
~]# yum remove @kde-desktop</pre></div></div></section></section><section class="section" id="sect-Yum-Transaction_History"><div class="titlepage"><div><div><h2 class="title">9.4.&nbsp;Working with Transaction History</h2></div></div></div><p>
					The <code class="literal command">yum history</code> command enables users to review information about a timeline of yum transactions, the dates and times they occurred, the number of packages affected, whether these transactions succeeded or were aborted, and if the RPM database was changed between transactions. Additionally, this command can be used to undo or redo certain transactions. All history data is stored in the <span class="emphasis"><em>history DB in the</em></span> <code class="literal">/var/lib/yum/history/</code> directory.
				</p><section class="section" id="sect-Yum-Transaction_History-Listing"><div class="titlepage"><div><div><h3 class="title">9.4.1.&nbsp;Listing Transactions</h3></div></div></div><p>
						To display a list of the twenty most recent transactions, as <code class="literal">root</code>, either run <code class="literal command">yum history</code> with no additional arguments, or type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">list</code></pre><p>
						To display all transactions, add the <code class="literal">all</code> keyword:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">list</code> <code class="literal option">all</code></pre><p>
						To display only transactions in a given range, use the command in the following form:
					</p><pre class="literallayout">yum history list <span class="emphasis"><em>start_id</em></span>..<span class="emphasis"><em>end_id</em></span></pre><p>
						You can also list only transactions regarding a particular package or packages. To do so, use the command with a package name or a glob expression:
					</p><pre class="literallayout">yum history list <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-listing_transactions"><p class="title"><strong>Example&nbsp;9.19.&nbsp;Listing the five oldest transactions</strong></p><div class="example-contents"><p>
							In the output of <code class="literal command">yum history list</code>, the most recent transaction is displayed at the top of the list. To display information about the five oldest transactions stored in the history data base, type:
						</p><pre class="literallayout">~]# yum history list 1..5
Loaded plugins: langpacks, product-id, subscription-manager
ID   | Login user        | Date and time  | Action(s)   | Altered
-------------------------------------------------------------------------------
   5 | User &lt;user&gt;       | 2013-07-29 15:33 | Install    |  1
   4 | User &lt;user&gt;       | 2013-07-21 15:10 | Install    |  1
   3 | User &lt;user&gt;       | 2013-07-16 15:27 | I, U      |  73
   2 | System &lt;unset&gt;      | 2013-07-16 15:19 | Update     |  1
   1 | System &lt;unset&gt;      | 2013-07-16 14:38 | Install    | 1106
history list</pre></div></div><p>
						All forms of the <code class="literal command">yum history list</code> command produce tabular output with each row consisting of the following columns:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">ID</code> — an integer value that identifies a particular transaction.
							</li><li class="listitem">
								<code class="literal">Login user</code> — the name of the user whose login session was used to initiate a transaction. This information is typically presented in the <code class="literal"><span class="emphasis"><em>Full Name</em></span> &lt;<span class="emphasis"><em>username&gt;</em></span></code> form. For transactions that were not issued by a user (such as an automatic system update), <code class="literal">System &lt;unset&gt;</code> is used instead.
							</li><li class="listitem">
								<code class="literal">Date and time</code> — the date and time when a transaction was issued.
							</li><li class="listitem">
								<code class="literal">Action(s)</code> — a list of actions that were performed during a transaction as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Yum-Transaction_History-Actions" title="Table 9.1. Possible values of the Action(s) field">Table&nbsp;9.1, “Possible values of the Action(s) field”</a>.
							</li><li class="listitem">
								<code class="literal">Altered</code> — the number of packages that were affected by a transaction, possibly followed by additional information as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Yum-Transaction_History-Altered" title="Table 9.2. Possible values of the Altered field">Table&nbsp;9.2, “Possible values of the Altered field”</a>.
							</li></ul></div><div class="table" id="tabl-Yum-Transaction_History-Actions"><p class="title"><strong>Table&nbsp;9.1.&nbsp;Possible values of the Action(s) field</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569376751376" scope="col">Action</th><th align="left" valign="top" id="idm140569376750288" scope="col">Abbreviation</th><th align="left" valign="top" id="idm140569376749200" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569376751376"> <p>
										<code class="literal">Downgrade</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376750288"> <p>
										<code class="literal">D</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376749200"> <p>
										At least one package has been downgraded to an older version.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569376751376"> <p>
										<code class="literal">Erase</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376750288"> <p>
										<code class="literal">E</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376749200"> <p>
										At least one package has been removed.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569376751376"> <p>
										<code class="literal">Install</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376750288"> <p>
										<code class="literal">I</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376749200"> <p>
										At least one new package has been installed.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569376751376"> <p>
										<code class="literal">Obsoleting</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376750288"> <p>
										<code class="literal">O</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376749200"> <p>
										At least one package has been marked as obsolete.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569376751376"> <p>
										<code class="literal">Reinstall</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376750288"> <p>
										<code class="literal">R</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376749200"> <p>
										At least one package has been reinstalled.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569376751376"> <p>
										<code class="literal">Update</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376750288"> <p>
										<code class="literal">U</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569376749200"> <p>
										At least one package has been updated to a newer version.
									</p>
									 </td></tr></tbody></table></div></div><div class="table" id="tabl-Yum-Transaction_History-Altered"><p class="title"><strong>Table&nbsp;9.2.&nbsp;Possible values of the Altered field</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569380021056" scope="col">Symbol</th><th align="left" valign="top" id="idm140569380019968" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569380021056"> <p>
										<code class="literal">&lt;</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569380019968"> <p>
										Before the transaction finished, the <code class="literal">rpmdb</code> database was changed outside yum.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569380021056"> <p>
										<code class="literal">&gt;</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569380019968"> <p>
										After the transaction finished, the <code class="literal">rpmdb</code> database was changed outside yum.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569380021056"> <p>
										<code class="literal">*</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569380019968"> <p>
										The transaction failed to finish.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569380021056"> <p>
										<code class="literal">#</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569380019968"> <p>
										The transaction finished successfully, but yum returned a non-zero exit code.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569380021056"> <p>
										<code class="literal">E</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569380019968"> <p>
										The transaction finished successfully, but an error or a warning was displayed.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569380021056"> <p>
										<code class="literal">P</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569380019968"> <p>
										The transaction finished successfully, but problems already existed in the <code class="literal">rpmdb</code> database.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569380021056"> <p>
										<code class="literal">s</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569380019968"> <p>
										The transaction finished successfully, but the <code class="literal option">--skip-broken</code> command-line option was used and certain packages were skipped.
									</p>
									 </td></tr></tbody></table></div></div><p>
						To synchronize the <code class="literal">rpmdb</code> or <code class="literal">yumdb</code> database contents for any installed package with the currently used <code class="literal">rpmdb</code> or <code class="literal">yumdb</code> database, type the following:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">sync</code></pre><p>
						To display some overall statistics about the currently used history database use the following command:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">stats</code></pre><div class="example" id="ex-yum_history_stats_output"><p class="title"><strong>Example&nbsp;9.20.&nbsp;Example output of yum history stats</strong></p><div class="example-contents"><pre class="literallayout">~]# yum history stats
Loaded plugins: langpacks, product-id, subscription-manager
File    : //var/lib/yum/history/history-2012-08-15.sqlite
Size    : 2,766,848
Transactions: 41
Begin time : Wed Aug 15 16:18:25 2012
End time  : Wed Feb 27 14:52:30 2013
Counts   :
 NEVRAC : 2,204
 NEVRA : 2,204
 NA   : 1,759
 NEVR  : 2,204
 rpm DB : 2,204
 yum DB : 2,204
history stats</pre></div></div><p>
						Yum also enables you to display a summary of all past transactions. To do so, run the command in the following form as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">summary</code></pre><p>
						To display only transactions in a given range, type:
					</p><pre class="literallayout">yum history summary <span class="emphasis"><em>start_id</em></span>..<span class="emphasis"><em>end_id</em></span></pre><p>
						Similarly to the <code class="literal command">yum history list</code> command, you can also display a summary of transactions regarding a certain package or packages by supplying a package name or a glob expression:
					</p><pre class="literallayout">yum history summary <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-yum_history_summary"><p class="title"><strong>Example&nbsp;9.21.&nbsp;Summary of the five latest transactions</strong></p><div class="example-contents"><pre class="literallayout">~]# yum history summary 1..5
Loaded plugins: langpacks, product-id, subscription-manager
Login user         | Time        | Action(s)    | Altered
-------------------------------------------------------------------------------
Jaromir ... &lt;jhradilek&gt;  | Last day      | Install     |    1
Jaromir ... &lt;jhradilek&gt;  | Last week      | Install     |    1
Jaromir ... &lt;jhradilek&gt;  | Last 2 weeks    | I, U       |    73
System &lt;unset&gt;       | Last 2 weeks    | I, U       |   1107
history summary</pre></div></div><p>
						All forms of the <code class="literal command">yum history summary</code> command produce simplified tabular output similar to the output of <code class="literal command">yum history list</code>.
					</p><p>
						As shown above, both <code class="literal command">yum history list</code> and <code class="literal command">yum history summary</code> are oriented towards transactions, and although they allow you to display only transactions related to a given package or packages, they lack important details, such as package versions. To list transactions from the perspective of a package, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">yum history package-list <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-tracing_the_history_of_a_package"><p class="title"><strong>Example&nbsp;9.22.&nbsp;Tracing the history of a package</strong></p><div class="example-contents"><p>
							For example, to trace the history of <span class="strong strong"><strong><span class="package package">subscription-manager</span></strong></span> and related packages, type the following at a shell prompt:
						</p><pre class="literallayout">~]# yum history package-list subscription-manager\*
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager
ID   | Action(s)   | Package
-------------------------------------------------------------------------------
   2 | Updated    | subscription-manager-1.13.22-1.el7.x86_64     EE
   2 | Update     |           1.15.9-15.el7.x86_64     EE
   2 | Obsoleted   | subscription-manager-firstboot-1.13.22-1.el7.x86_64 EE
   2 | Updated    | subscription-manager-gui-1.13.22-1.el7.x86_64   EE
   2 | Update     |             1.15.9-15.el7.x86_64   EE
   2 | Obsoleting   | subscription-manager-initial-setup-addon-1.15.9-15.el7.x86_64 EE
   1 | Install    | subscription-manager-1.13.22-1.el7.x86_64
   1 | Install    | subscription-manager-firstboot-1.13.22-1.el7.x86_64
   1 | Install    | subscription-manager-gui-1.13.22-1.el7.x86_64
history package-list</pre><p>
							In this example, three packages were installed during the initial system installation: <span class="strong strong"><strong><span class="package package">subscription-manager</span></strong></span>, <span class="strong strong"><strong><span class="package package">subscription-manager-firstboot</span></strong></span>, and <span class="strong strong"><strong><span class="package package">subscription-manager-gui</span></strong></span>. In the third transaction, all these packages were updated from version 1.10.11 to version 1.10.17.
						</p></div></div></section><section class="section" id="sect-Yum-Transaction_History-Examining"><div class="titlepage"><div><div><h3 class="title">9.4.2.&nbsp;Examining Transactions</h3></div></div></div><p>
						To display the summary of a single transaction, as <code class="literal">root</code>, use the <code class="literal command">yum history summary</code> command in the following form:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">summary</code> <span class="emphasis"><em>id</em></span></pre><p>
						Here, <span class="emphasis"><em>id</em></span> stands for the ID of the transaction.
					</p><p>
						To examine a particular transaction or transactions in more detail, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">info</code> <span class="emphasis"><em>id</em></span>&amp;hellip;</pre><p>
						The <span class="emphasis"><em>id</em></span> argument is optional and when you omit it, yum automatically uses the last transaction. Note that when specifying more than one transaction, you can also use a range:
					</p><pre class="literallayout">yum history info <span class="emphasis"><em>start_id</em></span>..<span class="emphasis"><em>end_id</em></span></pre><div class="example" id="ex-examining_transactions"><p class="title"><strong>Example&nbsp;9.23.&nbsp;Example output of yum history info</strong></p><div class="example-contents"><p>
							The following is sample output for two transactions, each installing one new package:
						</p><pre class="literallayout">~]# yum history info 4..5
Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager
Transaction ID : 4..5
Begin time   : Mon Dec 7 16:51:07 2015
Begin rpmdb  : 1252:d2b62b7b5768e855723954852fd7e55f641fbad9
End time    :      17:18:49 2015 (27 minutes)
End rpmdb   : 1253:cf8449dc4c53fc0cbc0a4c48e496a6c50f3d43c5
User      : Maxim Svistunov &lt;msvistun&gt;
Return-Code  : Success
Command Line  : install tigervnc-server.x86_64
Command Line  : reinstall tigervnc-server
Transaction performed with:
  Installed   rpm-4.11.3-17.el7.x86_64         @rhel-7-server-rpms
  Installed   subscription-manager-1.15.9-15.el7.x86_64 @rhel-7-server-rpms
  Installed   yum-3.4.3-132.el7.noarch         @rhel-7-server-rpms
Packages Altered:
  Reinstall tigervnc-server-1.3.1-3.el7.x86_64 @rhel-7-server-rpms
history info</pre></div></div><p>
						You can also view additional information, such as what configuration options were used at the time of the transaction, or from what repository and why were certain packages installed. To determine what additional information is available for a certain transaction, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">addon-info</code> <span class="emphasis"><em>id</em></span></pre><p>
						Similarly to <code class="literal command">yum history info</code>, when no <span class="emphasis"><em>id</em></span> is provided, yum automatically uses the latest transaction. Another way to refer to the latest transaction is to use the <code class="literal">last</code> keyword:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">addon-info</code> <code class="literal option">last</code></pre><div class="example" id="ex-yum_history_addon-info"><p class="title"><strong>Example&nbsp;9.24.&nbsp;Example output of <code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">addon-info</code></strong></p><div class="example-contents"><p>
							For the fourth transaction in the history, the <code class="literal command">yum history addon-info</code> command provides the following output:
						</p><pre class="literallayout">~]# yum history addon-info 4
Loaded plugins: langpacks, product-id, subscription-manager
Transaction ID: 4
Available additional history information:
 config-main
 config-repos
 saved_tx

history addon-info</pre></div></div><p>
						In the output of the <code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">addon-info</code> command, three types of information are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">config-main</code> — global yum options that were in use during the transaction. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_main_Options" title="9.5.1. Setting [main] Options">Section&nbsp;9.5.1, “Setting [main] Options”</a> for information on how to change global options.
							</li><li class="listitem">
								<code class="literal">config-repos</code> — options for individual yum repositories. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_repository_Options" title="9.5.2. Setting [repository] Options">Section&nbsp;9.5.2, “Setting [repository] Options”</a> for information on how to change options for individual repositories.
							</li><li class="listitem">
								<code class="literal">saved_tx</code> — the data that can be used by the <code class="literal command">yum load-transaction</code> command in order to repeat the transaction on another machine (see below).
							</li></ul></div><p>
						To display a selected type of additional information, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">addon-info</code> <span class="emphasis"><em>id</em></span> <span class="emphasis"><em>information</em></span></pre></section><section class="section" id="sect-Yum-Transaction_History-Reverting"><div class="titlepage"><div><div><h3 class="title">9.4.3.&nbsp;Reverting and Repeating Transactions</h3></div></div></div><p>
						Apart from reviewing the transaction history, the <code class="literal command">yum history</code> command provides means to revert or repeat a selected transaction. To revert a transaction, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">undo</code> <span class="emphasis"><em>id</em></span></pre><p>
						To repeat a particular transaction, as <code class="literal">root</code>, run the following command:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">redo</code> <span class="emphasis"><em>id</em></span></pre><p>
						Both commands also accept the <code class="literal">last</code> keyword to undo or repeat the latest transaction.
					</p><p>
						Note that both <code class="literal command">yum history undo</code> and <code class="literal command">yum history redo</code> commands only revert or repeat the steps that were performed during a transaction. If the transaction installed a new package, the <code class="literal command">yum history undo</code> command will uninstall it, and if the transaction uninstalled a package the command will again install it. This command also attempts to downgrade all updated packages to their previous version, if these older packages are still available.
					</p><p>
						When managing several identical systems, yum also enables you to perform a transaction on one of them, store the transaction details in a file, and after a period of testing, repeat the same transaction on the remaining systems as well. To store the transaction details to a file, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout">yum -q history addon-info <span class="emphasis"><em>id</em></span> saved_tx &gt; <code class="literal">file_name</code></pre><p>
						Once you copy this file to the target system, you can repeat the transaction by using the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">yum load-transaction <span class="emphasis"><em>file_name</em></span></pre><p>
						You can configure <code class="literal option">load-transaction</code> to ignore missing packages or rpmdb version. For more information on these configuration options see the <code class="literal">yum.conf</code>(5) man page.
					</p></section><section class="section" id="sect-Yum-Transaction_History-New"><div class="titlepage"><div><div><h3 class="title">9.4.4.&nbsp;Starting New Transaction History</h3></div></div></div><p>
						Yum stores the transaction history in a single SQLite database file. To start new transaction history, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">history</code> <code class="literal option">new</code></pre><p>
						This will create a new, empty database file in the <code class="literal">/var/lib/yum/history/</code> directory. The old transaction history will be kept, but will not be accessible as long as a newer database file is present in the directory.
					</p></section></section><section class="section" id="sec-Configuring_Yum_and_Yum_Repositories"><div class="titlepage"><div><div><h2 class="title">9.5.&nbsp;Configuring Yum and Yum Repositories</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To expand your expertise, you might also be interested in the <a class="link" href="http://www.redhat.com/en/services/training/rh254-red-hat-system-administration-iii?cr=cp|tr|pdtxt|00004">Red Hat System Administration III (RH254)</a> and <a class="link" href="http://www.redhat.com/en/services/training/rh199-rhcsa-rapid-track-course?cr=cp|tr|pdtxt|00004">RHCSA Rapid Track (RH199)</a> training courses.
					</p></div></div><p>
					The configuration information for yum and related utilities is located at <code class="literal">/etc/yum.conf</code>. This file contains one mandatory <code class="literal">[main]</code> section, which enables you to set yum options that have global effect, and can also contain one or more <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> sections, which allow you to set repository-specific options. However, it is recommended to define individual repositories in new or existing <code class="literal">.repo</code> files in the <code class="literal">/etc/yum.repos.d/</code> directory. The values you define in individual <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> sections of the <code class="literal">/etc/yum.conf</code> file override values set in the <code class="literal">[main]</code> section.
				</p><p>
					This section shows you how to:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							set global yum options by editing the <code class="literal">[main]</code> section of the <code class="literal">/etc/yum.conf</code> configuration file;
						</li><li class="listitem">
							set options for individual repositories by editing the <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> sections in <code class="literal">/etc/yum.conf</code> and <code class="literal">.repo</code> files in the <code class="literal">/etc/yum.repos.d/</code> directory;
						</li><li class="listitem">
							use yum variables in <code class="literal">/etc/yum.conf</code> and files in the <code class="literal">/etc/yum.repos.d/</code> directory so that dynamic version and architecture values are handled correctly;
						</li><li class="listitem">
							add, enable, and disable yum repositories on the command line; and
						</li><li class="listitem">
							set up your own custom yum repository.
						</li></ul></div><section class="section" id="sec-Setting_main_Options"><div class="titlepage"><div><div><h3 class="title">9.5.1.&nbsp;Setting [main] Options</h3></div></div></div><p>
						The <code class="literal">/etc/yum.conf</code> configuration file contains exactly one <code class="literal">[main]</code> section, and while some of the key-value pairs in this section affect how yum operates, others affect how yum treats repositories.
					</p><p>
						You can add many additional options under the <code class="literal">[main]</code> section heading in <code class="literal">/etc/yum.conf</code>.
					</p><p>
						A sample <code class="literal">/etc/yum.conf</code> configuration file can look like this:
					</p><pre class="literallayout">[main]
cachedir=/var/cache/yum/$basearch/$releasever
keepcache=0
debuglevel=2
logfile=/var/log/yum.log
exactarch=1
obsoletes=1
gpgcheck=1
plugins=1
installonly_limit=3

[comments abridged]

# PUT YOUR REPOS HERE OR IN separate files named file.repo
# in /etc/yum.repos.d</pre><p>
						The following are the most commonly used options in the <code class="literal">[main]</code> section:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal option">assumeyes</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									The <code class="literal option">assumeyes</code> option determines whether or not yum prompts for confirmation of critical actions. Replace <span class="emphasis"><em>value</em></span> with one of:
								</p><p class="simpara">
									<code class="literal">0</code> (<span class="emphasis"><em>default</em></span>) — yum prompts for confirmation of critical actions it performs.
								</p><p class="simpara">
									<code class="literal">1</code> — Do not prompt for confirmation of critical <code class="literal command">yum</code> actions. If <code class="literal option">assumeyes=1</code> is set, yum behaves in the same way as the command-line options <code class="literal option">-y</code> and <code class="literal option">--assumeyes</code>.
								</p></dd><dt><span class="term"><code class="literal option">cachedir</code>=<span class="emphasis"><em>directory</em></span></span></dt><dd><p class="simpara">
									Use this option to set the directory where yum stores its cache and database files. Replace <span class="emphasis"><em>directory</em></span> with an absolute path to the directory. By default, yum’s cache directory is <code class="literal">/var/cache/yum/$basearch/$releasever/</code>.
								</p><p class="simpara">
									See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_Yum_Variables" title="9.5.3. Using Yum Variables">Section&nbsp;9.5.3, “Using Yum Variables”</a> for descriptions of the <code class="literal">$basearch</code> and <code class="literal">$releasever</code> yum variables.
								</p></dd><dt><span class="term"><code class="literal option">debuglevel</code>=<span class="emphasis"><em>value</em></span></span></dt><dd>
									This option specifies the detail of debugging output produced by yum. Here, <span class="emphasis"><em>value</em></span> is an integer between <code class="literal">1</code> and <code class="literal">10</code>. Setting a higher <code class="literal option">debuglevel</code> value causes yum to display more detailed debugging output. <code class="literal option">debuglevel=2</code> is the default, while <code class="literal option">debuglevel=0</code> disables debugging output.
								</dd><dt><span class="term"><code class="literal option">exactarch</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									With this option, you can set yum to consider the exact architecture when updating already installed packages. Replace <span class="emphasis"><em>value</em></span> with:
								</p><p class="simpara">
									<code class="literal">0</code> — Do not take into account the exact architecture when updating packages.
								</p><p class="simpara">
									<code class="literal">1</code> (<span class="emphasis"><em>default</em></span>) — Consider the exact architecture when updating packages. With this setting, yum does not install a package for 32-bit architecture to update a package already installed on the system with 64-bit architecture.
								</p></dd><dt><span class="term"><code class="literal option">exclude</code>=<span class="emphasis"><em>package_name</em></span> <span class="emphasis"><em>more_package_names</em></span></span></dt><dd>
									The <code class="literal option">exclude</code> option enables you to exclude packages by keyword during installation or system update. Listing multiple packages for exclusion can be accomplished by quoting a space-delimited list of packages. Shell glob expressions using wildcards (for example, <code class="literal">*</code> and <code class="literal">?</code>) are allowed.
								</dd><dt><span class="term"><code class="literal option">gpgcheck</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									Use the <code class="literal option">gpgcheck</code> option to specify if yum should perform a GPG signature check on packages. Replace <span class="emphasis"><em>value</em></span> with:
								</p><p class="simpara">
									<code class="literal">0</code> — Disable GPG signature-checking on packages in all repositories, including local package installation.
								</p><p class="simpara">
									<code class="literal">1</code> (<span class="emphasis"><em>default</em></span>) — Enable checking of GPG signature on all packages in all repositories, including local package installation. With <code class="literal option">gpgcheck</code> enabled, all packages' signatures are checked.
								</p><p class="simpara">
									If this option is set in the <code class="literal">[main]</code> section of the <code class="literal">/etc/yum.conf</code> file, it sets the GPG-checking rule for all repositories. However, you can also set <code class="literal option">gpgcheck=<span class="emphasis"><em>value</em></span></code> for individual repositories instead; that is, you can enable GPG-checking on one repository while disabling it on another. Setting <code class="literal option">gpgcheck=<span class="emphasis"><em>value</em></span></code> for an individual repository in its corresponding <code class="literal">.repo</code> file overrides the default if it is present in <code class="literal">/etc/yum.conf</code>.
								</p></dd><dt><span class="term"><code class="literal option">group_command</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									Use the <code class="literal option">group_command</code> option to specify how the <code class="literal command">yum group install</code>, <code class="literal command">yum group upgrade</code>, and <code class="literal command">yum group remove</code> commands handle a package group. Replace <span class="emphasis"><em>value</em></span> with on of:
								</p><p class="simpara">
									<code class="literal option">simple</code> — Install all members of a package group. Upgrade only previously installed packages, but do not install packages that have been added to the group in the meantime.
								</p><p class="simpara">
									<code class="literal option">compat</code> — Similar to <code class="literal option">simple</code> but <code class="literal command">yum upgrade</code> also installs packages that were added to the group since the previous upgrade.
								</p><p class="simpara">
									<code class="literal option">objects</code> — (<span class="emphasis"><em>default</em></span>.) With this option, yum keeps track of the previously installed groups and distinguishes between packages installed as a part of the group and packages installed separately. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-group_info" title="Example 9.15. Viewing information on the LibreOffice package group">Example&nbsp;9.15, “Viewing information on the LibreOffice package group”</a>
								</p></dd><dt><span class="term"><code class="literal option">group_package_types</code>=<span class="emphasis"><em>package_type</em></span> <span class="emphasis"><em>more_package_types</em></span></span></dt><dd>
									Here you can specify which type of packages (<span class="emphasis"><em>optional</em></span>, <span class="emphasis"><em>default</em></span> or <span class="emphasis"><em>mandatory</em></span>) is installed when the <code class="literal command">yum</code> <code class="literal option">group</code> <code class="literal option">install</code> command is called. The <span class="emphasis"><em>default</em></span> and <span class="emphasis"><em>mandatory</em></span> package types are chosen by default.
								</dd><dt><span class="term"><code class="literal option">history_record</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									With this option, you can set yum to record transaction history. Replace <span class="emphasis"><em>value</em></span> with one of:
								</p><p class="simpara">
									<code class="literal">0</code> — yum should <span class="emphasis"><em>not</em></span> record history entries for transactions.
								</p><p class="simpara">
									<code class="literal">1</code> (<span class="emphasis"><em>default</em></span>) — yum should record history entries for transactions. This operation takes certain amount of disk space, and some extra time in the transactions, but it provides a lot of information about past operations, which can be displayed with the <code class="literal command">yum</code> <code class="literal option">history</code> command. <code class="literal option">history_record=1</code> is the default.
								</p><p class="simpara">
									For more information on the <code class="literal command">yum</code> <code class="literal option">history</code> command, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Yum-Transaction_History" title="9.4. Working with Transaction History">Section&nbsp;9.4, “Working with Transaction History”</a>.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Yum uses history records to detect modifications to the <code class="literal">rpmdb</code> data base that have been done outside of yum. In such case, yum displays a warning and automatically searches for possible problems caused by altering <code class="literal">rpmdb</code>. With <code class="literal option">history_record</code> turned off, yum is not able to detect these changes and no automatic checks are performed.
									</p></div></div></dd><dt><span class="term"><code class="literal option">installonlypkgs</code>=<span class="emphasis"><em>space</em></span> <span class="emphasis"><em>separated</em></span> <span class="emphasis"><em>list</em></span> <span class="emphasis"><em>of</em></span> <span class="emphasis"><em>packages</em></span></span></dt><dd><p class="simpara">
									Here you can provide a space-separated list of packages which yum can <span class="emphasis"><em>install</em></span>, but will never <span class="emphasis"><em>update</em></span>. See the <code class="literal">yum.conf</code>(5) manual page for the list of packages which are install-only by default.
								</p><p class="simpara">
									If you add the <code class="literal option">installonlypkgs</code> directive to <code class="literal">/etc/yum.conf</code>, ensure that you list <span class="emphasis"><em>all</em></span> of the packages that should be install-only, including any of those listed under the <code class="literal">installonlypkgs</code> section of <code class="literal">yum.conf</code>(5). In particular, make sure that kernel packages are always listed in <code class="literal option">installonlypkgs</code> (as they are by default), and <code class="literal option">installonly_limit</code> is always set to a value greater than <code class="literal">2</code> so that a backup kernel is always available in case the default one fails to boot.
								</p></dd></dl></div><div class="variablelist" id="varentry-installonly_limit_value"><dl class="variablelist"><dt><span class="term"><code class="literal option">installonly_limit</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									This option sets how many packages listed in the <code class="literal option">installonlypkgs</code> directive can be installed at the same time. Replace <span class="emphasis"><em>value</em></span> with an integer representing the maximum number of versions that can be installed simultaneously for any single package listed in <code class="literal option">installonlypkgs</code>.
								</p><p class="simpara">
									The defaults for the <code class="literal option">installonlypkgs</code> directive include several different kernel packages, so be aware that changing the value of <code class="literal option">installonly_limit</code> also affects the maximum number of installed versions of any single kernel package. The default value listed in <code class="literal">/etc/yum.conf</code> is <code class="literal option">installonly_limit=3</code>, and the minimum possible value is <code class="literal option">installonly_limit=2</code>.
								</p><p class="simpara">
									You cannot set <code class="literal option">installonly_limit=1</code> because that would make yum remove the running kernel, which is prohibited. If <code class="literal option">installonly_limit=1</code> is used, yum fails.
								</p><p class="simpara">
									Using <code class="literal option">installonly_limit=2</code> ensures that one backup kernel is available. However, it is recommended to keep the default setting <code class="literal option">installonly_limit=3</code>, so that you have two backup kernels available.
								</p></dd><dt><span class="term"><code class="literal option">keepcache</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									The <code class="literal option">keepcache</code> option determines whether yum keeps the cache of headers and packages after successful installation. Here, <span class="emphasis"><em>value</em></span> is one of:
								</p><p class="simpara">
									<code class="literal">0</code> (<span class="emphasis"><em>default</em></span>) — Do not retain the cache of headers and packages after a successful installation.
								</p><p class="simpara">
									<code class="literal">1</code> — Retain the cache after a successful installation.
								</p></dd><dt><span class="term"><code class="literal option">logfile</code>=<span class="emphasis"><em>file_name</em></span></span></dt><dd>
									To specify the location for logging output, replace <span class="emphasis"><em>file_name</em></span> with an absolute path to the file in which yum should write its logging output. By default, yum logs to <code class="literal">/var/log/yum.log</code>.
								</dd><dt><span class="term"><code class="literal option">max_connenctions</code>=<span class="emphasis"><em>number</em></span></span></dt><dd>
									Here <span class="emphasis"><em>value</em></span> stands for the maximum number of simultaneous connections, default is 5.
								</dd><dt><span class="term"><code class="literal option">multilib_policy</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									The <code class="literal option">multilib_policy</code> option sets the installation behavior if several architecture versions are available for package install. Here, <span class="emphasis"><em>value</em></span> stands for:
								</p><p class="simpara">
									<code class="literal">best</code> — install the best-choice architecture for this system. For example, setting <code class="literal option">multilib_policy=best</code> on an AMD64 system causes yum to install the 64-bit versions of all packages.
								</p><p class="simpara">
									<code class="literal">all</code> — always install every possible architecture for every package. For example, with <code class="literal option">multilib_policy</code> set to <code class="literal">all</code> on an AMD64 system, yum would install both the i686 and AMD64 versions of a package, if both were available.
								</p></dd><dt><span class="term"><code class="literal option">obsoletes</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									The <code class="literal option">obsoletes</code> option enables the obsoletes process logic during updates.When one package declares in its spec file that it <span class="emphasis"><em>obsoletes</em></span> another package, the latter package is replaced by the former package when the former package is installed. Obsoletes are declared, for example, when a package is renamed. Replace <span class="emphasis"><em>value</em></span> with one of:
								</p><p class="simpara">
									<code class="literal">0</code> — Disable yum’s obsoletes processing logic when performing updates.
								</p><p class="simpara">
									<code class="literal">1</code> (<span class="emphasis"><em>default</em></span>) — Enable yum’s obsoletes processing logic when performing updates.
								</p></dd><dt><span class="term"><code class="literal option">plugins</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									This is a global switch to enable or disable yum plug-ins, <span class="emphasis"><em>value</em></span> is one of:
								</p><p class="simpara">
									<code class="literal">0</code> — Disable all yum plug-ins globally.
								</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
										Disabling all plug-ins is not advised because certain plug-ins provide important yum services. In particular, <span class="strong strong"><strong><span class="application application">product-id</span></strong></span> and <span class="strong strong"><strong><span class="application application">subscription-manager</span></strong></span> plug-ins provide support for the certificate-based <code class="literal">Content Delivery Network</code> (<span class="strong strong"><strong>CDN</strong></span>). Disabling plug-ins globally is provided as a convenience option, and is generally only recommended when diagnosing a potential problem with yum.
									</p></div></div><p class="simpara">
									<code class="literal">1</code> (<span class="emphasis"><em>default</em></span>) — Enable all yum plug-ins globally. With <code class="literal option">plugins=1</code>, you can still disable a specific yum plug-in by setting <code class="literal option">enabled=0</code> in that plug-in’s configuration file.
								</p><p class="simpara">
									For more information about various yum plug-ins, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Yum_Plugins" title="9.6. Yum Plug-ins">Section&nbsp;9.6, “Yum Plug-ins”</a>. For further information on controlling plug-ins, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Enabling_Configuring_and_Disabling_Yum_Plugins" title="9.6.1. Enabling, Configuring, and Disabling Yum Plug-ins">Section&nbsp;9.6.1, “Enabling, Configuring, and Disabling Yum Plug-ins”</a>.
								</p></dd><dt><span class="term"><code class="literal option">reposdir</code>=<span class="emphasis"><em>directory</em></span></span></dt><dd>
									Here, <span class="emphasis"><em>directory</em></span> is an absolute path to the directory where <code class="literal">.repo</code> files are located. All <code class="literal">.repo</code> files contain repository information (similar to the <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> sections of <code class="literal">/etc/yum.conf</code>). Yum collects all repository information from <code class="literal">.repo</code> files and the <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> section of the <code class="literal">/etc/yum.conf</code> file to create a master list of repositories to use for transactions. If <code class="literal">reposdir</code> is not set, yum uses the default directory <code class="literal">/etc/yum.repos.d/</code>.
								</dd><dt><span class="term"><code class="literal option">retries</code>=<span class="emphasis"><em>value</em></span></span></dt><dd>
									This option sets the number of times yum should attempt to retrieve a file before returning an error. <span class="emphasis"><em>value</em></span> is an integer <code class="literal">0</code> or greater. Setting value to <code class="literal">0</code> makes yum retry forever. The default value is <code class="literal">10</code>.
								</dd></dl></div><p>
						For a complete list of available <code class="literal">[main]</code> options, see the <code class="literal">[main] OPTIONS</code> section of the <span class="emphasis"><em>yum.conf</em></span>(5) manual page.
					</p></section><section class="section" id="sec-Setting_repository_Options"><div class="titlepage"><div><div><h3 class="title">9.5.2.&nbsp;Setting [repository] Options</h3></div></div></div><p>
						The <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> sections, where <span class="emphasis"><em>repository</em></span> is a unique repository ID such as <code class="literal">my_personal_repo</code> (spaces are not permitted), allow you to define individual yum repositories. To avoid conflicts, custom repositories should not use names used by Red Hat repositories.
					</p><p>
						The following is a bare minimum example of the form a <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> section takes:
					</p><pre class="literallayout">[<span class="emphasis"><em>repository</em></span>]
name=<span class="emphasis"><em>repository_name</em></span>
baseurl=<span class="emphasis"><em>repository_url</em></span></pre><p>
						Every <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> section must contain the following directives:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal option">name</code>=<span class="emphasis"><em>repository_name</em></span></span></dt><dd>
									Here, <span class="emphasis"><em>repository_name</em></span> is a human-readable string describing the repository.
								</dd><dt><span class="term"><code class="literal option">baseurl</code>=<span class="emphasis"><em>repository_url</em></span></span></dt><dd><p class="simpara">
									Replace <span class="emphasis"><em>repository_url</em></span> with a URL to the directory where the repodata directory of a repository is located:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If the repository is available over HTTP, use: <code class="literal"><a class="link" href="http://path/to/repo">http://path/to/repo</a></code>
										</li><li class="listitem">
											If the repository is available over FTP, use: <code class="literal"><a class="link" href="ftp://path/to/repo">ftp://path/to/repo</a></code>
										</li><li class="listitem">
											If the repository is local to the machine, use: <code class="literal"><a class="link" href="file:///path/to/local/repo">file:///path/to/local/repo</a></code>
										</li><li class="listitem"><p class="simpara">
											If a specific online repository requires basic HTTP authentication, you can specify your user name and password by prepending it to the URL as <code class="literal option"><span class="emphasis"><em>username</em></span>:<span class="emphasis"><em>password</em></span>@<span class="emphasis"><em>link</em></span></code>. For example, if a repository on <a class="link" href="http://www.example.com/repo/">http://www.example.com/repo/</a> requires a user name of "user" and a password of "password", then the <code class="literal option">baseurl</code> link could be specified as <code class="literal option"><a class="link" href="http://user:password@www.example.com/repo/">http://user:password@www.example.com/repo/</a></code>.
										</p><p class="simpara">
											Usually this URL is an HTTP link, such as:
										</p><pre class="literallayout">baseurl=http://path/to/repo/releases/$releasever/server/$basearch/os/</pre><p class="simpara">
											Note that yum always expands the <code class="literal">$releasever</code>, <code class="literal">$arch</code>, and <code class="literal">$basearch</code> variables in URLs. For more information about yum variables, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Using_Yum_Variables" title="9.5.3. Using Yum Variables">Section&nbsp;9.5.3, “Using Yum Variables”</a>.
										</p></li></ul></div></dd></dl></div><p>
						Other useful <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> directive are:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal option">enabled</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									This is a simple way to tell yum to use or ignore a particular repository, <span class="emphasis"><em>value</em></span> is one of:
								</p><p class="simpara">
									<code class="literal">0</code> — Do not include this repository as a package source when performing updates and installs. This is an easy way of quickly turning repositories on and off, which is useful when you desire a single package from a repository that you do not want to enable for updates or installs.
								</p><p class="simpara">
									<code class="literal">1</code> — Include this repository as a package source.
								</p><p class="simpara">
									Turning repositories on and off can also be performed by passing either the <code class="literal option">--enablerepo=<span class="emphasis"><em>repo_name</em></span></code> or <code class="literal option">--disablerepo=<span class="emphasis"><em>repo_name</em></span></code> option to <code class="literal command">yum</code>, or through the <code class="literal">Add/Remove Software</code> window of the <span class="strong strong"><strong><span class="application application">PackageKit</span></strong></span> utility.
								</p></dd><dt><span class="term"><code class="literal option">async</code>=<span class="emphasis"><em>value</em></span></span></dt><dd><p class="simpara">
									Controls parallel downloading of repository packages. Here, <span class="emphasis"><em>value</em></span> is one of:
								</p><p class="simpara">
									<code class="literal">auto</code> (<span class="emphasis"><em>default</em></span>) — parallel downloading is used if possible, which means that <span class="strong strong"><strong><span class="application application">yum</span></strong></span> automatically disables it for repositories created by plug-ins to avoid failures.
								</p><p class="simpara">
									<code class="literal">on</code> — parallel downloading is enabled for the repository.
								</p><p class="simpara">
									<code class="literal">off</code> — parallel downloading is disabled for the repository.
								</p></dd></dl></div><p>
						Many more <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> options exist, part of them have the same form and function as certain <code class="literal">[<span class="emphasis"><em>main</em></span>]</code> options. For a complete list, see the <code class="literal">[repository] OPTIONS</code> section of the <span class="emphasis"><em>yum.conf</em></span>(5) manual page.
					</p><div class="example" id="ex-Setting_repository_Options"><p class="title"><strong>Example&nbsp;9.25.&nbsp;A sample /etc/yum.repos.d/redhat.repo file</strong></p><div class="example-contents"><p>
							The following is a sample <code class="literal">/etc/yum.repos.d/redhat.repo</code> file:
						</p><pre class="literallayout">#
# Red Hat Repositories
# Managed by (rhsm) subscription-manager
#

[red-hat-enterprise-linux-scalable-file-system-for-rhel-6-entitlement-rpms]
name = Red Hat Enterprise Linux Scalable File System (for RHEL 6 Entitlement) (RPMs)
baseurl = https://cdn.redhat.com/content/dist/rhel/entitlement-6/releases/$releasever/$basearch/scalablefilesystem/os
enabled = 1
gpgcheck = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
sslverify = 1
sslcacert = /etc/rhsm/ca/redhat-uep.pem
sslclientkey = /etc/pki/entitlement/key.pem
sslclientcert = /etc/pki/entitlement/11300387955690106.pem

[red-hat-enterprise-linux-scalable-file-system-for-rhel-6-entitlement-source-rpms]
name = Red Hat Enterprise Linux Scalable File System (for RHEL 6 Entitlement) (Source RPMs)
baseurl = https://cdn.redhat.com/content/dist/rhel/entitlement-6/releases/$releasever/$basearch/scalablefilesystem/source/SRPMS
enabled = 0
gpgcheck = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
sslverify = 1
sslcacert = /etc/rhsm/ca/redhat-uep.pem
sslclientkey = /etc/pki/entitlement/key.pem
sslclientcert = /etc/pki/entitlement/11300387955690106.pem

[red-hat-enterprise-linux-scalable-file-system-for-rhel-6-entitlement-debug-rpms]
name = Red Hat Enterprise Linux Scalable File System (for RHEL 6 Entitlement) (Debug RPMs)
baseurl = https://cdn.redhat.com/content/dist/rhel/entitlement-6/releases/$releasever/$basearch/scalablefilesystem/debug
enabled = 0
gpgcheck = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
sslverify = 1
sslcacert = /etc/rhsm/ca/redhat-uep.pem
sslclientkey = /etc/pki/entitlement/key.pem
sslclientcert = /etc/pki/entitlement/11300387955690106.pem</pre></div></div></section><section class="section" id="sec-Using_Yum_Variables"><div class="titlepage"><div><div><h3 class="title">9.5.3.&nbsp;Using Yum Variables</h3></div></div></div><p>
						You can use and reference the following built-in variables in <code class="literal command">yum</code> commands and in all yum configuration files (that is, <code class="literal">/etc/yum.conf</code> and all <code class="literal">.repo</code> files in the <code class="literal">/etc/yum.repos.d/</code> directory):
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">$releasever</code></span></dt><dd>
									You can use this variable to reference the release version of Red Hat Enterprise Linux. Yum obtains the value of <code class="literal">$releasever</code> from the <code class="literal">distroverpkg=<span class="emphasis"><em>value</em></span></code> line in the <code class="literal">/etc/yum.conf</code> configuration file. If there is no such line in <code class="literal">/etc/yum.conf</code>, then yum infers the correct value by deriving the version number from the <code class="literal">redhat-release<span class="emphasis"><em>product</em></span></code> package that provides the <code class="literal">redhat-release</code> file.
								</dd><dt><span class="term"><code class="literal">$arch</code></span></dt><dd>
									You can use this variable to refer to the system’s CPU architecture as returned when calling Python’s <code class="literal">os.uname()</code> function. Valid values for <code class="literal">$arch</code> include: <code class="literal">i586</code>, <code class="literal">i686</code> and <code class="literal">x86_64</code>.
								</dd><dt><span class="term"><code class="literal">$basearch</code></span></dt><dd>
									You can use <code class="literal">$basearch</code> to reference the base architecture of the system. For example, i686 and i586 machines both have a base architecture of <code class="literal">i386</code>, and AMD64 and Intel 64 machines have a base architecture of <code class="literal">x86_64</code>.
								</dd><dt><span class="term"><code class="literal">$YUM0-9</code></span></dt><dd>
									These ten variables are each replaced with the value of any shell environment variables with the same name. If one of these variables is referenced (in <code class="literal">/etc/yum.conf</code> for example) and a shell environment variable with the same name does not exist, then the configuration file variable is not replaced.
								</dd></dl></div><p>
						To define a custom variable or to override the value of an existing one, create a file with the same name as the variable (without the "<code class="literal">$</code>" sign) in the <code class="literal">/etc/yum/vars/</code> directory, and add the desired value on its first line.
					</p><p>
						For example, repository descriptions often include the operating system name. To define a new variable called <code class="literal">$osname</code>, create a new file with "Red Hat Enterprise Linux" on the first line and save it as <code class="literal">/etc/yum/vars/osname</code>:
					</p><pre class="literallayout">~]# echo "Red Hat Enterprise Linux 7" &gt; /etc/yum/vars/osname</pre><p>
						Instead of "Red Hat Enterprise Linux 7", you can now use the following in the <code class="literal">.repo</code> files:
					</p><pre class="literallayout">name=$osname $releasever</pre></section><section class="section" id="sec-Viewing_the_Current_Configuration"><div class="titlepage"><div><div><h3 class="title">9.5.4.&nbsp;Viewing the Current Configuration</h3></div></div></div><p>
						To display the current values of global yum options (that is, the options specified in the <code class="literal">[main]</code> section of the <code class="literal">/etc/yum.conf</code> file), execute the <code class="literal command">yum-config-manager</code> command with no command-line options:
					</p><pre class="literallayout"><code class="literal command">yum-config-manager</code></pre><p>
						To list the content of a different configuration section or sections, use the command in the following form:
					</p><pre class="literallayout"><code class="literal command">yum-config-manager</code> <span class="emphasis"><em>section</em></span>&amp;hellip;</pre><p>
						You can also use a glob expression to display the configuration of all matching sections:
					</p><pre class="literallayout">yum-config-manager <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-listing_all_configutration_options"><p class="title"><strong>Example&nbsp;9.26.&nbsp;Viewing configuration of the main section</strong></p><div class="example-contents"><p>
							To list all configuration options and their corresponding values for the main section, type the following at a shell prompt:
						</p><pre class="literallayout">~]$ yum-config-manager main \*
Loaded plugins: langpacks, product-id, subscription-manager
================================== main ===================================
[main]
alwaysprompt = True
assumeyes = False
bandwith = 0
bugtracker_url = https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%206&amp;component=yum
cache = 0
[output truncated]</pre></div></div></section><section class="section" id="sec-Managing_Yum_Repositories"><div class="titlepage"><div><div><h3 class="title">9.5.5.&nbsp;Adding, Enabling, and Disabling a Yum Repository</h3></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To expand your expertise, you might also be interested in the <a class="link" href="http://www.redhat.com/en/services/training/rh254-red-hat-system-administration-iii?cr=cp|tr|pdtxt|00004">Red Hat System Administration III (RH254)</a> training course.
						</p></div></div><p>
						<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_repository_Options" title="9.5.2. Setting [repository] Options">Section&nbsp;9.5.2, “Setting [repository] Options”</a> describes various options you can use to define a yum repository. This section explains how to add, enable, and disable a repository by using the <code class="literal command">yum-config-manager</code> command.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							When the system is registered with Red Hat Subscription Management to the certificate-based <code class="literal">Content Delivery Network</code> (<span class="strong strong"><strong>CDN</strong></span>), the <span class="strong strong"><strong><span class="application application">Red Hat Subscription Manager</span></strong></span> tools are used to manage repositories in the <code class="literal">/etc/yum.repos.d/redhat.repo</code> file.
						</p></div></div><div id="bh-Managing_Yum_Repositories-Adding" class="formalpara"><p class="title"><strong>Adding a Yum Repository</strong></p><p>
							To define a new repository, you can either add a <code class="literal">[<span class="emphasis"><em>repository</em></span>]</code> section to the <code class="literal">/etc/yum.conf</code> file, or to a <code class="literal">.repo</code> file in the <code class="literal">/etc/yum.repos.d/</code> directory. All files with the <code class="literal">.repo</code> file extension in this directory are read by yum, and it is recommended to define your repositories here instead of in <code class="literal">/etc/yum.conf</code>.
						</p></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Obtaining and installing software packages from unverified or untrusted software sources other than Red Hat’s certificate-based <code class="literal">Content Delivery Network</code> (<span class="strong strong"><strong>CDN</strong></span>) constitutes a potential security risk, and could lead to security, stability, compatibility, and maintainability issues.
						</p></div></div><p>
						Yum repositories commonly provide their own <code class="literal">.repo</code> file. To add such a repository to your system and enable it, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">yum-config-manager --add-repo <span class="emphasis"><em>repository_url</em></span></pre><p>
						…where <span class="emphasis"><em>repository_url</em></span> is a link to the <code class="literal">.repo</code> file.
					</p><div class="example" id="ex-adding_repo"><p class="title"><strong>Example&nbsp;9.27.&nbsp;Adding example.repo</strong></p><div class="example-contents"><p>
							To add a repository located at <a class="link" href="http://www.example.com/example.repo">http://www.example.com/example.repo</a>, type the following at a shell prompt:
						</p><pre class="literallayout">~]# yum-config-manager --add-repo http://www.example.com/example.repo
Loaded plugins: langpacks, product-id, subscription-manager
adding repo from: http://www.example.com/example.repo
grabbing file http://www.example.com/example.repo to /etc/yum.repos.d/example.repo
example.repo                       | 413 B   00:00
repo saved to /etc/yum.repos.d/example.repo</pre></div></div><div id="bh-Managing_Yum_Repositories-Enabling" class="formalpara"><p class="title"><strong>Enabling a Yum Repository</strong></p><p>
							To enable a particular repository or repositories, type the following at a shell prompt as <code class="literal">root</code>:
						</p></div><pre class="literallayout"><code class="literal command">yum-config-manager</code> <code class="literal option">--enable</code> <span class="emphasis"><em>repository</em></span>&amp;hellip;</pre><p>
						…where <span class="emphasis"><em>repository</em></span> is the unique repository ID (use <code class="literal command">yum repolist all</code> to list available repository IDs). Alternatively, you can use a glob expression to enable all matching repositories:
					</p><pre class="literallayout">yum-config-manager --enable <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-enabling_repos"><p class="title"><strong>Example&nbsp;9.28.&nbsp;Enabling repositories defined in custom sections of /etc/yum.conf.</strong></p><div class="example-contents"><p>
							To enable repositories defined in the <code class="literal">[example]</code>, <code class="literal">[example-debuginfo]</code>, and <code class="literal">[example-source]</code>sections, type:
						</p><pre class="literallayout">~]# yum-config-manager --enable example\*
Loaded plugins: langpacks, product-id, subscription-manager
============================== repo: example ==============================
[example]
bandwidth = 0
base_persistdir = /var/lib/yum/repos/x86_64/7Server
baseurl = http://www.example.com/repo/7Server/x86_64/
cache = 0
cachedir = /var/cache/yum/x86_64/7Server/example
[output truncated]</pre></div></div><div class="example" id="ex-enabling_all_repos"><p class="title"><strong>Example&nbsp;9.29.&nbsp;Enabling all repositories</strong></p><div class="example-contents"><p>
							To enable all repositories defined both in the <code class="literal">/etc/yum.conf</code> file and in the <code class="literal">/etc/yum.repos.d/</code> directory, type:
						</p><pre class="literallayout">~]# yum-config-manager --enable \*
Loaded plugins: langpacks, product-id, subscription-manager
============================== repo: example ==============================
[example]
bandwidth = 0
base_persistdir = /var/lib/yum/repos/x86_64/7Server
baseurl = http://www.example.com/repo/7Server/x86_64/
cache = 0
cachedir = /var/cache/yum/x86_64/7Server/example
[output truncated]</pre></div></div><p>
						When successful, the <code class="literal command">yum-config-manager --enable</code> command displays the current repository configuration.
					</p><div id="bh-Managing_Yum_Repositories-Disabling" class="formalpara"><p class="title"><strong>Disabling a Yum Repository</strong></p><p>
							To disable a yum repository, run the following command as <code class="literal">root</code>:
						</p></div><pre class="literallayout"><code class="literal command">yum-config-manager</code> <code class="literal option">--disable</code> <span class="emphasis"><em>repository</em></span>&amp;hellip;</pre><p>
						…where <span class="emphasis"><em>repository</em></span> is the unique repository ID (use <code class="literal command">yum repolist all</code> to list available repository IDs). Similarly to <code class="literal command">yum-config-manager --enable</code>, you can use a glob expression to disable all matching repositories at the same time:
					</p><pre class="literallayout">yum-config-manager --disable <span class="emphasis"><em>glob_expression</em></span>&amp;hellip;</pre><div class="example" id="ex-disabling_all_repos"><p class="title"><strong>Example&nbsp;9.30.&nbsp;Disabling all repositories</strong></p><div class="example-contents"><p>
							To disable all repositories defined both in the <code class="literal">/etc/yum.conf</code> file and in the <code class="literal">/etc/yum.repos.d/</code> directory, type:
						</p><pre class="literallayout">~]# yum-config-manager --disable \*
Loaded plugins: langpacks, product-id, subscription-manager
============================== repo: example ==============================
[example]
bandwidth = 0
base_persistdir = /var/lib/yum/repos/x86_64/7Server
baseurl = http://www.example.com/repo/7Server/x86_64/
cache = 0
cachedir = /var/cache/yum/x86_64/7Server/example
[output truncated]</pre></div></div><p>
						When successful, the <code class="literal command">yum-config-manager --disable</code> command displays the current configuration.
					</p></section><section class="section" id="sec-Yum_Repository"><div class="titlepage"><div><div><h3 class="title">9.5.6.&nbsp;Creating a Yum Repository</h3></div></div></div><p>
						To set up a yum repository:
					</p><div class="orderedlist" id="proc-Yum_Repository"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Install the <span class="strong strong"><strong><span class="package package">createrepo</span></strong></span> package:
							</p><pre class="literallayout"># yum install createrepo</pre></li><li class="listitem"><p class="simpara">
								Copy all packages for your new repository into one directory, such as <code class="literal">/tmp/local_repo/</code>:
							</p><pre class="literallayout">cp /your/packages/*.rpm /tmp/local_repo/</pre></li><li class="listitem"><p class="simpara">
								To create the repository run:
							</p><pre class="literallayout">createrepo /tmp/local_repo/</pre><p class="simpara">
								This creates the necessary metadata for the yum repository and places metadata in a newly created subdirectory <code class="literal">repodata</code>.
							</p><p class="simpara">
								The repository is now ready to be consumed by yum. This repository can be shared over the HTTP or FTP protocol, or refered directly from the local machine. See the <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_repository_Options" title="9.5.2. Setting [repository] Options">Section&nbsp;9.5.2, “Setting [repository] Options”</a> section for more details on how to configure a yum repository.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									When constructing the URL for a repository, refer to the <code class="literal">/mnt/local_repo</code> not to <code class="literal">/mnt/local_repo/repodata</code>, as this directory contains only metadata. Actual yum packages are in <code class="literal">/mnt/local_repo</code>.
								</p></div></div></li></ol></div><section class="section" id="Adding_packages_to_already_created_yum_repository"><div class="titlepage"><div><div><h4 class="title">9.5.6.1.&nbsp;Adding packages to an already created yum repository</h4></div></div></div><p>
							To add packages to an already created yum repository:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Copy the new packages to your repository directory, such as <code class="literal">/tmp/local_repo/</code>:
								</p><pre class="literallayout">cp /your/packages/*.rpm /tmp/local_repo/</pre></li><li class="listitem"><p class="simpara">
									To reflect the newly added packages in the metadata, run:
								</p><pre class="literallayout">createrepo --update /tmp/local_repo/</pre></li><li class="listitem"><p class="simpara">
									Optional: If you have already used any yum command with newly updated repository, run:
								</p><pre class="literallayout"><code class="literal command">yum clean expire-cache</code></pre></li></ol></div></section></section><section class="section" id="sec-Adding_the_Optional_and_Supplementary_Repositories"><div class="titlepage"><div><div><h3 class="title">9.5.7.&nbsp;Adding the Optional and Supplementary Repositories</h3></div></div></div><p>
						The Optional and Supplementary subscription channels provide additional software packages for Red Hat Enterprise Linux that cover open source licensed software (in the Optional channel) and proprietary licensed software (in the Supplementary channel).
					</p><p>
						Before subscribing to the Optional and Supplementary channels see the <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail/">Scope of Coverage Details</a>. If you decide to install packages from these channels, follow the steps documented in the article called <a class="link" href="https://access.redhat.com/solutions/392003">How to access Optional and Supplementary channels, and -devel packages using Red Hat Subscription Manager (RHSM)?</a> on the Red Hat Customer Portal.
					</p></section></section><section class="section" id="sec-Yum_Plugins"><div class="titlepage"><div><div><h2 class="title">9.6.&nbsp;Yum Plug-ins</h2></div></div></div><p>
					Yum provides plug-ins that extend and enhance its operations. Certain plug-ins are installed by default. Yum always informs you which plug-ins, if any, are loaded and active whenever you call any <code class="literal command">yum</code> command. For example:
				</p><pre class="literallayout">~]# yum info yum
Loaded plugins: langpacks, product-id, subscription-manager
[output truncated]</pre><p>
					Note that the plug-in names which follow <code class="literal command">Loaded plugins</code> are the names you can provide to the <code class="literal option">--disableplugin=<span class="emphasis"><em>plugin_name</em></span></code> option.
				</p><section class="section" id="sec-Enabling_Configuring_and_Disabling_Yum_Plugins"><div class="titlepage"><div><div><h3 class="title">9.6.1.&nbsp;Enabling, Configuring, and Disabling Yum Plug-ins</h3></div></div></div><p>
						To enable yum plug-ins, ensure that a line beginning with <code class="literal command">plugins=</code> is present in the <code class="literal">[main]</code> section of <code class="literal">/etc/yum.conf</code>, and that its value is <code class="literal">1</code>:
					</p><pre class="literallayout">plugins=1</pre><p>
						You can disable all plug-ins by changing this line to <code class="literal command">plugins=0</code>.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Disabling all plug-ins is not advised because certain plug-ins provide important yum services. In particular, the <span class="strong strong"><strong><span class="application application">product-id</span></strong></span> and <span class="strong strong"><strong><span class="application application">subscription-manager</span></strong></span> plug-ins provide support for the certificate-based <code class="literal">Content Delivery Network</code> (<span class="strong strong"><strong>CDN</strong></span>). Disabling plug-ins globally is provided as a convenience option, and is generally only recommended when diagnosing a potential problem with yum.
						</p></div></div><p>
						Every installed plug-in has its own configuration file in the <code class="literal">/etc/yum/pluginconf.d/</code> directory. You can set plug-in specific options in these files. For example, here is the <span class="strong strong"><strong><span class="application application">aliases</span></strong></span> plug-in’s <code class="literal">aliases.conf</code> configuration file:
					</p><pre class="literallayout">[main]
enabled=1</pre><p>
						Similar to the <code class="literal">/etc/yum.conf</code> file, the plug-in configuration files always contain a <code class="literal">[main]</code> section where the <code class="literal option">enabled=</code> option controls whether the plug-in is enabled when you run <code class="literal command">yum</code> commands. If this option is missing, you can add it manually to the file.
					</p><p>
						If you disable all plug-ins by setting <code class="literal command">enabled=0</code> in <code class="literal">/etc/yum.conf</code>, then all plug-ins are disabled regardless of whether they are enabled in their individual configuration files.
					</p><p>
						If you merely want to disable all yum plug-ins for a single <code class="literal command">yum</code> command, use the <code class="literal option">--noplugins</code> option.
					</p><p>
						If you want to disable one or more yum plug-ins for a single <code class="literal command">yum</code> command, add the <code class="literal option">--disableplugin=<span class="emphasis"><em>plugin_name</em></span></code> option to the command. For example, to disable the <span class="strong strong"><strong><span class="application application">aliases</span></strong></span> plug-in while updating a system, type:
					</p><pre class="literallayout">~]# yum update --disableplugin=aliases</pre><p>
						The plug-in names you provide to the <code class="literal option">--disableplugin=</code> option are the same names listed after the <code class="literal command">Loaded plugins</code> line in the output of any <code class="literal command">yum</code> command. You can disable multiple plug-ins by separating their names with commas. In addition, you can match multiple plug-in names or shorten long ones by using glob expressions:
					</p><pre class="literallayout">~]# yum update --disableplugin=aliases,lang*</pre></section><section class="section" id="sec-Installing_More_Yum_Plugins"><div class="titlepage"><div><div><h3 class="title">9.6.2.&nbsp;Installing Additional Yum Plug-ins</h3></div></div></div><p>
						Yum plug-ins usually adhere to the <code class="literal">yum-plugin-<span class="emphasis"><em>plugin_name</em></span></code> package-naming convention, but not always: the package which provides the <span class="strong strong"><strong><span class="application application">kabi</span></strong></span> plug-in is named <code class="literal">kabi-yum-plugins</code>, for example. You can install a yum plug-in in the same way you install other packages. For instance, to install the <span class="strong strong"><strong><span class="application application">yum-aliases</span></strong></span> plug-in, type the following at a shell prompt:
					</p><pre class="literallayout">~]# yum install yum-plugin-aliases</pre></section><section class="section" id="sec-Plugin_Descriptions"><div class="titlepage"><div><div><h3 class="title">9.6.3.&nbsp;Working with Yum Plug-ins</h3></div></div></div><p>
						The following list provides descriptions and usage instructions for several useful yum plug-ins. Plug-ins are listed by names, brackets contain the name of the package.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="strong strong"><strong><span class="application application">search-disabled-repos</span></strong></span> (<span class="strong strong"><strong><span class="package package">subscription-manager</span></strong></span>)</span></dt><dd><p class="simpara">
									The <span class="strong strong"><strong><span class="application application">search-disabled-repos</span></strong></span> plug-in allows you to temporarily or permanently enable disabled repositories to help resolve dependencies. With this plug-in enabled, when Yum fails to install a package due to failed dependency resolution, it offers to temporarily enable disabled repositories and try again. If the installation succeeds, Yum also offers to enable the used repositories permanently. Note that the plug-in works only with the repositories that are managed by <span class="strong strong"><strong><span class="application application">subscription-manager</span></strong></span> and not with custom repositories.
								</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
										If <code class="literal command">yum</code> is executed with the <code class="literal option">--assumeyes</code> or <code class="literal option">-y</code> option, or if the <code class="literal option">assumeyes</code> directive is enabled in <code class="literal">/etc/yum.conf</code>, the plug-in enables disabled repositories, both temporarily and permanently, without prompting for confirmation. This may lead to problems, for example, enabling repositories that you do not want enabled.
									</p></div></div><p class="simpara">
									To configure the <span class="strong strong"><strong><span class="application application">search-disabled-repos</span></strong></span> plug-in, edit the configuration file located in <code class="literal">/etc/yum/pluginconf.d/search-disabled-repos.conf</code>. For the list of directives you can use in the <code class="literal option">[main]</code> section, see the table below.
								</p><div class="table" id="tabl-Yum-Plugin_Descriptions-search-disabled-repos"><p class="title"><strong>Table&nbsp;9.3.&nbsp;Supported <code class="literal">search-disabled-repos.conf</code> directives</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140569380444432" scope="col">Directive</th><th style="text-align: left; vertical-align: top; " id="idm140569380443344" scope="col">Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140569380444432"> <p>
													<code class="literal option">enabled</code>=<span class="emphasis"><em>value</em></span>
												</p>
												 </td><td style="text-align: left; vertical-align: top; " headers="idm140569380443344"> <p>
													Allows you to enable or disable the plug-in. The <span class="emphasis"><em>value</em></span> must be either <code class="literal">1</code> (enabled), or <code class="literal">0</code> (disabled). The plug-in is enabled by default.
												</p>
												 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569380444432"> <p>
													<code class="literal option">notify_only</code>=<span class="emphasis"><em>value</em></span>
												</p>
												 </td><td style="text-align: left; vertical-align: top; " headers="idm140569380443344"> <p>
													Allows you to restrict the behavior of the plug-in to notifications only. The <span class="emphasis"><em>value</em></span> must be either <code class="literal">1</code> (notify only without modifying the behavior of Yum), or <code class="literal">0</code> (modify the behavior of Yum). By default the plug-in only notifies the user.
												</p>
												 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569380444432"> <p>
													<code class="literal option">ignored_repos</code>=<span class="emphasis"><em>repositories</em></span>
												</p>
												 </td><td style="text-align: left; vertical-align: top; " headers="idm140569380443344"> <p>
													Allows you to specify the repositories that will not be enabled by the plug-in.
												</p>
												 </td></tr></tbody></table></div></div></dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">kabi</span></strong></span> (<span class="strong strong"><strong><span class="package package">kabi-yum-plugins</span></strong></span>)</span></dt><dd><p class="simpara">
									The <span class="strong strong"><strong><span class="application application">kabi</span></strong></span> plug-in checks whether a driver update package conforms with the official Red Hat <span class="emphasis"><em>kernel Application Binary Interface</em></span> (<span class="strong strong"><strong>kABI</strong></span>). With this plug-in enabled, when a user attempts to install a package that uses kernel symbols which are not on a whitelist, a warning message is written to the system log. Additionally, configuring the plug-in to run in enforcing mode prevents such packages from being installed at all.
								</p><p class="simpara">
									To configure the <span class="strong strong"><strong><span class="application application">kabi</span></strong></span> plug-in, edit the configuration file located in <code class="literal">/etc/yum/pluginconf.d/kabi.conf</code>. A list of directives that can be used in the <code class="literal option">[main]</code> section is shown in the table below.
								</p><div class="table" id="tabl-Yum-Plugin_Descriptions-kabi"><p class="title"><strong>Table&nbsp;9.4.&nbsp;Supported <code class="literal">kabi.conf</code> directives</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140569368732432" scope="col">Directive</th><th style="text-align: left; vertical-align: top; " id="idm140569368731344" scope="col">Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140569368732432"> <p>
													<code class="literal option">enabled</code>=<span class="emphasis"><em>value</em></span>
												</p>
												 </td><td style="text-align: left; vertical-align: top; " headers="idm140569368731344"> <p>
													Allows you to enable or disable the plug-in. The <span class="emphasis"><em>value</em></span> must be either <code class="literal">1</code> (enabled), or <code class="literal">0</code> (disabled). When installed, the plug-in is enabled by default.
												</p>
												 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569368732432"> <p>
													<code class="literal option">whitelists</code>=<span class="emphasis"><em>directory</em></span>
												</p>
												 </td><td style="text-align: left; vertical-align: top; " headers="idm140569368731344"> <p>
													Allows you to specify the <span class="emphasis"><em>directory</em></span> in which the files with supported kernel symbols are located. By default, the <span class="strong strong"><strong><span class="application application">kabi</span></strong></span> plug-in uses files provided by the <span class="strong strong"><strong><span class="package package">kernel-abi-whitelists</span></strong></span> package (that is, the <code class="literal">/usr/lib/modules/kabi-rhel70/</code> directory).
												</p>
												 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569368732432"> <p>
													<code class="literal option">enforce</code>=<span class="emphasis"><em>value</em></span>
												</p>
												 </td><td style="text-align: left; vertical-align: top; " headers="idm140569368731344"> <p>
													Allows you to enable or disable enforcing mode. The <span class="emphasis"><em>value</em></span> must be either <code class="literal">1</code> (enabled), or <code class="literal">0</code> (disabled). By default, this option is commented out and the <span class="strong strong"><strong><span class="application application">kabi</span></strong></span> plug-in only displays a warning message.
												</p>
												 </td></tr></tbody></table></div></div></dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">product-id</span></strong></span> (<span class="strong strong"><strong><span class="package package">subscription-manager</span></strong></span>)</span></dt><dd>
									The <span class="strong strong"><strong><span class="application application">product-id</span></strong></span> plug-in manages product identity certificates for products installed from the Content Delivery Network. The <span class="strong strong"><strong><span class="application application">product-id</span></strong></span> plug-in is installed by default.
								</dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">langpacks</span></strong></span> (<span class="strong strong"><strong><span class="package package">yum-langpacks</span></strong></span>)</span></dt><dd>
									The <span class="strong strong"><strong><span class="application application">langpacks</span></strong></span> plug-in is used to search for locale packages of a selected language for every package that is installed. The <span class="strong strong"><strong><span class="application application">langpacks</span></strong></span> plug-in is installed by default.
								</dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">aliases</span></strong></span> (<span class="strong strong"><strong><span class="package package">yum-plugin-aliases</span></strong></span>)</span></dt><dd>
									The <span class="strong strong"><strong><span class="application application">aliases</span></strong></span> plug-in adds the <code class="literal command">alias</code> command-line option which enables configuring and using aliases for <code class="literal command">yum</code> commands.
								</dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">yum-changelog</span></strong></span> (<span class="strong strong"><strong><span class="package package">yum-plugin-changelog</span></strong></span>)</span></dt><dd>
									The <span class="strong strong"><strong><span class="application application">yum-changelog</span></strong></span> plug-in adds the <code class="literal option">--changelog</code> command-line option that enables viewing package change logs before and after updating.
								</dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">yum-tmprepo</span></strong></span> (<span class="strong strong"><strong><span class="package package">yum-plugin-tmprepo</span></strong></span>)</span></dt><dd>
									The <span class="strong strong"><strong><span class="application application">yum-tmprepo</span></strong></span> plug-in adds the <code class="literal option">--tmprepo</code> command-line option that takes the URL of a repository file, downloads and enables it for only one transaction. This plug-in tries to ensure the safe temporary usage of repositories. By default, it does not allow to disable the gpg check.
								</dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">yum-verify</span></strong></span> (<span class="strong strong"><strong><span class="package package">yum-plugin-verify</span></strong></span>)</span></dt><dd>
									The <span class="strong strong"><strong><span class="application application">yum-verify</span></strong></span> plug-in adds the <code class="literal option">verify</code>, <code class="literal option">verify-rpm</code>, and <code class="literal option">verify-all</code> command-line options for viewing verification data on the system.
								</dd><dt><span class="term"><span class="strong strong"><strong><span class="application application">yum-versionlock</span></strong></span> (<span class="strong strong"><strong><span class="package package">yum-plugin-versionlock</span></strong></span>)</span></dt><dd>
									The <span class="strong strong"><strong><span class="application application">yum-versionlock</span></strong></span> plug-in excludes other versions of selected packages, which enables protecting packages from being updated by newer versions. With the <code class="literal command">versionlock</code> command-line option, you can view and edit the list of locked packages.
								</dd></dl></div></section></section><section class="section" id="sec-Automatically_refreshing_the_package_database_and_download_updates"><div class="titlepage"><div><div><h2 class="title">9.7.&nbsp;Automatically Refreshing Package Database and Downloading Updates with Yum-cron</h2></div></div></div><p>
					The <code class="literal">yum-cron</code> service checks and downloads package updates automatically. The cron jobs provided by the <code class="literal">yum-cron</code> service are active immediately after installation of the yum-cron package. The <code class="literal">yum-cron</code> service can also automatically install downloaded updates.
				</p><p>
					With default settings, the <code class="literal">yum-cron</code> service:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Updates the metadata in the yum cache once per hour.
						</li><li class="listitem">
							Downloads pending package updates to the yum cache once per day. If new packages are available in the repository, an email is sent. See chapter <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_up_optional_email_notifications" title="9.7.2. Setting up Optional Email Notifications">Section&nbsp;9.7.2, “Setting up Optional Email Notifications”</a> for more information.
						</li></ul></div><p>
					The <code class="literal">yum-cron</code> service has two configuration files:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">/etc/yum/yum-cron.conf</code></span></dt><dd>
								For daily tasks.
							</dd><dt><span class="term"><code class="literal">/etc/yum/yum-cron-hourly.conf</code></span></dt><dd>
								For hourly tasks.
							</dd></dl></div><section class="section" id="sec-Enabling_automatic_installation_of_updates"><div class="titlepage"><div><div><h3 class="title">9.7.1.&nbsp;Enabling Automatic Installation of Updates</h3></div></div></div><p>
						To enable automatic installation of downloaded updates, edit the daily configuration file for daily installation or the hourly configuration file for hourly installation by setting the <code class="literal option">apply_updates</code> option as follows:
					</p><pre class="literallayout">apply_updates = yes</pre></section><section class="section" id="sec-Setting_up_optional_email_notifications"><div class="titlepage"><div><div><h3 class="title">9.7.2.&nbsp;Setting up Optional Email Notifications</h3></div></div></div><p>
						By default, the <code class="literal">yum-cron</code> service uses <code class="literal">cron</code> to send emails containing an output of the executed command. This email is sent according to <code class="literal">cron</code> configuration, typically to the local superuser and stored in the <code class="literal">/var/spool/mail/root</code> file.
					</p><p>
						You can use specific email configuration different from the settings which affect all <code class="literal">cron</code> jobs. However, this email configuration does not support TLS and overall email built-in logic is very basic.
					</p><p>
						To enable <code class="literal">yum-cron</code> built-in email notifications:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open selected <code class="literal">yum-cron</code> configuration file:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">/etc/yum/yum-cron.conf</code></span></dt><dd>
											For daily tasks.
										</dd><dt><span class="term"><code class="literal">/etc/yum/yum-cron-hourly.conf</code></span></dt><dd>
											For hourly tasks.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								In the <code class="literal">[emitters]</code> section, set the following option:
							</p><pre class="literallayout">emit_via = email</pre></li><li class="listitem">
								Set the <code class="literal option">email_from</code>, <code class="literal option">email_to</code>, <code class="literal option">email_host</code> options as required
							</li></ol></div></section><section class="section" id="sec-Enabling_or_disabling_specific_repositories"><div class="titlepage"><div><div><h3 class="title">9.7.3.&nbsp;Enabling or Disabling Specific Repositories</h3></div></div></div><p>
						The <code class="literal">yum-cron</code> does not support specific configuration of repositories. As a workaround for enabling or disabling specific repositories for <code class="literal">yum-cron</code> but not for <code class="literal">yum</code> in general follow the steps bellow:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Create an empty repository configuration directory anywhere on the system.
							</li><li class="listitem">
								Copy all configuration files from the <code class="literal">/etc/yum.repos.d/</code> directory to this newly created directory.
							</li><li class="listitem"><p class="simpara">
								In the respective <code class="literal">.repo</code> configuration file within the <code class="literal">/etc/yum.repos.d/</code>, set the <code class="literal option">enabled</code> option as follows:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">enabled = 1</code></span></dt><dd>
											To enable the repository.
										</dd><dt><span class="term"><code class="literal">enabled = 0</code></span></dt><dd>
											To disable the repository.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								Add the following option, which points to the newly created repository directory, at the end of the selected <code class="literal">yum-cron</code> configuration file:
							</p><pre class="literallayout">reposdir=<span class="emphasis"><em>/path/to/new/reposdir</em></span></pre></li></ol></div></section><section class="section" id="sec-Testing_yum-cron_settings"><div class="titlepage"><div><div><h3 class="title">9.7.4.&nbsp;Testing Yum-cron Settings</h3></div></div></div><p>
						To test <code class="literal">yum-cron</code> settings without waiting for the next scheduled <code class="literal">yum-cron</code> task:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open selected <code class="literal">yum-cron</code> configuration file:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">/etc/yum/yum-cron.conf</code></span></dt><dd>
											For daily tasks.
										</dd><dt><span class="term"><code class="literal">/etc/yum/yum-cron-hourly.conf</code></span></dt><dd>
											For hourly tasks.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								Set the <code class="literal option">random_sleep</code> option in the selected configuration file as follows:
							</p><pre class="literallayout">random_sleep = 0</pre></li><li class="listitem"><p class="simpara">
								Run the configuration files:
							</p><pre class="literallayout"># yum-cron /etc/yum/yum-cron.conf
# yum-cron /etc/yum/yum-cron-hourly.conf</pre></li></ol></div></section><section class="section" id="sec-Disabling_yum-cron_messages"><div class="titlepage"><div><div><h3 class="title">9.7.5.&nbsp;Disabling Yum-cron messages</h3></div></div></div><p>
						The <code class="literal">yum-cron</code> messages cannot be entirely disabled, but can be limited to messages with critical priority only. To limit the messages:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Open selected <code class="literal">yum-cron</code> configuration file:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">/etc/yum/yum-cron.conf</code></span></dt><dd>
											For daily tasks.
										</dd><dt><span class="term"><code class="literal">/etc/yum/yum-cron-hourly.conf</code></span></dt><dd>
											For hourly tasks.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								Set the following option in the <code class="literal">[base]</code> section of the configuration file:
							</p><pre class="literallayout">debuglevel = -4</pre></li></ol></div></section><section class="section" id="sec-Automatically_cleaning_packages"><div class="titlepage"><div><div><h3 class="title">9.7.6.&nbsp;Automatically Cleaning Packages</h3></div></div></div><p>
						The <code class="literal">yum-cron</code> service does not support any configuration option for removing packages similar to the <code class="literal command">yum clean all</code> command. To clean packages automatically, you can create a cron job as an executable shell script:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a shell script in the <code class="literal">/etc/cron.daily/</code> directory containing:
							</p><pre class="literallayout">#!/bin/sh
yum clean all</pre></li><li class="listitem"><p class="simpara">
								Make the script executable:
							</p><pre class="literallayout"># chmod +x /etc/cron.daily/<span class="emphasis"><em>script-name.sh</em></span></pre></li></ol></div></section></section><section class="section" id="sect-Yum-Resources"><div class="titlepage"><div><div><h2 class="title">9.8.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on how to manage software packages on Red Hat Enterprise Linux, see the resources listed below.
				</p><h4 id="brid-Yum-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">yum</code>(8) — The manual page for the yum command-line utility provides a complete list of supported options and commands.
						</li><li class="listitem">
							<code class="literal">yumdb</code>(8) — The manual page for the <code class="literal command">yumdb</code> command-line utility documents how to use this tool to query and, if necessary, alter the yum database.
						</li><li class="listitem">
							<code class="literal">yum.conf</code>(5) — The manual page named <code class="literal">yum.conf</code> documents available yum configuration options.
						</li><li class="listitem">
							<code class="literal">yum-utils</code>(1) — The manual page named <code class="literal">yum-utils</code> lists and briefly describes additional utilities for managing yum configuration, manipulating repositories, and working with yum database.
						</li></ul></div><h4 id="brid-Yum-Resources-Online">Online Resources</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="http://yum.baseurl.org/wiki/Guides.html">Yum Guides</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Yum Guides</span></em></span> page on the project home page provides links to further documentation.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/labs/">Red Hat Customer Portal Labs</a> — The Red Hat Customer Portal Labs includes a "Yum Repository Configuration Helper".
						</li></ul></div><h4 id="brid-Yum-Resources-Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li></ul></div></section></section></div><div class="part" id="part-Infrastructure_Services"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;IV.&nbsp;Infrastructure Services</h1></div></div></div><div class="partintro" id="idm140569396530160"><div><!--Empty--></div><p>
				This part provides information on how to configure services and daemons and enable remote access to a Red Hat Enterprise Linux machine.
			</p></div><section class="chapter" id="chap-Managing_Services_with_systemd"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;10.&nbsp;Managing Services with systemd</h2></div></div></div><section class="section" id="sect-Managing_Services_with_systemd-Introduction"><div class="titlepage"><div><div><h2 class="title">10.1.&nbsp;Introduction to systemd</h2></div></div></div><p>
					<span class="strong strong"><strong><span class="application application">Systemd</span></strong></span> is a system and service manager for Linux operating systems. It is designed to be backwards compatible with SysV init scripts, and provides a number of features such as parallel startup of system services at boot time, on-demand activation of daemons, or dependency-based service control logic. In Red Hat Enterprise Linux 7, systemd replaces Upstart as the default init system.
				</p><p>
					Systemd introduces the concept of <span class="emphasis"><em>systemd units</em></span>. These units are represented by unit configuration files located in one of the directories listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Introduction-Units-Locations" title="Table 10.2. Systemd Unit Files Locations">Table&nbsp;10.2, “Systemd Unit Files Locations”</a>, and encapsulate information about system services, listening sockets, and other objects that are relevant to the init system. For a complete list of available systemd unit types, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Introduction-Units-Types" title="Table 10.1. Available systemd Unit Types">Table&nbsp;10.1, “Available systemd Unit Types”</a>.
				</p><div class="table" id="tabl-Managing_Services_with_systemd-Introduction-Units-Types"><p class="title"><strong>Table&nbsp;10.1.&nbsp;Available systemd Unit Types</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569380409968" scope="col">Unit Type</th><th align="left" valign="top" id="idm140569380408880" scope="col">File Extension</th><th align="left" valign="top" id="idm140569380407792" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Service unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A system service.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Target unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A group of systemd units.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Automount unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.automount</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A file system automount point.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Device unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.device</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A device file recognized by the kernel.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Mount unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.mount</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A file system mount point.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Path unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.path</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A file or directory in a file system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Scope unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.scope</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									An externally created process.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Slice unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.slice</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A group of hierarchically organized units that manage system processes.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Snapshot unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.snapshot</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A saved state of the systemd manager.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Socket unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.socket</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									An inter-process communication socket.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Swap unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.swap</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A swap device or a swap file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569380409968"> <p>
									Timer unit
								</p>
								 </td><td align="left" valign="top" headers="idm140569380408880"> <p>
									<code class="literal">.timer</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569380407792"> <p>
									A systemd timer.
								</p>
								 </td></tr></tbody></table></div></div><div class="table" id="tabl-Managing_Services_with_systemd-Introduction-Units-Locations"><p class="title"><strong>Table&nbsp;10.2.&nbsp;Systemd Unit Files Locations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569374346320" scope="col">Directory</th><th align="left" valign="top" id="idm140569374345232" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569374346320"> <p>
									<code class="literal">/usr/lib/systemd/system/</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374345232"> <p>
									Systemd unit files distributed with installed RPM packages.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569374346320"> <p>
									<code class="literal">/run/systemd/system/</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374345232"> <p>
									Systemd unit files created at run time. This directory takes precedence over the directory with installed service unit files.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569374346320"> <p>
									<code class="literal">/etc/systemd/system/</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374345232"> <p>
									Systemd unit files created by <code class="literal command">systemctl enable</code> as well as unit files added for extending a service. This directory takes precedence over the directory with runtime unit files.
								</p>
								 </td></tr></tbody></table></div></div><h4 id="overriding_the_default_systemd_configuration_using_system_conf">Overriding the Default systemd Configuration Using system.conf</h4><p>
					The default configuration of systemd is defined during the compilation and it can be found in systemd configuration file at <code class="literal">/etc/systemd/system.conf</code>. Use this file if you want to deviate from those defaults and override selected default values for systemd units globally.
				</p><p>
					For example, to override the default value of the timeout limit, which is set to 90 seconds, use the <code class="literal">DefaultTimeoutStartSec</code> parameter to input the required value in seconds.
				</p><pre class="literallayout">DefaultTimeoutStartSec=<span class="emphasis"><em>required value</em></span></pre><p>
					See also <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Overriding_Unit_Mod-Change-timout-limit" title="Example 10.21. Changing the timeout limit">Example&nbsp;10.21, “Changing the timeout limit”</a>.
				</p><section class="section" id="sect-Managing_Services_with_systemd-Introduction-Features"><div class="titlepage"><div><div><h3 class="title">10.1.1.&nbsp;Main Features</h3></div></div></div><p>
						In Red Hat Enterprise Linux 7, the systemd system and service manager provides the following main features:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<span class="emphasis"><em>Socket-based activation</em></span> — At boot time, systemd creates listening sockets for all system services that support this type of activation, and passes the sockets to these services as soon as they are started. This not only allows systemd to start services in parallel, but also makes it possible to restart a service without losing any message sent to it while it is unavailable: the corresponding socket remains accessible and all messages are queued.
							</p><p class="simpara">
								Systemd uses <span class="emphasis"><em>socket units</em></span> for socket-based activation.
							</p></li><li class="listitem">
								<span class="emphasis"><em>Bus-based activation</em></span> — System services that use D-Bus for inter-process communication can be started on-demand the first time a client application attempts to communicate with them. Systemd uses <span class="emphasis"><em>D-Bus service files</em></span> for bus-based activation.
							</li><li class="listitem">
								<span class="emphasis"><em>Device-based activation</em></span> — System services that support device-based activation can be started on-demand when a particular type of hardware is plugged in or becomes available. Systemd uses <span class="emphasis"><em>device units</em></span> for device-based activation.
							</li><li class="listitem">
								<span class="emphasis"><em>Path-based activation</em></span> — System services that support path-based activation can be started on-demand when a particular file or directory changes its state. Systemd uses <span class="emphasis"><em>path units</em></span> for path-based activation.
							</li><li class="listitem">
								<span class="emphasis"><em>Mount and automount point management</em></span> — Systemd monitors and manages mount and automount points. Systemd uses <span class="emphasis"><em>mount units</em></span> for mount points and <span class="emphasis"><em>automount units</em></span> for automount points.
							</li><li class="listitem">
								<span class="emphasis"><em>Aggressive parallelization</em></span> — Because of the use of socket-based activation, systemd can start system services in parallel as soon as all listening sockets are in place. In combination with system services that support on-demand activation, parallel activation significantly reduces the time required to boot the system.
							</li><li class="listitem">
								<span class="emphasis"><em>Transactional unit activation logic</em></span> — Before activating or deactivating a unit, systemd calculates its dependencies, creates a temporary transaction, and verifies that this transaction is consistent. If a transaction is inconsistent, systemd automatically attempts to correct it and remove non-essential jobs from it before reporting an error.
							</li><li class="listitem">
								<span class="emphasis"><em>Backwards compatibility with SysV init</em></span> — Systemd supports SysV init scripts as described in the <span class="emphasis"><em><span class="citetitle citetitle">Linux Standard Base Core Specification</span></em></span>, which eases the upgrade path to systemd service units.
							</li></ul></div></section><section class="section" id="sect-Managing_Services_with_systemd-Compatibility_Changes"><div class="titlepage"><div><div><h3 class="title">10.1.2.&nbsp;Compatibility Changes</h3></div></div></div><p>
						The systemd system and service manager is designed to be mostly compatible with SysV init and Upstart. The following are the most notable compatibility changes with regards to the previous major release of the Red Hat Enterprise Linux system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Systemd has only limited support for runlevels. It provides a number of target units that can be directly mapped to these runlevels and for compatibility reasons, it is also distributed with the earlier <code class="literal command">runlevel</code> command. Not all systemd targets can be directly mapped to runlevels, however, and as a consequence, this command might return <code class="literal">N</code> to indicate an unknown runlevel. It is recommended that you avoid using the <code class="literal command">runlevel</code> command if possible.
							</p><p class="simpara">
								For more information about systemd targets and their comparison with runlevels, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets" title="10.3. Working with systemd Targets">Section&nbsp;10.3, “Working with systemd Targets”</a>.
							</p></li><li class="listitem"><p class="simpara">
								The <code class="literal command">systemctl</code> utility does not support custom commands. In addition to standard commands such as <code class="literal command">start</code>, <code class="literal command">stop</code>, and <code class="literal command">status</code>, authors of SysV init scripts could implement support for any number of arbitrary commands in order to provide additional functionality. For example, the init script for <code class="literal command">iptables</code> in Red Hat Enterprise Linux 6 could be executed with the <code class="literal command">panic</code> command, which immediately enabled panic mode and reconfigured the system to start dropping all incoming and outgoing packets. This is not supported in systemd and the <code class="literal command">systemctl</code> only accepts documented commands.
							</p><p class="simpara">
								For more information about the <code class="literal command">systemctl</code> utility and its comparison with the earlier <code class="literal command">service</code> utility, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services" title="10.2. Managing System Services">Section&nbsp;10.2, “Managing System Services”</a>.
							</p></li><li class="listitem">
								The <code class="literal command">systemctl</code> utility does not communicate with services that have not been started by systemd. When systemd starts a system service, it stores the ID of its main process in order to keep track of it. The <code class="literal command">systemctl</code> utility then uses this PID to query and manage the service. Consequently, if a user starts a particular daemon directly on the command line, <code class="literal command">systemctl</code> is unable to determine its current status or stop it.
							</li><li class="listitem">
								Systemd stops only running services. Previously, when the shutdown sequence was initiated, Red Hat Enterprise Linux 6 and earlier releases of the system used symbolic links located in the <code class="literal">/etc/rc0.d/</code> directory to stop all available system services regardless of their status. With systemd, only running services are stopped on shutdown.
							</li><li class="listitem">
								System services are unable to read from the standard input stream. When systemd starts a service, it connects its standard input to <code class="literal">/dev/null</code> to prevent any interaction with the user.
							</li><li class="listitem">
								System services do not inherit any context (such as the <code class="literal">HOME</code> and <code class="literal">PATH</code> environment variables) from the invoking user and their session. Each service runs in a clean execution context.
							</li><li class="listitem">
								When loading a SysV init script, systemd reads dependency information encoded in the Linux Standard Base (LSB) header and interprets it at run time.
							</li><li class="listitem">
								All operations on service units are subject to a default timeout of 5 minutes to prevent a malfunctioning service from freezing the system. This value is hardcoded for services that are generated from initscripts and cannot be changed. However, individual configuration files can be used to specify a longer timeout value per service, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#Overriding_Unit_Mod-Change-timout-limit" title="Example 10.21. Changing the timeout limit">Example&nbsp;10.21, “Changing the timeout limit”</a>
							</li></ul></div><p>
						For a detailed list of compatibility changes introduced with systemd, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Migration_Planning_Guide/">Migration Planning Guide</a> for Red Hat Enterprise Linux 7.
					</p></section></section><section class="section" id="sect-Managing_Services_with_systemd-Services"><div class="titlepage"><div><div><h2 class="title">10.2.&nbsp;Managing System Services</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To expand your expertise, you might also be interested in the <a class="link" href="http://www.redhat.com/en/services/training/rh134-red-hat-system-administration-ii?cr=cp|tr|pdtxt|00004">Red Hat System Administration II (RH134)</a> training course.
					</p></div></div><p>
					Previous versions of Red Hat Enterprise Linux, which were distributed with SysV init or Upstart, used <span class="emphasis"><em>init scripts</em></span> located in the <code class="literal">/etc/rc.d/init.d/</code> directory. These init scripts were typically written in Bash, and allowed the system administrator to control the state of services and daemons in their system. In Red Hat Enterprise Linux 7, these init scripts have been replaced with <span class="emphasis"><em>service units</em></span>.
				</p><p>
					Service units end with the <code class="literal">.service</code> file extension and serve a similar purpose as init scripts. To view, start, stop, restart, enable, or disable system services, use the <code class="literal command">systemctl</code> command as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Services-systemctl" title="Table 10.3. Comparison of the service Utility with systemctl">Table&nbsp;10.3, “Comparison of the service Utility with systemctl”</a>, <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Services-chkconfig" title="Table 10.4. Comparison of the chkconfig Utility with systemctl">Table&nbsp;10.4, “Comparison of the chkconfig Utility with systemctl”</a>, and further in this section. The <code class="literal command">service</code> and <code class="literal command">chkconfig</code> commands are still available in the system and work as expected, but are only included for compatibility reasons and should be avoided.
				</p><div class="table" id="tabl-Managing_Services_with_systemd-Services-systemctl"><p class="title"><strong>Table&nbsp;10.3.&nbsp;Comparison of the service Utility with systemctl</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569371885296" scope="col">service</th><th align="left" valign="top" id="idm140569371884208" scope="col">systemctl</th><th align="left" valign="top" id="idm140569370777536" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569371885296"> <p>
									<code class="literal command">service <span class="emphasis"><em>name</em></span> start</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371884208"> <p>
									<code class="literal command">systemctl start <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370777536"> <p>
									Starts a service.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371885296"> <p>
									<code class="literal command">service <span class="emphasis"><em>name</em></span> stop</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371884208"> <p>
									<code class="literal command">systemctl stop <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370777536"> <p>
									Stops a service.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371885296"> <p>
									<code class="literal command">service <span class="emphasis"><em>name</em></span> restart</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371884208"> <p>
									<code class="literal command">systemctl restart <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370777536"> <p>
									Restarts a service.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371885296"> <p>
									<code class="literal command">service <span class="emphasis"><em>name</em></span> condrestart</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371884208"> <p>
									<code class="literal command">systemctl try-restart <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370777536"> <p>
									Restarts a service only if it is running.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371885296"> <p>
									<code class="literal command">service <span class="emphasis"><em>name</em></span> reload</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371884208"> <p>
									<code class="literal command">systemctl reload <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370777536"> <p>
									Reloads configuration.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371885296"> <p>
									<code class="literal command">service <span class="emphasis"><em>name</em></span> status</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371884208"> <p>
									<code class="literal command">systemctl status <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 <p>
									<code class="literal command">systemctl is-active <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370777536"> <p>
									Checks if a service is running.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371885296"> <p>
									<code class="literal command">service --status-all</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371884208"> <p>
									<code class="literal command">systemctl list-units --type service --all</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370777536"> <p>
									Displays the status of all services.
								</p>
								 </td></tr></tbody></table></div></div><div class="table" id="tabl-Managing_Services_with_systemd-Services-chkconfig"><p class="title"><strong>Table&nbsp;10.4.&nbsp;Comparison of the chkconfig Utility with systemctl</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569377996688" scope="col">chkconfig</th><th align="left" valign="top" id="idm140569377995600" scope="col">systemctl</th><th align="left" valign="top" id="idm140569377994512" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569377996688"> <p>
									<code class="literal command">chkconfig <span class="emphasis"><em>name</em></span> on</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377995600"> <p>
									<code class="literal command">systemctl enable <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377994512"> <p>
									Enables a service.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569377996688"> <p>
									<code class="literal command">chkconfig <span class="emphasis"><em>name</em></span> off</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377995600"> <p>
									<code class="literal command">systemctl disable <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377994512"> <p>
									Disables a service.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569377996688"> <p>
									<code class="literal command">chkconfig --list <span class="emphasis"><em>name</em></span></code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377995600"> <p>
									<code class="literal command">systemctl status <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 <p>
									<code class="literal command">systemctl is-enabled <span class="emphasis"><em>name</em></span>.service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377994512"> <p>
									Checks if a service is enabled.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569377996688"> <p>
									<code class="literal command">chkconfig --list</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377995600"> <p>
									<code class="literal command">systemctl list-unit-files --type service</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377994512"> <p>
									Lists all services and checks if they are enabled.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569377996688"> <p>
									<code class="literal command">chkconfig --list</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377995600"> <p>
									<code class="literal command">systemctl list-dependencies --after</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377994512"> <p>
									Lists services that are ordered to start before the specified unit.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569377996688"> <p>
									<code class="literal command">chkconfig --list</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377995600"> <p>
									<code class="literal command">systemctl list-dependencies --before</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569377994512"> <p>
									Lists services that are ordered to start after the specified unit.
								</p>
								 </td></tr></tbody></table></div></div><h4 id="specifying_service_units">Specifying Service Units</h4><p>
					For clarity, all command examples in the rest of this section use full unit names with the <code class="literal">.service</code> file extension, for example:
				</p><pre class="literallayout">~]# systemctl stop nfs-server.service</pre><p>
					However, the file extension can be omitted, in which case the <code class="literal command">systemctl</code> utility assumes the argument is a service unit. The following command is equivalent to the one above:
				</p><pre class="literallayout">~]# systemctl stop nfs-server</pre><p>
					Additionally, some units have alias names. Those names can have shorter names than units, which can be used instead of the actual unit names. To find all aliases that can be used for a particular unit, use:
				</p><pre class="literallayout">~]# systemctl show nfs-server.service -p Names</pre><h4 id="sect-behavior_of_systemctl_in_a_chroot_environment">Behavior of systemctl in a chroot Environment</h4><p>
					If you change the root directory using the <code class="literal command">chroot</code> command, most <code class="literal command">systemctl</code> commands refuse to perform any action. The reason for this is that the <code class="literal">systemd</code> process and the user that used the <code class="literal command">chroot</code> command do not have the same view of the filesystem. This happens, for example, when <code class="literal command">systemctl</code> is invoked from a <code class="literal">kickstart</code> file.
				</p><p>
					The exception to this are unit file commands such as the <code class="literal command">systemctl enable</code> and <code class="literal command">systemctl disable</code> commands. These commands do not need a running system and do not affect running processes, but they do affect unit files. Therefore, you can run these commands even in <code class="literal">chroot</code> environment. For example, to enable the <code class="literal">httpd</code> service on a system under the <code class="literal">/srv/website1/</code> directory:
				</p><pre class="literallayout">~]# chroot /srv/website1
~]# systemctl enable httpd.service
Created symlink /etc/systemd/system/multi-user.target.wants/httpd.service, pointing to /usr/lib/systemd/system/httpd.service.</pre><section class="section" id="sect-Managing_Services_with_systemd-Services-List"><div class="titlepage"><div><div><h3 class="title">10.2.1.&nbsp;Listing Services</h3></div></div></div><p>
						To list all currently loaded service units, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">systemctl list-units --type service</code></pre><p>
						For each service unit file, this command displays its full name (<code class="literal">UNIT</code>) followed by a note whether the unit file has been loaded (<code class="literal">LOAD</code>), its high-level (<code class="literal">ACTIVE</code>) and low-level (<code class="literal">SUB</code>) unit file activation state, and a short description (<code class="literal">DESCRIPTION</code>).
					</p><p>
						By default, the <code class="literal command">systemctl list-units</code> command displays only active units. If you want to list all loaded units regardless of their state, run this command with the <code class="literal option">--all</code> or <code class="literal option">-a</code> command line option:
					</p><pre class="literallayout"><code class="literal command">systemctl list-units --type service --all</code></pre><p>
						You can also list all available service units to see if they are enabled. To do so, type:
					</p><pre class="literallayout"><code class="literal command">systemctl list-unit-files --type service</code></pre><p>
						For each service unit, this command displays its full name (<code class="literal">UNIT FILE</code>) followed by information whether the service unit is enabled or not (<code class="literal">STATE</code>). For information on how to determine the status of individual service units, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Status" title="10.2.2. Displaying Service Status">Section&nbsp;10.2.2, “Displaying Service Status”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Services-List"><p class="title"><strong>Example&nbsp;10.1.&nbsp;Listing Services</strong></p><div class="example-contents"><p>
							To list all currently loaded service units, run the following command:
						</p><pre class="literallayout">~]$ <code class="literal command">systemctl list-units --type service</code>
UNIT              LOAD  ACTIVE SUB   DESCRIPTION
abrt-ccpp.service       loaded active exited Install ABRT coredump hook
abrt-oops.service       loaded active running ABRT kernel log watcher
abrt-vmcore.service      loaded active exited Harvest vmcores for ABRT
abrt-xorg.service       loaded active running ABRT Xorg log watcher
abrtd.service         loaded active running ABRT Automated Bug Reporting Tool
...
systemd-vconsole-setup.service loaded active exited Setup Virtual Console
tog-pegasus.service      loaded active running OpenPegasus CIM Server

LOAD  = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB  = The low-level unit activation state, values depend on unit type.

<span class="emphasis"><em>46 loaded units listed.</em></span> Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'</pre><p>
							To list all installed service unit files to determine if they are enabled, type:
						</p><pre class="literallayout">~]$ systemctl list-unit-files --type service
UNIT FILE                  STATE
abrt-ccpp.service              enabled
abrt-oops.service              enabled
abrt-vmcore.service             enabled
abrt-xorg.service              enabled
abrtd.service                enabled
...
wpa_supplicant.service           disabled
ypbind.service               disabled

208 unit files listed.</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Services-Status"><div class="titlepage"><div><div><h3 class="title">10.2.2.&nbsp;Displaying Service Status</h3></div></div></div><p>
						To display detailed information about a service unit that corresponds to a system service, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">systemctl status <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to inspect (for example, <code class="literal">gdm</code>). This command displays the name of the selected service unit followed by its short description, one or more fields described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Services-Status" title="Table 10.5. Available Service Unit Information">Table&nbsp;10.5, “Available Service Unit Information”</a>, and if it is executed by the <code class="literal">root</code> user, also the most recent log entries.
					</p><div class="table" id="tabl-Managing_Services_with_systemd-Services-Status"><p class="title"><strong>Table&nbsp;10.5.&nbsp;Available Service Unit Information</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569378107168" scope="col">Field</th><th align="left" valign="top" id="idm140569378106080" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569378107168"> <p>
										<code class="literal">Loaded</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378106080"> <p>
										Information whether the service unit has been loaded, the absolute path to the unit file, and a note whether the unit is enabled.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378107168"> <p>
										<code class="literal">Active</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378106080"> <p>
										Information whether the service unit is running followed by a time stamp.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378107168"> <p>
										<code class="literal">Main PID</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378106080"> <p>
										The PID of the corresponding system service followed by its name.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378107168"> <p>
										<code class="literal">Status</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378106080"> <p>
										Additional information about the corresponding system service.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378107168"> <p>
										<code class="literal">Process</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378106080"> <p>
										Additional information about related processes.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378107168"> <p>
										<code class="literal">CGroup</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378106080"> <p>
										Additional information about related Control Groups (cgroups).
									</p>
									 </td></tr></tbody></table></div></div><p>
						To only verify that a particular service unit is running, run the following command:
					</p><pre class="literallayout"><code class="literal command">systemctl is-active <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Similarly, to determine whether a particular service unit is enabled, type:
					</p><pre class="literallayout"><code class="literal command">systemctl is-enabled <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Note that both <code class="literal command">systemctl is-active</code> and <code class="literal command">systemctl is-enabled</code> return an exit status of <code class="literal">0</code> if the specified service unit is running or enabled. For information on how to list all currently loaded service units, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-List" title="10.2.1. Listing Services">Section&nbsp;10.2.1, “Listing Services”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Services-Status"><p class="title"><strong>Example&nbsp;10.2.&nbsp;Displaying Service Status</strong></p><div class="example-contents"><p>
							The service unit for the GNOME Display Manager is named <code class="literal">gdm.service</code>. To determine the current status of this service unit, type the following at a shell prompt:
						</p><pre class="literallayout">~]# systemctl status gdm.service
gdm.service - GNOME Display Manager
  Loaded: loaded (/usr/lib/systemd/system/gdm.service; enabled)
  Active: active (running) since Thu 2013-10-17 17:31:23 CEST; 5min ago
 Main PID: 1029 (gdm)
  CGroup: /system.slice/gdm.service
      ├─1029 /usr/sbin/gdm
      ├─1037 /usr/libexec/gdm-simple-slave --display-id /org/gno...
      └─1047 /usr/bin/Xorg :0 -background none -verbose -auth /r...

Oct 17 17:31:23 localhost systemd[1]: Started GNOME Display Manager.</pre></div></div><div class="example" id="exam-Managing_Services_with_systemd-Services-Status_Start_Before"><p class="title"><strong>Example&nbsp;10.3.&nbsp;Displaying Services Ordered to Start Before a Service</strong></p><div class="example-contents"><p>
							To determine what services are ordered to start before the specified service, type the following at a shell prompt:
						</p><pre class="literallayout">~]# systemctl list-dependencies --after gdm.service
gdm.service
├─dbus.socket
├─getty@tty1.service
├─livesys.service
├─plymouth-quit.service
├─system.slice
├─systemd-journald.socket
├─systemd-user-sessions.service
└─basic.target
[output truncated]</pre></div></div><div class="example" id="exam-Managing_Services_with_systemd-Services-Status_Start_After"><p class="title"><strong>Example&nbsp;10.4.&nbsp;Displaying Services Ordered to Start After a Service</strong></p><div class="example-contents"><p>
							To determine what services are ordered to start after the specified service, type the following at a shell prompt:
						</p><pre class="literallayout">~]# systemctl list-dependencies --before gdm.service
gdm.service
├─dracut-shutdown.service
├─graphical.target
│ ├─systemd-readahead-done.service
│ ├─systemd-readahead-done.timer
│ └─systemd-update-utmp-runlevel.service
└─shutdown.target
 ├─systemd-reboot.service
 └─final.target
  └─systemd-reboot.service</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Services-Start"><div class="titlepage"><div><div><h3 class="title">10.2.3.&nbsp;Starting a Service</h3></div></div></div><p>
						To start a service unit that corresponds to a system service, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl start <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to start (for example, <code class="literal">gdm</code>). This command starts the selected service unit in the current session. For information on how to enable a service unit to be started at boot time, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Enable" title="10.2.6. Enabling a Service">Section&nbsp;10.2.6, “Enabling a Service”</a>. For information on how to determine the status of a certain service unit, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Status" title="10.2.2. Displaying Service Status">Section&nbsp;10.2.2, “Displaying Service Status”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Services-Start"><p class="title"><strong>Example&nbsp;10.5.&nbsp;Starting a Service</strong></p><div class="example-contents"><p>
							The service unit for the Apache HTTP Server is named <code class="literal">httpd.service</code>. To activate this service unit and start the <code class="literal">httpd</code> daemon in the current session, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl start httpd.service</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Services-Stop"><div class="titlepage"><div><div><h3 class="title">10.2.4.&nbsp;Stopping a Service</h3></div></div></div><p>
						To stop a service unit that corresponds to a system service, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl stop <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to stop (for example, <code class="literal command">bluetooth</code>). This command stops the selected service unit in the current session. For information on how to disable a service unit and prevent it from being started at boot time, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Disable" title="10.2.7. Disabling a Service">Section&nbsp;10.2.7, “Disabling a Service”</a>. For information on how to determine the status of a certain service unit, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Status" title="10.2.2. Displaying Service Status">Section&nbsp;10.2.2, “Displaying Service Status”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Services-Stop"><p class="title"><strong>Example&nbsp;10.6.&nbsp;Stopping a Service</strong></p><div class="example-contents"><p>
							The service unit for the <code class="literal">bluetoothd</code> daemon is named <code class="literal">bluetooth.service</code>. To deactivate this service unit and stop the <code class="literal">bluetoothd</code> daemon in the current session, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl stop bluetooth.service</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Services-Restart"><div class="titlepage"><div><div><h3 class="title">10.2.5.&nbsp;Restarting a Service</h3></div></div></div><p>
						To restart a service unit that corresponds to a system service, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to restart (for example, <code class="literal">httpd</code>). This command stops the selected service unit in the current session and immediately starts it again. Importantly, if the selected service unit is not running, this command starts it too. To tell systemd to restart a service unit only if the corresponding service is already running, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl try-restart <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Certain system services also allow you to reload their configuration without interrupting their execution. To do so, type as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl reload <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Note that system services that do not support this feature ignore this command altogether. For convenience, the <code class="literal command">systemctl</code> command also supports the <code class="literal command">reload-or-restart</code> and <code class="literal command">reload-or-try-restart</code> commands that restart such services instead. For information on how to determine the status of a certain service unit, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Status" title="10.2.2. Displaying Service Status">Section&nbsp;10.2.2, “Displaying Service Status”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Services-Restart"><p class="title"><strong>Example&nbsp;10.7.&nbsp;Restarting a Service</strong></p><div class="example-contents"><p>
							In order to prevent users from encountering unnecessary error messages or partially rendered web pages, the Apache HTTP Server allows you to edit and reload its configuration without the need to restart it and interrupt actively processed requests. To do so, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl reload httpd.service</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Services-Enable"><div class="titlepage"><div><div><h3 class="title">10.2.6.&nbsp;Enabling a Service</h3></div></div></div><p>
						To configure a service unit that corresponds to a system service to be automatically started at boot time, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl enable <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to enable (for example, <code class="literal">httpd</code>). This command reads the <code class="literal">[Install]</code> section of the selected service unit and creates appropriate symbolic links to the <code class="literal">/usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.service</code> file in the <code class="literal">/etc/systemd/system/</code> directory and its subdirectories. This command does not, however, rewrite links that already exist. If you want to ensure that the symbolic links are re-created, use the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl reenable <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						This command disables the selected service unit and immediately enables it again. For information on how to determine whether a certain service unit is enabled to start at boot time, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Status" title="10.2.2. Displaying Service Status">Section&nbsp;10.2.2, “Displaying Service Status”</a>. For information on how to start a service in the current session, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Start" title="10.2.3. Starting a Service">Section&nbsp;10.2.3, “Starting a Service”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Services-Enable"><p class="title"><strong>Example&nbsp;10.8.&nbsp;Enabling a Service</strong></p><div class="example-contents"><p>
							To configure the Apache HTTP Server to start automatically at boot time, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl enable httpd.service
Created symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Services-Disable"><div class="titlepage"><div><div><h3 class="title">10.2.7.&nbsp;Disabling a Service</h3></div></div></div><p>
						To prevent a service unit that corresponds to a system service from being automatically started at boot time, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl disable <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the service unit you want to disable (for example, <code class="literal">bluetooth</code>). This command reads the <code class="literal">[Install]</code> section of the selected service unit and removes appropriate symbolic links to the <code class="literal">/usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.service</code> file from the <code class="literal">/etc/systemd/system/</code> directory and its subdirectories. In addition, you can mask any service unit to prevent it from being started manually or by another service. To do so, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl mask <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						This command replaces the <code class="literal">/etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code> file with a symbolic link to <code class="literal">/dev/null</code>, rendering the actual unit file inaccessible to systemd. To revert this action and unmask a service unit, type as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl unmask <span class="emphasis"><em>name</em></span>.service</code></pre><p>
						For information on how to determine whether a certain service unit is enabled to start at boot time, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Status" title="10.2.2. Displaying Service Status">Section&nbsp;10.2.2, “Displaying Service Status”</a>. For information on how to stop a service in the current session, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Stop" title="10.2.4. Stopping a Service">Section&nbsp;10.2.4, “Stopping a Service”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Services-Disable"><p class="title"><strong>Example&nbsp;10.9.&nbsp;Disabling a Service</strong></p><div class="example-contents"><p>
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-Managing_Services_with_systemd-Services-Stop" title="Example 10.6. Stopping a Service">Example&nbsp;10.6, “Stopping a Service”</a> illustrates how to stop the <code class="literal">bluetooth.service</code> unit in the current session. To prevent this service unit from starting at boot time, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl disable bluetooth.service
Removed symlink /etc/systemd/system/bluetooth.target.wants/bluetooth.service.
Removed symlink /etc/systemd/system/dbus-org.bluez.service.</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Services-Start_confl"><div class="titlepage"><div><div><h3 class="title">10.2.8.&nbsp;Starting a Conflicting Service</h3></div></div></div><p>
						In <span class="strong strong"><strong><span class="application application">systemd</span></strong></span>, positive and negative dependencies between services exist. Starting particular service may require starting one or more other services (positive dependency) or stopping one or more services (negative dependency).
					</p><p>
						When you attempt to start a new service, <span class="strong strong"><strong><span class="application application">systemd</span></strong></span> resolves all dependencies automatically. Note that this is done without explicit notification to the user. If you are already running a service, and you attempt to start another service with a negative dependency, the first service is automatically stopped.
					</p><p>
						For example, if you are running the <code class="literal">postfix</code> service, and you try to start the <code class="literal">sendmail</code> service, <span class="strong strong"><strong><span class="application application">systemd</span></strong></span> first automatically stops <code class="literal">postfix</code>, because these two services are conflicting and cannot run on the same port.
					</p></section></section><section class="section" id="sect-Managing_Services_with_systemd-Targets"><div class="titlepage"><div><div><h2 class="title">10.3.&nbsp;Working with systemd Targets</h2></div></div></div><p>
					Previous versions of Red Hat Enterprise Linux, which were distributed with SysV init or Upstart, implemented a predefined set of <span class="emphasis"><em>runlevels</em></span> that represented specific modes of operation. These runlevels were numbered from 0 to 6 and were defined by a selection of system services to be run when a particular runlevel was enabled by the system administrator. In Red Hat Enterprise Linux 7, the concept of runlevels has been replaced with <span class="emphasis"><em>systemd targets</em></span>.
				</p><p>
					Systemd targets are represented by <span class="emphasis"><em>target units</em></span>. Target units end with the <code class="literal">.target</code> file extension and their only purpose is to group together other systemd units through a chain of dependencies. For example, the <code class="literal">graphical.target</code> unit, which is used to start a graphical session, starts system services such as the GNOME Display Manager (<code class="literal">gdm.service</code>) or Accounts Service (<code class="literal">accounts-daemon.service</code>) and also activates the <code class="literal">multi-user.target</code> unit. Similarly, the <code class="literal">multi-user.target</code> unit starts other essential system services such as NetworkManager (<code class="literal">NetworkManager.service</code>) or D-Bus (<code class="literal">dbus.service</code>) and activates another target unit named <code class="literal">basic.target</code>.
				</p><p>
					Red Hat Enterprise Linux 7 is distributed with a number of predefined targets that are more or less similar to the standard set of runlevels from the previous releases of this system. For compatibility reasons, it also provides aliases for these targets that directly map them to SysV runlevels. <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Targets-Runlevels" title="Table 10.6. Comparison of SysV Runlevels with systemd Targets">Table&nbsp;10.6, “Comparison of SysV Runlevels with systemd Targets”</a> provides a complete list of SysV runlevels and their corresponding systemd targets.
				</p><div class="table" id="tabl-Managing_Services_with_systemd-Targets-Runlevels"><p class="title"><strong>Table&nbsp;10.6.&nbsp;Comparison of SysV Runlevels with systemd Targets</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569371249440" scope="col">Runlevel</th><th align="left" valign="top" id="idm140569371248352" scope="col">Target Units</th><th align="left" valign="top" id="idm140569371247264" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569371249440"> <p>
									<code class="literal">0</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371248352"> <p>
									<code class="literal">runlevel0.target</code>, <code class="literal">poweroff.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371247264"> <p>
									Shut down and power off the system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371249440"> <p>
									<code class="literal">1</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371248352"> <p>
									<code class="literal">runlevel1.target</code>, <code class="literal">rescue.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371247264"> <p>
									Set up a rescue shell.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371249440"> <p>
									<code class="literal">2</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371248352"> <p>
									<code class="literal">runlevel2.target</code>, <code class="literal">multi-user.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371247264"> <p>
									Set up a non-graphical multi-user system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371249440"> <p>
									<code class="literal">3</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371248352"> <p>
									<code class="literal">runlevel3.target</code>, <code class="literal">multi-user.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371247264"> <p>
									Set up a non-graphical multi-user system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371249440"> <p>
									<code class="literal">4</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371248352"> <p>
									<code class="literal">runlevel4.target</code>, <code class="literal">multi-user.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371247264"> <p>
									Set up a non-graphical multi-user system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371249440"> <p>
									<code class="literal">5</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371248352"> <p>
									<code class="literal">runlevel5.target</code>, <code class="literal">graphical.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371247264"> <p>
									Set up a graphical multi-user system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569371249440"> <p>
									<code class="literal">6</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371248352"> <p>
									<code class="literal">runlevel6.target</code>, <code class="literal">reboot.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569371247264"> <p>
									Shut down and reboot the system.
								</p>
								 </td></tr></tbody></table></div></div><p>
					To view, change, or configure systemd targets, use the <code class="literal command">systemctl</code> utility as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Targets-telinit" title="Table 10.7. Comparison of SysV init Commands with systemctl">Table&nbsp;10.7, “Comparison of SysV init Commands with systemctl”</a> and in the sections below. The <code class="literal command">runlevel</code> and <code class="literal command">telinit</code> commands are still available in the system and work as expected, but are only included for compatibility reasons and should be avoided.
				</p><div class="table" id="tabl-Managing_Services_with_systemd-Targets-telinit"><p class="title"><strong>Table&nbsp;10.7.&nbsp;Comparison of SysV init Commands with systemctl</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569370586592" scope="col">Old Command</th><th align="left" valign="top" id="idm140569370585504" scope="col">New Command</th><th align="left" valign="top" id="idm140569370584416" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569370586592"> <p>
									<code class="literal command">runlevel</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370585504"> <p>
									<code class="literal command">systemctl list-units --type target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370584416"> <p>
									Lists currently loaded target units.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569370586592"> <p>
									<code class="literal command">telinit <span class="emphasis"><em>runlevel</em></span></code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370585504"> <p>
									<code class="literal command">systemctl isolate <span class="emphasis"><em>name</em></span>.target</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569370584416"> <p>
									Changes the current target.
								</p>
								 </td></tr></tbody></table></div></div><section class="section" id="sect-Managing_Services_with_systemd-Targets-View_Default"><div class="titlepage"><div><div><h3 class="title">10.3.1.&nbsp;Viewing the Default Target</h3></div></div></div><p>
						To determine which target unit is used by default, run the following command:
					</p><pre class="literallayout"><code class="literal command">systemctl get-default</code></pre><p>
						This command resolves the symbolic link located at <code class="literal">/etc/systemd/system/default.target</code> and displays the result. For information on how to change the default target, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Change_Default" title="10.3.3. Changing the Default Target">Section&nbsp;10.3.3, “Changing the Default Target”</a>. For information on how to list all currently loaded target units, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-View_Current" title="10.3.2. Viewing the Current Target">Section&nbsp;10.3.2, “Viewing the Current Target”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Targets-View_Default"><p class="title"><strong>Example&nbsp;10.10.&nbsp;Viewing the Default Target</strong></p><div class="example-contents"><p>
							To display the default target unit, type:
						</p><pre class="literallayout">~]$ <code class="literal command">systemctl get-default</code>
graphical.target</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Targets-View_Current"><div class="titlepage"><div><div><h3 class="title">10.3.2.&nbsp;Viewing the Current Target</h3></div></div></div><p>
						To list all currently loaded target units, type the following command at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">systemctl list-units --type target</code></pre><p>
						For each target unit, this commands displays its full name (<code class="literal">UNIT</code>) followed by a note whether the unit has been loaded (<code class="literal">LOAD</code>), its high-level (<code class="literal">ACTIVE</code>) and low-level (<code class="literal">SUB</code>) unit activation state, and a short description (<code class="literal">DESCRIPTION</code>).
					</p><p>
						By default, the <code class="literal command">systemctl list-units</code> command displays only active units. If you want to list all loaded units regardless of their state, run this command with the <code class="literal option">--all</code> or <code class="literal option">-a</code> command line option:
					</p><pre class="literallayout"><code class="literal command">systemctl list-units --type target --all</code></pre><p>
						See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-View_Default" title="10.3.1. Viewing the Default Target">Section&nbsp;10.3.1, “Viewing the Default Target”</a> for information on how to display the default target. For information on how to change the current target, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Change_Current" title="10.3.4. Changing the Current Target">Section&nbsp;10.3.4, “Changing the Current Target”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Targets-View_Current"><p class="title"><strong>Example&nbsp;10.11.&nbsp;Viewing the Current Target</strong></p><div class="example-contents"><p>
							To list all currently loaded target units, run the following command:
						</p><pre class="literallayout">~]$ <code class="literal command">systemctl list-units --type target</code>
UNIT         LOAD  ACTIVE SUB  DESCRIPTION
basic.target     loaded active active Basic System
cryptsetup.target   loaded active active Encrypted Volumes
getty.target     loaded active active Login Prompts
graphical.target   loaded active active Graphical Interface
local-fs-pre.target  loaded active active Local File Systems (Pre)
local-fs.target    loaded active active Local File Systems
multi-user.target   loaded active active Multi-User System
network.target    loaded active active Network
paths.target     loaded active active Paths
remote-fs.target   loaded active active Remote File Systems
sockets.target    loaded active active Sockets
sound.target     loaded active active Sound Card
spice-vdagentd.target loaded active active Agent daemon for Spice guests
swap.target      loaded active active Swap
sysinit.target    loaded active active System Initialization
time-sync.target   loaded active active System Time Synchronized
timers.target     loaded active active Timers

LOAD  = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB  = The low-level unit activation state, values depend on unit type.

<span class="emphasis"><em>17 loaded units listed.</em></span> Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Targets-Change_Default"><div class="titlepage"><div><div><h3 class="title">10.3.3.&nbsp;Changing the Default Target</h3></div></div></div><p>
						To configure the system to use a different target unit by default, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl set-default <span class="emphasis"><em>name</em></span>.target</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the target unit you want to use by default (for example, <code class="literal">multi-user</code>). This command replaces the <code class="literal">/etc/systemd/system/default.target</code> file with a symbolic link to <code class="literal">/usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.target</code>, where <span class="emphasis"><em>name</em></span> is the name of the target unit you want to use. For information on how to change the current target, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Change_Current" title="10.3.4. Changing the Current Target">Section&nbsp;10.3.4, “Changing the Current Target”</a>. For information on how to list all currently loaded target units, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-View_Current" title="10.3.2. Viewing the Current Target">Section&nbsp;10.3.2, “Viewing the Current Target”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Targets-Change_Default"><p class="title"><strong>Example&nbsp;10.12.&nbsp;Changing the Default Target</strong></p><div class="example-contents"><p>
							To configure the system to use the <code class="literal">multi-user.target</code> unit by default, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl set-default multi-user.target
rm '/etc/systemd/system/default.target'
ln -s '/usr/lib/systemd/system/multi-user.target' '/etc/systemd/system/default.target'</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Targets-Change_Current"><div class="titlepage"><div><div><h3 class="title">10.3.4.&nbsp;Changing the Current Target</h3></div></div></div><p>
						To change to a different target unit in the current session, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl isolate <span class="emphasis"><em>name</em></span>.target</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the target unit you want to use (for example, <code class="literal">multi-user</code>). This command starts the target unit named <span class="emphasis"><em>name</em></span> and all dependent units, and immediately stops all others. For information on how to change the default target, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Change_Default" title="10.3.3. Changing the Default Target">Section&nbsp;10.3.3, “Changing the Default Target”</a>. For information on how to list all currently loaded target units, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-View_Current" title="10.3.2. Viewing the Current Target">Section&nbsp;10.3.2, “Viewing the Current Target”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Targets-Change_Current"><p class="title"><strong>Example&nbsp;10.13.&nbsp;Changing the Current Target</strong></p><div class="example-contents"><p>
							To turn off the graphical user interface and change to the <code class="literal">multi-user.target</code> unit in the current session, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl isolate multi-user.target</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Targets-Rescue"><div class="titlepage"><div><div><h3 class="title">10.3.5.&nbsp;Changing to Rescue Mode</h3></div></div></div><p>
						<span class="emphasis"><em>Rescue mode</em></span> provides a convenient single-user environment and allows you to repair your system in situations when it is unable to complete a regular booting process. In rescue mode, the system attempts to mount all local file systems and start some important system services, but it does not activate network interfaces or allow more users to be logged into the system at the same time. In Red Hat Enterprise Linux 7, rescue mode is equivalent to <span class="emphasis"><em>single user mode</em></span> and requires the root password.
					</p><p>
						To change the current target and enter rescue mode in the current session, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl rescue</code></pre><p>
						This command is similar to <code class="literal command">systemctl isolate rescue.target</code>, but it also sends an informative message to all users that are currently logged into the system. To prevent systemd from sending this message, run this command with the <code class="literal option">--no-wall</code> command line option:
					</p><pre class="literallayout"><code class="literal command">systemctl --no-wall rescue</code></pre><p>
						For information on how to enter emergency mode, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Emergency" title="10.3.6. Changing to Emergency Mode">Section&nbsp;10.3.6, “Changing to Emergency Mode”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Targets-Rescue"><p class="title"><strong>Example&nbsp;10.14.&nbsp;Changing to Rescue Mode</strong></p><div class="example-contents"><p>
							To enter rescue mode in the current session, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl rescue

Broadcast message from root@localhost on pts/0 (Fri 2013-10-25 18:23:15 CEST):

The system is going down to rescue mode NOW!</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Targets-Emergency"><div class="titlepage"><div><div><h3 class="title">10.3.6.&nbsp;Changing to Emergency Mode</h3></div></div></div><p>
						<span class="emphasis"><em>Emergency mode</em></span> provides the most minimal environment possible and allows you to repair your system even in situations when the system is unable to enter rescue mode. In emergency mode, the system mounts the root file system only for reading, does not attempt to mount any other local file systems, does not activate network interfaces, and only starts a few essential services. In Red Hat Enterprise Linux 7, emergency mode requires the root password.
					</p><p>
						To change the current target and enter emergency mode, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl emergency</code></pre><p>
						This command is similar to <code class="literal command">systemctl isolate emergency.target</code>, but it also sends an informative message to all users that are currently logged into the system. To prevent systemd from sending this message, run this command with the <code class="literal option">--no-wall</code> command line option:
					</p><pre class="literallayout"><code class="literal command">systemctl --no-wall emergency</code></pre><p>
						For information on how to enter rescue mode, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets-Rescue" title="10.3.5. Changing to Rescue Mode">Section&nbsp;10.3.5, “Changing to Rescue Mode”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-Targets-Emergency"><p class="title"><strong>Example&nbsp;10.15.&nbsp;Changing to Emergency Mode</strong></p><div class="example-contents"><p>
							To enter emergency mode without sending a message to all users that are currently logged into the system, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl --no-wall emergency</pre></div></div></section></section><section class="section" id="sect-Managing_Services_with_systemd-Power"><div class="titlepage"><div><div><h2 class="title">10.4.&nbsp;Shutting Down, Suspending, and Hibernating the System</h2></div></div></div><p>
					In Red Hat Enterprise Linux 7, the <code class="literal command">systemctl</code> utility replaces a number of power management commands used in previous versions of the Red Hat Enterprise Linux system. The commands listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Power" title="Table 10.8. Comparison of Power Management Commands with systemctl">Table&nbsp;10.8, “Comparison of Power Management Commands with systemctl”</a> are still available in the system for compatibility reasons, but it is advised that you use <code class="literal command">systemctl</code> when possible.
				</p><div class="table" id="tabl-Managing_Services_with_systemd-Power"><p class="title"><strong>Table&nbsp;10.8.&nbsp;Comparison of Power Management Commands with systemctl</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569374649504" scope="col">Old Command</th><th align="left" valign="top" id="idm140569374648416" scope="col">New Command</th><th align="left" valign="top" id="idm140569374647328" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569374649504"> <p>
									<code class="literal command">halt</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374648416"> <p>
									<code class="literal command">systemctl halt</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374647328"> <p>
									Halts the system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569374649504"> <p>
									<code class="literal command">poweroff</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374648416"> <p>
									<code class="literal command">systemctl poweroff</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374647328"> <p>
									Powers off the system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569374649504"> <p>
									<code class="literal command">reboot</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374648416"> <p>
									<code class="literal command">systemctl reboot</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374647328"> <p>
									Restarts the system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569374649504"> <p>
									<code class="literal command">pm-suspend</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374648416"> <p>
									<code class="literal command">systemctl suspend</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374647328"> <p>
									Suspends the system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569374649504"> <p>
									<code class="literal command">pm-hibernate</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374648416"> <p>
									<code class="literal command">systemctl hibernate</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374647328"> <p>
									Hibernates the system.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569374649504"> <p>
									<code class="literal command">pm-suspend-hybrid</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374648416"> <p>
									<code class="literal command">systemctl hybrid-sleep</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569374647328"> <p>
									Hibernates and suspends the system.
								</p>
								 </td></tr></tbody></table></div></div><section class="section" id="sect-Managing_Services_with_systemd-Power-Halt"><div class="titlepage"><div><div><h3 class="title">10.4.1.&nbsp;Shutting Down the System</h3></div></div></div><p>
						The <code class="literal command">systemctl</code> utility provides commands for shutting down the system, however the traditional <code class="literal command">shutdown</code> command is also supported. Although the <code class="literal command">shutdown</code> command will call the <code class="literal command">systemctl</code> utility to perform the shutdown, it has an advantage in that it also supports a time argument. This is particularly useful for scheduled maintenance and to allow more time for users to react to the warning that a system shutdown has been scheduled. The option to cancel the shutdown can also be an advantage.
					</p><h5 id="using_systemctl_commands">Using systemctl Commands</h5><p>
						To shut down the system and power off the machine, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl poweroff</code></pre><p>
						To shut down and halt the system without powering off the machine, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl halt</code></pre><p>
						By default, running either of these commands causes systemd to send an informative message to all users that are currently logged into the system. To prevent systemd from sending this message, run the selected command with the <code class="literal option">--no-wall</code> command line option, for example:
					</p><pre class="literallayout"><code class="literal command">systemctl --no-wall poweroff</code></pre><h5 id="using_the_shutdown_command">Using the shutdown Command</h5><p>
						To shut down the system and power off the machine at a certain time, use a command in the following format as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">shutdown --poweroff <span class="emphasis"><em>hh:mm</em></span></code></pre><p>
						Where <span class="emphasis"><em>hh:mm</em></span> is the time in 24 hour clock format. The <code class="literal">/run/nologin</code> file is created 5 minutes before system shutdown to prevent new logins. When a time argument is used, an optional message, the <span class="emphasis"><em>wall message</em></span>, can be appended to the command.
					</p><p>
						To shut down and halt the system after a delay, without powering off the machine, use a command in the following format as <code class="literal">root</code>:
					</p><pre class="literallayout">shutdown --halt +m</pre><p>
						Where <span class="emphasis"><em>+m</em></span> is the delay time in minutes. The <code class="literal">now</code> keyword is an alias for <code class="literal">+0</code>.
					</p><p>
						A pending shutdown can be canceled by the <code class="literal">root</code> user as follows:
					</p><pre class="literallayout"><code class="literal command">shutdown -c</code></pre><p>
						See the <code class="literal">shutdown(8)</code> manual page for further command options.
					</p></section><section class="section" id="sect-Managing_Services_with_systemd-Power-Reboot"><div class="titlepage"><div><div><h3 class="title">10.4.2.&nbsp;Restarting the System</h3></div></div></div><p>
						To restart the system, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl reboot</code></pre><p>
						By default, this command causes systemd to send an informative message to all users that are currently logged into the system. To prevent systemd from sending this message, run this command with the <code class="literal option">--no-wall</code> command line option:
					</p><pre class="literallayout"><code class="literal command">systemctl --no-wall reboot</code></pre></section><section class="section" id="sect-Managing_Services_with_systemd-Power-Suspend"><div class="titlepage"><div><div><h3 class="title">10.4.3.&nbsp;Suspending the System</h3></div></div></div><p>
						To suspend the system, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl suspend</code></pre><p>
						This command saves the system state in RAM and with the exception of the RAM module, powers off most of the devices in the machine. When you turn the machine back on, the system then restores its state from RAM without having to boot again. Because the system state is saved in RAM and not on the hard disk, restoring the system from suspend mode is significantly faster than restoring it from hibernation, but as a consequence, a suspended system state is also vulnerable to power outages.
					</p><p>
						For information on how to hibernate the system, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Power-Hibernate" title="10.4.4. Hibernating the System">Section&nbsp;10.4.4, “Hibernating the System”</a>.
					</p></section><section class="section" id="sect-Managing_Services_with_systemd-Power-Hibernate"><div class="titlepage"><div><div><h3 class="title">10.4.4.&nbsp;Hibernating the System</h3></div></div></div><p>
						To hibernate the system, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl hibernate</code></pre><p>
						This command saves the system state on the hard disk drive and powers off the machine. When you turn the machine back on, the system then restores its state from the saved data without having to boot again. Because the system state is saved on the hard disk and not in RAM, the machine does not have to maintain electrical power to the RAM module, but as a consequence, restoring the system from hibernation is significantly slower than restoring it from suspend mode.
					</p><p>
						To hibernate and suspend the system, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl hybrid-sleep</code></pre><p>
						For information on how to suspend the system, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Power-Suspend" title="10.4.3. Suspending the System">Section&nbsp;10.4.3, “Suspending the System”</a>.
					</p></section></section><section class="section" id="sect-Managing_Services_with_systemd-Remote"><div class="titlepage"><div><div><h2 class="title">10.5.&nbsp;Controlling systemd on a Remote Machine</h2></div></div></div><p>
					In addition to controlling the systemd system and service manager locally, the <code class="literal command">systemctl</code> utility also allows you to interact with systemd running on a remote machine over the SSH protocol. Provided that the <code class="literal">sshd</code> service on the remote machine is running, you can connect to this machine by running the <code class="literal command">systemctl</code> command with the <code class="literal option">--host</code> or <code class="literal option">-H</code> command line option:
				</p><pre class="literallayout">systemctl --host user_name@host_name command</pre><p>
					Replace <span class="emphasis"><em>user_name</em></span> with the name of the remote user, <span class="emphasis"><em>host_name</em></span> with the machine’s host name, and <code class="literal command">command</code> with any of the <code class="literal command">systemctl</code> commands described above. Note that the remote machine must be configured to allow the selected user remote access over the SSH protocol. For more information on how to configure an SSH server, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-OpenSSH" title="Chapter 12. OpenSSH">Chapter&nbsp;12, <em>OpenSSH</em></a>.
				</p><div class="example" id="exam-Managing_Services_with_systemd-Remote"><p class="title"><strong>Example&nbsp;10.16.&nbsp;Remote Management</strong></p><div class="example-contents"><p>
						To log in to a remote machine named <code class="literal">server-01.example.com</code> as the <code class="literal">root</code> user and determine the current status of the <code class="literal">httpd.service</code> unit, type the following at a shell prompt:
					</p><pre class="literallayout">~]$ <code class="literal command">systemctl -H <a class="link" href="mailto:root@server-01.example.com">root@server-01.example.com</a> status httpd.service</code>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; systemd unit files -- update
<a class="link" href="mailto:root@server-01.example.com">root@server-01.example.com</a>'s password:
httpd.service - The Apache HTTP Server
  Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled)
  Active: active (running) since Fri 2013-11-01 13:58:56 CET; 2h 48min ago
 Main PID: 649
  Status: "Total requests: 0; Current requests/sec: 0; Current traffic:  0 B/sec"
  CGroup: /system.slice/httpd.service</pre></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Unit_Files"><div class="titlepage"><div><div><h2 class="title">10.6.&nbsp;Creating and Modifying systemd Unit Files</h2></div></div></div><p>
					A unit file contains configuration directives that describe the unit and define its behavior. Several <code class="literal command">systemctl</code> commands work with unit files in the background. To make finer adjustments, system administrator must edit or create unit files manually. <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Introduction-Units-Locations" title="Table 10.2. Systemd Unit Files Locations">Table&nbsp;10.2, “Systemd Unit Files Locations”</a> lists three main directories where unit files are stored on the system, the <code class="literal">/etc/systemd/system/</code> directory is reserved for unit files created or customized by the system administrator.
				</p><p>
					Unit file names take the following form:
				</p><pre class="literallayout"><span class="emphasis"><em>unit_name</em></span>.<span class="emphasis"><em>type_extension</em></span></pre><p>
					Here, <span class="emphasis"><em>unit_name</em></span> stands for the name of the unit and <span class="emphasis"><em>type_extension</em></span> identifies the unit type, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Introduction-Units-Types" title="Table 10.1. Available systemd Unit Types">Table&nbsp;10.1, “Available systemd Unit Types”</a> for a complete list of unit types. For example, there usually is <code class="literal">sshd.service</code> as well as <code class="literal">sshd.socket</code> unit present on your system.
				</p><p>
					Unit files can be supplemented with a directory for additional configuration files. For example, to add custom configuration options to <code class="literal">sshd.service</code>, create the <code class="literal">sshd.service.d/custom.conf</code> file and insert additional directives there. For more information on configuration directories, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Modify" title="10.6.4. Modifying Existing Unit Files">Section&nbsp;10.6.4, “Modifying Existing Unit Files”</a>.
				</p><p>
					Also, the <code class="literal">sshd.service.wants/</code> and <code class="literal">sshd.service.requires/</code> directories can be created. These directories contain symbolic links to unit files that are dependencies of the <code class="literal">sshd</code> service. The symbolic links are automatically created either during installation according to [Install] unit file options (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Install_Sec_Options" title="Table 10.11. Important [Install] Section Options">Table&nbsp;10.11, “Important [Install] Section Options”</a>) or at runtime based on [Unit] options (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Unit_Sec_Options" title="Table 10.9. Important [Unit] Section Options">Table&nbsp;10.9, “Important [Unit] Section Options”</a>). It is also possible to create these directories and symbolic links manually.
				</p><p>
					Many unit file options can be set using the so called <span class="emphasis"><em>unit specifiers</em></span> – wildcard strings that are dynamically replaced with unit parameters when the unit file is loaded. This enables creation of generic unit files that serve as templates for generating instantiated units. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Instantiated_Units" title="10.6.5. Working with Instantiated Units">Section&nbsp;10.6.5, “Working with Instantiated Units”</a> for details.
				</p><section class="section" id="sect-Managing_Services_with_systemd-Unit_File_Structure"><div class="titlepage"><div><div><h3 class="title">10.6.1.&nbsp;Understanding the Unit File Structure</h3></div></div></div><p>
						Unit files typically consist of three sections:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								[Unit] — contains generic options that are not dependent on the type of the unit. These options provide unit description, specify the unit’s behavior, and set dependencies to other units. For a list of most frequently used [Unit] options, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Unit_Sec_Options" title="Table 10.9. Important [Unit] Section Options">Table&nbsp;10.9, “Important [Unit] Section Options”</a>.
							</li><li class="listitem">
								[<span class="emphasis"><em>unit type</em></span>] — if a unit has type-specific directives, these are grouped under a section named after the unit type. For example, service unit files contain the [Service] section, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Service_Sec_Options" title="Table 10.10. Important [Service] Section Options">Table&nbsp;10.10, “Important [Service] Section Options”</a> for most frequently used [Service] options.
							</li><li class="listitem">
								[Install] — contains information about unit installation used by <code class="literal command">systemctl enable</code> and <code class="literal command">disable</code> commands, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Install_Sec_Options" title="Table 10.11. Important [Install] Section Options">Table&nbsp;10.11, “Important [Install] Section Options”</a> for a list of [Install] options.
							</li></ul></div><div class="table" id="tabl-Managing_Services_with_systemd-Unit_Sec_Options"><p class="title"><strong>Table&nbsp;10.9.&nbsp;Important [Unit] Section Options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569373852832" scope="col">Option<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569373851904" class="footnote"><sup class="footnote" id="idm140569373851904">[a]</sup></a> section, see the <code class="literal">systemd.unit(5)</code> manual page.]</th><th align="left" valign="top" id="idm140569373850240" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569373852832"> <p>
										<code class="literal option">Description</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373850240"> <p>
										A meaningful description of the unit. This text is displayed for example in the output of the <code class="literal command">systemctl status</code> command.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373852832"> <p>
										<code class="literal option">Documentation</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373850240"> <p>
										Provides a list of URIs referencing documentation for the unit.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373852832"> <p>
										<code class="literal option">After</code><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569368914576" class="footnote"><sup class="footnote" id="idm140569368914576">[b]</sup></a>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373850240"> <p>
										Defines the order in which units are started. The unit starts only after the units specified in <code class="literal option">After</code> are active. Unlike <code class="literal option">Requires</code>, <code class="literal option">After</code> does not explicitly activate the specified units. The <code class="literal option">Before</code> option has the opposite functionality to <code class="literal option">After</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373852832"> <p>
										<code class="literal option">Requires</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373850240"> <p>
										Configures dependencies on other units. The units listed in <code class="literal option">Requires</code> are activated together with the unit. If any of the required units fail to start, the unit is not activated.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373852832"> <p>
										<code class="literal option">Wants</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373850240"> <p>
										Configures weaker dependencies than <code class="literal option">Requires</code>. If any of the listed units does not start successfully, it has no impact on the unit activation. This is the recommended way to establish custom unit dependencies.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373852832"> <p>
										<code class="literal option">Conflicts</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373850240"> <p>
										Configures negative dependencies, an opposite to <code class="literal option">Requires</code>.
									</p>
									 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140569373851904" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569373851904" class="simpara"><sup class="simpara">[a] </sup></a>
										For a complete list of options configurable in the [Unit
									</div></div><div id="ftn.idm140569368914576" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569368914576" class="simpara"><sup class="simpara">[b] </sup></a>
											In most cases, it is sufficient to set only the ordering dependencies with <code class="literal option">After</code> and <code class="literal option">Before</code> unit file options. If you also set a requirement dependency with <code class="literal option">Wants</code> (recommended) or <code class="literal option">Requires</code>, the ordering dependency still needs to be specified. That is because ordering and requirement dependencies work independently from each other.
										</div></div></td></tr></tbody></table></div></div><div class="table" id="tabl-Managing_Services_with_systemd-Service_Sec_Options"><p class="title"><strong>Table&nbsp;10.10.&nbsp;Important [Service] Section Options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569373207504" scope="col">Option<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569373206576" class="footnote"><sup class="footnote" id="idm140569373206576">[a]</sup></a> section, see the <code class="literal">systemd.service(5)</code> manual page.]</th><th align="left" valign="top" id="idm140569373204912" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569373207504"> <p>
										<code class="literal option">Type</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373204912"> <p>
										Configures the unit process startup type that affects the functionality of <code class="literal option">ExecStart</code> and related options. One of:
									</p>
									 <p>
										* <code class="literal option">simple</code> – The default value. The process started with <code class="literal option">ExecStart</code> is the main process of the service.
									</p>
									 <p>
										* <code class="literal option">forking</code> – The process started with <code class="literal option">ExecStart</code> spawns a child process that becomes the main process of the service. The parent process exits when the startup is complete.
									</p>
									 <p>
										* <code class="literal option">oneshot</code> – This type is similar to <code class="literal option">simple</code>, but the process exits before starting consequent units.
									</p>
									 <p>
										* <code class="literal option">dbus</code> – This type is similar to <code class="literal option">simple</code>, but consequent units are started only after the main process gains a D-Bus name.
									</p>
									 <p>
										* <code class="literal option">notify</code> – This type is similar to <code class="literal option">simple</code>, but consequent units are started only after a notification message is sent via the sd_notify() function.
									</p>
									 <p>
										* <code class="literal option">idle</code> – similar to <code class="literal option">simple</code>, the actual execution of the service binary is delayed until all jobs are finished, which avoids mixing the status output with shell output of services.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373207504"> <p>
										<code class="literal option">ExecStart</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373204912"> <p>
										Specifies commands or scripts to be executed when the unit is started. <code class="literal option">ExecStartPre</code> and <code class="literal option">ExecStartPost</code> specify custom commands to be executed before and after <code class="literal option">ExecStart</code>. <code class="literal option">Type=oneshot</code> enables specifying multiple custom commands that are then executed sequentially.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373207504"> <p>
										<code class="literal option">ExecStop</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373204912"> <p>
										Specifies commands or scripts to be executed when the unit is stopped.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373207504"> <p>
										<code class="literal option">ExecReload</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373204912"> <p>
										Specifies commands or scripts to be executed when the unit is reloaded.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373207504"> <p>
										<code class="literal option">Restart</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373204912"> <p>
										With this option enabled, the service is restarted after its process exits, with the exception of a clean stop by the <code class="literal command">systemctl</code> command.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569373207504"> <p>
										<code class="literal option">RemainAfterExit</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569373204912"> <p>
										If set to True, the service is considered active even when all its processes exited. Default value is False. This option is especially useful if <code class="literal option">Type=oneshot</code> is configured.
									</p>
									 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140569373206576" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569373206576" class="simpara"><sup class="simpara">[a] </sup></a>
										For a complete list of options configurable in the [Service
									</div></div></td></tr></tbody></table></div></div><div class="table" id="tabl-Managing_Services_with_systemd-Install_Sec_Options"><p class="title"><strong>Table&nbsp;10.11.&nbsp;Important [Install] Section Options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569370441792" scope="col">Option<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569370440864" class="footnote"><sup class="footnote" id="idm140569370440864">[a]</sup></a> section, see the <code class="literal">systemd.unit(5)</code> manual page.]</th><th align="left" valign="top" id="idm140569370163376" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569370441792"> <p>
										<code class="literal option">Alias</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370163376"> <p>
										Provides a space-separated list of additional names for the unit. Most <code class="literal command">systemctl</code> commands, excluding <code class="literal command">systemctl enable</code>, can use aliases instead of the actual unit name.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569370441792"> <p>
										<code class="literal option">RequiredBy</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370163376"> <p>
										A list of units that depend on the unit. When this unit is enabled, the units listed in <code class="literal option">RequiredBy</code> gain a <code class="literal option">Require</code> dependency on the unit.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569370441792"> <p>
										<code class="literal option">WantedBy</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370163376"> <p>
										A list of units that weakly depend on the unit. When this unit is enabled, the units listed in <code class="literal option">WantedBy</code> gain a <code class="literal option">Want</code> dependency on the unit.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569370441792"> <p>
										<code class="literal option">Also</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370163376"> <p>
										Specifies a list of units to be installed or uninstalled along with the unit.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569370441792"> <p>
										<code class="literal option">DefaultInstance</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569370163376"> <p>
										Limited to instantiated units, this option specifies the default instance for which the unit is enabled. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Instantiated_Units" title="10.6.5. Working with Instantiated Units">Section&nbsp;10.6.5, “Working with Instantiated Units”</a>
									</p>
									 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140569370440864" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569370440864" class="simpara"><sup class="simpara">[a] </sup></a>
										For a complete list of options configurable in the [Install
									</div></div></td></tr></tbody></table></div></div><p>
						A whole range of options that can be used to fine tune the unit configuration, <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-Managing_Services_with_systemd-postfix_unit_file" title="Example 10.17. postfix.service Unit File">Example&nbsp;10.17, “postfix.service Unit File”</a> shows an example of a service unit installed on the system. Moreover, unit file options can be defined in a way that enables dynamic creation of units as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Instantiated_Units" title="10.6.5. Working with Instantiated Units">Section&nbsp;10.6.5, “Working with Instantiated Units”</a>.
					</p><div class="example" id="exam-Managing_Services_with_systemd-postfix_unit_file"><p class="title"><strong>Example&nbsp;10.17.&nbsp;postfix.service Unit File</strong></p><div class="example-contents"><p>
							What follows is the content of the <code class="literal">/usr/lib/systemd/system/postfix.service</code> unit file as currently provided by the <span class="strong strong"><strong><span class="package package">postfix</span></strong></span> package:
						</p><pre class="literallayout">[Unit]
Description=Postfix Mail Transport Agent
After=syslog.target network.target
Conflicts=sendmail.service exim.service

[Service]
Type=forking
PIDFile=/var/spool/postfix/pid/master.pid
EnvironmentFile=-/etc/sysconfig/network
ExecStartPre=-/usr/libexec/postfix/aliasesdb
ExecStartPre=-/usr/libexec/postfix/chroot-update
ExecStart=/usr/sbin/postfix start
ExecReload=/usr/sbin/postfix reload
ExecStop=/usr/sbin/postfix stop

[Install]
WantedBy=multi-user.target</pre><p>
							The [Unit] section describes the service, specifies the ordering dependencies, as well as conflicting units. In [Service], a sequence of custom scripts is specified to be executed during unit activation, on stop, and on reload. <code class="literal option">EnvironmentFile</code> points to the location where environment variables for the service are defined, <code class="literal option">PIDFile</code> specifies a stable PID for the main process of the service. Finally, the [Install] section lists units that depend on the service.
						</p></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Unit_File_Create"><div class="titlepage"><div><div><h3 class="title">10.6.2.&nbsp;Creating Custom Unit Files</h3></div></div></div><p>
						There are several use cases for creating unit files from scratch: you could run a custom daemon, create a second instance of some existing service (as in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-Managing_Services_with_systemd-Multiple_sshd" title="Example 10.19. Creating a second instance of the sshd service">Example&nbsp;10.19, “Creating a second instance of the sshd service”</a>), or import a SysV init script (more in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Convert" title="10.6.3. Converting SysV Init Scripts to Unit Files">Section&nbsp;10.6.3, “Converting SysV Init Scripts to Unit Files”</a>). On the other hand, if you intend just to modify or extend the behavior of an existing unit, use the instructions from <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Modify" title="10.6.4. Modifying Existing Unit Files">Section&nbsp;10.6.4, “Modifying Existing Unit Files”</a>. The following procedure describes the general process of creating a custom service:
					</p><div class="orderedlist" id="proc-Managing_Services_with_systemd-Unit_File_Create"><ol class="orderedlist" type="1"><li class="listitem">
								Prepare the executable file with the custom service. This can be a custom-created script, or an executable delivered by a software provider. If required, prepare a PID file to hold a constant PID for the main process of the custom service. It is also possible to include environment files to store shell variables for the service. Make sure the source script is executable (by executing the <code class="literal command">chmod a+x</code>) and is not interactive.
							</li><li class="listitem"><p class="simpara">
								Create a unit file in the <code class="literal">/etc/systemd/system/</code> directory and make sure it has correct file permissions. Execute as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">touch /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code>
<code class="literal command">chmod 664 /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code></pre><p class="simpara">
								Replace <span class="emphasis"><em>name</em></span> with a name of the service to be created. Note that file does not need to be executable.
							</p></li><li class="listitem"><p class="simpara">
								Open the <code class="literal"><span class="emphasis"><em>name</em></span>.service</code> file created in the previous step, and add the service configuration options. There is a variety of options that can be used depending on the type of service you wish to create, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Structure" title="10.6.1. Understanding the Unit File Structure">Section&nbsp;10.6.1, “Understanding the Unit File Structure”</a>. The following is an example unit configuration for a network-related service:
							</p><pre class="literallayout">[Unit]
Description=<span class="emphasis"><em>service_description</em></span>
After=network.target

[Service]
ExecStart=<span class="emphasis"><em>path_to_executable</em></span>
Type=forking
PIDFile=<span class="emphasis"><em>path_to_pidfile</em></span>

[Install]
WantedBy=default.target</pre><p class="simpara">
								Where:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="emphasis"><em>service_description</em></span> is an informative description that is displayed in journal log files and in the output of the <code class="literal command">systemctl status</code> command.
									</li><li class="listitem">
										the <code class="literal option">After</code> setting ensures that the service is started only after the network is running. Add a space-separated list of other relevant services or targets.
									</li><li class="listitem">
										<span class="emphasis"><em>path_to_executable</em></span> stands for the path to the actual service executable.
									</li><li class="listitem">
										<code class="literal option">Type=forking</code> is used for daemons that make the fork system call. The main process of the service is created with the PID specified in <span class="emphasis"><em>path_to_pidfile</em></span>. Find other startup types in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Service_Sec_Options" title="Table 10.10. Important [Service] Section Options">Table&nbsp;10.10, “Important [Service] Section Options”</a>.
									</li><li class="listitem">
										<code class="literal option">WantedBy</code> states the target or targets that the service should be started under. Think of these targets as of a replacement of the older concept of runlevels, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets" title="10.3. Working with systemd Targets">Section&nbsp;10.3, “Working with systemd Targets”</a> for details.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Notify systemd that a new <code class="literal"><span class="emphasis"><em>name</em></span>.service</code> file exists by executing the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">systemctl daemon-reload</code>
<code class="literal command">systemctl start <span class="emphasis"><em>name</em></span>.service</code></pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									Always run the <code class="literal command">systemctl daemon-reload</code> command after creating new unit files or modifying existing unit files. Otherwise, the <code class="literal command">systemctl start</code> or <code class="literal command">systemctl enable</code> commands could fail due to a mismatch between states of systemd and actual service unit files on disk.
								</p></div></div><p class="simpara">
								The <span class="emphasis"><em>name</em></span>.service unit can now be managed as any other system service with commands described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services" title="10.2. Managing System Services">Section&nbsp;10.2, “Managing System Services”</a>.
							</p></li></ol></div><div class="example" id="exam-Managing_Services_with_systemd-Emacs_Service"><p class="title"><strong>Example&nbsp;10.18.&nbsp;Creating the emacs.service File</strong></p><div class="example-contents"><p>
							When using the <span class="strong strong"><strong><span class="application application">Emacs</span></strong></span> text editor, it is often faster and more convenient to have it running in the background instead of starting a new instance of the program whenever editing a file. The following steps show how to create a unit file for Emacs, so that it can be handled like a service.
						</p><div class="orderedlist" id="proc-Managing_Services_with_systemd-Emacs_Service"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a unit file in the <code class="literal">/etc/systemd/system/</code> directory and make sure it has the correct file permissions. Execute as <code class="literal">root</code>:
								</p><pre class="literallayout">~]# touch /etc/systemd/system/emacs.service
~]# chmod 664 /etc/systemd/system/emacs.service</pre></li><li class="listitem"><p class="simpara">
									Add the following content to the file:
								</p><pre class="literallayout">[Unit]
Description=Emacs: the extensible, self-documenting text editor

[Service]
Type=forking
ExecStart=/usr/bin/emacs --daemon
ExecStop=/usr/bin/emacsclient --eval "(kill-emacs)"
Environment=SSH_AUTH_SOCK=%t/keyring/ssh
Restart=always

[Install]
WantedBy=default.target</pre><p class="simpara">
									With the above configuration, the <code class="literal">/usr/bin/emacs</code> executable is started in daemon mode on service start. The SSH_AUTH_SOCK environment variable is set using the "%t" unit specifier that stands for the runtime directory. The service also restarts the emacs process if it exits unexpectedly.
								</p></li><li class="listitem"><p class="simpara">
									Execute the following commands to reload the configuration and start the custom service:
								</p><pre class="literallayout">~]# systemctl daemon-reload
~]# systemctl start emacs.service</pre></li></ol></div><p>
							As the editor is now registered as a systemd service, you can use all standard <code class="literal command">systemctl</code> commands. For example, run <code class="literal command">systemctl status emacs</code> to display the editor’s status or <code class="literal command">systemctl enable emacs</code> to make the editor start automatically on system boot.
						</p></div></div><div class="example" id="ex-Managing_Services_with_systemd-Multiple_sshd"><p class="title"><strong>Example&nbsp;10.19.&nbsp;Creating a second instance of the sshd service</strong></p><div class="example-contents"><p>
							System Administrators often need to configure and run multiple instances of a service. This is done by creating copies of the original service configuration files and modifying certain parameters to avoid conflicts with the primary instance of the service. The following procedure shows how to create a second instance of the <code class="literal">sshd</code> service:
						</p><div class="orderedlist" id="proc-Managing_Services_with_systemd-Multiple_sshd"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a copy of the <code class="literal">sshd_config</code> file that will be used by the second daemon:
								</p><pre class="literallayout">~]# cp /etc/ssh/sshd{,-second}_config</pre></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal">sshd-second_config</code> file created in the previous step to assign a different port number and PID file to the second daemon:
								</p><pre class="literallayout">Port 22220
PidFile /var/run/sshd-second.pid</pre><p class="simpara">
									See the <code class="literal">sshd_config</code>(5) manual page for more information on <code class="literal option">Port</code> and <code class="literal option">PidFile</code> options. Make sure the port you choose is not in use by any other service. The PID file does not have to exist before running the service, it is generated automatically on service start.
								</p></li><li class="listitem"><p class="simpara">
									Create a copy of the systemd unit file for the <code class="literal">sshd</code> service:
								</p><pre class="literallayout">~]# cp /usr/lib/systemd/system/sshd.service /etc/systemd/system/sshd-second.service</pre></li><li class="listitem"><p class="simpara">
									Alter the <code class="literal">sshd-second.service</code> created in the previous step as follows:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											Modify the <code class="literal option">Description</code> option:
										</p><pre class="literallayout">Description=OpenSSH server second instance daemon</pre></li><li class="listitem"><p class="simpara">
											Add sshd.service to services specified in the <code class="literal option">After</code> option, so that the second instance starts only after the first one has already started:
										</p><pre class="literallayout">After=syslog.target network.target auditd.service sshd.service</pre></li><li class="listitem">
											The first instance of sshd includes key generation, therefore remove the <span class="emphasis"><em>ExecStartPre=/usr/sbin/sshd-keygen</em></span> line.
										</li><li class="listitem"><p class="simpara">
											Add the <code class="literal option">-f /etc/ssh/sshd-second_config</code> parameter to the <code class="literal command">sshd</code> command, so that the alternative configuration file is used:
										</p><pre class="literallayout">ExecStart=/usr/sbin/sshd -D -f /etc/ssh/sshd-second_config $OPTIONS</pre></li><li class="listitem"><p class="simpara">
											After the above modifications, the sshd-second.service should look as follows:
										</p><pre class="literallayout">[Unit]
Description=OpenSSH server second instance daemon
After=syslog.target network.target auditd.service sshd.service

[Service]
EnvironmentFile=/etc/sysconfig/sshd
ExecStart=/usr/sbin/sshd -D -f /etc/ssh/sshd-second_config $OPTIONS
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
Restart=on-failure
RestartSec=42s

[Install]
WantedBy=multi-user.target</pre></li></ol></div></li><li class="listitem"><p class="simpara">
									If using SELinux, add the port for the second instance of sshd to SSH ports, otherwise the second instance of sshd will be rejected to bind to the port:
								</p><pre class="literallayout">~]# semanage port -a -t ssh_port_t -p tcp 22220</pre></li><li class="listitem"><p class="simpara">
									Enable sshd-second.service, so that it starts automatically upon boot:
								</p><pre class="literallayout">~]# systemctl enable sshd-second.service</pre><p class="simpara">
									Verify if the sshd-second.service is running by using the <code class="literal command">systemctl status</code> command. Also, verify if the port is enabled correctly by connecting to the service:
								</p><pre class="literallayout">~]$ <code class="literal command">ssh -p 22220 user@server</code></pre><p class="simpara">
									If the firewall is in use, make sure that it is configured appropriately in order to allow connections to the second instance of sshd.
								</p></li></ol></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">To learn how to properly choose a target for ordering and dependencies of your custom unit files, see the following articles</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<a class="link" href="https://access.redhat.com/solutions/3120581">How to write a service unit file which enforces that particular services have to be started</a>
										</li><li class="listitem">
											<a class="link" href="https://access.redhat.com/solutions/3116611">How to decide what dependencies a systemd service unit definition should have</a>
										</li></ul></div></dd></dl></div><p>
						Additional information with some real-world examples of cases triggered by the ordering and dependencies in a unit file is available in the following article: <a class="link" href="https://access.redhat.com/solutions/3120801">Is there any useful information about writing unit files?</a>
					</p><p>
						If you want to set limits for services started by <code class="literal">systemd</code>, see the Red Hat Knowledgebase article<a class="link" href="https://access.redhat.com/solutions/1257953"> How to set limits for services in RHEL 7 and systemd</a>. These limits need to be set in the service’s unit file. Note that <code class="literal">systemd</code> ignores limits set in the <code class="literal">/etc/security/limits.conf</code> and <code class="literal">/etc/security/limits.d/*.conf</code> configuration files. The limits defined in these files are set by PAM when starting a login session, but daemons started by <code class="literal">systemd</code> do not use PAM login sessions.
					</p></section><section class="section" id="sect-Managing_Services_with_systemd-Unit_File_Convert"><div class="titlepage"><div><div><h3 class="title">10.6.3.&nbsp;Converting SysV Init Scripts to Unit Files</h3></div></div></div><p>
						Before taking time to convert a SysV init script to a unit file, make sure that the conversion was not already done elsewhere. All core services installed on Red Hat Enterprise Linux 7 come with default unit files, and the same applies for many third-party software packages.
					</p><p>
						Converting an init script to a unit file requires analyzing the script and extracting the necessary information from it. Based on this data you can create a unit file as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Create" title="10.6.2. Creating Custom Unit Files">Section&nbsp;10.6.2, “Creating Custom Unit Files”</a>. As init scripts can vary greatly depending on the type of the service, you might need to employ more configuration options for translation than outlined in this chapter. Note that some levels of customization that were available with init scripts are no longer supported by systemd units, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Compatibility_Changes" title="10.1.2. Compatibility Changes">Section&nbsp;10.1.2, “Compatibility Changes”</a>.
					</p><p>
						The majority of information needed for conversion is provided in the script’s header. The following example shows the opening section of the init script used to start the <code class="literal">postfix</code> service on Red Hat Enterprise Linux 6:
					</p><pre class="literallayout"><span class="marked marked">!/bin/bash # # postfix Postfix Mail Transfer Agent # # chkconfig: 2345 80 30 # description: Postfix is a Mail Transport Agent, which is the program \ # that moves mail from one machine to another. # processname: master # pidfile: /var/spool/postfix/pid/master.pid # config: /etc/postfix/main.cf # config: /etc/postfix/master.cf <span class="marked marked"><!--Empty--></span> BEGIN INIT INFO # Provides: postfix MTA # Required-Start: $local_fs $network $remote_fs # Required-Stop: $local_fs $network $remote_fs # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: start and stop postfix # Description: Postfix is a Mail Transport Agent, which is the program that # moves mail from one machine to another. </span># END INIT INFO</pre><p>
						In the above example, only lines starting with <span class="emphasis"><em># chkconfig</em></span> and <span class="emphasis"><em># description</em></span> are mandatory, so you might not find the rest in different init files. The text enclosed between the <span class="emphasis"><em><span class="marked marked"># BEGIN INIT INFO</span> and <span class="emphasis"><em><!--Empty--></em></span># END INIT INFO</em></span> lines is called <span class="emphasis"><em>Linux Standard Base (LSB) header</em></span>. If specified, LSB headers contain directives defining the service description, dependencies, and default runlevels. What follows is an overview of analytic tasks aiming to collect the data needed for a new unit file. The postfix init script is used as an example, see the resulting postfix unit file in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-Managing_Services_with_systemd-postfix_unit_file" title="Example 10.17. postfix.service Unit File">Example&nbsp;10.17, “postfix.service Unit File”</a>.
					</p><h5 id="brid-Managing_Services_with_systemd-Init_Desc">Finding the Service Description</h5><p>
						Find descriptive information about the script on the line starting with <span class="emphasis"><em>#description</em></span>. Use this description together with the service name in the <code class="literal option">Description</code> option in the [Unit] section of the unit file. The LSB header might contain similar data on the <span class="emphasis"><em>#Short-Description</em></span> and <span class="emphasis"><em>#Description</em></span> lines.
					</p><h5 id="brid-Managing_Services_with_systemd-Init_Deps">Finding Service Dependencies</h5><p>
						The LSB header might contain several directives that form dependencies between services. Most of them are translatable to systemd unit options, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Init_Deps" title="Table 10.12. Dependency Options from the LSB Header">Table&nbsp;10.12, “Dependency Options from the LSB Header”</a>
					</p><div class="table" id="tabl-Managing_Services_with_systemd-Init_Deps"><p class="title"><strong>Table&nbsp;10.12.&nbsp;Dependency Options from the LSB Header</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569378550464" scope="col">LSB Option</th><th align="left" valign="top" id="idm140569378549376" scope="col">Description</th><th align="left" valign="top" id="idm140569378548288" scope="col">Unit File Equivalent</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569378550464"> <p>
										<code class="literal option">Provides</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378549376"> <p>
										Specifies the boot facility name of the service, that can be referenced in other init scripts (with the "$" prefix). This is no longer needed as unit files refer to other units by their file names.
									</p>
									 </td><td align="left" valign="top" headers="idm140569378548288"> <p>
										–
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378550464"> <p>
										<code class="literal option">Required-Start</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378549376"> <p>
										Contains boot facility names of required services. This is translated as an ordering dependency, boot facility names are replaced with unit file names of corresponding services or targets they belong to. For example, in case of <code class="literal">postfix</code>, the Required-Start dependency on $network was translated to the After dependency on network.target.
									</p>
									 </td><td align="left" valign="top" headers="idm140569378548288"> <p>
										<code class="literal option">After</code>, <code class="literal option">Before</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378550464"> <p>
										<code class="literal option">Should-Start</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378549376"> <p>
										Constitutes weaker dependencies than Required-Start. Failed Should-Start dependencies do not affect the service startup.
									</p>
									 </td><td align="left" valign="top" headers="idm140569378548288"> <p>
										<code class="literal option">After</code>, <code class="literal option">Before</code>
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378550464"> <p>
										<code class="literal option">Required-Stop</code>, <code class="literal option">Should-Stop</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378549376"> <p>
										Constitute negative dependencies.
									</p>
									 </td><td align="left" valign="top" headers="idm140569378548288"> <p>
										<code class="literal option">Conflicts</code>
									</p>
									 </td></tr></tbody></table></div></div><h5 id="brid-Managing_Services_with_systemd-Init_Targs">Finding Default Targets of the Service</h5><p>
						The line starting with <span class="emphasis"><em>#chkconfig</em></span> contains three numerical values. The most important is the first number that represents the default runlevels in which the service is started. Use <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Targets-Runlevels" title="Table 10.6. Comparison of SysV Runlevels with systemd Targets">Table&nbsp;10.6, “Comparison of SysV Runlevels with systemd Targets”</a> to map these runlevels to equivalent systemd targets. Then list these targets in the <code class="literal option">WantedBy</code> option in the [Install] section of the unit file. For example, <code class="literal">postfix</code> was previously started in runlevels 2, 3, 4, and 5, which translates to multi-user.target and graphical.target on Red Hat Enterprise Linux 7. Note that the graphical.target depends on multiuser.target, therefore it is not necessary to specify both, as in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-Managing_Services_with_systemd-postfix_unit_file" title="Example 10.17. postfix.service Unit File">Example&nbsp;10.17, “postfix.service Unit File”</a>. You might find information on default and forbidden runlevels also at <span class="emphasis"><em>#Default-Start</em></span> and <span class="emphasis"><em>#Default-Stop</em></span> lines in the LSB header.
					</p><p>
						The other two values specified on the #chkconfig line represent startup and shutdown priorities of the init script. These values are interpreted by systemd if it loads the init script, but there is no unit file equivalent.
					</p><h5 id="brid-Managing_Services_with_systemd-Init_Runlevels">Finding Files Used by the Service</h5><p>
						Init scripts require loading a function library from a dedicated directory and allow importing configuration, environment, and PID files. Environment variables are specified on the line starting with <span class="emphasis"><em>#config</em></span> in the init script header, which translates to the <code class="literal option">EnvironmentFile</code> unit file option. The PID file specified on the <span class="emphasis"><em>#pidfile</em></span> init script line is imported to the unit file with the <code class="literal option">PIDFile</code> option.
					</p><p>
						The key information that is not included in the init script header is the path to the service executable, and potentially some other files required by the service. In previous versions of Red Hat Enterprise Linux, init scripts used a Bash case statement to define the behavior of the service on default actions, such as <span class="emphasis"><em>start</em></span>, <span class="emphasis"><em>stop</em></span>, or <span class="emphasis"><em>restart</em></span>, as well as custom-defined actions. The following excerpt from the <code class="literal">postfix</code> init script shows the block of code to be executed at service start.
					</p><pre class="literallayout">conf_check() {
  [ -x /usr/sbin/postfix ] || exit 5
  [ -d /etc/postfix ] || exit 6
  [ -d /var/spool/postfix ] || exit 5
}

make_aliasesdb() {
	if [ "$(/usr/sbin/postconf -h alias_database)" == "hash:/etc/aliases" ]
	then
		# /etc/aliases.db might be used by other MTA, make sure nothing
		# has touched it since our last newaliases call
		[ /etc/aliases -nt /etc/aliases.db ] ||
			[ "$ALIASESDB_STAMP" -nt /etc/aliases.db ] ||
			[ "$ALIASESDB_STAMP" -ot /etc/aliases.db ] || return
		/usr/bin/newaliases
		touch -r /etc/aliases.db "$ALIASESDB_STAMP"
	else
		/usr/bin/newaliases
	fi
}

start() {
	[ "$EUID" != "0" ] &amp;&amp; exit 4
	# Check that networking is up.
	[ ${NETWORKING} = "no" ] &amp;&amp; exit 1
	conf_check
	# Start daemons.
	echo -n $"Starting postfix: "
	make_aliasesdb &gt;/dev/null 2&gt;&amp;1
	[ -x $CHROOT_UPDATE ] &amp;&amp; $CHROOT_UPDATE
	/usr/sbin/postfix start 2&gt;/dev/null 1&gt;&amp;2 &amp;&amp; success || failure $"$prog start"
	RETVAL=$?
	[ $RETVAL -eq 0 ] &amp;&amp; touch $lockfile
    echo
	return $RETVAL
}</pre><p>
						The extensibility of the init script allowed specifying two custom functions, <code class="literal">conf_check()</code> and <code class="literal">make_aliasesdb()</code>, that are called from the <code class="literal">start()</code> function block. On closer look, several external files and directories are mentioned in the above code: the main service executable <code class="literal">/usr/sbin/postfix</code>, the <code class="literal">/etc/postfix/</code> and <code class="literal">/var/spool/postfix/</code> configuration directories, as well as the <code class="literal">/usr/sbin/postconf/</code> directory.
					</p><p>
						Systemd supports only the predefined actions, but enables executing custom executables with <code class="literal option">ExecStart</code>, <code class="literal option">ExecStartPre</code>, <code class="literal option">ExecStartPost</code>, <code class="literal option">ExecStop</code>, and <code class="literal option">ExecReload</code> options. In case of <code class="literal">postfix</code> on Red Hat Enterprise Linux 7, the <code class="literal">/usr/sbin/postfix</code> together with supporting scripts are executed on service start. Consult the <code class="literal">postfix</code> unit file at <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-Managing_Services_with_systemd-postfix_unit_file" title="Example 10.17. postfix.service Unit File">Example&nbsp;10.17, “postfix.service Unit File”</a>.
					</p><p>
						Converting complex init scripts requires understanding the purpose of every statement in the script. Some of the statements are specific to the operating system version, therefore you do not need to translate them. On the other hand, some adjustments might be needed in the new environment, both in unit file as well as in the service executable and supporting files.
					</p></section><section class="section" id="sect-Managing_Services_with_systemd-Unit_File_Modify"><div class="titlepage"><div><div><h3 class="title">10.6.4.&nbsp;Modifying Existing Unit Files</h3></div></div></div><p>
						Services installed on the system come with default unit files that are stored in the <code class="literal">/usr/lib/systemd/system/</code> directory. System Administrators should not modify these files directly, therefore any customization must be confined to configuration files in the <code class="literal">/etc/systemd/system/</code> directory. Depending on the extent of the required changes, pick one of the following approaches:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Create a directory for supplementary configuration files at <code class="literal">/etc/systemd/system/<span class="emphasis"><em>unit</em></span>.d/</code>. This method is recommended for most use cases. It enables extending the default configuration with additional functionality, while still referring to the original unit file. Changes to the default unit introduced with a package upgrade are therefore applied automatically. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Managing_Services_with_systemd-Extending_Unit_Config" title="Extending the Default Unit Configuration">the section called “Extending the Default Unit Configuration”</a> for more information.
							</li><li class="listitem">
								Create a copy of the original unit file <code class="literal">/usr/lib/systemd/system/</code> in <code class="literal">/etc/systemd/system/</code> and make changes there. The copy overrides the original file, therefore changes introduced with the package update are not applied. This method is useful for making significant unit changes that should persist regardless of package updates. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Managing_Services_with_systemd-Overriding_Unit_Mod" title="Overriding the Default Unit Configuration">the section called “Overriding the Default Unit Configuration”</a> for details.
							</li></ul></div><p>
						In order to return to the default configuration of the unit, just delete custom-created configuration files in <code class="literal">/etc/systemd/system/</code>. To apply changes to unit files without rebooting the system, execute:
					</p><pre class="literallayout"><code class="literal command">systemctl daemon-reload</code></pre><p>
						The <code class="literal option">daemon-reload</code> option reloads all unit files and recreates the entire dependency tree, which is needed to immediately apply any change to a unit file. As an alternative, you can achieve the same result with the following command:
					</p><pre class="literallayout"><code class="literal command">init q</code></pre><p>
						Also, if the modified unit file belongs to a running service, this service must be restarted to accept new settings:
					</p><pre class="literallayout"><code class="literal command">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							To modify properties, such as dependencies or timeouts, of a service that is handled by a SysV initscript, do not modify the initscript itself. Instead, create a <code class="literal">systemd</code> drop-in configuration file for the service as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Managing_Services_with_systemd-Extending_Unit_Config" title="Extending the Default Unit Configuration">the section called “Extending the Default Unit Configuration”</a> and <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Managing_Services_with_systemd-Overriding_Unit_Mod" title="Overriding the Default Unit Configuration">the section called “Overriding the Default Unit Configuration”</a>. Then manage this service in the same way as a normal <code class="literal">systemd</code> service.
						</p><p>
							For example, to extend the configuration of the <code class="literal">network</code> service, do not modify the <code class="literal">/etc/rc.d/init.d/network</code> initscript file. Instead, create new directory <code class="literal">/etc/systemd/system/network.service.d/</code> and a <code class="literal">systemd</code> drop-in file <code class="literal">/etc/systemd/system/network.service.d/<span class="emphasis"><em>my_config</em></span>.conf</code>. Then, put the modified values into the drop-in file. Note: <code class="literal">systemd</code> knows the <code class="literal">network</code> service as <code class="literal">network.service</code>, which is why the created directory must be called <code class="literal">network.service.d</code>
						</p></div></div><h5 id="brid-Managing_Services_with_systemd-Extending_Unit_Config">Extending the Default Unit Configuration</h5><p>
						To extend the default unit file with additional configuration options, first create a configuration directory in <code class="literal">/etc/systemd/system/</code>. If extending a service unit, execute the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">mkdir /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service.d/</code></pre><p>
						Replace <span class="emphasis"><em>name</em></span> with the name of the service you want to extend. The above syntax applies to all unit types.
					</p><p>
						Create a configuration file in the directory made in the previous step. Note that the file name must end with the <span class="emphasis"><em>.conf</em></span> suffix. Type:
					</p><pre class="literallayout">touch /etc/systemd/system/name.service.d/config_name.conf</pre><p>
						Replace <span class="emphasis"><em>config_name</em></span> with the name of the configuration file. This file adheres to the normal unit file structure, therefore all directives must be specified under appropriate sections, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_File_Structure" title="10.6.1. Understanding the Unit File Structure">Section&nbsp;10.6.1, “Understanding the Unit File Structure”</a>.
					</p><p>
						For example, to add a custom dependency, create a configuration file with the following content:
					</p><pre class="literallayout">[Unit]
Requires=<span class="emphasis"><em>new_dependency</em></span>
After=<span class="emphasis"><em>new_dependency</em></span></pre><p>
						Where <span class="emphasis"><em>new_dependency</em></span> stands for the unit to be marked as a dependency. Another example is a configuration file that restarts the service after its main process exited, with a delay of 30 seconds:
					</p><pre class="literallayout">[Service]
Restart=always
RestartSec=30</pre><p>
						It is recommended to create small configuration files focused only on one task. Such files can be easily moved or linked to configuration directories of other services.
					</p><p>
						To apply changes made to the unit, execute as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl daemon-reload</code>
<code class="literal command">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><div class="example" id="exam-Managing_Services_with_systemd-Extending_Unit_Config"><p class="title"><strong>Example&nbsp;10.20.&nbsp;Extending the httpd.service Configuration</strong></p><div class="example-contents"><p>
							To modify the httpd.service unit so that a custom shell script is automatically executed when starting the Apache service, perform the following steps. First, create a directory and a custom configuration file:
						</p><pre class="literallayout">~]# mkdir /etc/systemd/system/httpd.service.d/
~]# touch /etc/systemd/system/httpd.service.d/custom_script.conf</pre><p>
							Provided that the script you want to start automatically with Apache is located at <code class="literal">/usr/local/bin/custom.sh</code>, insert the following text to the <code class="literal">custom_script.conf</code> file:
						</p><pre class="literallayout">[Service]
ExecStartPost=/usr/local/bin/custom.sh</pre><p>
							To apply the unit changes, execute:
						</p><pre class="literallayout">~]# systemctl daemon-reload
~]# systemctl restart httpd.service</pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The configuration files from configuration directories in <code class="literal">/etc/systemd/system/</code> take precedence over unit files in <code class="literal">/usr/lib/systemd/system/</code>. Therefore, if the configuration files contain an option that can be specified only once, such as <code class="literal option">Description</code> or <code class="literal option">ExecStart</code>, the default value of this option is overridden. Note that in the output of the <code class="literal command">systemd-delta</code> command, described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Managing_Services_with_systemd-Monitoring_Overrides" title="Monitoring Overriden Units">the section called “Monitoring Overriden Units”</a>, such units are always marked as [EXTENDED], even though in sum, certain options are actually overridden.
						</p></div></div><h5 id="brid-Managing_Services_with_systemd-Overriding_Unit_Mod">Overriding the Default Unit Configuration</h5><p>
						To make changes that will persist after updating the package that provides the unit file, first copy the file to the <code class="literal">/etc/systemd/system/</code> directory. To do so, execute the following command as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">cp /usr/lib/systemd/system/<span class="emphasis"><em>name</em></span>.service /etc/systemd/system/<span class="emphasis"><em>name</em></span>.service</code></pre><p>
						Where <span class="emphasis"><em>name</em></span> stands for the name of the service unit you wish to modify. The above syntax applies to all unit types.
					</p><p>
						Open the copied file with a text editor, and make the desired changes. To apply the unit changes, execute as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl daemon-reload</code>
<code class="literal command">systemctl restart <span class="emphasis"><em>name</em></span>.service</code></pre><div class="example" id="Overriding_Unit_Mod-Change-timout-limit"><p class="title"><strong>Example&nbsp;10.21.&nbsp;Changing the timeout limit</strong></p><div class="example-contents"><p>
							You can specify a timeout value per service to prevent a malfunctioning service from freezing the system. Otherwise, timeout is set by default to 90 seconds for normal services and to 300 seconds for SysV-compatible services.
						</p><p>
							For example, to extend timeout limit for the <code class="literal">httpd</code> service:
						</p><div class="orderedlist" id="proc-changing_the_timeout_limit"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Copy the <code class="literal">httpd</code> unit file to the <code class="literal">/etc/systemd/system/</code> directory:
								</p><pre class="literallayout"><code class="literal command">cp /usr/lib/systemd/system/httpd.service /etc/systemd/system/httpd.service</code></pre></li><li class="listitem"><p class="simpara">
									Open file <code class="literal">/etc/systemd/system/httpd.service</code> and specify the <code class="literal">TimeoutStartUSec</code> value in the <code class="literal">[Service]</code> section:
								</p><pre class="literallayout"><span class="emphasis"><em>...</em></span>
[Service]
<span class="emphasis"><em>...</em></span>
PrivateTmp=true
<span class="emphasis"><em>TimeoutStartSec=10</em></span>

[Install]
WantedBy=multi-user.target
<span class="emphasis"><em>...</em></span></pre></li><li class="listitem"><p class="simpara">
									Reload the <code class="literal">systemd</code> daemon:
								</p><pre class="literallayout"><code class="literal command">systemctl daemon-reload</code></pre></li><li class="listitem"><p class="simpara">
									<span class="emphasis"><em>Optional.</em></span> Verify the new timeout value:
								</p><pre class="literallayout"><code class="literal command">systemctl show httpd -p TimeoutStartUSec</code></pre></li></ol></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To change the timeout limit globally, input the <code class="literal">DefaultTimeoutStartSec</code> in the <code class="literal">/etc/systemd/system.conf</code> file. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Introduction" title="10.1. Introduction to systemd">Section&nbsp;10.1, “Introduction to systemd”</a>.
						</p></div></div><h5 id="brid-Managing_Services_with_systemd-Monitoring_Overrides">Monitoring Overriden Units</h5><p>
						To display an overview of overridden or modified unit files, use the following command:
					</p><pre class="literallayout"><code class="literal command">systemd-delta</code></pre><p>
						For example, the output of the above command can look as follows:
					</p><pre class="literallayout">[EQUIVALENT] /etc/systemd/system/default.target → /usr/lib/systemd/system/default.target
[OVERRIDDEN] /etc/systemd/system/autofs.service → /usr/lib/systemd/system/autofs.service

--- /usr/lib/systemd/system/autofs.service   2014-10-16 21:30:39.000000000 -0400
+++ /etc/systemd/system/autofs.service 2014-11-21 10:00:58.513568275 -0500
@@ -8,7 +8,8 @@
 EnvironmentFile=-/etc/sysconfig/autofs
 ExecStart=/usr/sbin/automount $OPTIONS --pid-file /run/autofs.pid
 ExecReload=/usr/bin/kill -HUP $MAINPID
-TimeoutSec=180
+TimeoutSec=240
+Restart=Always

 [Install]
 WantedBy=multi-user.target

[MASKED]   /etc/systemd/system/cups.service → /usr/lib/systemd/system/cups.service
[EXTENDED]  /usr/lib/systemd/system/sssd.service → /etc/systemd/system/sssd.service.d/journal.conf

4 overridden configuration files found.</pre><p>
						<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Override_types" title="Table 10.13. systemd-delta Difference Types">Table&nbsp;10.13, “systemd-delta Difference Types”</a> lists override types that can appear in the output of <code class="literal command">systemd-delta</code>. Note that if a file is overridden, <code class="literal command">systemd-delta</code> by default displays a summary of changes similar to the output of the <code class="literal command">diff</code> command.
					</p><div class="table" id="tabl-Managing_Services_with_systemd-Override_types"><p class="title"><strong>Table&nbsp;10.13.&nbsp;systemd-delta Difference Types</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569359757728" scope="col">Type</th><th align="left" valign="top" id="idm140569387008448" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569359757728"> <p>
										[MASKED]
									</p>
									 </td><td align="left" valign="top" headers="idm140569387008448"> <p>
										Masked unit files, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Services-Disable" title="10.2.7. Disabling a Service">Section&nbsp;10.2.7, “Disabling a Service”</a> for description of unit masking.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569359757728"> <p>
										[EQUIVALENT]
									</p>
									 </td><td align="left" valign="top" headers="idm140569387008448"> <p>
										Unmodified copies that override the original files but do not differ in content, typically symbolic links.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569359757728"> <p>
										[REDIRECTED]
									</p>
									 </td><td align="left" valign="top" headers="idm140569387008448"> <p>
										Files that are redirected to another file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569359757728"> <p>
										[OVERRIDEN]
									</p>
									 </td><td align="left" valign="top" headers="idm140569387008448"> <p>
										Overridden and changed files.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569359757728"> <p>
										[EXTENDED]
									</p>
									 </td><td align="left" valign="top" headers="idm140569387008448"> <p>
										Files that are extended with .conf files in the <code class="literal">/etc/systemd/system/<span class="emphasis"><em>unit</em></span>.d/</code> directory.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569359757728"> <p>
										[UNCHANGED]
									</p>
									 </td><td align="left" valign="top" headers="idm140569387008448"> <p>
										Unmodified files are displayed only when the <code class="literal option">--type=unchanged</code> option is used.
									</p>
									 </td></tr></tbody></table></div></div><p>
						It is good practice to run <code class="literal command">systemd-delta</code> after system update to check if there are any updates to the default units that are currently overridden by custom configuration. It is also possible to limit the output only to a certain difference type. For example, to view just the overridden units, execute:
					</p><pre class="literallayout"><code class="literal command">systemd-delta --type=overridden</code></pre></section><section class="section" id="sect-Managing_Services_with_systemd-Instantiated_Units"><div class="titlepage"><div><div><h3 class="title">10.6.5.&nbsp;Working with Instantiated Units</h3></div></div></div><p>
						It is possible to instantiate multiple units from a single template configuration file at runtime. The "@" character is used to mark the template and to associate units with it. Instantiated units can be started from another unit file (using <code class="literal option">Requires</code> or <code class="literal option">Wants</code> options), or with the <code class="literal command">systemctl start</code> command. Instantiated service units are named the following way:
					</p><pre class="literallayout"><span class="emphasis"><em>template_name</em></span>@<span class="emphasis"><em>instance_name</em></span>.service</pre><p>
						Where <span class="emphasis"><em>template_name</em></span> stands for the name of the template configuration file. Replace <span class="emphasis"><em>instance_name</em></span> with the name for the unit instance. Several instances can point to the same template file with configuration options common for all instances of the unit. Template unit name has the form of:
					</p><pre class="literallayout"><span class="emphasis"><em>unit_name</em></span>@.service</pre><p>
						For example, the following <code class="literal option">Wants</code> setting in a unit file:
					</p><pre class="literallayout">Wants=getty@ttyA.service,getty@ttyB.service</pre><p>
						first makes systemd search for given service units. If no such units are found, the part between "@" and the type suffix is ignored and systemd searches for the <code class="literal">getty@.service</code> file, reads the configuration from it, and starts the services.
					</p><p>
						Wildcard characters, called <span class="emphasis"><em>unit specifiers</em></span>, can be used in any unit configuration file. Unit specifiers substitute certain unit parameters and are interpreted at runtime. <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-Managing_Services_with_systemd-Unit_Specifiers" title="Table 10.14. Important Unit Specifiers">Table&nbsp;10.14, “Important Unit Specifiers”</a> lists unit specifiers that are particularly useful for template units.
					</p><div class="table" id="tabl-Managing_Services_with_systemd-Unit_Specifiers"><p class="title"><strong>Table&nbsp;10.14.&nbsp;Important Unit Specifiers</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569369551584" scope="col">Unit Specifier</th><th align="left" valign="top" id="idm140569369550496" scope="col">Meaning</th><th align="left" valign="top" id="idm140569369549408" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569369551584"> <p>
										<code class="literal option">%n</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569369550496"> <p>
										Full unit name
									</p>
									 </td><td align="left" valign="top" headers="idm140569369549408"> <p>
										Stands for the full unit name including the type suffix. <code class="literal option">%N</code> has the same meaning but also replaces the forbidden characters with ASCII codes.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569369551584"> <p>
										<code class="literal option">%p</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569369550496"> <p>
										Prefix name
									</p>
									 </td><td align="left" valign="top" headers="idm140569369549408"> <p>
										Stands for a unit name with type suffix removed. For instantiated units %p stands for the part of the unit name before the "@" character.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569369551584"> <p>
										<code class="literal option">%i</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569369550496"> <p>
										Instance name
									</p>
									 </td><td align="left" valign="top" headers="idm140569369549408"> <p>
										Is the part of the instantiated unit name between the "@" character and the type suffix. <code class="literal option">%I</code> has the same meaning but also replaces the forbidden characters for ASCII codes.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569369551584"> <p>
										<code class="literal option">%H</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569369550496"> <p>
										Host name
									</p>
									 </td><td align="left" valign="top" headers="idm140569369549408"> <p>
										Stands for the hostname of the running system at the point in time the unit configuration is loaded.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569369551584"> <p>
										<code class="literal option">%t</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569369550496"> <p>
										Runtime directory
									</p>
									 </td><td align="left" valign="top" headers="idm140569369549408"> <p>
										Represents the runtime directory, which is either <code class="literal">/run</code> for the <code class="literal">root</code> user, or the value of the XDG_RUNTIME_DIR variable for unprivileged users.
									</p>
									 </td></tr></tbody></table></div></div><p>
						For a complete list of unit specifiers, see the <code class="literal">systemd.unit(5)</code> manual page.
					</p><p>
						For example, the <code class="literal">getty@.service</code> template contains the following directives:
					</p><pre class="literallayout">[Unit]
Description=Getty on %I
...
[Service]
ExecStart=-/sbin/agetty --noclear %I $TERM
...</pre><p>
						When the getty@ttyA.service and getty@ttyB.service are instantiated form the above template, <code class="literal option">Description</code>= is resolved as <span class="emphasis"><em>Getty on ttyA</em></span> and <span class="emphasis"><em>Getty on ttyB</em></span>.
					</p></section></section><section class="section" id="sect-Managing_Services_with_systemd-Considerations"><div class="titlepage"><div><div><h2 class="title">10.7.&nbsp;Additional Considerations While Managing Services</h2></div></div></div><p>
					During normal operation, systemd maintains an association between a unit abstraction and the underlying processes active on the system.
				</p><p>
					From: <code class="literal command">man systemd</code>
				</p><pre class="literallayout">Processes systemd spawns are placed in individual Linux control groups named after the unit which they belong to in the private systemd hierarchy. (see cgroups.txt[1] for more information about control groups, or short "cgroups"). systemd uses this to effectively keep track of processes. Control group information is maintained in the kernel, and is accessible via the file system hierarchy (beneath /sys/fs/cgroup/systemd/), or in tools such as ps(1) (ps xawf -eo pid,user,cgroup,args is particularly useful to list all processes and the systemd units they belong to).</pre><p>
					The cgroup hierarchy is critical to systemd’s view of process and service health. When a process forks itself, it inherits the cgroup of the creating process. With this being the case, all processes associated with a given unit can be verified by reading the contents of the applicable cgroup.procs file, such as:
				</p><pre class="literallayout">~]# cat /sys/fs/cgroup/systemd/system.slice/httpd.service/cgroup.procs
11854
11855
11856
11857
11858
11859</pre><p>
					The output matches the <span class="emphasis"><em>CGroup</em></span> information returned during a <code class="literal command">systemctl status <span class="emphasis"><em>unit</em></span></code> operation:
				</p><pre class="literallayout">~]# systemctl status httpd
● httpd.service - The Apache HTTP Server
  Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)
  Active: active (running) since Wed 2019-05-29 12:08:16 EDT; 45s ago
   Docs: man:httpd(8)
      man:apachectl(8)
 Main PID: 11854 (httpd)
  Status: "Total requests: 0; Current requests/sec: 0; Current traffic:  0 B/sec"
  CGroup: /system.slice/httpd.service
      ├─11854 /usr/sbin/httpd -DFOREGROUND
      ├─11855 /usr/sbin/httpd -DFOREGROUND
      ├─11856 /usr/sbin/httpd -DFOREGROUND
      ├─11857 /usr/sbin/httpd -DFOREGROUND
      ├─11858 /usr/sbin/httpd -DFOREGROUND
      └─11859 /usr/sbin/httpd -DFOREGROUND

May 29 12:08:16 localhost systemd[1]: Starting The Apache HTTP Server...
May 29 12:08:16 localhost systemd[1]: Started The Apache HTTP Server.</pre><p>
					To directly view these groupings of processes system-wide, the <code class="literal command">systemd-cgls</code> utility can be used:
				</p><pre class="literallayout">~]# systemd-cgls | head -17
├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
├─user.slice
│ └─user-0.slice
│  └─session-168.scope
│   ├─ 3049 login -- root
│   ├─11884 -bash
│   ├─11943 systemd-cgls
│   └─11944 head -17
└─system.slice
 ├─httpd.service
 │ ├─11854 /usr/sbin/httpd -DFOREGROUND
 │ ├─11855 /usr/sbin/httpd -DFOREGROUND
 │ ├─11856 /usr/sbin/httpd -DFOREGROUND
 │ ├─11857 /usr/sbin/httpd -DFOREGROUND
 │ ├─11858 /usr/sbin/httpd -DFOREGROUND
 │ └─11859 /usr/sbin/httpd -DFOREGROUND
 ├─rhnsd.service</pre><p>
					In order for systemd to function properly, the service must be started or stopped through the systemd system to maintain the correct process to unit grouping. Any operation that takes external action results in the necessary cgroup structure not being created. This happens because systemd is not aware of the special nature of the processes being started.
				</p><p>
					As an example of the above constraint, stopping the <code class="literal">httpd</code> service and then issuing <code class="literal command">/usr/sbin/httpd</code> directly results in the following:
				</p><pre class="literallayout">~]# systemctl stop httpd
~]# /usr/sbin/httpd
# systemd-cgls | head -17
├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
├─user.slice
│ └─user-0.slice
│  └─session-168.scope
│   ├─ 3049 login -- root
│   ├─11884 -bash
│   ├─11957 /usr/sbin/httpd
│   ├─11958 /usr/sbin/httpd
│   ├─11959 /usr/sbin/httpd
│   ├─11960 /usr/sbin/httpd
│   ├─11961 /usr/sbin/httpd
│   ├─11962 /usr/sbin/httpd
│   ├─11963 systemd-cgls
│   └─11964 head -17
└─system.slice
 ├─rhnsd.service
 │ └─3261 rhnsd</pre><p>
					Note that the <code class="literal">httpd</code> process is now visible under the user-0.slice and a session-168.scope. This service is treated as a user started process, as opposed to a system service, that systemd should monitor and manage directly. Some failures that can occur due to this misalignment include, but are not limited to:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Services are not properly shutdown during system shutdown or restart events.
						</li><li class="listitem">
							Unexpected signals are delivered during user logout such as SIGHUP and SIGTERM.
						</li><li class="listitem">
							Processes that fail are not automatically restarted despite having a <code class="literal">Restart=</code> directive
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Non-graceful application shutdown events can result in a large number of subsequent application failures, such as client-side failures, data loss, and on-disk corruption.
					</p></div></div></section><section class="section" id="sect-Managing_Services_with_systemd-Resources"><div class="titlepage"><div><div><h2 class="title">10.8.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on systemd and its usage on Red Hat Enterprise Linux 7, see the resources listed below.
				</p><h4 id="brid-Managing_Services_with_systemd-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">systemctl</code>(1) — The manual page for the <code class="literal command">systemctl</code> command line utility provides a complete list of supported options and commands.
						</li><li class="listitem">
							<code class="literal">systemd</code>(1) — The manual page for the <code class="literal command">systemd</code> system and service manager provides more information about its concepts and documents available command line options and environment variables, supported configuration files and directories, recognized signals, and available kernel options.
						</li><li class="listitem">
							<code class="literal">systemd-delta</code>(1) — The manual page for the <code class="literal command">systemd-delta</code> utility that allows to find extended and overridden configuration files.
						</li><li class="listitem">
							<code class="literal">systemd.unit</code>(5) — The manual page named <code class="literal">systemd.unit</code> provides detailed information about systemd unit files and documents all available configuration options.
						</li><li class="listitem">
							<code class="literal">systemd.service</code>(5) — The manual page named <code class="literal">systemd.service</code> documents the format of service unit files.
						</li><li class="listitem">
							<code class="literal">systemd.target</code>(5) — The manual page named <code class="literal">systemd.target</code> documents the format of target unit files.
						</li><li class="listitem">
							<code class="literal">systemd.kill</code>(5) — The manual page named <code class="literal">systemd.kill</code> documents the configuration of the process killing procedure.
						</li></ul></div><h4 id="brid-Managing_Services_with_systemd-Resources-Online">Online Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">Red Hat Enterprise Linux 7 Networking Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Networking Guide</span></em></span> for Red Hat Enterprise Linux 7 documents relevant information regarding the configuration and administration of network interfaces, networks, and network services in this system. It provides an introduction to the <code class="literal command">hostnamectl</code> utility, explains how to use it to view and set host names on the command line, both locally and remotely, and provides important information about the selection of host names and domain names.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Desktop_Migration_and_Administration_Guide/">Red Hat Enterprise Linux 7 Desktop Migration and Administration Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Desktop Migration and Administration Guide</span></em></span> for Red Hat Enterprise Linux 7 documents the migration planning, deployment, configuration, and administration of the GNOME 3 desktop on this system. It introduces the <code class="literal">logind</code> service, enumerates its most significant features, and explains how to use the <code class="literal command">loginctl</code> utility to list active sessions and enable multi-seat support.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/">Red Hat Enterprise Linux 7 SELinux User’s and Administrator’s Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">SELinux User’s and Administrator’s Guide</span></em></span> for Red Hat Enterprise Linux 7 describes the basic principles of SELinux and documents in detail how to configure and use SELinux with various services such as the Apache HTTP Server, Postfix, PostgreSQL, or OpenShift. It explains how to configure SELinux access permissions for system services managed by systemd.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/">Red Hat Enterprise Linux 7 Installation Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Installation Guide</span></em></span> for Red Hat Enterprise Linux 7 documents how to install the system on AMD64 and Intel 64 systems, 64-bit IBM Power Systems servers, and IBM Z. It also covers advanced installation methods such as Kickstart installations, PXE installations, and installations over the VNC protocol. In addition, it describes common post-installation tasks and explains how to troubleshoot installation problems, including detailed instructions on how to boot into rescue mode or recover the root password.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Security Guide</span></em></span> for Red Hat Enterprise Linux 7 assists users and administrators in learning the processes and practices of securing their workstations and servers against local and remote intrusion, exploitation, and malicious activity. It also explains how to secure critical system services.
						</li><li class="listitem">
							<a class="link" href="http://www.freedesktop.org/wiki/Software/systemd">systemd Home Page</a> — The project home page provides more information about systemd.
						</li></ul></div><h4 id="brid-Managing_Services_with_systemd-Resources-Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Keyboard_Configuration" title="Chapter 2. System Locale and Keyboard Configuration">Chapter&nbsp;2, <em>System Locale and Keyboard Configuration</em></a> documents how to manage the system locale and keyboard layouts. It explains how to use the <code class="literal command">localectl</code> utility to view the current locale, list available locales, and set the system locale on the command line, as well as to view the current keyboard layout, list available keymaps, and enable a particular keyboard layout on the command line.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Configuring_the_Date_and_Time" title="Chapter 3. Configuring the Date and Time">Chapter&nbsp;3, <em>Configuring the Date and Time</em></a> documents how to manage the system date and time. It explains the difference between a real-time clock and system clock and describes how to use the <code class="literal command">timedatectl</code> utility to display the current settings of the system clock, configure the date and time, change the time zone, and synchronize the system clock with a remote server.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-OpenSSH" title="Chapter 12. OpenSSH">Chapter&nbsp;12, <em>OpenSSH</em></a> describes how to configure an SSH server and how to use the <code class="literal command">ssh</code>, <code class="literal command">scp</code>, and <code class="literal command">sftp</code> client utilities to access it.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Viewing_and_Managing_Log_Files" title="Chapter 23. Viewing and Managing Log Files">Chapter&nbsp;23, <em>Viewing and Managing Log Files</em></a> provides an introduction to <code class="literal">journald</code>. It describes the journal, introduces the <code class="literal">journald</code> service, and documents how to use the <code class="literal command">journalctl</code> utility to view log entries, enter live view mode, and filter log entries. In addition, this chapter describes how to give non-root users access to system logs and enable persistent storage for log files.
						</li></ul></div></section></section><section class="chapter" id="ch-Accessbility"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;11.&nbsp;Configuring a System for Accessibility</h2></div></div></div><p>
				Accessibility in Red Hat Enterprise Linux 7 is ensured by the <span class="strong strong"><strong><span class="application application">Orca</span></strong></span> screen reader, which is included in the default installation of the operating system. This chapter explains how a system administrator can configure a system to support users with a visual impairment.
			</p><p>
				<span class="strong strong"><strong><span class="application application">Orca</span></strong></span> reads information from the screen and communicates it to the user using:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						a speech synthesizer, which provides a speech output
					</li><li class="listitem">
						a braille display, which provides a tactile output
					</li></ul></div><p>
				For more information on <span class="strong strong"><strong><span class="application application">Orca</span></strong></span> settings, see its <a class="link" href="https://help.gnome.org/users/orca/stable/">help page</a>.
			</p><p>
				In order that <span class="strong strong"><strong><span class="application application">Orca</span></strong></span>'s communication outputs function properly, the system administrator needs to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						configure the <code class="literal">brltty</code> service, as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#configure_brltty" title="11.1. Configuring the brltty Service">Section&nbsp;11.1, “Configuring the <code class="literal">brltty</code> Service”</a>
					</li><li class="listitem">
						switch on the <code class="literal">Always Show Universal Access Menu</code>, as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#switch_univ_access_on" title="11.2. Switch On Always Show Universal Access Menu">Section&nbsp;11.2, “Switch On <code class="literal">Always Show Universal Access Menu</code>”</a>
					</li><li class="listitem">
						enable the <span class="strong strong"><strong><span class="application application">Festival</span></strong></span> speech synthesizer, as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#enable_festival" title="11.3. Enabling the Festival Speech Synthesis System">Section&nbsp;11.3, “Enabling the <span class="strong strong"><strong><span class="application application">Festival Speech Synthesis System</span></strong></span>”</a>
					</li></ul></div><section class="section" id="configure_brltty"><div class="titlepage"><div><div><h2 class="title">11.1.&nbsp;Configuring the <code class="literal">brltty</code> Service</h2></div></div></div><p>
					The Braille display uses the <code class="literal">brltty</code> service to provide tactile output for visually impaired users.
				</p><h4 id="enable_the_brltty_service">Enable the brltty Service</h4><p>
					The braille display cannot work unless <code class="literal">brltty</code> is running. By default, <code class="literal">brltty</code> is disabled. Enable <code class="literal">brltty</code> to be started on boot:
				</p><pre class="literallayout">~]# systemctl enable brltty.service</pre><h4 id="authorize_users_to_use_the_braille_display">Authorize Users to Use the Braille Display</h4><p>
					To set the users who are authorized to use the braille display, choose one of the following procedures, which have an equal effect. The procedure using the <code class="literal">/etc/brltty.conf</code> file is suitable even for the file systems where users or groups cannot be assigned to a file. The procedure using the <code class="literal">/etc/brlapi.key</code> file is suitable only for the file systems where users or groups can be assigned to a file.
				</p><div class="orderedlist"><p class="title"><strong>Setting Access to Braille Display by Using <code class="literal">/etc/brltty.conf</code></strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the <code class="literal">/etc/brltty.conf</code> file, and find the section called <span class="emphasis"><em>Application Programming Interface Parameters</em></span>.
						</li><li class="listitem"><p class="simpara">
							Specify the users.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									To specify one or more individual users, list the users on the following line:
								</p><pre class="literallayout">api-parameters Auth=user:<code class="literal">user_1, user_2, ...</code> 		# Allow some local user</pre></li><li class="listitem"><p class="simpara">
									To specify a user group, enter its name on the following line:
								</p><pre class="literallayout">api-parameters Auth=group:<code class="literal">group</code>		# Allow some local group</pre></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Setting Access to Braille Display by Using <code class="literal">/etc/brlapi.key</code></strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">/etc/brlapi.key</code> file.
						</p><pre class="literallayout">~]# mcookie &gt; /etc/brlapi.key</pre></li><li class="listitem"><p class="simpara">
							Change ownership of the <code class="literal">/etc/brlapi.key</code> to particular user or group.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									To specify an individual user:
								</p><pre class="literallayout">~]# chown user_1 /etc/brlapi.key</pre></li><li class="listitem"><p class="simpara">
									To specify a group:
								</p><pre class="literallayout">~]# chown group_1 /etc/brlapi.key</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Adjust the content of <code class="literal">/etc/brltty.conf</code> to include this:
						</p><pre class="literallayout">api-parameters Auth=keyfile:<code class="literal">/etc/brlapi.key</code></pre></li></ol></div><h4 id="set_the_braille_driver">Set the Braille Driver</h4><p>
					The <code class="literal option">braille-driver</code> directive in <code class="literal">/etc/brltty.conf</code> specifies a two-letter driver identification code of the driver for the braille display.
				</p><div class="orderedlist"><p class="title"><strong>Setting the Braille Driver</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Decide whether you want to use the autodetection for finding the appropriate braille driver.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you want to use autodetection, leave <code class="literal option">braille driver</code> specified to <code class="literal option">auto</code>, which is the default option.
								</p><pre class="literallayout">braille-driver	<code class="literal">auto</code>	 # autodetect</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										Autodetection tries all drivers. Therefore, it might take a long time or even fail. For this reason, setting up a particular braille driver is recommended.
									</p></div></div></li><li class="listitem"><p class="simpara">
									If you do not want to use the autodetection, specify the identification code of the required braille driver in the <code class="literal option">braille-driver</code> directive.
								</p><p class="simpara">
									Choose the identification code of required braille driver from the list provided in <code class="literal">/etc/brltty.conf</code>, for example:
								</p><pre class="literallayout">braille-driver	<code class="literal">xw</code>	 # XWindow</pre><p class="simpara">
									You can also set multiple drivers, separated by commas, and autodetection is then performed among them.
								</p></li></ol></div></li></ol></div><h4 id="set_the_braille_device">Set the Braille Device</h4><p>
					The <code class="literal option">braille-device</code> directive in <code class="literal">/etc/brltty.conf</code> specifies the device to which the braille display is connected. The following device types are supported (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-braille-device" title="Table 11.1. Braille Device Types and the Corresponding Syntax">Table&nbsp;11.1, “Braille Device Types and the Corresponding Syntax”</a>):
				</p><div class="table" id="table-braille-device"><p class="title"><strong>Table&nbsp;11.1.&nbsp;Braille Device Types and the Corresponding Syntax</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569378090384" scope="col">Braille Device Type</th><th align="left" valign="top" id="idm140569378089296" scope="col">Syntax of the Type</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569378090384"> <p>
									serial device
								</p>
								 </td><td align="left" valign="top" headers="idm140569378089296"> <p>
									serial:path <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569369962928" class="footnote"><sup class="footnote" id="idm140569369962928">[a]</sup></a>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569378090384"> <p>
									USB device
								</p>
								 </td><td align="left" valign="top" headers="idm140569378089296"> <p>
									[serial-number] <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569369957824" class="footnote"><sup class="footnote" id="idm140569369957824">[b]</sup></a>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569378090384"> <p>
									Bluetooth device
								</p>
								 </td><td align="left" valign="top" headers="idm140569378089296"> <p>
									bluetooth:address
								</p>
								 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140569369962928" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569369962928" class="simpara"><sup class="simpara">[a] </sup></a>
										Relative paths are at <code class="literal">/dev</code>.
									</div></div><div id="ftn.idm140569369957824" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569369957824" class="simpara"><sup class="simpara">[b] </sup></a>
										The brackets here indicate optionality.
									</div></div></td></tr></tbody></table></div></div><p>
					Examples of settings for particular devices:
				</p><pre class="literallayout">braille-device	<code class="literal">serial:ttyS0</code>	        # First serial device
braille-device	<code class="literal">usb:</code>	            # First USB device matching braille driver
braille-device	<code class="literal">usb:nnnnn</code>	        # Specific USB device by serial number
braille-device	<code class="literal">bluetooth:xx:xx:xx:xx:xx:xx</code>	# Specific Bluetooth device by address</pre><p>
					You can also set multiple devices, separated by commas, and each of them will be probed in turn.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						If the device is connected by a serial-to-USB adapter, setting <code class="literal option">braille-device</code> to <code class="literal">usb:</code> does not work. In this case, identify the virtual serial device that the kernel has created for the adapter. The virtual serial device can look like this:
					</p><pre class="literallayout">serial:ttyUSB0</pre><pre class="literallayout">You can find the actual device name in the kernel messages on the device plug with the following command:</pre><pre class="literallayout">~]# dmesg | fgrep ttyUSB0</pre></div></div><h4 id="set_specific_parameters_for_particular_braille_displays">Set Specific Parameters for Particular Braille Displays</h4><p>
					If you need to set specific parameters for particular braille displays, use the <code class="literal option">braille-parameters</code> directive in <code class="literal">/etc/brltty.conf</code>. The <code class="literal option">braille-parameters</code> directive passes non-generic parameters through to the braille driver. Choose the required parameters from the list in <code class="literal">/etc/brltty.conf</code>.
				</p><h4 id="set_the_text_table">Set the Text Table</h4><p>
					The <code class="literal option">text-table</code> directive in <code class="literal">/etc/brltty.conf</code> specifies which text table is used to encode the symbols. Relative paths to text tables are in the <code class="literal">/etc/brltty/Text/</code> directory.
				</p><div class="orderedlist"><p class="title"><strong>Setting the Text Table</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Decide whether you want to use the autoselection for finding the appropriate text table.
						</li><li class="listitem"><p class="simpara">

						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you want to use the autoselection, leave <code class="literal option">text-table</code> specified to <code class="literal option">auto</code>, which is the default option.
								</p><pre class="literallayout">text-table	<code class="literal">auto</code>	 # locale-based autoselection</pre><p class="simpara">
									This ensures that local-based autoselection with fallback to <code class="literal option">en-nabcc</code> is performed.
								</p></li><li class="listitem"><p class="simpara">
									If you do not want to use the autoselection, choose the required <code class="literal option">text-table</code> from the list in <code class="literal">/etc/brltty.conf</code>.
								</p><p class="simpara">
									For example, to use the text table for American English:
								</p><pre class="literallayout">text-table	<code class="literal">en_US</code>	 # English (United States)</pre></li></ol></div></li></ol></div><h4 id="set_the_contraction_table">Set the Contraction Table</h4><p>
					The <code class="literal option">contraction-table</code> directive in <code class="literal">/etc/brltty.conf</code> specifies which table is used to encode the abbreviations. Relative paths to particular contraction tables are in the <code class="literal">/etc/brltty/Contraction/</code> directory.
				</p><p>
					Choose the required <code class="literal option">contraction-table</code> from the list in <code class="literal">/etc/brltty.conf</code>.
				</p><p>
					For example, to use the contraction table for American English, grade 2:
				</p><pre class="literallayout">contraction-table	<code class="literal">en-us-g2</code>	 # English (US, grade 2)</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						If not specified, no contraction table is used.
					</p></div></div></section><section class="section" id="switch_univ_access_on"><div class="titlepage"><div><div><h2 class="title">11.2.&nbsp;Switch On <code class="literal">Always Show Universal Access Menu</code></h2></div></div></div><p>
					To switch on the <span class="strong strong"><strong><span class="application application">Orca</span></strong></span> screen reader, press the <span class="keycap"><strong>Super</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>S</strong></span> key combination. As a result, the Universal Access Menu icon is displayed on the top bar.
				</p><div class="informalfigure"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/universal-access-menu.png" alt="universal access menu"></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						The icon disappears in case that the user switches off all of the provided options from the Universal Access Menu. Missing icon can cause difficulties to users with a visual impairment. System administrators can prevent the inaccessibility of the icon by switching on the <code class="literal">Always Show Universal Access Menu</code>. When the <code class="literal">Always Show Universal Access Menu</code> is switched on, the icon is displayed on the top bar even in the situation when all options from this menu are switched off.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Switching On <code class="literal">Always Show Universal Access Menu</code></strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the Gnome settings menu, and click <span class="guibutton">Universal Access</span>.
						</li><li class="listitem"><p class="simpara">
							Switch on <code class="literal">Always Show Universal Access Menu</code>.
						</p><div class="informalfigure"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/always_show_univ_access_menu.png" class="rh_docs--zoom" title="always show univ access menu"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/always_show_univ_access_menu.png" alt="always show univ access menu"></a></div></div></li><li class="listitem"><p class="simpara">
							<span class="emphasis"><em>Optional:</em></span> Verify that the Universal Access Menu icon is displayed on the top bar even if all options from this menu are switched off.
						</p><div class="informalfigure"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/universal-access-menu.png" alt="universal access menu"></div></div></li></ol></div></section><section class="section" id="enable_festival"><div class="titlepage"><div><div><h2 class="title">11.3.&nbsp;Enabling the <span class="strong strong"><strong><span class="application application">Festival Speech Synthesis System</span></strong></span></h2></div></div></div><p>
					By default, <span class="strong strong"><strong><span class="application application">Orca</span></strong></span> uses the <span class="strong strong"><strong><span class="application application">eSpeak</span></strong></span> speech synthesizer, but it also supports the <span class="strong strong"><strong><span class="application application">Festival Speech Synthesis System</span></strong></span>. Both <span class="strong strong"><strong><span class="application application">eSpeak</span></strong></span> and <span class="strong strong"><strong><span class="application application">Festival Speech Synthesis System</span></strong></span> (Festival) synthesize voice differently. Some users might prefer Festival to the default <span class="strong strong"><strong><span class="application application">eSpeak</span></strong></span> synthesizer. To enable Festival, follow these steps:
				</p><div class="orderedlist"><p class="title"><strong>Installing Festival and Making it Running on Boot</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install Festival:
						</p><pre class="literallayout">~]# yum install festival festival-freebsoft-utils</pre></li><li class="listitem"><p class="simpara">
							Make Festival running on boot:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Create a new <code class="literal">systemd</code> unit file:
								</p><p class="simpara">
									Create a file in the <code class="literal">/etc/systemd/system/</code> directory and make it executable.
								</p><pre class="literallayout">~]# touch /etc/systemd/system/festival.service
~]# chmod 664 /etc/systemd/system/festival.service</pre></li><li class="listitem"><p class="simpara">
									Ensure that the script in the <code class="literal">/usr/bin/festival_server</code> file is used to run Festival. Add the following content to the <code class="literal">/etc/systemd/system/festival.service</code> file:
								</p><pre class="literallayout">[Unit]
Description=Festival speech synthesis server
[Service]
ExecStart=/usr/bin/festival_server
Type=simple</pre></li><li class="listitem"><p class="simpara">
									Notify <code class="literal">systemd</code> that a new <code class="literal">festival.service</code> file exists:
								</p><pre class="literallayout">~]# systemctl daemon-reload
~]# systemctl start festival.service</pre></li><li class="listitem"><p class="simpara">
									Enable <code class="literal">festival.service</code>:
								</p><pre class="literallayout">~]# systemctl enable festival.service</pre></li></ol></div></li></ol></div><h4 id="choose_a_voice_for_festival">Choose a Voice for Festival</h4><p>
					<span class="strong strong"><strong><span class="application application">Festival</span></strong></span> provides multiples voices.
				</p><p>
					To make a voice available, install the relevant package from the following list:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong><span class="package package">festvox-awb-arctic-hts</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">festvox-bdl-arctic-hts</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">festvox-clb-arctic-hts</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">festvox-kal-diphone</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">festvox-ked-diphone</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">festvox-rms-arctic-hts</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">festvox-slt-arctic-hts</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">hispavoces-pal-diphone</span></strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong><span class="package package">hispavoces-sfl-diphone</span></strong></span>
						</li></ul></div><p>
					To see detailed information about a particular voice:
				</p><pre class="literallayout">~]# yum info package_name</pre><p>
					To make the required voice available, install the package with this voice and then reboot:
				</p><pre class="literallayout">~]# yum install package_name
~]# reboot</pre></section></section><section class="chapter" id="ch-OpenSSH"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;12.&nbsp;OpenSSH</h2></div></div></div><p>
				<code class="literal">SSH</code> (Secure Shell) is a protocol which facilitates secure communications between two systems using a client-server architecture and allows users to log in to server host systems remotely. Unlike other remote communication protocols, such as <code class="literal">FTP</code> or <code class="literal">Telnet</code>, SSH encrypts the login session, rendering the connection difficult for intruders to collect unencrypted passwords.
			</p><p>
				The <span class="strong strong"><strong><span class="application application">ssh</span></strong></span> program is designed to replace older, less secure terminal applications used to log in to remote hosts, such as <code class="literal command">telnet</code> or <code class="literal command">rsh</code>. A related program called <code class="literal command">scp</code> replaces older programs designed to copy files between hosts, such as <code class="literal command">rcp</code>. Because these older applications do not encrypt passwords transmitted between the client and the server, avoid them whenever possible. Using secure methods to log in to remote systems decreases the risks for both the client system and the remote host.
			</p><p>
				Red Hat Enterprise Linux includes the general OpenSSH package, <span class="strong strong"><strong><span class="package package">openssh</span></strong></span>, as well as the OpenSSH server, <span class="strong strong"><strong><span class="package package">openssh-server</span></strong></span>, and client, <span class="strong strong"><strong><span class="package package">openssh-clients</span></strong></span>, packages. Note, the OpenSSH packages require the OpenSSL package <span class="strong strong"><strong><span class="package package">openssl-libs</span></strong></span>, which installs several important cryptographic libraries, enabling OpenSSH to provide encrypted communications.
			</p><section class="section" id="s1-ssh-protocol"><div class="titlepage"><div><div><h2 class="title">12.1.&nbsp;The SSH Protocol</h2></div></div></div><section class="section" id="s2-ssh-why"><div class="titlepage"><div><div><h3 class="title">12.1.1.&nbsp;Why Use SSH?</h3></div></div></div><p>
						Potential intruders have a variety of tools at their disposal enabling them to disrupt, intercept, and re-route network traffic in an effort to gain access to a system. In general terms, these threats can be categorized as follows:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Interception of communication between two systems</span></dt><dd><p class="simpara">
									The attacker can be somewhere on the network between the communicating parties, copying any information passed between them. He may intercept and keep the information, or alter the information and send it on to the intended recipient.
								</p><p class="simpara">
									This attack is usually performed using a <span class="emphasis"><em>packet sniffer</em></span>, a rather common network utility that captures each packet flowing through the network, and analyzes its content.
								</p></dd><dt><span class="term">Impersonation of a particular host</span></dt><dd><p class="simpara">
									Attacker’s system is configured to pose as the intended recipient of a transmission. If this strategy works, the user’s system remains unaware that it is communicating with the wrong host.
								</p><p class="simpara">
									This attack can be performed using a technique known as <span class="emphasis"><em>DNS poisoning</em></span>, or via so-called <span class="emphasis"><em>IP spoofing</em></span>. In the first case, the intruder uses a cracked DNS server to point client systems to a maliciously duplicated host. In the second case, the intruder sends falsified network packets that appear to be from a trusted host.
								</p></dd></dl></div><p>
						Both techniques intercept potentially sensitive information and, if the interception is made for hostile reasons, the results can be disastrous. If SSH is used for remote shell login and file copying, these security threats can be greatly diminished. This is because the SSH client and server use digital signatures to verify their identity. Additionally, all communication between the client and server systems is encrypted. Attempts to spoof the identity of either side of a communication does not work, since each packet is encrypted using a key known only by the local and remote systems.
					</p></section><section class="section" id="s2-ssh-features"><div class="titlepage"><div><div><h3 class="title">12.1.2.&nbsp;Main Features</h3></div></div></div><p>
						The SSH protocol provides the following safeguards:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">No one can pose as the intended server</span></dt><dd>
									After an initial connection, the client can verify that it is connecting to the same server it had connected to previously.
								</dd><dt><span class="term">No one can capture the authentication information</span></dt><dd>
									The client transmits its authentication information to the server using strong, 128-bit encryption.
								</dd><dt><span class="term">No one can intercept the communication</span></dt><dd>
									All data sent and received during a session is transferred using 128-bit encryption, making intercepted transmissions extremely difficult to decrypt and read.
								</dd></dl></div><p>
						Additionally, it also offers the following options:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">It provides secure means to use graphical applications over a network</span></dt><dd>
									Using a technique called <span class="emphasis"><em>X11 forwarding</em></span>, the client can forward <span class="emphasis"><em>X11</em></span> (<span class="emphasis"><em>X Window System</em></span>) applications from the server.
								</dd><dt><span class="term">It provides a way to secure otherwise insecure protocols</span></dt><dd>
									The SSH protocol encrypts everything it sends and receives. Using a technique called <span class="emphasis"><em>port forwarding</em></span>, an SSH server can become a conduit to securing otherwise insecure protocols, like <span class="strong strong"><strong>POP</strong></span>, and increasing overall system and data security.
								</dd><dt><span class="term">It can be used to create a secure channel</span></dt><dd>
									The OpenSSH server and client can be configured to create a tunnel similar to a virtual private network for traffic between server and client machines.
								</dd><dt><span class="term">It supports the Kerberos authentication</span></dt><dd>
									OpenSSH servers and clients can be configured to authenticate using the <span class="strong strong"><strong>GSSAPI</strong></span> (Generic Security Services Application Program Interface) implementation of the Kerberos network authentication protocol.
								</dd></dl></div></section><section class="section" id="s2-ssh-versions"><div class="titlepage"><div><div><h3 class="title">12.1.3.&nbsp;Protocol Versions</h3></div></div></div><p>
						Two varieties of SSH currently exist: version 1, and newer version 2. The OpenSSH suite under Red Hat Enterprise Linux 7 uses SSH version 2, which has an enhanced key exchange algorithm not vulnerable to the known exploit in version 1. In Red Hat Enterprise Linux 7, the OpenSSH suite does not support version 1 connections.
					</p></section><section class="section" id="s2-ssh-conn"><div class="titlepage"><div><div><h3 class="title">12.1.4.&nbsp;Event Sequence of an SSH Connection</h3></div></div></div><p>
						The following series of events help protect the integrity of SSH communication between two hosts.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								A cryptographic handshake is made so that the client can verify that it is communicating with the correct server.
							</li><li class="listitem">
								The transport layer of the connection between the client and remote host is encrypted using a symmetric cipher.
							</li><li class="listitem">
								The client authenticates itself to the server.
							</li><li class="listitem">
								The client interacts with the remote host over the encrypted connection.
							</li></ol></div><section class="section" id="s2-ssh-protocol-conn-transport"><div class="titlepage"><div><div><h4 class="title">12.1.4.1.&nbsp;Transport Layer</h4></div></div></div><p>
							The primary role of the transport layer is to facilitate safe and secure communication between the two hosts at the time of authentication and during subsequent communication. The transport layer accomplishes this by handling the encryption and decryption of data, and by providing integrity protection of data packets as they are sent and received. The transport layer also provides compression, speeding the transfer of information.
						</p><p>
							Once an SSH client contacts a server, key information is exchanged so that the two systems can correctly construct the transport layer. The following steps occur during this exchange:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Keys are exchanged
								</li><li class="listitem">
									The public key encryption algorithm is determined
								</li><li class="listitem">
									The symmetric encryption algorithm is determined
								</li><li class="listitem">
									The message authentication algorithm is determined
								</li><li class="listitem">
									The hash algorithm is determined
								</li></ul></div><p>
							During the key exchange, the server identifies itself to the client with a unique <span class="emphasis"><em>host key</em></span>. If the client has never communicated with this particular server before, the server’s host key is unknown to the client and it does not connect. OpenSSH gets around this problem by accepting the server’s host key. This is done after the user is notified and has both accepted and verified the new host key. In subsequent connections, the server’s host key is checked against the saved version on the client, providing confidence that the client is indeed communicating with the intended server. If, in the future, the host key no longer matches, the user must remove the client’s saved version before a connection can occur.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								It is possible for an attacker to masquerade as an SSH server during the initial contact since the local system does not know the difference between the intended server and a false one set up by an attacker. To help prevent this, verify the integrity of a new SSH server by contacting the server administrator before connecting for the first time or in the event of a host key mismatch.
							</p></div></div><p>
							SSH is designed to work with almost any kind of public key algorithm or encoding format. After an initial key exchange creates a hash value used for exchanges and a shared secret value, the two systems immediately begin calculating new keys and algorithms to protect authentication and future data sent over the connection.
						</p><p>
							After a certain amount of data has been transmitted using a given key and algorithm (the exact amount depends on the SSH implementation), another key exchange occurs, generating another set of hash values and a new shared secret value. Even if an attacker is able to determine the hash and shared secret value, this information is only useful for a limited period of time.
						</p></section><section class="section" id="s2-ssh-protocol-authentication"><div class="titlepage"><div><div><h4 class="title">12.1.4.2.&nbsp;Authentication</h4></div></div></div><p>
							Once the transport layer has constructed a secure tunnel to pass information between the two systems, the server tells the client the different authentication methods supported, such as using a private key-encoded signature or typing a password. The client then tries to authenticate itself to the server using one of these supported methods.
						</p><p>
							SSH servers and clients can be configured to allow different types of authentication, which gives each side the optimal amount of control. The server can decide which encryption methods it supports based on its security model, and the client can choose the order of authentication methods to attempt from the available options.
						</p></section><section class="section" id="s2-ssh-protocol-connection"><div class="titlepage"><div><div><h4 class="title">12.1.4.3.&nbsp;Channels</h4></div></div></div><p>
							After a successful authentication over the SSH transport layer, multiple channels are opened via a technique called <span class="emphasis"><em>multiplexing</em></span><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569350981264" class="footnote"><sup class="footnote" id="idm140569350981264">[1]</sup></a>. Each of these channels handles communication for different terminal sessions and for forwarded X11 sessions.
						</p><p>
							Both clients and servers can create a new channel. Each channel is then assigned a different number on each end of the connection. When the client attempts to open a new channel, the clients sends the channel number along with the request. This information is stored by the server and is used to direct communication to that channel. This is done so that different types of sessions do not affect one another and so that when a given session ends, its channel can be closed without disrupting the primary SSH connection.
						</p><p>
							Channels also support <span class="emphasis"><em>flow-control</em></span>, which allows them to send and receive data in an orderly fashion. In this way, data is not sent over the channel until the client receives a message that the channel is open.
						</p><p>
							The client and server negotiate the characteristics of each channel automatically, depending on the type of service the client requests and the way the user is connected to the network. This allows great flexibility in handling different types of remote connections without having to change the basic infrastructure of the protocol.
						</p></section></section></section><section class="section" id="s1-ssh-configuration"><div class="titlepage"><div><div><h2 class="title">12.2.&nbsp;Configuring OpenSSH</h2></div></div></div><section class="section" id="s2-ssh-configuration-configs"><div class="titlepage"><div><div><h3 class="title">12.2.1.&nbsp;Configuration Files</h3></div></div></div><p>
						There are two different sets of configuration files: those for client programs (that is, <code class="literal command">ssh</code>, <code class="literal command">scp</code>, and <code class="literal command">sftp</code>), and those for the server (the <code class="literal command">sshd</code> daemon).
					</p><p>
						System-wide SSH configuration information is stored in the <code class="literal">/etc/ssh/</code> directory as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-ssh-configuration-configs-system" title="Table 12.1. System-wide configuration files">Table&nbsp;12.1, “System-wide configuration files”</a>. User-specific SSH configuration information is stored in <code class="literal">~/.ssh/</code> within the user’s home directory as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-ssh-configuration-configs-user" title="Table 12.2. User-specific configuration files">Table&nbsp;12.2, “User-specific configuration files”</a>.
					</p><div class="table" id="table-ssh-configuration-configs-system"><p class="title"><strong>Table&nbsp;12.1.&nbsp;System-wide configuration files</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569379270416" scope="col">File</th><th align="left" valign="top" id="idm140569379269328" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/ssh/moduli</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										Contains Diffie-Hellman groups used for the Diffie-Hellman key exchange which is critical for constructing a secure transport layer. When keys are exchanged at the beginning of an SSH session, a shared, secret value is created which cannot be determined by either party alone. This value is then used to provide host authentication.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/ssh/ssh_config</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										The default SSH client configuration file. Note that it is overridden by <code class="literal">~/.ssh/config</code> if it exists.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/ssh/sshd_config</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										The configuration file for the <code class="literal command">sshd</code> daemon.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/ssh/ssh_host_ecdsa_key</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										The ECDSA private key used by the <code class="literal command">sshd</code> daemon.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/ssh/ssh_host_ecdsa_key.pub</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										The ECDSA public key used by the <code class="literal command">sshd</code> daemon.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/ssh/ssh_host_rsa_key</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										The RSA private key used by the <code class="literal command">sshd</code> daemon for version 2 of the SSH protocol.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/ssh/ssh_host_rsa_key.pub</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										The RSA public key used by the <code class="literal command">sshd</code> daemon for version 2 of the SSH protocol.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/pam.d/sshd</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										The PAM configuration file for the <code class="literal command">sshd</code> daemon.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379270416"> <p>
										<code class="literal">/etc/sysconfig/sshd</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379269328"> <p>
										Configuration file for the <code class="literal">sshd</code> service.
									</p>
									 </td></tr></tbody></table></div></div><div class="table" id="table-ssh-configuration-configs-user"><p class="title"><strong>Table&nbsp;12.2.&nbsp;User-specific configuration files</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569378562944" scope="col">File</th><th align="left" valign="top" id="idm140569378561856" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569378562944"> <p>
										<code class="literal">~/.ssh/authorized_keys</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378561856"> <p>
										Holds a list of authorized public keys for servers. When the client connects to a server, the server authenticates the client by checking its signed public key stored within this file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378562944"> <p>
										<code class="literal">~/.ssh/id_ecdsa</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378561856"> <p>
										Contains the ECDSA private key of the user.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378562944"> <p>
										<code class="literal">~/.ssh/id_ecdsa.pub</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378561856"> <p>
										The ECDSA public key of the user.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378562944"> <p>
										<code class="literal">~/.ssh/id_rsa</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378561856"> <p>
										The RSA private key used by <code class="literal command">ssh</code> for version 2 of the SSH protocol.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378562944"> <p>
										<code class="literal">~/.ssh/id_rsa.pub</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378561856"> <p>
										The RSA public key used by <code class="literal command">ssh</code> for version 2 of the SSH protocol.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569378562944"> <p>
										<code class="literal">~/.ssh/known_hosts</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569378561856"> <p>
										Contains host keys of SSH servers accessed by the user. This file is very important for ensuring that the SSH client is connecting to the correct SSH server.
									</p>
									 </td></tr></tbody></table></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							If setting up an SSH server, do not turn off the <code class="literal">Privilege Separation</code> feature by using the <span class="emphasis"><em>UsePrivilegeSeparation no</em></span> directive in the <code class="literal">/etc/ssh/sshd_config</code> file. Turning off <code class="literal">Privilege Separation</code> disables many security features and exposes the server to potential security vulnerabilities and targeted attacks. For more information about <span class="emphasis"><em>UsePrivilegeSeparation</em></span>, see the <code class="literal">sshd_config</code>(5) manual page or the <a class="link" href="https://access.redhat.com/solutions/1354953"> What is the significance of UsePrivilegeSeparation directive in /etc/ssh/sshd_config file and how to test it ?</a> Red Hat Knowledgebase article.
						</p></div></div><p>
						For information concerning various directives that can be used in the SSH configuration files, see the <code class="literal">ssh_config</code>(5) and <code class="literal">sshd_config</code>(5) manual pages.
					</p></section><section class="section" id="s2-ssh-configuration-sshd"><div class="titlepage"><div><div><h3 class="title">12.2.2.&nbsp;Starting an OpenSSH Server</h3></div></div></div><p>
						In order to run an OpenSSH server, you must have the <span class="strong strong"><strong><span class="package package">openssh-server</span></strong></span> package installed. For more information on how to install new packages, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
					</p><p>
						To start the <code class="literal command">sshd</code> daemon in the current session, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl start sshd.service</pre><p>
						To stop the running <code class="literal command">sshd</code> daemon in the current session, use the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl stop sshd.service</pre><p>
						If you want the daemon to start automatically at boot time, type as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl enable sshd.service
Created symlink from /etc/systemd/system/multi-user.target.wants/sshd.service to /usr/lib/systemd/system/sshd.service.</pre><p>
						The <code class="literal command">sshd</code> daemon depends on the <code class="literal">network.target</code> target unit, which is sufficient for static configured network interfaces and for default <code class="literal option">ListenAddress</code> <code class="literal">0.0.0.0</code> options. To specify different addresses in the <code class="literal option">ListenAddress</code> directive and to use a slower dynamic network configuration, add dependency on the <code class="literal">network-online.target</code> target unit to the <code class="literal">sshd.service</code> unit file. To achieve this, create the <code class="literal">/etc/systemd/system/sshd.service.d/local.conf</code> file with the following options:
					</p><pre class="literallayout"> [Unit]
 Wants=<code class="literal">network-online.target</code>
 After=<code class="literal">network-online.target</code></pre><p>
						After this, reload the <code class="literal">systemd</code> manager configuration using the following command:
					</p><pre class="literallayout">~]# systemctl daemon-reload</pre><p>
						For more information on how to manage system services in Red Hat Enterprise Linux, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p><p>
						Note that if you reinstall the system, a new set of identification keys will be created. As a result, clients who had connected to the system with any of the OpenSSH tools before the reinstall will see the following message:
					</p><pre class="literallayout">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@: REMOTE HOST IDENTIFICATION HAS CHANGED!   @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that the RSA host key has just been changed.</pre><p>
						To prevent this, you can backup the relevant files from the <code class="literal">/etc/ssh/</code> directory. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-ssh-configuration-configs-system" title="Table 12.1. System-wide configuration files">Table&nbsp;12.1, “System-wide configuration files”</a> for a complete list, and restore the files whenever you reinstall the system.
					</p></section><section class="section" id="s2-ssh-configuration-requiring"><div class="titlepage"><div><div><h3 class="title">12.2.3.&nbsp;Requiring SSH for Remote Connections</h3></div></div></div><p>
						For SSH to be truly effective, using insecure connection protocols should be prohibited. Otherwise, a user’s password may be protected using SSH for one session, only to be captured later while logging in using Telnet. Some services to disable include <code class="literal command">telnet</code>, <code class="literal command">rsh</code>, <code class="literal command">rlogin</code>, and <code class="literal command">vsftpd</code>.
					</p><p>
						For information on how to configure the <code class="literal">vsftpd</code> service, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-FTP" title="16.2. FTP">Section&nbsp;16.2, “FTP”</a>. To learn how to manage system services in Red Hat Enterprise Linux 7, read <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p></section><section class="section" id="s2-ssh-configuration-keypairs"><div class="titlepage"><div><div><h3 class="title">12.2.4.&nbsp;Using Key-based Authentication</h3></div></div></div><p>
						To improve the system security even further, generate SSH key pairs and then enforce key-based authentication by disabling password authentication. To do so, open the <code class="literal">/etc/ssh/sshd_config</code> configuration file in a text editor such as <span class="strong strong"><strong><span class="application application">vi</span></strong></span> or <span class="strong strong"><strong><span class="application application">nano</span></strong></span>, and change the <code class="literal option">PasswordAuthentication</code> option as follows:
					</p><pre class="literallayout">PasswordAuthentication no</pre><p>
						If you are working on a system other than a new default installation, check that <code class="literal command">PubkeyAuthentication no</code> has <span class="emphasis"><em>not</em></span> been set. If connected remotely, not using console or out-of-band access, testing the key-based log in process before disabling password authentication is advised.
					</p><p>
						To be able to use <code class="literal command">ssh</code>, <code class="literal command">scp</code>, or <code class="literal command">sftp</code> to connect to the server from a client machine, generate an authorization key pair by following the steps below. Note that keys must be generated for each user separately.
					</p><p>
						To use key-based authentication with NFS-mounted home directories, enable the <code class="literal">use_nfs_home_dirs</code> SELinux boolean first:
					</p><pre class="literallayout">~]# setsebool -P use_nfs_home_dirs 1</pre><p>
						Red Hat Enterprise Linux 7 uses SSH Protocol 2 and RSA keys by default (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-versions" title="12.1.3. Protocol Versions">Section&nbsp;12.1.3, “Protocol Versions”</a> for more information).
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							If you complete the steps as <code class="literal">root</code>, only <code class="literal">root</code> will be able to use the keys.
						</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you reinstall your system and want to keep previously generated key pairs, backup the <code class="literal">~/.ssh/</code> directory. After reinstalling, copy it back to your home directory. This process can be done for all users on your system, including <code class="literal">root</code>.
						</p></div></div><section class="section" id="s3-ssh-configuration-keypairs-generating"><div class="titlepage"><div><div><h4 class="title">12.2.4.1.&nbsp;Generating Key Pairs</h4></div></div></div><p>
							To generate an RSA key pair for version 2 of the SSH protocol, follow these steps:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Generate an RSA key pair by typing the following at a shell prompt:
								</p><pre class="literallayout">~]$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/USER/.ssh/id_rsa):</pre></li><li class="listitem">
									Press <span class="keycap"><strong>Enter</strong></span> to confirm the default location, <code class="literal">~/.ssh/id_rsa</code>, for the newly created key.
								</li><li class="listitem"><p class="simpara">
									Enter a passphrase, and confirm it by entering it again when prompted to do so. For security reasons, avoid using the same password as you use to log in to your account.
								</p><p class="simpara">
									After this, you will be presented with a message similar to this:
								</p><pre class="literallayout">Your identification has been saved in /home/USER/.ssh/id_rsa.
Your public key has been saved in /home/USER/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:UNIgIT4wfhdQH/K7yqmjsbZnnyGDKiDviv492U5z78Y USER@penguin.example.com
The key's randomart image is:
+---[RSA 2048]----+
|o ..==o+.    |
|.+ . .=oo    |
| .o. ..o     |
| ... ..    |
|    .S    |
|o .   .    |
|o+ o .o+ ..   |
|+.++=o*.o .E   |
|BBBo+Bo. oo   |
+----[SHA256]-----+</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										To get an MD5 key fingerprint, which was the default fingerprint in previous versions, use the <code class="literal command">ssh-keygen</code> command with the <code class="literal option">-E md5</code> option.
									</p></div></div></li><li class="listitem"><p class="simpara">
									By default, the permissions of the <code class="literal">~/.ssh/</code> directory are set to <code class="literal">rwx------</code> or <code class="literal">700</code> expressed in octal notation. This is to ensure that only the <span class="emphasis"><em>USER</em></span> can view the contents. If required, this can be confirmed with the following command:
								</p><pre class="literallayout">~]$ <code class="literal command">ls -ld ~/.ssh</code>
drwx------. 2 USER USER 54 Nov 25 16:56 /home/USER/.ssh/</pre></li><li class="listitem"><p class="simpara">
									To copy the public key to a remote machine, issue a command in the following format:
								</p><pre class="literallayout"> <code class="literal command">ssh-copy-id <span class="emphasis"><em>user@hostname</em></span></code></pre><p class="simpara">
									This will copy the most recently modified <code class="literal">~/.ssh/id*.pub</code> public key if it is not yet installed. Alternatively, specify the public key’s file name as follows:
								</p><pre class="literallayout">ssh-copy-id -i ~/.ssh/id_rsa.pub user@hostname</pre><p class="simpara">
									This will copy the content of <code class="literal">~/.ssh/id_rsa.pub</code> into the <code class="literal">~/.ssh/authorized_keys</code> file on the machine to which you want to connect. If the file already exists, the keys are appended to its end.
								</p></li></ol></div><p>
							To generate an ECDSA key pair for version 2 of the SSH protocol, follow these steps:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Generate an ECDSA key pair by typing the following at a shell prompt:
								</p><pre class="literallayout">~]$ ssh-keygen -t ecdsa
Generating public/private ecdsa key pair.
Enter file in which to save the key (/home/USER/.ssh/id_ecdsa):</pre></li><li class="listitem">
									Press <span class="keycap"><strong>Enter</strong></span> to confirm the default location, <code class="literal">~/.ssh/id_ecdsa</code>, for the newly created key.
								</li><li class="listitem"><p class="simpara">
									Enter a passphrase, and confirm it by entering it again when prompted to do so. For security reasons, avoid using the same password as you use to log in to your account.
								</p><p class="simpara">
									After this, you will be presented with a message similar to this:
								</p><pre class="literallayout">Your identification has been saved in /home/USER/.ssh/id_ecdsa.
Your public key has been saved in /home/USER/.ssh/id_ecdsa.pub.
The key fingerprint is:
SHA256:8BhZageKrLXM99z5f/AM9aPo/KAUd8ZZFPcPFWqK6+M USER@penguin.example.com
The key's randomart image is:
+---[ECDSA 256]---+
|   . .   +=|
| . . . =   o.o|
| + . * .  o...|
| = . . * . + +..|
|. + . . So o * ..|
|  . o . .+ = ..|
|   o oo ..=. .|
|    ooo...+ |
|    .E++oo  |
+----[SHA256]-----+</pre></li><li class="listitem"><p class="simpara">
									By default, the permissions of the <code class="literal">~/.ssh/</code> directory are set to <code class="literal">rwx------</code> or <code class="literal">700</code> expressed in octal notation. This is to ensure that only the <span class="emphasis"><em>USER</em></span> can view the contents. If required, this can be confirmed with the following command:
								</p><pre class="literallayout">~]$ <code class="literal command">ls -ld ~/.ssh</code>
       ~]$ ls -ld ~/.ssh/
drwx------. 2 USER USER 54 Nov 25 16:56 /home/USER/.ssh/</pre></li><li class="listitem"><p class="simpara">
									To copy the public key to a remote machine, issue a command in the following format:
								</p><pre class="literallayout"><code class="literal command">ssh-copy-id <span class="emphasis"><em>USER@hostname</em></span></code></pre><p class="simpara">
									This will copy the most recently modified <code class="literal">~/.ssh/id*.pub</code> public key if it is not yet installed. Alternatively, specify the public key’s file name as follows:
								</p><pre class="literallayout">ssh-copy-id -i ~/.ssh/id_ecdsa.pub USER@hostname</pre><p class="simpara">
									This will copy the content of <code class="literal">~/.ssh/id_ecdsa.pub</code> into the <code class="literal">~/.ssh/authorized_keys</code> on the machine to which you want to connect. If the file already exists, the keys are appended to its end.
								</p></li></ol></div><p>
							See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-ssh-configuration-keypairs-agent" title="12.2.4.2. Configuring ssh-agent">Section&nbsp;12.2.4.2, “Configuring ssh-agent”</a> for information on how to set up your system to remember the passphrase.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The private key is for your personal use only, and it is important that you never give it to anyone.
							</p></div></div></section><section class="section" id="s3-ssh-configuration-keypairs-agent"><div class="titlepage"><div><div><h4 class="title">12.2.4.2.&nbsp;Configuring ssh-agent</h4></div></div></div><p>
							To store your passphrase so that you do not have to enter it each time you initiate a connection with a remote machine, you can use the <code class="literal command">ssh-agent</code> authentication agent. If you are running GNOME, you can configure it to prompt you for your passphrase whenever you log in and remember it during the whole session. Otherwise you can store the passphrase for a certain shell prompt.
						</p><p>
							To save your passphrase during your GNOME session, follow these steps:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Make sure you have the <span class="strong strong"><strong><span class="package package">openssh-askpass</span></strong></span> package installed. If not, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a> for more information on how to install new packages in Red Hat Enterprise Linux.
								</li><li class="listitem"><p class="simpara">
									Press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">Startup Applications</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">Startup Applications Preferences</span></strong></span> tool appears. The tab containing a list of available startup programs will be shown by default. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the Space bar.
								</p><div class="figure" id="fig-ssh-startup-applications"><p class="title"><strong>Figure&nbsp;12.1.&nbsp;Startup Applications Preferences</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ssh-startup-applications.png" alt="Startup Applications Preferences"></div></div></div></li><li class="listitem"><p class="simpara">
									Click the <span class="guibutton">Add</span> button on the right, and enter <code class="literal">/usr/bin/ssh-add</code> in the <code class="literal">Command</code> field.
								</p><div class="figure" id="fig-ssh-startup-applications-add"><p class="title"><strong>Figure&nbsp;12.2.&nbsp;Adding new application</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ssh-startup-applications-add.png" alt="Adding new application"></div></div></div></li><li class="listitem"><p class="simpara">
									Click <span class="guibutton">Add</span> and make sure the checkbox next to the newly added item is selected.
								</p><div class="figure" id="fig-ssh-startup-applications-check"><p class="title"><strong>Figure&nbsp;12.3.&nbsp;Enabling the application</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ssh-startup-applications-check.png" alt="Enabling the application"></div></div></div></li><li class="listitem"><p class="simpara">
									Log out and then log back in. A dialog box will appear prompting you for your passphrase. From this point on, you should not be prompted for a password by <code class="literal command">ssh</code>, <code class="literal command">scp</code>, or <code class="literal command">sftp</code>.
								</p><div class="figure" id="fig-ssh-passphrase-prompt"><p class="title"><strong>Figure&nbsp;12.4.&nbsp;Entering a passphrase</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ssh-passphrase-prompt.png" alt="Entering a passphrase"></div></div></div></li></ol></div><p>
							To save your passphrase for a certain shell prompt, use the following command:
						</p><pre class="literallayout">~]$ ssh-add
Enter passphrase for /home/USER/.ssh/id_rsa:</pre><p>
							Note that when you log out, your passphrase will be forgotten. You must execute the command each time you log in to a virtual console or a terminal window.
						</p></section></section></section><section class="section" id="s1-ssh-clients"><div class="titlepage"><div><div><h2 class="title">12.3.&nbsp;OpenSSH Clients</h2></div></div></div><p>
					To connect to an OpenSSH server from a client machine, you must have the <span class="strong strong"><strong><span class="package package">openssh-clients</span></strong></span> package installed (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a> for more information on how to install new packages in Red Hat Enterprise Linux).
				</p><section class="section" id="s2-ssh-clients-ssh"><div class="titlepage"><div><div><h3 class="title">12.3.1.&nbsp;Using the ssh Utility</h3></div></div></div><p>
						The <code class="literal command">ssh</code> utility allows you to log in to a remote machine and execute commands there. It is a secure replacement for the <code class="literal command">rlogin</code>, <code class="literal command">rsh</code>, and <code class="literal command">telnet</code> programs.
					</p><p>
						Similarly to the <code class="literal command">telnet</code> command, log in to a remote machine by using the following command:
					</p><pre class="literallayout"><code class="literal command">ssh</code> <span class="emphasis"><em>hostname</em></span></pre><p>
						For example, to log in to a remote machine named <code class="literal">penguin.example.com</code>, type the following at a shell prompt:
					</p><pre class="literallayout">~]$ <code class="literal command">ssh penguin.example.com</code></pre><p>
						This will log you in with the same user name you are using on the local machine. If you want to specify a different user name, use a command in the following form:
					</p><pre class="literallayout"><code class="literal command">ssh</code> <span class="emphasis"><em>username</em></span>@<span class="emphasis"><em>hostname</em></span></pre><p>
						For example, to log in to <code class="literal">penguin.example.com</code> as <code class="literal">USER</code>, type:
					</p><pre class="literallayout">~]$ <code class="literal command">ssh <a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a></code></pre><p>
						The first time you initiate a connection, you will be presented with a message similar to this:
					</p><pre class="literallayout">The authenticity of host 'penguin.example.com' can't be established.
ECDSA key fingerprint is SHA256:vuGKK9dsW34zrZzwjl5g+vOE6EZQvHRQ8zObKYO2mW4.
ECDSA key fingerprint is MD5:7e:15:c3:03:4d:e1:dd:ee:99:dc:3e:f4:b9:67:6b:62.
Are you sure you want to continue connecting (yes/no)?</pre><p>
						Users should always check if the fingerprint is correct before answering the question in this dialog. The user can ask the administrator of the server to confirm the key is correct. This should be done in a secure and previously agreed way. If the user has access to the server’s host keys, the fingerprint can be checked by using the <code class="literal command">ssh-keygen</code> command as follows:
					</p><pre class="literallayout">~]# ssh-keygen -l -f /etc/ssh/ssh_host_ecdsa_key.pub
SHA256:vuGKK9dsW34zrZzwjl5g+vOE6EZQvHRQ8zObKYO2mW4</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To get an MD5 key fingerprint, which was the default fingerprint in previous versions, use the <code class="literal command">ssh-keygen</code> command with the <code class="literal option">-E md5</code> option, for example:
						</p><pre class="literallayout">~]# ssh-keygen -l -f /etc/ssh/ssh_host_ecdsa_key.pub -EM md5
MD5:7e:15:c3:03:4d:e1:dd:ee:99:dc:3e:f4:b9:67:6b:62</pre></div></div><p>
						Type <code class="literal">yes</code> to accept the key and confirm the connection. You will see a notice that the server has been added to the list of known hosts, and a prompt asking for your password:
					</p><pre class="literallayout">Warning: Permanently added 'penguin.example.com' (ECDSA) to the list of known hosts.
USER@penguin.example.com's password:</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							If the SSH server’s host key changes, the client notifies the user that the connection cannot proceed until the server’s host key is deleted from the <code class="literal">~/.ssh/known_hosts</code> file. Before doing this, however, contact the system administrator of the SSH server to verify the server is not compromised.
						</p><p>
							To remove a key from the <code class="literal">~/.ssh/known_hosts</code> file, issue a command as follows:
						</p><pre class="literallayout">~]# ssh-keygen -R <span class="emphasis"><em>penguin.example.com</em></span>
# Host penguin.example.com found: line 15 type ECDSA
/home/USER/.ssh/known_hosts updated.
Original contents retained as /home/USER/.ssh/known_hosts.old</pre></div></div><p>
						After entering the password, you will be provided with a shell prompt for the remote machine.
					</p><p>
						Alternatively, the <code class="literal command">ssh</code> program can be used to execute a command on the remote machine without logging in to a shell prompt:
					</p><pre class="literallayout"><code class="literal command">ssh</code> <span class="emphasis"><em>username</em></span>@<span class="emphasis"><em>hostname</em></span> <span class="emphasis"><em>command</em></span></pre><p>
						For example, the <code class="literal">/etc/redhat-release</code> file provides information about the Red Hat Enterprise Linux version. To view the contents of this file on <code class="literal">penguin.example.com</code>, type:
					</p><pre class="literallayout">~]$ <code class="literal command">ssh <a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a> cat /etc/redhat-release</code>
<a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a>'s password:
Red Hat Enterprise Linux Server release 7.0 (Maipo)</pre><p>
						After you enter the correct password, the user name will be displayed, and you will return to your local shell prompt.
					</p></section><section class="section" id="s2-ssh-clients-scp"><div class="titlepage"><div><div><h3 class="title">12.3.2.&nbsp;Using the <code class="literal command">scp</code> Utility</h3></div></div></div><p>
						<code class="literal command">scp</code> can be used to transfer files between machines over a secure, encrypted connection. In its design, it is very similar to <code class="literal command">rcp</code>.
					</p><p>
						To transfer a local file to a remote system, use a command in the following form:
					</p><pre class="literallayout"><code class="literal command">scp <span class="emphasis"><em>localfile</em></span> <span class="emphasis"><em>username</em></span>@<span class="emphasis"><em>hostname</em></span>:<span class="emphasis"><em>remotefile</em></span></code></pre><p>
						For example, if you want to transfer <code class="literal">taglist.vim</code> to a remote machine named <code class="literal">penguin.example.com</code>, type the following at a shell prompt:
					</p><pre class="literallayout">~]$ <code class="literal command">scp taglist.vim <a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a>:.vim/plugin/taglist.vim</code>
<a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a>'s password:
taglist.vim                  100% 144KB 144.5KB/s  00:00</pre><p>
						Multiple files can be specified at once. To transfer the contents of <code class="literal">.vim/plugin/</code> to the same directory on the remote machine <code class="literal">penguin.example.com</code>, type the following command:
					</p><pre class="literallayout">~]$ scp .vim/plugin/* USER@penguin.example.com:.vim/plugin/
USER@penguin.example.com's password:
closetag.vim                 100%  13KB 12.6KB/s  00:00
snippetsEmu.vim                100%  33KB 33.1KB/s  00:00
taglist.vim                  100% 144KB 144.5KB/s  00:00</pre><p>
						To transfer a remote file to the local system, use the following syntax:
					</p><pre class="literallayout"><code class="literal command">scp <span class="emphasis"><em>username</em></span>@<span class="emphasis"><em>hostname</em></span>:<span class="emphasis"><em>remotefile</em></span> <span class="emphasis"><em>localfile</em></span></code></pre><p>
						For instance, to download the <code class="literal">.vimrc</code> configuration file from the remote machine, type:
					</p><pre class="literallayout">~]$ <code class="literal command">scp <a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a>:.vimrc .vimrc</code>
<a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a>'s password:
.vimrc                    100% 2233   2.2KB/s  00:00</pre></section><section class="section" id="s2-ssh-clients-sftp"><div class="titlepage"><div><div><h3 class="title">12.3.3.&nbsp;Using the <code class="literal command">sftp</code> Utility</h3></div></div></div><p>
						The <code class="literal command">sftp</code> utility can be used to open a secure, interactive FTP session. In its design, it is similar to <code class="literal command">ftp</code> except that it uses a secure, encrypted connection.
					</p><p>
						To connect to a remote system, use a command in the following form:
					</p><pre class="literallayout"><code class="literal command">sftp <span class="emphasis"><em>username</em></span>@<span class="emphasis"><em>hostname</em></span></code></pre><p>
						For example, to log in to a remote machine named <code class="literal">penguin.example.com</code> with <code class="literal">USER</code> as a user name, type:
					</p><pre class="literallayout">~]$ <code class="literal command">sftp <a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a></code>
<a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a>'s password:
Connected to penguin.example.com.
sftp&gt;</pre><p>
						After you enter the correct password, you will be presented with a prompt. The <code class="literal command">sftp</code> utility accepts a set of commands similar to those used by <code class="literal command">ftp</code> (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-ssh-clients-sftp" title="Table 12.3. A selection of available sftp commands">Table&nbsp;12.3, “A selection of available sftp commands”</a>).
					</p><div class="table" id="table-ssh-clients-sftp"><p class="title"><strong>Table&nbsp;12.3.&nbsp;A selection of available sftp commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569379066944" scope="col">Command</th><th align="left" valign="top" id="idm140569379065856" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569379066944"> <p>
										<code class="literal command">ls</code> [<span class="emphasis"><em>directory</em></span>]
									</p>
									 </td><td align="left" valign="top" headers="idm140569379065856"> <p>
										List the content of a remote <span class="emphasis"><em>directory</em></span>. If none is supplied, a current working directory is used by default.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379066944"> <p>
										<code class="literal command">cd</code> <span class="emphasis"><em>directory</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379065856"> <p>
										Change the remote working directory to <span class="emphasis"><em>directory</em></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379066944"> <p>
										<code class="literal command">mkdir</code> <span class="emphasis"><em>directory</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379065856"> <p>
										Create a remote <span class="emphasis"><em>directory</em></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379066944"> <p>
										<code class="literal command">rmdir</code> <span class="emphasis"><em>path</em></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569379065856"> <p>
										Remove a remote <span class="emphasis"><em>directory</em></span>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379066944"> <p>
										<code class="literal command">put</code> <span class="emphasis"><em>localfile</em></span> [<span class="emphasis"><em>remotefile</em></span>]
									</p>
									 </td><td align="left" valign="top" headers="idm140569379065856"> <p>
										Transfer <span class="emphasis"><em>localfile</em></span> to a remote machine.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569379066944"> <p>
										<code class="literal command">get</code> <span class="emphasis"><em>remotefile</em></span> [<span class="emphasis"><em>localfile</em></span>]
									</p>
									 </td><td align="left" valign="top" headers="idm140569379065856"> <p>
										Transfer <span class="emphasis"><em>remotefile</em></span> from a remote machine.
									</p>
									 </td></tr></tbody></table></div></div><p>
						For a complete list of available commands, see the <code class="literal">sftp</code>(1) manual page.
					</p></section></section><section class="section" id="s1-ssh-beyondshell"><div class="titlepage"><div><div><h2 class="title">12.4.&nbsp;More Than a Secure Shell</h2></div></div></div><p>
					A secure command-line interface is just the beginning of the many ways SSH can be used. Given the proper amount of bandwidth, X11 sessions can be directed over an SSH channel. Or, by using TCP/IP forwarding, previously insecure port connections between systems can be mapped to specific SSH channels.
				</p><section class="section" id="s2-ssh-beyondshell-x11"><div class="titlepage"><div><div><h3 class="title">12.4.1.&nbsp;X11 Forwarding</h3></div></div></div><p>
						To open an X11 session over an SSH connection, use a command in the following form:
					</p><pre class="literallayout"><code class="literal command">ssh -Y <span class="emphasis"><em>username</em></span>@<span class="emphasis"><em>hostname</em></span></code></pre><p>
						For example, to log in to a remote machine named <code class="literal">penguin.example.com</code> with <code class="literal">USER</code> as a user name, type:
					</p><pre class="literallayout">~]$ <code class="literal command">ssh -Y <a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a></code>
<a class="link" href="mailto:USER@penguin.example.com">USER@penguin.example.com</a>'s password:</pre><p>
						When an X program is run from the secure shell prompt, the SSH client and server create a new secure channel, and the X program data is sent over that channel to the client machine transparently.
					</p><p>
						Note that the X Window system must be installed on the remote system before X11 forwarding can take place. Enter the following command as <code class="literal">root</code> to install the X11 package group:
					</p><pre class="literallayout">~]# yum group install "X Window System"</pre><p>
						For more information on package groups, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Working_with_Package_Groups" title="9.3. Working with Package Groups">Section&nbsp;9.3, “Working with Package Groups”</a>.
					</p><p>
						X11 forwarding can be very useful. For example, X11 forwarding can be used to create a secure, interactive session of the <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> utility. To do this, connect to the server using <span class="strong strong"><strong><span class="application application">ssh</span></strong></span> and type:
					</p><pre class="literallayout">~]$ <code class="literal command">system-config-printer &amp;</code></pre><p>
						The <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> tool will appear, allowing the remote user to safely configure printing on the remote system.
					</p></section><section class="section" id="s2-ssh-beyondshell-tcpip"><div class="titlepage"><div><div><h3 class="title">12.4.2.&nbsp;Port Forwarding</h3></div></div></div><p>
						SSH can secure otherwise insecure <code class="literal">TCP/IP</code> protocols via port forwarding. When using this technique, the SSH server becomes an encrypted conduit to the SSH client.
					</p><p>
						Port forwarding works by mapping a local port on the client to a remote port on the server. SSH can map any port from the server to any port on the client. Port numbers do not need to match for this technique to work.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Setting up port forwarding to listen on ports below 1024 requires <code class="literal">root</code> level access.
						</p></div></div><p>
						To create a TCP/IP port forwarding channel which listens for connections on the <code class="literal">localhost</code>, use a command in the following form:
					</p><pre class="literallayout"><code class="literal command">ssh -L <span class="emphasis"><em>local-port</em></span>:<span class="emphasis"><em>remote-hostname</em></span>:<span class="emphasis"><em>remote-port</em></span> <span class="emphasis"><em>username</em></span>@<span class="emphasis"><em>hostname</em></span></code></pre><p>
						For example, to check email on a server called <code class="literal">mail.example.com</code> using <code class="literal">POP3</code> through an encrypted connection, use the following command:
					</p><pre class="literallayout">~]$ <code class="literal command">ssh -L 1100:mail.example.com:110 mail.example.com</code></pre><p>
						Once the port forwarding channel is in place between the client machine and the mail server, direct a POP3 mail client to use port <code class="literal">1100</code> on the <code class="literal">localhost</code> to check for new email. Any requests sent to port <code class="literal">1100</code> on the client system will be directed securely to the <code class="literal">mail.example.com</code> server.
					</p><p>
						If <code class="literal">mail.example.com</code> is not running an SSH server, but another machine on the same network is, SSH can still be used to secure part of the connection. However, a slightly different command is necessary:
					</p><pre class="literallayout">~]$ <code class="literal command">ssh -L 1100:mail.example.com:110 other.example.com</code></pre><p>
						In this example, POP3 requests from port <code class="literal">1100</code> on the client machine are forwarded through the SSH connection on port <code class="literal">22</code> to the SSH server, <code class="literal">other.example.com</code>. Then, <code class="literal">other.example.com</code> connects to port <code class="literal">110</code> on <code class="literal">mail.example.com</code> to check for new email. Note that when using this technique, only the connection between the client system and <code class="literal">other.example.com</code> SSH server is secure.
					</p><p>
						The OpenSSH suite also provides local and remote port forwarding of UNIX domain sockets. To forward UNIX domain sockets over the network to another machine, use the <code class="literal command">ssh -L <span class="emphasis"><em>local-socket:remote-socket</em></span> <span class="emphasis"><em>username@hostname</em></span></code> command, for example:
					</p><pre class="literallayout">~]$ <code class="literal command">ssh -L <span class="emphasis"><em>/var/mysql/mysql.sock:/var/mysql/mysql.sock</em></span> <span class="emphasis"><em>username@hostname</em></span></code></pre><p>
						Port forwarding can also be used to get information securely through network firewalls. If the firewall is configured to allow SSH traffic via its standard port (that is, port 22) but blocks access to other ports, a connection between two hosts using the blocked ports is still possible by redirecting their communication over an established SSH connection.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Using port forwarding to forward connections in this manner allows any user on the client system to connect to that service. If the client system becomes compromised, the attacker also has access to forwarded services.
						</p><p>
							System administrators concerned about port forwarding can disable this functionality on the server by specifying a <code class="literal option">No</code> parameter for the <code class="literal option">AllowTcpForwarding</code> line in <code class="literal">/etc/ssh/sshd_config</code> and restarting the <code class="literal command">sshd</code> service.
						</p></div></div></section></section><section class="section" id="sect-OpenSSH-Resources"><div class="titlepage"><div><div><h2 class="title">12.5.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on how to configure or connect to an OpenSSH server on Red Hat Enterprise Linux, see the resources listed below.
				</p><h4 id="brid-OpenSSH-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">sshd</code>(8) — The manual page for the <code class="literal">sshd</code> daemon documents available command line options and provides a complete list of supported configuration files and directories.
						</li><li class="listitem">
							<code class="literal">ssh</code>(1) — The manual page for the <code class="literal command">ssh</code> client application provides a complete list of available command line options and supported configuration files and directories.
						</li><li class="listitem">
							<code class="literal">scp</code>(1) — The manual page for the <code class="literal command">scp</code> utility provides a more detailed description of this utility and its usage.
						</li><li class="listitem">
							<code class="literal">sftp</code>(1) — The manual page for the <code class="literal command">sftp</code> utility.
						</li><li class="listitem">
							<code class="literal">ssh-keygen</code>(1) — The manual page for the <code class="literal command">ssh-keygen</code> utility documents in detail how to use it to generate, manage, and convert authentication keys used by <code class="literal command">ssh</code>.
						</li><li class="listitem">
							<code class="literal">ssh_config</code>(5) — The manual page named <code class="literal">ssh_config</code> documents available SSH client configuration options.
						</li><li class="listitem">
							<code class="literal">sshd_config</code>(5) — The manual page named <code class="literal">sshd_config</code> provides a full description of available SSH daemon configuration options.
						</li></ul></div><h4 id="brid-OpenSSH-Resources-Online">Online Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="http://www.openssh.com/">OpenSSH Home Page</a> — The OpenSSH home page containing further documentation, frequently asked questions, links to the mailing lists, bug reports, and other useful resources.
						</li><li class="listitem">
							<a class="link" href="http://www.openssl.org/">OpenSSL Home Page</a> — The OpenSSL home page containing further documentation, frequently asked questions, links to the mailing lists, and other useful resources.
						</li></ul></div><h4 id="brid-OpenSSH-Resources-Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a> provides more information on systemd and documents how to use the <code class="literal command">systemctl</code> command to manage system services.
						</li></ul></div></section><div class="footnotes"><br><hr width="100" align="left"><div id="ftn.idm140569350981264" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569350981264" class="simpara"><sup class="simpara">[1] </sup></a>
								A multiplexed connection consists of several signals being sent over a shared, common medium. With SSH, different channels are sent over a common secure connection.
							</div></div></div></section><section class="chapter" id="ch-TigerVNC"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;13.&nbsp;TigerVNC</h2></div></div></div><p>
				<code class="literal">TigerVNC</code> (Tiger Virtual Network Computing) is a system for graphical desktop sharing which allows you to remotely control other computers.
			</p><p>
				<code class="literal">TigerVNC</code> works on the client-server principle: a <span class="emphasis"><em>server</em></span> shares its output (<code class="literal">vncserver</code>) and a <span class="emphasis"><em>client</em></span> (<code class="literal">vncviewer</code>) connects to the server.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Unlike in previous Red Hat Enterprise Linux distributions, <code class="literal">TigerVNC</code> in Red Hat Enterprise Linux 7 uses the <code class="literal">systemd</code> system management daemon for its configuration. The <code class="literal">/etc/sysconfig/vncserver</code> configuration file has been replaced by <code class="literal">/etc/systemd/system/vncserver@.service</code>.
				</p></div></div><section class="section" id="sec-vnc-server"><div class="titlepage"><div><div><h2 class="title">13.1.&nbsp;VNC Server</h2></div></div></div><p>
					<code class="literal">vncserver</code> is a utility which starts a VNC (Virtual Network Computing) desktop. It runs <span class="strong strong"><strong><span class="application application">Xvnc</span></strong></span> with appropriate options and starts a window manager on the VNC desktop. <code class="literal">vncserver</code> allows users to run separate sessions in parallel on a machine which can then be accessed by any number of clients from anywhere.
				</p><section class="section" id="sec-vnc-installation"><div class="titlepage"><div><div><h3 class="title">13.1.1.&nbsp;Installing VNC Server</h3></div></div></div><p>
						To install the <span class="strong strong"><strong><span class="application application">TigerVNC</span></strong></span> server, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install tigervnc-server</pre></section><section class="section" id="sec-configuring-vnc-server"><div class="titlepage"><div><div><h3 class="title">13.1.2.&nbsp;Configuring VNC Server</h3></div></div></div><p>
						The VNC server can be configured to start a display for one or more users, provided that accounts for the users exist on the system, with optional parameters such as for display settings, network address and port, and security settings.
					</p><div class="orderedlist" id="proc-configuring-vncserver"><p class="title"><strong>Configuring a VNC Display for a Single User</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								A configuration file named <code class="literal">/etc/systemd/system/vncserver@.service</code> is required. To create this file, copy the <code class="literal">/usr/lib/systemd/system/vncserver@.service</code> file as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# <code class="literal">cp /usr/lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@.service</code></pre><p class="simpara">
								There is no need to include the display number in the file name because <code class="literal">systemd</code> automatically creates the appropriately named instance in memory on demand, replacing <code class="literal">'%i'</code> in the service file by the display number. For a single user it is not necessary to rename the file. For multiple users, a uniquely named service file for each user is required, for example, by adding the user name to the file name in some way. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-configuring-vncserver-2users" title="13.1.2.1. Configuring VNC Server for Two Users">Section&nbsp;13.1.2.1, “Configuring VNC Server for Two Users”</a> for details.
							</p></li><li class="listitem"><p class="simpara">
								Edit <code class="literal">/etc/systemd/system/vncserver@.service</code>, replacing <span class="emphasis"><em>USER</em></span> with the actual user name. Leave the remaining lines of the file unmodified. The <code class="literal option">-geometry</code> argument specifies the size of the VNC desktop to be created; by default, it is set to <code class="literal">1024x768</code>.
							</p><pre class="literallayout">ExecStart=/usr/sbin/runuser -l <span class="emphasis"><em>USER</em></span> -c "/usr/bin/vncserver %i -geometry 1280x1024"
PIDFile=/home/<span class="emphasis"><em>USER</em></span>/.vnc/%H%i.pid</pre></li><li class="listitem">
								Save the changes.
							</li><li class="listitem"><p class="simpara">
								To make the changes take effect immediately, issue the following command:
							</p><pre class="literallayout">~]# <code class="literal">systemctl daemon-reload</code></pre></li><li class="listitem"><p class="simpara">
								Set the password for the user or users defined in the configuration file. Note that you need to switch from <code class="literal">root</code> to <span class="emphasis"><em>USER</em></span> first.
							</p><pre class="literallayout">~]# su - <span class="emphasis"><em>USER</em></span>
~]$ <code class="literal">vncpasswd</code>
Password:
Verify:</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									The stored password is not encrypted; anyone who has access to the password file can find the plain-text password.
								</p></div></div></li></ol></div><p>
						Proceed to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-starting-vncserver" title="13.1.3. Starting VNC Server">Section&nbsp;13.1.3, “Starting VNC Server”</a>.
					</p><section class="section" id="sec-configuring-vncserver-2users"><div class="titlepage"><div><div><h4 class="title">13.1.2.1.&nbsp;Configuring VNC Server for Two Users</h4></div></div></div><p>
							If you want to configure more than one user on the same machine, create different template-type service files, one for each user.
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Create two service files, for example <code class="literal">vncserver-<span class="emphasis"><em>USER_1</em></span>@.service</code> and <code class="literal">vncserver-<span class="emphasis"><em>USER_2</em></span>@.service</code>. In both these files substitute <span class="emphasis"><em>USER</em></span> with the correct user name.
								</li><li class="listitem"><p class="simpara">
									Set passwords for both users:
								</p><pre class="literallayout">~]$ su - USER_1
~]$ <code class="literal">vncpasswd</code>
Password:
Verify:
~]$ su - USER_2
~]$ <code class="literal">vncpasswd</code>
Password:
Verify:</pre></li></ol></div></section></section><section class="section" id="sec-starting-vncserver"><div class="titlepage"><div><div><h3 class="title">13.1.3.&nbsp;Starting VNC Server</h3></div></div></div><p>
						To start or enable the service, specify the display number directly in the command. The file configured above in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#proc-configuring-vncserver" title="Configuring a VNC Display for a Single User">Configuring a VNC Display for a Single User</a> works as a template, in which <code class="literal">%i</code> is substituted with the display number by <code class="literal">systemd</code>. With a valid display number, execute the following command:
					</p><pre class="literallayout">~]# systemctl start vncserver@:display_number.service</pre><p>
						You can also enable the service to start automatically at system start. Then, when you log in, <code class="literal">vncserver</code> is automatically started. As <code class="literal">root</code>, issue a command as follows:
					</p><pre class="literallayout">~]# systemctl enable vncserver@:display_number.service</pre><p>
						At this point, other users are able to use a VNC viewer program to connect to the VNC server using the display number and password defined. Provided a graphical desktop is installed, an instance of that desktop will be displayed. It will not be the same instance as that currently displayed on the target machine.
					</p><section class="section" id="sec-starting-vncserver-2displays"><div class="titlepage"><div><div><h4 class="title">13.1.3.1.&nbsp;Configuring VNC Server for Two Users and Two Different Displays</h4></div></div></div><p>
							For the two configured VNC servers, vncserver-USER_1@.service and vncserver-USER_2@.service, you can enable different display numbers. For example, the following commands will cause a VNC server for USER_1 to start on display 3, and a VNC server for USER_2 to start on display 5:
						</p><pre class="literallayout">~]# systemctl start vncserver-USER_1@:3.service
~]# systemctl start vncserver-USER_2@:5.service</pre></section></section><section class="section" id="vnc-based-on-xinetd"><div class="titlepage"><div><div><h3 class="title">13.1.4.&nbsp;VNC setup based on xinetd with XDMCP for GDM</h3></div></div></div><p>
						VNC setup based on xinetd with X Display Manager Control Protocol (XDMCP) for GDM is a useful setup for client systems that consist mainly of thin clients. After the setup, clients are able to access the GDM login window and log in to any system account. The prerequisite for the setup is that the <span class="strong strong"><strong><span class="package package">gdm</span></strong></span>, <span class="strong strong"><strong><span class="package package">vnc</span></strong></span>, <span class="strong strong"><strong><span class="package package">vnc-server</span></strong></span> &amp; and <span class="strong strong"><strong><span class="package package">xinetd</span></strong></span> packages are installed.
					</p><pre class="literallayout">~]# yum install gdm tigervnc tigervnc-server xinetd</pre><p>
						Service xinetd must be enabled.
					</p><pre class="literallayout">~]# systemctl enable xinetd.service</pre><p>
						System default target unit should be <code class="literal">graphical.target</code>. To get the currently set default target unit, use:
					</p><pre class="literallayout">~]# systemctl get-default</pre><p>
						The default target unit can be changed by using:
					</p><pre class="literallayout">~]# systemctl set-default target_name</pre><div class="orderedlist" id="access-gdm-and-login"><p class="title"><strong>Accessing the GDM login window and logging in</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Set up GDM to enable XDMCP by editing the <code class="literal">/etc/gdm/custom.conf</code> configuration file:
							</p><pre class="literallayout">[xdmcp]
Enable=true</pre></li><li class="listitem"><p class="simpara">
								Create a file called <code class="literal">/etc/xinetd.d/xvncserver</code> with the following content:
							</p><pre class="literallayout">service <span class="emphasis"><em>service_name</em></span>
{
disable = no
protocol = tcp
socket_type = stream
wait = no
user = nobody
server = /usr/bin/Xvnc
server_args = -inetd -query localhost -once -geometry <span class="emphasis"><em>selected_geometry</em></span> -depth <span class="emphasis"><em>selected_depth</em></span> securitytypes=none
}</pre><p class="simpara">
								In the server_args section, the <code class="literal option">-query localhost</code> option will make each Xvnc instance query localhost for an xdmcp session. The <code class="literal option">-depth</code> option specifies the pixel depth (in bits) of the VNC desktop to be created. Acceptable values are 8, 15, 16 and 24 - any other values are likely to cause unpredictable behavior of applications.
							</p></li><li class="listitem"><p class="simpara">
								Edit file <code class="literal">/etc/services</code> to have the service defined. To do this, append the following snippet to the <code class="literal">/etc/services</code> file:
							</p><pre class="literallayout"># VNC xinetd GDM base
<span class="emphasis"><em>service_name</em></span> 5950/tcp</pre></li><li class="listitem"><p class="simpara">
								To ensure that the configuration changes take effect, reboot the machine.
							</p><p class="simpara">
								Alternatively, you can run the following. Change init levels to 3 and back to 5 to force gdm to reload.
							</p><pre class="literallayout"># init 3
# init 5</pre><p class="simpara">
								Verify that gdm is listening on UDP port 177.
							</p><pre class="literallayout"># netstat -anu|grep 177
udp    0   0 0.0.0.0:177         0.0.0.0:*</pre><p class="simpara">
								Restart the xinetd service.
							</p><pre class="literallayout">~]# systemctl restart xinetd.service</pre><p class="simpara">
								Verify that the xinetd service has loaded the new services.
							</p><pre class="literallayout"># netstat -anpt|grep 595
tcp    0   0 :::5950           :::*            LISTEN   3119/xinetd</pre></li><li class="listitem"><p class="simpara">
								Test the setup using a vncviewer command:
							</p><pre class="literallayout"># vncviewer localhost:5950</pre><p class="simpara">
								The command will launch a VNC session to the localhost where no password is asked. You will see a GDM login screen, and you will be able to log in to any user account on the system with a valid user name and password. Then you can run the same test on remote connections.
							</p></li></ol></div><p>
						Configure firewall for the setup. Run the firewall configuration tool and add TCP port 5950 to allow incoming connections to the system.
					</p><pre class="literallayout">~]# firewall-cmd --permanent --zone=public --add-port=5950/tcp
~]# firewall-cmd --reload</pre></section><section class="section" id="sec-terminating-vnc-session"><div class="titlepage"><div><div><h3 class="title">13.1.5.&nbsp;Terminating a VNC Session</h3></div></div></div><p>
						Similarly to enabling the <code class="literal">vncserver</code> service, you can disable the automatic start of the service at system start:
					</p><pre class="literallayout">~]# systemctl disable vncserver@:display_number.service</pre><p>
						Or, when your system is running, you can stop the service by issuing the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl stop vncserver@:display_number.service</pre></section></section><section class="section" id="sec-vnc-sharing-an-existing-desktop"><div class="titlepage"><div><div><h2 class="title">13.2.&nbsp;Sharing an Existing Desktop</h2></div></div></div><p>
					By default a logged in user has a desktop provided by X Server on display <code class="literal">0</code>. A user can share their desktop using the <code class="literal">TigerVNC</code> server <code class="literal">x0vncserver</code>.
				</p><div id="proc-Sharing_an_X_Desktop" class="formalpara"><p class="title"><strong>Sharing an X Desktop</strong></p><p>
						To share the desktop of a logged in user, using the <code class="literal">x0vncserver</code>, proceed as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enter the following command as <code class="literal">root</code>
						</p><pre class="literallayout">~]# yum install tigervnc-server</pre></li><li class="listitem"><p class="simpara">
							Set the <span class="strong strong"><strong>VNC</strong></span> password for the user:
						</p><pre class="literallayout">~]$ <code class="literal command">vncpasswd</code>
Password:
Verify:</pre></li><li class="listitem"><p class="simpara">
							Enter the following command as that user:
						</p><pre class="literallayout">~]$ <code class="literal command">x0vncserver -PasswordFile=.vnc/passwd -AlwaysShared=1</code></pre></li></ol></div><p>
					Provided the firewall is configured to allow connections to port <code class="literal">5900</code>, the remote viewer can now connect to display <code class="literal">0</code>, and view the logged in users desktop. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_the_Firewall_for_VNC" title="13.3.2.1. Configuring the Firewall for VNC">Section&nbsp;13.3.2.1, “Configuring the Firewall for VNC”</a> for information on how to configure the firewall.
				</p></section><section class="section" id="sec-vnc-viewer"><div class="titlepage"><div><div><h2 class="title">13.3.&nbsp;VNC Viewer</h2></div></div></div><p>
					<code class="literal">vncviewer</code> is a program which shows the graphical user interfaces and controls the <code class="literal">vncserver</code> remotely.
				</p><p>
					For operating the <code class="literal">vncviewer</code>, there is a pop-up menu containing entries which perform various actions such as switching in and out of full-screen mode or quitting the viewer. Alternatively, you can operate <code class="literal">vncviewer</code> through the terminal. Enter <code class="literal command">vncviewer -h</code> on the command line to list <code class="literal">vncviewer</code>'s parameters.
				</p><section class="section" id="sec-installing-vncviewer"><div class="titlepage"><div><div><h3 class="title">13.3.1.&nbsp;Installing VNC Viewer</h3></div></div></div><p>
						To install the <span class="strong strong"><strong><span class="application application">TigerVNC</span></strong></span> client, <code class="literal command">vncviewer</code>, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install tigervnc</pre></section><section class="section" id="sec-connecting-vnc-server"><div class="titlepage"><div><div><h3 class="title">13.3.2.&nbsp;Connecting to VNC Server</h3></div></div></div><p>
						Once the VNC server is configured, you can connect to it from any VNC viewer.
					</p><div class="orderedlist" id="proc-connecting-to-vncserver_GUI"><p class="title"><strong>Connecting to a VNC Server Using a GUI</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Enter the <code class="literal command">vncviewer</code> command with no arguments, the <code class="literal">VNC Viewer: Connection Details</code> utility appears. It prompts for a <span class="strong strong"><strong>VNC</strong></span> server to connect to.
							</li><li class="listitem"><p class="simpara">
								If required, to prevent disconnecting any existing VNC connections to the same display, select the option to allow sharing of the desktop as follows:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Select the <span class="guibutton">Options</span> button.
									</li><li class="listitem">
										Select the <code class="literal">Misc.</code> tab.
									</li><li class="listitem">
										Select the <code class="literal">Shared</code> button.
									</li><li class="listitem">
										Press <span class="keycap"><strong>OK</strong></span> to return to the main menu.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Enter an address and display number to connect to:
							</p><pre class="literallayout"><span class="emphasis"><em>address</em></span>:<span class="emphasis"><em>display_number</em></span></pre></li><li class="listitem">
								Press <span class="keycap"><strong>Connect</strong></span> to connect to the VNC server display.
							</li><li class="listitem"><p class="simpara">
								You will be prompted to enter the VNC password. This will be the VNC password for the user corresponding to the display number unless a global default VNC password was set.
							</p><p class="simpara">
								A window appears showing the VNC server desktop. Note that this is not the desktop the normal user sees, it is an Xvnc desktop.
							</p></li></ol></div><div class="orderedlist" id="proc-connecting-to-vncserver-CLI"><p class="title"><strong>Connecting to a VNC Server Using the CLI</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Enter the <code class="literal command">viewer</code> command with the address and display number as arguments:
							</p><pre class="literallayout">vncviewer <span class="emphasis"><em>address</em></span>:<span class="emphasis"><em>display_number</em></span></pre><p class="simpara">
								Where <span class="emphasis"><em>address</em></span> is an <code class="literal">IP</code> address or host name.
							</p></li><li class="listitem">
								Authenticate yourself by entering the VNC password. This will be the VNC password for the user corresponding to the display number unless a global default VNC password was set.
							</li><li class="listitem">
								A window appears showing the VNC server desktop. Note that this is not the desktop the normal user sees, it is the Xvnc desktop.
							</li></ol></div><section class="section" id="sec-Configuring_the_Firewall_for_VNC"><div class="titlepage"><div><div><h4 class="title">13.3.2.1.&nbsp;Configuring the Firewall for VNC</h4></div></div></div><p>
							When using a non-encrypted connection, <code class="literal">firewalld</code> might block the connection. To allow <code class="literal">firewalld</code> to pass the VNC packets, you can open specific ports to <code class="literal">TCP</code> traffic. When using the <code class="literal option">-via</code> option, traffic is redirected over <code class="literal">SSH</code> which is enabled by default in <code class="literal">firewalld</code>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The default port of VNC server is 5900. To reach the port through which a remote desktop will be accessible, sum the default port and the user’s assigned display number. For example, for the second display: 2 + 5900 = 5902.
							</p></div></div><p>
							For displays <code class="literal">0</code> to <code class="literal">3</code>, make use of <code class="literal">firewalld</code>'s support for the VNC service by means of the <code class="literal option">service</code> option as described below. Note that for display numbers greater than <code class="literal">3</code>, the corresponding ports will have to be opened specifically as explained in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#proc-Opening-Ports_in_firewalld" title="Opening Ports in firewalld">Opening Ports in firewalld</a>.
						</p><div class="orderedlist" id="proc-Enabling_VNC_Service_in_firewalld"><p class="title"><strong>Enabling VNC Service in firewalld</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Run the following command to see the information concerning <code class="literal">firewalld</code> settings:
								</p><pre class="literallayout"><code class="literal command">~]$ firewall-cmd --list-all</code></pre></li><li class="listitem"><p class="simpara">
									To allow all VNC connections from a specific address, use a command as follows:
								</p><pre class="literallayout">~]# firewall-cmd --add-rich-rule='rule family="ipv4" source address="192.168.122.116" service name=vnc-server accept'
success</pre><p class="simpara">
									Note that these changes will not persist after the next system start. To make permanent changes to the firewall, repeat the commands adding the <code class="literal option">--permanent</code> option. See the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a> for more information on the use of firewall rich language commands.
								</p></li><li class="listitem"><p class="simpara">
									To verify the above settings, use a command as follows:
								</p><pre class="literallayout">~]# firewall-cmd --list-all
public (default, active)
 interfaces: bond0 bond0.192
 sources:
 services: dhcpv6-client ssh
 ports:
 masquerade: no
 forward-ports:
 icmp-blocks:
 rich rules:
	rule family="ipv4" source address="192.168.122.116" service name="vnc-server" accept</pre></li></ol></div><p>
							To open a specific port or range of ports make use of the <code class="literal option">--add-port</code> option to the <code class="literal command">firewall-cmd</code> command Line tool. For example, VNC display <code class="literal">4</code> requires port <code class="literal">5904</code> to be opened for <code class="literal">TCP</code> traffic.
						</p><div class="orderedlist" id="proc-Opening-Ports_in_firewalld"><p class="title"><strong>Opening Ports in firewalld</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									To open a port for <code class="literal">TCP</code> traffic in the public zone, issue a command as <code class="literal">root</code> as follows:
								</p><pre class="literallayout">~]# firewall-cmd --zone=public --add-port=5904/tcp
success</pre></li><li class="listitem"><p class="simpara">
									To view the ports that are currently open for the public zone, issue a command as follows:
								</p><pre class="literallayout">~]# firewall-cmd --zone=public --list-ports
5904/tcp</pre></li></ol></div><p>
							A port can be removed using the <code class="literal command">firewall-cmd --zone=<span class="emphasis"><em>zone</em></span> --remove-port=<span class="emphasis"><em>number/protocol</em></span></code> command.
						</p><p>
							Note that these changes will not persist after the next system start. To make permanent changes to the firewall, repeat the commands adding the <code class="literal option">--permanent</code> option. For more information on opening and closing ports in <code class="literal">firewalld</code>, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a>.
						</p></section></section><section class="section" id="sec-using_ssh"><div class="titlepage"><div><div><h3 class="title">13.3.3.&nbsp;Connecting to VNC Server Using SSH</h3></div></div></div><p>
						<span class="strong strong"><strong>VNC</strong></span> is a clear text network protocol with no security against possible attacks on the communication. To make the communication secure, you can encrypt your server-client connection by using the <code class="literal option">-via</code> option. This will create an <code class="literal">SSH</code> tunnel between the VNC server and the client.
					</p><p>
						The format of the command to encrypt a VNC server-client connection is as follows:
					</p><pre class="literallayout">vncviewer -via <span class="emphasis"><em>user</em></span>@<span class="emphasis"><em>host</em></span>:<span class="emphasis"><em>display_number</em></span></pre><div class="example" id="ex-Using-the_via_Option"><p class="title"><strong>Example&nbsp;13.1.&nbsp;Using the -via Option</strong></p><div class="example-contents"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									To connect to a VNC server using <code class="literal">SSH</code>, enter a command as follows:
								</p><pre class="literallayout">~]$ vncviewer -via USER_2@192.168.2.101:3</pre></li><li class="listitem">
									When you are prompted to, type the password, and confirm by pressing <span class="keycap"><strong>Enter</strong></span>.
								</li><li class="listitem">
									A window with a remote desktop appears on your screen.
								</li></ol></div></div></div><h5 id="bh-Restricting_VNC_access">Restricting VNC Access</h5><p>
						If you prefer only encrypted connections, you can prevent unencrypted connections altogether by using the <code class="literal option">-localhost</code> option in the <code class="literal">systemd.service</code> file, the ExecStart line:
					</p><pre class="literallayout">ExecStart=/usr/sbin/runuser -l <span class="emphasis"><em>user</em></span> -c "/usr/bin/vncserver -localhost %i"</pre><p>
						This will stop <code class="literal">vncserver</code> from accepting connections from anything but the local host and port-forwarded connections sent using <code class="literal">SSH</code> as a result of the <code class="literal option">-via</code> option.
					</p><p>
						For more information on using <code class="literal">SSH</code>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-OpenSSH" title="Chapter 12. OpenSSH">Chapter&nbsp;12, <em>OpenSSH</em></a>.
					</p></section></section><section class="section" id="sec-TigerVNC-Additional_Resources"><div class="titlepage"><div><div><h2 class="title">13.4.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information about TigerVNC, see the resources listed below.
				</p><h4 id="brid-TigerVNC-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">vncserver(1)</code> — The manual page for the <span class="strong strong"><strong>VNC</strong></span> server utility.
						</li><li class="listitem">
							<code class="literal">vncviewer(1)</code> — The manual page for the <span class="strong strong"><strong>VNC</strong></span> viewer.
						</li><li class="listitem">
							<code class="literal">vncpasswd(1)</code> — The manual page for the <span class="strong strong"><strong>VNC</strong></span> password command.
						</li><li class="listitem">
							<code class="literal">Xvnc(1)</code> — The manual page for the <span class="strong strong"><strong>Xvnc</strong></span> server configuration options.
						</li><li class="listitem">
							<code class="literal">x0vncserver(1)</code> — The manual page for the <code class="literal">TigerVNC</code> server for sharing existing X servers.
						</li></ul></div></section></section></div><div class="part" id="part-Servers"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;V.&nbsp;Servers</h1></div></div></div><div class="partintro" id="idm140569380297200"><div><!--Empty--></div><p>
				This part discusses various topics related to servers such as how to set up a web server or share files and directories over a network.
			</p></div><section class="chapter" id="ch-Web_Servers"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;14.&nbsp;Web Servers</h2></div></div></div><p>
				A <span class="emphasis"><em>web server</em></span> is a network service that serves content to a client over the web. This typically means web pages, but any other documents can be served as well. Web servers are also known as HTTP servers, as they use the <span class="emphasis"><em>hypertext transport protocol</em></span> (<span class="strong strong"><strong>HTTP</strong></span>).
			</p><p>
				The web servers available in Red Hat Enterprise Linux 7 are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Apache HTTP Server
					</li><li class="listitem">
						nginx
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Note that the nginx web server is available only as a Software Collection for Red Hat Enterprise Linux 7. See the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_software_collections/">Red Hat Software Collections</a> Release Notes for information regarding getting access to nginx, usage of Software Collections, and other.
				</p></div></div><section class="section" id="s1-The_Apache_HTTP_Server"><div class="titlepage"><div><div><h2 class="title">14.1.&nbsp;The Apache HTTP Server</h2></div></div></div><p>
					This section focuses on the <span class="strong strong"><strong><span class="application application">Apache HTTP Server 2.4</span></strong></span>, <code class="literal">httpd</code>, an open source web server developed by the <a class="link" href="http://www.apache.org/">Apache Software Foundation</a>.
				</p><p>
					If you are upgrading from a previous release of Red Hat Enterprise Linux, you will need to update the <code class="literal">httpd</code> service configuration accordingly. This section reviews some of the newly added features, outlines important changes between Apache HTTP Server 2.4 and version 2.2, and guides you through the update of older configuration files.
				</p><section class="section" id="s2-apache-version2-changes"><div class="titlepage"><div><div><h3 class="title">14.1.1.&nbsp;Notable Changes</h3></div></div></div><p>
						The Apache HTTP Server in Red Hat Enterprise Linux 7 has the following changes compared to Red Hat Enterprise Linux 6:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">httpd Service Control</span></dt><dd><p class="simpara">
									With the migration away from SysV init scripts, server administrators should switch to using the <code class="literal command">apachectl</code> and <code class="literal command">systemctl</code> commands to control the service, in place of the <code class="literal command">service</code> command. The following examples are specific to the <code class="literal">httpd</code> service.
								</p><p class="simpara">
									The command:
								</p><pre class="literallayout">service httpd graceful</pre><p class="simpara">
									is replaced by
								</p><pre class="literallayout">apachectl graceful</pre><p class="simpara">
									The <code class="literal">systemd</code> unit file for <code class="literal">httpd</code> has different behavior from the init script as follows:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											A graceful restart is used by default when the service is reloaded.
										</li><li class="listitem"><p class="simpara">
											A graceful stop is used by default when the service is stopped.
										</p><p class="simpara">
											The command:
										</p><pre class="literallayout">service httpd configtest</pre><p class="simpara">
											is replaced by
										</p><pre class="literallayout">apachectl configtest</pre></li></ul></div></dd><dt><span class="term">Private /tmp</span></dt><dd>
									To enhance system security, the <code class="literal">systemd</code> unit file runs the <code class="literal">httpd</code> daemon using a private <code class="literal">/tmp</code> directory, separate to the system <code class="literal">/tmp</code> directory.
								</dd><dt><span class="term">Configuration Layout</span></dt><dd><p class="simpara">
									Configuration files which load modules are now placed in the <code class="literal">/etc/httpd/conf.modules.d/</code> directory. Packages that provide additional loadable modules for <code class="literal">httpd</code>, such as <span class="strong strong"><strong><span class="package package">php</span></strong></span>, will place a file in this directory. An <code class="literal command">Include</code> directive before the main section of the <code class="literal">/etc/httpd/conf/httpd.conf</code> file is used to include files within the <code class="literal">/etc/httpd/conf.modules.d/</code> directory. This means any configuration files within <code class="literal">conf.modules.d/</code> are processed before the main body of <code class="literal">httpd.conf</code>. An <code class="literal command">IncludeOptional</code> directive for files within the <code class="literal">/etc/httpd/conf.d/</code> directory is placed at the end of the <code class="literal">httpd.conf</code> file. This means the files within <code class="literal">/etc/httpd/conf.d/</code> are now processed after the main body of <code class="literal">httpd.conf</code>.
								</p><p class="simpara">
									Some additional configuration files are provided by the <span class="strong strong"><strong><span class="package package">httpd</span></strong></span> package itself:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">/etc/httpd/conf.d/autoindex.conf</code> — This configures mod_autoindex directory indexing.
										</li><li class="listitem">
											<code class="literal">/etc/httpd/conf.d/userdir.conf</code> — This configures access to user directories, for example, <code class="literal"><a class="link" href="http://example.com/~username/">http://example.com/~username/</a></code>; such access is disabled by default for security reasons.
										</li><li class="listitem">
											<code class="literal">/etc/httpd/conf.d/welcome.conf</code> — As in previous releases, this configures the welcome page displayed for <code class="literal"><a class="link" href="http://localhost/">http://localhost/</a></code> when no content is present.
										</li></ul></div></dd><dt><span class="term">Default Configuration</span></dt><dd>
									A minimal <code class="literal">httpd.conf</code> file is now provided by default. Many common configuration settings, such as <code class="literal">Timeout</code> or <code class="literal">KeepAlive</code> are no longer explicitly configured in the default configuration; hard-coded settings will be used instead, by default. The hard-coded default settings for all configuration directives are specified in the manual. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh-The_Apache_HTTP_Server-Installable_Documentation" title="Installable Documentation">the section called “Installable Documentation”</a> for more information.
								</dd><dt><span class="term">Incompatible Syntax Changes</span></dt><dd>
									If migrating an existing configuration from <span class="strong strong"><strong><span class="application application">httpd 2.2</span></strong></span> to <span class="strong strong"><strong><span class="application application">httpd 2.4</span></strong></span>, a number of backwards-incompatible changes to the <code class="literal">httpd</code> configuration syntax were made which will require changes. See the following Apache document for more information on upgrading <a class="link" href="http://httpd.apache.org/docs/2.4/upgrading.html">http://httpd.apache.org/docs/2.4/upgrading.html</a>
								</dd><dt><span class="term">Processing Model</span></dt><dd><p class="simpara">
									In previous releases of Red Hat Enterprise Linux, different <span class="emphasis"><em>multi-processing models</em></span> (<span class="strong strong"><strong>MPM</strong></span>) were made available as different <code class="literal">httpd</code> binaries: the forked model, "prefork", as <code class="literal">/usr/sbin/httpd</code>, and the thread-based model "worker" as <code class="literal">/usr/sbin/httpd.worker</code>.
								</p><p class="simpara">
									In Red Hat Enterprise Linux 7, only a single <code class="literal">httpd</code> binary is used, and three MPMs are available as loadable modules: worker, prefork (default), and event. Edit the configuration file <code class="literal">/etc/httpd/conf.modules.d/00-mpm.conf</code> as required, by adding and removing the comment character <code class="literal">#</code> so that only one of the three MPM modules is loaded.
								</p></dd><dt><span class="term">Packaging Changes</span></dt><dd><p class="simpara">
									The LDAP authentication and authorization modules are now provided in a separate sub-package, <span class="strong strong"><strong><span class="package package">mod_ldap</span></strong></span>. The new module <span class="strong strong"><strong><span class="application application">mod_session</span></strong></span> and associated helper modules are provided in a new sub-package, <span class="strong strong"><strong><span class="package package">mod_session</span></strong></span>. The new modules <span class="strong strong"><strong><span class="application application">mod_proxy_html</span></strong></span> and <span class="strong strong"><strong><span class="application application">mod_xml2enc</span></strong></span> are provided in a new sub-package, <span class="strong strong"><strong><span class="package package">mod_proxy_html</span></strong></span>. These packages are all in the Optional channel.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Before subscribing to the Optional and Supplementary channels see the <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail/">Scope of Coverage Details</a>. If you decide to install packages from these channels, follow the steps documented in the article called <a class="link" href="https://access.redhat.com/solutions/392003">How to access Optional and Supplementary channels, and -devel packages using Red Hat Subscription Manager (RHSM)?</a> on the Red Hat Customer Portal.
									</p></div></div></dd><dt><span class="term">Packaging Filesystem Layout</span></dt><dd><p class="simpara">
									The <code class="literal">/var/cache/mod_proxy/</code> directory is no longer provided; instead, the <code class="literal">/var/cache/httpd/</code> directory is packaged with a <code class="literal">proxy</code> and <code class="literal">ssl</code> subdirectory.
								</p><p class="simpara">
									Packaged content provided with <code class="literal">httpd</code> has been moved from <code class="literal">/var/www/</code> to <code class="literal">/usr/share/httpd/</code>:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">/usr/share/httpd/icons/</code> — The directory containing a set of icons used with directory indices, previously contained in <code class="literal">/var/www/icons/</code>, has moved to <code class="literal">/usr/share/httpd/icons/</code>. Available at <code class="literal"><a class="link" href="http://localhost/icons/">http://localhost/icons/</a></code> in the default configuration; the location and the availability of the icons is configurable in the <code class="literal">/etc/httpd/conf.d/autoindex.conf</code> file.
										</li><li class="listitem">
											<code class="literal">/usr/share/httpd/manual/</code> — The <code class="literal">/var/www/manual/</code> has moved to <code class="literal">/usr/share/httpd/manual/</code>. This directory, contained in the <span class="strong strong"><strong><span class="package package">httpd-manual</span></strong></span> package, contains the HTML version of the manual for <code class="literal">httpd</code>. Available at <code class="literal"><a class="link" href="http://localhost/manual/">http://localhost/manual/</a></code> if the package is installed, the location and the availability of the manual is configurable in the <code class="literal">/etc/httpd/conf.d/manual.conf</code> file.
										</li><li class="listitem">
											<code class="literal">/usr/share/httpd/error/</code> — The <code class="literal">/var/www/error/</code> has moved to <code class="literal">/usr/share/httpd/error/</code>. Custom multi-language HTTP error pages. Not configured by default, the example configuration file is provided at <code class="literal">/usr/share/doc/httpd-<span class="emphasis"><em>VERSION</em></span>/httpd-multilang-errordoc.conf</code>.
										</li></ul></div></dd><dt><span class="term">Authentication, Authorization and Access Control</span></dt><dd>
									The configuration directives used to control authentication, authorization and access control have changed significantly. Existing configuration files using the <code class="literal">Order</code>, <code class="literal">Deny</code> and <code class="literal">Allow</code> directives should be adapted to use the new <code class="literal">Require</code> syntax. See the following Apache document for more information <a class="link" href="http://httpd.apache.org/docs/2.4/howto/auth.html">http://httpd.apache.org/docs/2.4/howto/auth.html</a>
								</dd><dt><span class="term">suexec</span></dt><dd>
									To improve system security, the <span class="strong strong"><strong><span class="application application">suexec</span></strong></span> binary is no longer installed as if by the <code class="literal">root</code> user; instead, it has file system capability bits set which allow a more restrictive set of permissions. In conjunction with this change, the <span class="strong strong"><strong><span class="application application">suexec</span></strong></span> binary no longer uses the <code class="literal">/var/log/httpd/suexec.log</code> logfile. Instead, log messages are sent to <span class="strong strong"><strong><span class="application application">syslog</span></strong></span>; by default these will appear in the <code class="literal">/var/log/secure</code> log file.
								</dd><dt><span class="term">Module Interface</span></dt><dd><p class="simpara">
									Third-party binary modules built against <span class="strong strong"><strong><span class="application application">httpd 2.2</span></strong></span> are not compatible with <span class="strong strong"><strong><span class="application application">httpd 2.4</span></strong></span> due to changes to the <code class="literal">httpd</code> module interface. Such modules will need to be adjusted as necessary for the <span class="strong strong"><strong><span class="application application">httpd 2.4</span></strong></span> module interface, and then rebuilt. A detailed list of the API changes in version <code class="literal">2.4</code> is available here: <a class="link" href="http://httpd.apache.org/docs/2.4/developer/new_api_2_4.html">http://httpd.apache.org/docs/2.4/developer/new_api_2_4.html</a>.
								</p><p class="simpara">
									The <span class="strong strong"><strong><span class="application application">apxs</span></strong></span> binary used to build modules from source has moved from <code class="literal">/usr/sbin/apxs</code> to <code class="literal">/usr/bin/apxs</code>.
								</p></dd><dt><span class="term">Removed modules</span></dt><dd><p class="simpara">
									List of <code class="literal">httpd</code> modules removed in Red Hat Enterprise Linux 7:
								</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">mod_auth_mysql, mod_auth_pgsql</span></dt><dd>
												<span class="strong strong"><strong><span class="application application">httpd 2.4</span></strong></span> provides SQL database authentication support internally in the <span class="strong strong"><strong><span class="application application">mod_authn_dbd</span></strong></span> module.
											</dd><dt><span class="term">mod_perl</span></dt><dd>
												<span class="strong strong"><strong><span class="application application">mod_perl</span></strong></span> is not officially supported with <span class="strong strong"><strong><span class="application application">httpd 2.4</span></strong></span> by upstream.
											</dd><dt><span class="term">mod_authz_ldap</span></dt><dd>
												<span class="strong strong"><strong><span class="application application">httpd 2.4</span></strong></span> provides LDAP support in sub-package <span class="strong strong"><strong><span class="package package">mod_ldap</span></strong></span> using <span class="strong strong"><strong><span class="application application">mod_authnz_ldap</span></strong></span>.
											</dd></dl></div></dd></dl></div></section><section class="section" id="s2-apache-version2-migrating"><div class="titlepage"><div><div><h3 class="title">14.1.2.&nbsp;Updating the Configuration</h3></div></div></div><p>
						To update the configuration files from the Apache HTTP Server version 2.2, take the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Make sure all module names are correct, since they may have changed. Adjust the <code class="literal option">LoadModule</code> directive for each module that has been renamed.
							</li><li class="listitem">
								Recompile all third party modules before attempting to load them. This typically means authentication and authorization modules.
							</li><li class="listitem">
								If you use the <code class="literal">mod_userdir</code> module, make sure the <code class="literal option">UserDir</code> directive indicating a directory name (typically <code class="literal">public_html</code>) is provided.
							</li><li class="listitem">
								If you use the Apache HTTP Secure Server, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-apache-mod_ssl-enabling" title="14.1.8. Enabling the mod_ssl Module">Section&nbsp;14.1.8, “Enabling the mod_ssl Module”</a> for important information on enabling the Secure Sockets Layer (SSL) protocol.
							</li></ol></div><p>
						Note that you can check the configuration for possible errors by using the following command:
					</p><pre class="literallayout">~]# apachectl configtest
Syntax OK</pre><p>
						For more information on upgrading the Apache HTTP Server configuration from version 2.2 to 2.4, see <a class="link" href="http://httpd.apache.org/docs/2.4/upgrading.html">http://httpd.apache.org/docs/2.4/upgrading.html</a>.
					</p></section><section class="section" id="s2-apache-running"><div class="titlepage"><div><div><h3 class="title">14.1.3.&nbsp;Running the httpd Service</h3></div></div></div><p>
						This section describes how to start, stop, restart, and check the current status of the Apache HTTP Server. To be able to use the <code class="literal">httpd</code> service, make sure you have the <span class="strong strong"><strong><span class="package package">httpd</span></strong></span> installed. You can do so by using the following command:
					</p><pre class="literallayout">~]# yum install httpd</pre><p>
						For more information on the concept of targets and how to manage system services in Red Hat Enterprise Linux in general, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p><section class="section" id="s3-apache-running-starting"><div class="titlepage"><div><div><h4 class="title">14.1.3.1.&nbsp;Starting the Service</h4></div></div></div><p>
							To run the <code class="literal">httpd</code> service, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl start httpd.service</pre><p>
							If you want the service to start automatically at boot time, use the following command:
						</p><pre class="literallayout">~]# systemctl enable httpd.service
Created symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If running the Apache HTTP Server as a secure server, a password may be required after the machine boots if using an encrypted private SSL key.
							</p></div></div></section><section class="section" id="s3-apache-running-stopping"><div class="titlepage"><div><div><h4 class="title">14.1.3.2.&nbsp;Stopping the Service</h4></div></div></div><p>
							To stop the running <code class="literal">httpd</code> service, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl stop httpd.service</pre><p>
							To prevent the service from starting automatically at boot time, type:
						</p><pre class="literallayout">~]# systemctl disable httpd.service
Removed symlink /etc/systemd/system/multi-user.target.wants/httpd.service.</pre></section><section class="section" id="s3-apache-running-restarting"><div class="titlepage"><div><div><h4 class="title">14.1.3.3.&nbsp;Restarting the Service</h4></div></div></div><p>
							There are three different ways to restart a running <code class="literal">httpd</code> service:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									To restart the service completely, enter the following command as <code class="literal">root</code>:
								</p><pre class="literallayout">~]# systemctl restart httpd.service</pre><p class="simpara">
									This stops the running <code class="literal">httpd</code> service and immediately starts it again. Use this command after installing or removing a dynamically loaded module such as PHP.
								</p></li><li class="listitem"><p class="simpara">
									To only reload the configuration, as <code class="literal">root</code>, type:
								</p><pre class="literallayout">~]# systemctl reload httpd.service</pre><p class="simpara">
									This causes the running <code class="literal">httpd</code> service to reload its configuration file. Any requests currently being processed will be interrupted, which may cause a client browser to display an error message or render a partial page.
								</p></li><li class="listitem"><p class="simpara">
									To reload the configuration without affecting active requests, enter the following command as <code class="literal">root</code>:
								</p><pre class="literallayout">~]# apachectl graceful</pre><p class="simpara">
									This causes the running <code class="literal">httpd</code> service to reload its configuration file. Any requests currently being processed will continue to use the old configuration.
								</p></li></ol></div><p>
							For more information on how to manage system services in Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
						</p></section><section class="section" id="s3-apache-running-status"><div class="titlepage"><div><div><h4 class="title">14.1.3.4.&nbsp;Verifying the Service Status</h4></div></div></div><p>
							To verify that the <code class="literal">httpd</code> service is running, type the following at a shell prompt:
						</p><pre class="literallayout">~]# systemctl is-active httpd.service
active</pre></section></section><section class="section" id="s2-apache-editing"><div class="titlepage"><div><div><h3 class="title">14.1.4.&nbsp;Editing the Configuration Files</h3></div></div></div><p>
						When the <code class="literal">httpd</code> service is started, by default, it reads the configuration from locations that are listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-apache-editing-files" title="Table 14.1. The httpd service configuration files">Table&nbsp;14.1, “The httpd service configuration files”</a>.
					</p><div class="table" id="table-apache-editing-files"><p class="title"><strong>Table&nbsp;14.1.&nbsp;The httpd service configuration files</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569347560384" scope="col">Path</th><th align="left" valign="top" id="idm140569347559296" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569347560384"> <p>
										<code class="literal">/etc/httpd/conf/httpd.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569347559296"> <p>
										The main configuration file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569347560384"> <p>
										<code class="literal">/etc/httpd/conf.d/</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569347559296"> <p>
										An auxiliary directory for configuration files that are included in the main configuration file.
									</p>
									 </td></tr></tbody></table></div></div><p>
						Although the default configuration should be suitable for most situations, it is a good idea to become at least familiar with some of the more important configuration options. Note that for any changes to take effect, the web server has to be restarted first. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a> for more information on how to restart the <code class="literal">httpd</code> service.
					</p><p>
						To check the configuration for possible errors, type the following at a shell prompt:
					</p><pre class="literallayout">~]# apachectl configtest
Syntax OK</pre><p>
						To make the recovery from mistakes easier, it is recommended that you make a copy of the original file before editing it.
					</p></section><section class="section" id="s2-apache-dso"><div class="titlepage"><div><div><h3 class="title">14.1.5.&nbsp;Working with Modules</h3></div></div></div><p>
						Being a modular application, the <code class="literal">httpd</code> service is distributed along with a number of <span class="emphasis"><em>Dynamic Shared Objects</em></span> (<span class="strong strong"><strong>DSO</strong></span>s), which can be dynamically loaded or unloaded at runtime as necessary. On Red Hat Enterprise Linux 7, these modules are located in <code class="literal">/usr/lib64/httpd/modules/</code>.
					</p><section class="section" id="s3-apache-dso-loading"><div class="titlepage"><div><div><h4 class="title">14.1.5.1.&nbsp;Loading a Module</h4></div></div></div><p>
							To load a particular DSO module, use the <code class="literal option">LoadModule</code> directive. Note that modules provided by a separate package often have their own configuration file in the <code class="literal">/etc/httpd/conf.d/</code> directory.
						</p><div class="example" id="example-apache-dso-loading"><p class="title"><strong>Example&nbsp;14.1.&nbsp;Loading the mod_ssl DSO</strong></p><div class="example-contents"><pre class="literallayout">LoadModule ssl_module modules/mod_ssl.so</pre></div></div><p>
							Once you are finished, restart the web server to reload the configuration. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a> for more information on how to restart the <code class="literal">httpd</code> service.
						</p></section><section class="section" id="s3-apache-dso-writing"><div class="titlepage"><div><div><h4 class="title">14.1.5.2.&nbsp;Writing a Module</h4></div></div></div><p>
							If you intend to create a new DSO module, make sure you have the <span class="strong strong"><strong><span class="package package">httpd-devel</span></strong></span> package installed. To do so, enter the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# yum install httpd-devel</pre><p>
							This package contains the include files, the header files, and the <span class="strong strong"><strong><span class="application application">APache eXtenSion</span></strong></span> (<code class="literal command">apxs</code>) utility required to compile a module.
						</p><p>
							Once written, you can build the module with the following command:
						</p><pre class="literallayout">~]# apxs -i -a -c module_name.c</pre><p>
							If the build was successful, you should be able to load the module the same way as any other module that is distributed with the Apache HTTP Server.
						</p></section></section><section class="section" id="s2-apache-virtualhosts"><div class="titlepage"><div><div><h3 class="title">14.1.6.&nbsp;Setting Up Virtual Hosts</h3></div></div></div><p>
						The Apache HTTP Server’s built in virtual hosting allows the server to provide different information based on which IP address, host name, or port is being requested.
					</p><p>
						To create a name-based virtual host, copy the example configuration file <code class="literal">/usr/share/doc/httpd-<span class="emphasis"><em>VERSION</em></span>/httpd-vhosts.conf</code> into the <code class="literal">/etc/httpd/conf.d/</code> directory, and replace the <code class="literal">@@Port@@</code> and <code class="literal">@@ServerRoot@@</code> placeholder values. Customize the options according to your requirements as shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#example-apache-virtualhosts-config" title="Example 14.2. Example virtual host configuration">Example&nbsp;14.2, “Example virtual host configuration”</a>.
					</p><div class="example" id="example-apache-virtualhosts-config"><p class="title"><strong>Example&nbsp;14.2.&nbsp;Example virtual host configuration</strong></p><div class="example-contents"><pre class="literallayout">&lt;VirtualHost *:80&gt;
  ServerAdmin webmaster@penguin.example.com
  DocumentRoot "/www/docs/penguin.example.com"
  ServerName penguin.example.com
  ServerAlias www.penguin.example.com
  ErrorLog "/var/log/httpd/dummy-host.example.com-error_log"
  CustomLog "/var/log/httpd/dummy-host.example.com-access_log" common
&lt;/VirtualHost&gt;</pre></div></div><p>
						Note that <code class="literal option">ServerName</code> must be a valid DNS name assigned to the machine. The <code class="literal option">&lt;VirtualHost&gt;</code> container is highly customizable, and accepts most of the directives available within the main server configuration. Directives that are <span class="emphasis"><em>not</em></span> supported within this container include <code class="literal option">User</code> and <code class="literal option">Group</code>, which were replaced by <code class="literal option">SuexecUserGroup</code>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you configure a virtual host to listen on a non-default port, make sure you update the <code class="literal option">Listen</code> directive in the global settings section of the <code class="literal">/etc/httpd/conf/httpd.conf</code> file accordingly.
						</p></div></div><p>
						To activate a newly created virtual host, the web server has to be restarted first. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a> for more information on how to restart the <code class="literal">httpd</code> service.
					</p></section><section class="section" id="s2-apache-mod_ssl"><div class="titlepage"><div><div><h3 class="title">14.1.7.&nbsp;Setting Up an SSL Server</h3></div></div></div><p>
						<span class="emphasis"><em>Secure Sockets Layer</em></span> (<span class="strong strong"><strong>SSL</strong></span>) is a cryptographic protocol that allows a server and a client to communicate securely. Along with its extended and improved version called <span class="emphasis"><em>Transport Layer Security</em></span> (<span class="strong strong"><strong>TLS</strong></span>), it ensures both privacy and data integrity. The Apache HTTP Server in combination with <code class="literal">mod_ssl</code>, a module that uses the OpenSSL toolkit to provide the SSL/TLS support, is commonly referred to as the <span class="emphasis"><em>SSL server</em></span>. Red Hat Enterprise Linux also supports the use of Mozilla NSS as the TLS implementation. Support for Mozilla NSS is provided by the <code class="literal">mod_nss</code> module.
					</p><p>
						Unlike an HTTP connection that can be read and possibly modified by anybody who is able to intercept it, the use of SSL/TLS over HTTP, referred to as HTTPS, prevents any inspection or modification of the transmitted content. This section provides basic information on how to enable this module in the Apache HTTP Server configuration, and guides you through the process of generating private keys and self-signed certificates.
					</p><section class="section" id="s3-apache-mod_ssl-certificates"><div class="titlepage"><div><div><h4 class="title">14.1.7.1.&nbsp;An Overview of Certificates and Security</h4></div></div></div><p>
							Secure communication is based on the use of keys. In conventional or <span class="emphasis"><em>symmetric cryptography</em></span>, both ends of the transaction have the same key they can use to decode each other’s transmissions. On the other hand, in public or <span class="emphasis"><em>asymmetric cryptography</em></span>, two keys co-exist: a <span class="emphasis"><em>private key</em></span> that is kept a secret, and a <span class="emphasis"><em>public key</em></span> that is usually shared with the public. While the data encoded with the public key can only be decoded with the private key, data encoded with the private key can in turn only be decoded with the public key.
						</p><p>
							To provide secure communications using SSL, an SSL server must use a digital certificate signed by a <span class="emphasis"><em>Certificate Authority</em></span> (<span class="strong strong"><strong>CA</strong></span>). The certificate lists various attributes of the server (that is, the server host name, the name of the company, its location, etc.), and the signature produced using the CA’s private key. This signature ensures that a particular certificate authority has signed the certificate, and that the certificate has not been modified in any way.
						</p><p>
							When a web browser establishes a new SSL connection, it checks the certificate provided by the web server. If the certificate does not have a signature from a trusted CA, or if the host name listed in the certificate does not match the host name used to establish the connection, it refuses to communicate with the server and usually presents a user with an appropriate error message.
						</p><p>
							By default, most web browsers are configured to trust a set of widely used certificate authorities. Because of this, an appropriate CA should be chosen when setting up a secure server, so that target users can trust the connection, otherwise they will be presented with an error message, and will have to accept the certificate manually. Since encouraging users to override certificate errors can allow an attacker to intercept the connection, you should use a trusted CA whenever possible. For more information on this, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-apache-mod_ssl-certificates-authorities" title="Table 14.2. Information about CA lists used by common web browsers">Table&nbsp;14.2, “Information about CA lists used by common web browsers”</a>.
						</p><div class="table" id="table-apache-mod_ssl-certificates-authorities"><p class="title"><strong>Table&nbsp;14.2.&nbsp;Information about CA lists used by common web browsers</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569349380608" scope="col">Web Browser</th><th align="left" valign="top" id="idm140569349379520" scope="col">Link</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569349380608"> <p>
											<span class="strong strong"><strong><span class="application application">Mozilla Firefox</span></strong></span>
										</p>
										 </td><td align="left" valign="top" headers="idm140569349379520"> <p>
											<a class="link" href="http://www.mozilla.org/projects/security/certs/included/">Mozilla root CA list</a>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569349380608"> <p>
											<span class="strong strong"><strong><span class="application application">Opera</span></strong></span>
										</p>
										 </td><td align="left" valign="top" headers="idm140569349379520"> <p>
											<a class="link" href="http://www.opera.com/docs/ca/">Information on root certificates used by Opera</a>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569349380608"> <p>
											<span class="strong strong"><strong><span class="application application">Internet Explorer</span></strong></span>
										</p>
										 </td><td align="left" valign="top" headers="idm140569349379520"> <p>
											<a class="link" href="http://support.microsoft.com/kb/931125">Information on root certificates used by Microsoft Windows</a>.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569349380608"> <p>
											<span class="strong strong"><strong><span class="application application">Chromium</span></strong></span>
										</p>
										 </td><td align="left" valign="top" headers="idm140569349379520"> <p>
											<a class="link" href="http://www.chromium.org/Home/chromium-security/root-ca-policy">Information on root certificates used by the Chromium project</a>.
										</p>
										 </td></tr></tbody></table></div></div><p>
							When setting up an SSL server, you need to generate a certificate request and a private key, and then send the certificate request, proof of the company’s identity, and payment to a certificate authority. Once the CA verifies the certificate request and your identity, it will send you a signed certificate you can use with your server. Alternatively, you can create a self-signed certificate that does not contain a CA signature, and thus should be used for testing purposes only.
						</p></section></section><section class="section" id="s2-apache-mod_ssl-enabling"><div class="titlepage"><div><div><h3 class="title">14.1.8.&nbsp;Enabling the mod_ssl Module</h3></div></div></div><p>
						If you intend to set up an SSL or HTTPS server using <code class="literal">mod_ssl</code>, you <span class="emphasis"><em>cannot</em></span> have the another application or module, such as <code class="literal">mod_nss</code> configured to use the same port. Port <code class="literal">443</code> is the default port for HTTPS.
					</p><p>
						To set up an SSL server using the <code class="literal">mod_ssl</code> module and the OpenSSL toolkit, install the <span class="strong strong"><strong><span class="package package">mod_ssl</span></strong></span> and <span class="strong strong"><strong><span class="package package">openssl</span></strong></span> packages. Enter the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install mod_ssl openssl</pre><p>
						This will create the <code class="literal">mod_ssl</code> configuration file at <code class="literal">/etc/httpd/conf.d/ssl.conf</code>, which is included in the main Apache HTTP Server configuration file by default. For the module to be loaded, restart the <code class="literal">httpd</code> service as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a>.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Due to the vulnerability described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a></span></em></span>, Red Hat recommends disabling <code class="literal">SSL</code> and using only <code class="literal">TLSv1.1</code> or <code class="literal">TLSv1.2</code>. Backwards compatibility can be achieved using <code class="literal">TLSv1.0</code>. Many products Red Hat supports have the ability to use <code class="literal">SSLv2</code> or <code class="literal">SSLv3</code> protocols, or enable them by default. However, the use of <code class="literal">SSLv2</code> or <code class="literal">SSLv3</code> is now strongly recommended against.
						</p></div></div><section class="section" id="s3-apache-Enabling_and_Disabling_SSL_and_TLS_in_mod_ssl"><div class="titlepage"><div><div><h4 class="title">14.1.8.1.&nbsp;Enabling and Disabling SSL and TLS in mod_ssl</h4></div></div></div><p>
							To disable and enable specific versions of the SSL and TLS protocol, either do it globally by adding the <code class="literal command">SSLProtocol</code> directive in the "<span class="marked marked"># SSL Global Context" section of the configuration file and removing it everywhere else, or edit the default entry under "</span> SSL Protocol support" in all "VirtualHost" sections. If you do not specify it in the per-domain VirtualHost section then it will inherit the settings from the global section. To make sure that a protocol version is being disabled the administrator should either <span class="emphasis"><em>only</em></span> specify <code class="literal command">SSLProtocol</code> in the "SSL Global Context" section, or specify it in <span class="emphasis"><em>all</em></span> per-domain VirtualHost sections.
						</p><div id="proc-Disable_SSLv2_and_SSLv3" class="formalpara"><p class="title"><strong>Disable SSLv2 and SSLv3</strong></p><p>
								To disable SSL version 2 and SSL version 3, which implies enabling everything except SSL version 2 and SSL version 3, in all VirtualHost sections, proceed as follows:
							</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									As <code class="literal">root</code>, open the <code class="literal">/etc/httpd/conf.d/ssl.conf</code> file and search for <span class="emphasis"><em>all</em></span> instances of the <code class="literal command">SSLProtocol</code> directive. By default, the configuration file contains one section that looks as follows:
								</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/ssl.conf
#  SSL Protocol support:
# List the enable protocol levels with which clients will be able to
# connect. Disable SSLv2 access by default:
SSLProtocol all -SSLv2</pre><p class="simpara">
									This section is within the VirtualHost section.
								</p></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal command">SSLProtocol</code> line as follows:
								</p><pre class="literallayout">#  SSL Protocol support:
# List the enable protocol levels with which clients will be able to
# connect. Disable SSLv2 access by default:
SSLProtocol all -SSLv2 -SSLv3</pre><p class="simpara">
									Repeat this action for all VirtualHost sections. Save and close the file.
								</p></li><li class="listitem"><p class="simpara">
									Verify that all occurrences of the <code class="literal command">SSLProtocol</code> directive have been changed as follows:
								</p><pre class="literallayout">~]# grep SSLProtocol /etc/httpd/conf.d/ssl.conf
<span class="emphasis"><em>SSLProtocol</em></span> all -SSLv2 -SSLv3</pre><p class="simpara">
									This step is particularly important if you have more than the one default VirtualHost section.
								</p></li><li class="listitem"><p class="simpara">
									Restart the Apache daemon as follows:
								</p><pre class="literallayout">~]# systemctl restart httpd</pre><p class="simpara">
									Note that any sessions will be interrupted.
								</p></li></ol></div><div id="proc-Disable_All_SSL_and_TLS_Except_TLS1_and_Up" class="formalpara"><p class="title"><strong>Disable All SSL and TLS Protocols Except TLS 1 and Up</strong></p><p>
								To disable all SSL and TLS protocol versions except TLS version 1 and higher, proceed as follows:
							</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									As <code class="literal">root</code>, open the <code class="literal">/etc/httpd/conf.d/ssl.conf</code> file and search for <span class="emphasis"><em>all</em></span> instances of <code class="literal command">SSLProtocol</code> directive. By default the file contains one section that looks as follows:
								</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/ssl.conf
#  SSL Protocol support:
# List the enable protocol levels with which clients will be able to
# connect. Disable SSLv2 access by default:
SSLProtocol all -SSLv2</pre></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal command">SSLProtocol</code> line as follows:
								</p><pre class="literallayout">#  SSL Protocol support:
# List the enable protocol levels with which clients will be able to
# connect. Disable SSLv2 access by default:
SSLProtocol -all +TLSv1 +TLSv1.1 +TLSv1.2</pre><p class="simpara">
									Save and close the file.
								</p></li><li class="listitem"><p class="simpara">
									Verify the change as follows:
								</p><pre class="literallayout">~]# grep SSLProtocol /etc/httpd/conf.d/ssl.conf
<span class="emphasis"><em>SSLProtocol</em></span> -all +TLSv1 +TLSv1.1 +TLSv1.2</pre></li><li class="listitem"><p class="simpara">
									Restart the Apache daemon as follows:
								</p><pre class="literallayout">~]# systemctl restart httpd</pre><p class="simpara">
									Note that any sessions will be interrupted.
								</p></li></ol></div><div id="proc-Testing_the_Status_of_SSL_and_TLS_Protocols" class="formalpara"><p class="title"><strong>Testing the Status of SSL and TLS Protocols</strong></p><p>
								To check which versions of SSL and TLS are enabled or disabled, make use of the <code class="literal command">openssl s_client -connect</code> command. The command has the following form:
							</p></div><pre class="literallayout">openssl s_client -connect <span class="emphasis"><em>hostname</em></span>:<span class="emphasis"><em>port</em></span> -<span class="emphasis"><em>protocol</em></span></pre><p>
							Where <span class="emphasis"><em>port</em></span> is the port to test and <span class="emphasis"><em>protocol</em></span> is the protocol version to test for. To test the SSL server running locally, use <code class="literal">localhost</code> as the host name. For example, to test the default port for secure HTTPS connections, port <code class="literal">443</code> to see if SSLv3 is enabled, issue a command as follows:
						</p><pre class="literallayout">~]# openssl s_client -connect localhost:443 -ssl3
CONNECTED(00000003)
139809943877536:error:14094410:SSL routines:SSL3_READ_BYTES:<span class="emphasis"><em>sslv3 alert handshake failure</em></span>:s3_pkt.c:1257:SSL alert number 40
139809943877536:error:1409E0E5:SSL routines:SSL3_WRITE_BYTES:<span class="emphasis"><em>ssl handshake failure</em></span>:s3_pkt.c:596:
<span class="emphasis"><em>output omitted</em></span>
New, (NONE), <span class="emphasis"><em>Cipher is (NONE)</em></span>
Secure Renegotiation IS NOT supported
Compression: NONE
Expansion: NONE
SSL-Session:
  Protocol : SSLv3
<span class="emphasis"><em>output truncated</em></span></pre><p>
							+ The above output indicates that the handshake failed and therefore no cipher was negotiated.
						</p><pre class="literallayout">~]$ openssl s_client -connect localhost:443 -tls1_2
CONNECTED(00000003)
depth=0 C = --, ST = SomeState, L = SomeCity, O = SomeOrganization, OU = SomeOrganizationalUnit, CN = localhost.localdomain, emailAddress = root@localhost.localdomain
<span class="emphasis"><em>output omitted</em></span>
New, TLSv1/SSLv3, <span class="emphasis"><em>Cipher is ECDHE-RSA-AES256-GCM-SHA384</em></span>
Server public key is 2048 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
  Protocol : TLSv1.2
<span class="emphasis"><em>output truncated</em></span></pre><p>
							+ The above output indicates that no failure of the handshake occurred and a set of ciphers was negotiated.
						</p><p>
							The <code class="literal command">openssl s_client</code> command options are documented in the <code class="literal">s_client(1)</code> manual page.
						</p><p>
							For more information on the SSLv3 vulnerability and how to test for it, see the Red Hat Knowledgebase article <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a></span></em></span>.
						</p></section></section><section class="section" id="s2-apache-mod_nss-enabling"><div class="titlepage"><div><div><h3 class="title">14.1.9.&nbsp;Enabling the mod_nss Module</h3></div></div></div><p>
						If you intend to set up an HTTPS server using <code class="literal">mod_nss</code>, you <span class="emphasis"><em>cannot</em></span> have the <span class="strong strong"><strong><span class="package package">mod_ssl</span></strong></span> package installed with its default settings as <code class="literal">mod_ssl</code> will use port <code class="literal">443</code> by default, however this is the default HTTPS port. If at all possible, remove the package.
					</p><p>
						To remove <span class="strong strong"><strong><span class="package package">mod_ssl</span></strong></span>, enter the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum remove mod_ssl</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If <code class="literal">mod_ssl</code> is required for other purposes, modify the <code class="literal">/etc/httpd/conf.d/ssl.conf</code> file to use a port other than <code class="literal">443</code> to prevent <code class="literal">mod_ssl</code> conflicting with <code class="literal">mod_nss</code> when its port to listen on is changed to <code class="literal">443</code>.
						</p><p>
							Only one module can own a port, therefore <code class="literal">mod_nss</code> and <code class="literal">mod_ssl</code> can only co-exist at the same time if they use unique ports. For this reason <code class="literal">mod_nss</code> by default uses <code class="literal">8443</code>, but the default port for HTTPS is port <code class="literal">443</code>. The port is specified by the <code class="literal command">Listen</code> directive as well as in the VirtualHost name or address.
						</p></div></div><p>
						Everything in NSS is associated with a "token". The software token exists in the NSS database but you can also have a physical token containing certificates. With OpenSSL, discrete certificates and private keys are held in PEM files. With NSS, these are stored in a database. Each certificate and key is associated with a token and each token can have a password protecting it. This password is optional, but if a password is used then the Apache HTTP server needs a copy of it in order to open the database without user intervention at system start.
					</p><div class="orderedlist" id="proc-Configuring_mod_nss"><p class="title"><strong>Configuring mod_nss</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Install <span class="strong strong"><strong><span class="package package">mod_nss</span></strong></span> as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# yum install mod_nss</pre><p class="simpara">
								This will create the <code class="literal">mod_nss</code> configuration file at <code class="literal">/etc/httpd/conf.d/nss.conf</code>. The <code class="literal">/etc/httpd/conf.d/</code> directory is included in the main Apache HTTP Server configuration file by default. For the module to be loaded, restart the <code class="literal">httpd</code> service as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a>.
							</p></li><li class="listitem"><p class="simpara">
								As <code class="literal">root</code>, open the <code class="literal">/etc/httpd/conf.d/nss.conf</code> file and search for <span class="emphasis"><em>all</em></span> instances of the <code class="literal command">Listen</code> directive.
							</p><p class="simpara">
								Edit the <code class="literal command">Listen 8443</code> line as follows:
							</p><pre class="literallayout">Listen 443</pre><p class="simpara">
								Port <code class="literal">443</code> is the default port for <code class="literal">HTTPS</code>.
							</p></li><li class="listitem"><p class="simpara">
								Edit the default <code class="literal command">VirtualHost <span class="emphasis"><em>default</em></span>:8443</code> line as follows:
							</p><pre class="literallayout">VirtualHost <span class="emphasis"><em>default</em></span>:443</pre><p class="simpara">
								Edit any other non-default virtual host sections if they exist. Save and close the file.
							</p></li><li class="listitem"><p class="simpara">
								Mozilla NSS stores certificates in a <span class="emphasis"><em>server certificate database</em></span> indicated by the <code class="literal command">NSSCertificateDatabase</code> directive in the <code class="literal">/etc/httpd/conf.d/nss.conf</code> file. By default the path is set to <code class="literal">/etc/httpd/alias</code>, the NSS database created during installation.
							</p><p class="simpara">
								To view the default NSS database, issue a command as follows:
							</p><pre class="literallayout">~]# certutil -L -d /etc/httpd/alias

Certificate Nickname                     Trust Attributes
                               SSL,S/MIME,JAR/XPI

cacert                            CTu,Cu,Cu
Server-Cert                         u,u,u
alpha                            u,pu,u</pre><p class="simpara">
								In the above command output, <code class="literal">Server-Cert</code> is the default <code class="literal command">NSSNickname</code>. The <code class="literal option">-L</code> option lists all the certificates, or displays information about a named certificate, in a certificate database. The <code class="literal option">-d</code> option specifies the database directory containing the certificate and key database files. See the <code class="literal">certutil(1)</code> man page for more command line options.
							</p></li><li class="listitem"><p class="simpara">
								To configure <span class="strong strong"><strong><span class="package package">mod_nss</span></strong></span> to use another database, edit the <code class="literal command">NSSCertificateDatabase</code> line in the <code class="literal">/etc/httpd/conf.d/nss.conf</code> file. The default file has the following lines within the VirtualHost section.
							</p><pre class="literallayout">#  Server Certificate Database:
#  The NSS security database directory that holds the certificates and
#  keys. The database consists of 3 files: cert8.db, key3.db and secmod.db.
#  Provide the directory that these files exist.
NSSCertificateDatabase /etc/httpd/alias</pre><p class="simpara">
								In the above command output, <code class="literal">alias</code> is the default NSS database directory, <code class="literal">/etc/httpd/alias/</code>.
							</p></li><li class="listitem"><p class="simpara">
								To apply a password to the default NSS certificate database, use the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# certutil -W -d /etc/httpd/alias
Enter Password or Pin for "NSS Certificate DB":
Enter a password which will be used to encrypt your keys.
The password should be at least 8 characters long,
and should contain at least one non-alphabetic character.

Enter new password:
Re-enter password:
Password changed successfully.</pre></li><li class="listitem"><p class="simpara">
								Before deploying the HTTPS server, create a new certificate database using a certificate signed by a certificate authority (CA).
							</p><div class="example" id="ex-Adding_a_Certificate_to_the_Mozilla_NSS-database"><p class="title"><strong>Example&nbsp;14.3.&nbsp;Adding a Certificate to the Mozilla NSS database</strong></p><div class="example-contents"><p>
									The <code class="literal command">certutil</code> command is used to add a CA certificate to the NSS database files:
								</p><pre class="literallayout">certutil -d <code class="literal">/etc/httpd/nss-db-directory/</code> -A -n "<span class="emphasis"><em>CA_certificate</em></span>" -t <code class="literal">CT,,</code> -a -i <code class="literal">certificate.pem</code></pre><p>
									The above command adds a CA certificate stored in a PEM-formatted file named <span class="emphasis"><em>certificate.pem</em></span>. The <code class="literal option">-d</code> option specifies the NSS database directory containing the certificate and key database files, the <code class="literal option">-n</code> option sets a name for the certificate, <code class="literal option">-t</code> <code class="literal">CT,,</code> means that the certificate is trusted to be used in TLS clients and servers. The <code class="literal option">-A</code> option adds an existing certificate to a certificate database. If the database does not exist it will be created. The <code class="literal option">-a</code> option allows the use of ASCII format for input or output, and the <code class="literal option">-i</code> option passes the <code class="literal">certificate.pem</code> input file to the command.
								</p><p>
									See the <code class="literal">certutil(1)</code> man page for more command line options.
								</p></div></div></li><li class="listitem"><p class="simpara">
								The NSS database should be password protected to safeguard the private key.
							</p><div class="example" id="ex-Setting_a_Password_for_a_Mozilla_NSS-database"><p class="title"><strong>Example&nbsp;14.4.&nbsp;Setting a Password for a Mozilla NSS database</strong></p><div class="example-contents"><p>
									The <code class="literal command">certutil</code> tool can be used set a password for an NSS database as follows:
								</p><pre class="literallayout">certutil -W -d /etc/httpd/<span class="emphasis"><em>nss-db-directory</em></span>/</pre><p>
									For example, for the default database, issue a command as <code class="literal">root</code> as follows:
								</p><pre class="literallayout">~]# certutil -W -d /etc/httpd/alias
Enter Password or Pin for "NSS Certificate DB":
Enter a password which will be used to encrypt your keys.
The password should be at least 8 characters long,
and should contain at least one non-alphabetic character.

Enter new password:
Re-enter password:
Password changed successfully.</pre></div></div></li><li class="listitem"><p class="simpara">
								Configure <code class="literal">mod_nss</code> to use the NSS internal software token by changing the line with the <code class="literal command">NSSPassPhraseDialog</code> directive as follows:
							</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/nss.conf
NSSPassPhraseDialog file:/etc/httpd/password.conf</pre><p class="simpara">
								This is to avoid manual password entry on system start. The software token exists in the NSS database but you can also have a physical token containing your certificates.
							</p></li><li class="listitem"><p class="simpara">
								If the SSL Server Certificate contained in the NSS database is an RSA certificate, make certain that the <code class="literal command">NSSNickname</code> parameter is uncommented and matches the nickname displayed in step 4 above:
							</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/nss.conf
NSSNickname Server-Cert</pre><p class="simpara">
								If the SSL Server Certificate contained in the NSS database is an ECC certificate, make certain that the <code class="literal command">NSSECCNickname</code> parameter is uncommented and matches the nickname displayed in step 4 above:
							</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/nss.conf
NSSECCNickname Server-Cert</pre><p class="simpara">
								Make certain that the <code class="literal command">NSSCertificateDatabase</code> parameter is uncommented and points to the NSS database directory displayed in step 4 or configured in step 5 above:
							</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/nss.conf
NSSCertificateDatabase /etc/httpd/alias</pre><p class="simpara">
								Replace <code class="literal">/etc/httpd/alias</code> with the path to the certificate database to be used.
							</p></li><li class="listitem"><p class="simpara">
								Create the <code class="literal">/etc/httpd/password.conf</code> file as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# vi /etc/httpd/password.conf</pre><p class="simpara">
								Add a line with the following form:
							</p><pre class="literallayout">internal:<span class="emphasis"><em>password</em></span></pre><p class="simpara">
								Replacing <span class="emphasis"><em>password</em></span> with the password that was applied to the NSS security databases in step 6 above.
							</p></li><li class="listitem"><p class="simpara">
								Apply the appropriate ownership and permissions to the <code class="literal">/etc/httpd/password.conf</code> file:
							</p><pre class="literallayout">~]# chgrp apache /etc/httpd/password.conf
~]# chmod 640 /etc/httpd/password.conf
~]# ls -l /etc/httpd/password.conf
-rw-r-----. 1 root apache 10 Dec 4 17:13 /etc/httpd/password.conf</pre></li><li class="listitem"><p class="simpara">
								To configure <code class="literal">mod_nss</code> to use the NSS the software token in <code class="literal">/etc/httpd/password.conf</code>, edit <code class="literal">/etc/httpd/conf.d/nss.conf</code> as follows:
							</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/nss.conf</pre></li><li class="listitem">
								Restart the Apache server for the changes to take effect as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a>
							</li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Due to the vulnerability described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a></span></em></span>, Red Hat recommends disabling <code class="literal">SSL</code> and using only <code class="literal">TLSv1.1</code> or <code class="literal">TLSv1.2</code>. Backwards compatibility can be achieved using <code class="literal">TLSv1.0</code>. Many products Red Hat supports have the ability to use <code class="literal">SSLv2</code> or <code class="literal">SSLv3</code> protocols, or enable them by default. However, the use of <code class="literal">SSLv2</code> or <code class="literal">SSLv3</code> is now strongly recommended against.
						</p></div></div><section class="section" id="s3-apache-Enabling_and_Disabling_SSL_and_TLS_in_mod_nss"><div class="titlepage"><div><div><h4 class="title">14.1.9.1.&nbsp;Enabling and Disabling SSL and TLS in mod_nss</h4></div></div></div><p>
							To disable and enable specific versions of the SSL and TLS protocol, either do it globally by adding the <code class="literal command">NSSProtocol</code> directive in the "<span class="marked marked"># SSL Global Context" section of the configuration file and removing it everywhere else, or edit the default entry under "</span> SSL Protocol" in all "VirtualHost" sections. If you do not specify it in the per-domain VirtualHost section then it will inherit the settings from the global section. To make sure that a protocol version is being disabled the administrator should either <span class="emphasis"><em>only</em></span> specify <code class="literal command">NSSProtocol</code> in the "SSL Global Context" section, or specify it in <span class="emphasis"><em>all</em></span> per-domain VirtualHost sections.
						</p><div id="proc-Disable_All_SSL_and_TLS_Except_TLS1_and_Up_in_mod_nss" class="formalpara"><p class="title"><strong>Disable All SSL and TLS Protocols Except TLS 1 and Up in mod_nss</strong></p><p>
								To disable all SSL and TLS protocol versions except TLS version 1 and higher, proceed as follows:
							</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									As <code class="literal">root</code>, open the <code class="literal">/etc/httpd/conf.d/nss.conf</code> file and search for <span class="emphasis"><em>all</em></span> instances of the <code class="literal command">NSSProtocol</code> directive. By default, the configuration file contains one section that looks as follows:
								</p><pre class="literallayout">~]# vi /etc/httpd/conf.d/nss.conf
#  SSL Protocol:
<span class="emphasis"><em>output omitted</em></span>
#  Since all protocol ranges are completely inclusive, and no protocol in the
#  middle of a range may be excluded, the entry "NSSProtocol SSLv3,TLSv1.1"
#  is identical to the entry "NSSProtocol SSLv3,TLSv1.0,TLSv1.1".
NSSProtocol SSLv3,TLSv1.0,TLSv1.1</pre><p class="simpara">
									This section is within the VirtualHost section.
								</p></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal command">NSSProtocol</code> line as follows:
								</p><pre class="literallayout">#  SSL Protocol:
NSSProtocol TLSv1.0,TLSv1.1</pre><p class="simpara">
									Repeat this action for all VirtualHost sections.
								</p></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal command">Listen 8443</code> line as follows:
								</p><pre class="literallayout">Listen 443</pre></li><li class="listitem"><p class="simpara">
									Edit the default <code class="literal command">VirtualHost <span class="emphasis"><em>default</em></span>:8443</code> line as follows:
								</p><pre class="literallayout">VirtualHost <span class="emphasis"><em>default</em></span>:443</pre><p class="simpara">
									Edit any other non-default virtual host sections if they exist. Save and close the file.
								</p></li><li class="listitem"><p class="simpara">
									Verify that all occurrences of the <code class="literal command">NSSProtocol</code> directive have been changed as follows:
								</p><pre class="literallayout">~]# grep NSSProtocol /etc/httpd/conf.d/nss.conf
#  middle of a range may be excluded, the entry "<span class="emphasis"><em>NSSProtocol</em></span> SSLv3,TLSv1.1"
#  is identical to the entry "<span class="emphasis"><em>NSSProtocol</em></span> SSLv3,TLSv1.0,TLSv1.1".
<span class="emphasis"><em>NSSProtocol</em></span> TLSv1.0,TLSv1.1</pre><p class="simpara">
									This step is particularly important if you have more than one VirtualHost section.
								</p></li><li class="listitem"><p class="simpara">
									Restart the Apache daemon as follows:
								</p><pre class="literallayout">~]# service httpd restart</pre><p class="simpara">
									Note that any sessions will be interrupted.
								</p></li></ol></div><div id="proc-Testing_the_Status_of_SSL_and_TLS_Protocols_in_mod_nss" class="formalpara"><p class="title"><strong>Testing the Status of SSL and TLS Protocols in mod_nss</strong></p><p>
								To check which versions of SSL and TLS are enabled or disabled in <span class="strong strong"><strong><span class="application application">mod_nss</span></strong></span>, make use of the <code class="literal command">openssl s_client -connect</code> command. Install the <span class="strong strong"><strong><span class="package package">openssl</span></strong></span> package as <code class="literal">root</code>:
							</p></div><pre class="literallayout">~]# yum install openssl</pre><p>
							The <code class="literal command">openssl s_client -connect</code> command has the following form:
						</p><pre class="literallayout">openssl s_client -connect <span class="emphasis"><em>hostname</em></span>:<span class="emphasis"><em>port</em></span> -<span class="emphasis"><em>protocol</em></span></pre><p>
							Where <span class="emphasis"><em>port</em></span> is the port to test and <span class="emphasis"><em>protocol</em></span> is the protocol version to test for. To test the SSL server running locally, use <code class="literal">localhost</code> as the host name. For example, to test the default port for secure HTTPS connections, port <code class="literal">443</code> to see if SSLv3 is enabled, issue a command as follows:
						</p><pre class="literallayout">~]# openssl s_client -connect localhost:443 -ssl3
CONNECTED(00000003)
3077773036:error:1408F10B:SSL routines:SSL3_GET_RECORD:wrong version number:s3_pkt.c:337:
<span class="emphasis"><em>output omitted</em></span>
New, (NONE), <span class="emphasis"><em>Cipher is (NONE)</em></span>
Secure Renegotiation IS NOT supported
Compression: NONE
Expansion: NONE
SSL-Session:
  Protocol : SSLv3
<span class="emphasis"><em>output truncated</em></span></pre><p>
							+ The above output indicates that the handshake failed and therefore no cipher was negotiated.
						</p><pre class="literallayout">~]$ openssl s_client -connect localhost:443 -tls1
CONNECTED(00000003)
depth=1 C = US, O = example.com, CN = Certificate Shack
<span class="emphasis"><em>output omitted</em></span>
New, TLSv1/SSLv3, <span class="emphasis"><em>Cipher is AES128-SHA</em></span>
Server public key is 1024 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
  Protocol : TLSv1
<span class="emphasis"><em>output truncated</em></span></pre><p>
							+ The above output indicates that no failure of the handshake occurred and a set of ciphers was negotiated.
						</p><p>
							The <code class="literal command">openssl s_client</code> command options are documented in the <code class="literal">s_client(1)</code> manual page.
						</p><p>
							For more information on the SSLv3 vulnerability and how to test for it, see the Red Hat Knowledgebase article <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a></span></em></span>.
						</p></section></section><section class="section" id="s2-apache-mod_ssl-keypair"><div class="titlepage"><div><div><h3 class="title">14.1.10.&nbsp;Using an Existing Key and Certificate</h3></div></div></div><p>
						If you have a previously created key and certificate, you can configure the SSL server to use these files instead of generating new ones. There are only two situations where this is not possible:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								<span class="emphasis"><em>You are changing the IP address or domain name.</em></span>
							</p><p class="simpara">
								Certificates are issued for a particular IP address and domain name pair. If one of these values changes, the certificate becomes invalid.
							</p></li><li class="listitem"><p class="simpara">
								<span class="emphasis"><em>You have a certificate from VeriSign, and you are changing the server software.</em></span>
							</p><p class="simpara">
								VeriSign, a widely used certificate authority, issues certificates for a particular software product, IP address, and domain name. Changing the software product renders the certificate invalid.
							</p></li></ol></div><p>
						In either of the above cases, you will need to obtain a new certificate. For more information on this topic, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-mod_ssl-genkey" title="14.1.11. Generating a New Key and Certificate">Section&nbsp;14.1.11, “Generating a New Key and Certificate”</a>.
					</p><p>
						If you want to use an existing key and certificate, move the relevant files to the <code class="literal">/etc/pki/tls/private/</code> and <code class="literal">/etc/pki/tls/certs/</code> directories respectively. You can do so by issuing the following commands as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# mv <code class="literal">key_file.key</code> <code class="literal">/etc/pki/tls/private/hostname.key</code>
~]# mv <code class="literal">certificate.crt</code> <code class="literal">/etc/pki/tls/certs/hostname.crt</code></pre><p>
						Then add the following lines to the <code class="literal">/etc/httpd/conf.d/ssl.conf</code> configuration file:
					</p><pre class="literallayout">SSLCertificateFile /etc/pki/tls/certs/<span class="emphasis"><em>hostname</em></span>.crt
SSLCertificateKeyFile /etc/pki/tls/private/<span class="emphasis"><em>hostname</em></span>.key</pre><p>
						To load the updated configuration, restart the <code class="literal">httpd</code> service as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a>.
					</p><div class="example" id="example-apache-mod_ssl-keypair"><p class="title"><strong>Example&nbsp;14.5.&nbsp;Using a key and certificate from the Red Hat Secure Web Server</strong></p><div class="example-contents"><pre class="literallayout">~]# mv /etc/httpd/conf/httpsd.key /etc/pki/tls/private/penguin.example.com.key
~]# mv /etc/httpd/conf/httpsd.crt /etc/pki/tls/certs/penguin.example.com.crt</pre></div></div></section><section class="section" id="s3-apache-mod_ssl-genkey"><div class="titlepage"><div><div><h3 class="title">14.1.11.&nbsp;Generating a New Key and Certificate</h3></div></div></div><p>
						In order to generate a new key and certificate pair, the <span class="strong strong"><strong><span class="package package">crypto-utils</span></strong></span> package must be installed on the system. To install it, enter the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install crypto-utils</pre><p>
						This package provides a set of tools to generate and manage SSL certificates and private keys, and includes <span class="strong strong"><strong><span class="application application">genkey</span></strong></span>, the Red Hat Keypair Generation utility that will guide you through the key generation process.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							If the server already has a valid certificate and you are replacing it with a new one, specify a different serial number. This ensures that client browsers are notified of this change, update to this new certificate as expected, and do not fail to access the page. To create a new certificate with a custom serial number, as <code class="literal">root</code>, use the following command instead of <span class="strong strong"><strong><span class="application application">genkey</span></strong></span>:
						</p><pre class="literallayout">~]# openssl req -x509 -new -set_serial number -key hostname.key -out hostname.crt</pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If there already is a key file for a particular host name in your system, <span class="strong strong"><strong><span class="application application">genkey</span></strong></span> will refuse to start. In this case, remove the existing file using the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# rm /etc/pki/tls/private/hostname.key</pre></div></div><p>
						To run the utility enter the <code class="literal command">genkey</code> command as <code class="literal">root</code>, followed by the appropriate host name (for example, <code class="literal">penguin.example.com</code>):
					</p><pre class="literallayout">~]# genkey <span class="emphasis"><em>hostname</em></span></pre><p>
						To complete the key and certificate creation, take the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Review the target locations in which the key and certificate will be stored.
							</p><div class="figure" id="figure-apache-mod_ssl-genkey-01"><p class="title"><strong>Figure&nbsp;14.1.&nbsp;Running the genkey utility</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/apache-mod_ssl-genkey-01.png" alt="Running the genkey utility"></div></div></div><p class="simpara">
								Use the <span class="keycap"><strong>Tab</strong></span> key to select the <span class="guibutton">Next</span> button, and press <span class="keycap"><strong>Enter</strong></span> to proceed to the next screen.
							</p></li><li class="listitem"><p class="simpara">
								Using the <span class="keycap"><strong>up</strong></span> and <span class="keycap"><strong>down</strong></span> arrow keys, select a suitable key size. Note that while a larger key increases the security, it also increases the response time of your server. The NIST recommends using <code class="literal">2048 bits</code>. See <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://csrc.nist.gov/publications/nistpubs/800-131A/sp800-131A.pdf">NIST Special Publication 800-131A</a></span></em></span>.
							</p><div class="figure" id="figure-apache-mod_ssl-genkey-02"><p class="title"><strong>Figure&nbsp;14.2.&nbsp;Selecting the key size</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/apache-mod_ssl-genkey-02.png" alt="Selecting the key size"></div></div></div><p class="simpara">
								Once finished, use the <span class="keycap"><strong>Tab</strong></span> key to select the <span class="guibutton">Next</span> button, and press <span class="keycap"><strong>Enter</strong></span> to initiate the random bits generation process. Depending on the selected key size, this may take some time.
							</p></li><li class="listitem"><p class="simpara">
								Decide whether you want to send a certificate request to a certificate authority.
							</p><div class="figure" id="figure-apache-mod_ssl-genkey-03"><p class="title"><strong>Figure&nbsp;14.3.&nbsp;Generating a certificate request</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/apache-mod_ssl-genkey-03.png" alt="Generating a certificate request"></div></div></div><p class="simpara">
								Use the <span class="keycap"><strong>Tab</strong></span> key to select <span class="guibutton">Yes</span> to compose a certificate request, or <span class="guibutton">No</span> to generate a self-signed certificate. Then press <span class="keycap"><strong>Enter</strong></span> to confirm your choice.
							</p></li><li class="listitem"><p class="simpara">
								Using the <span class="keycap"><strong>Spacebar</strong></span> key, enable (<code class="literal">[*]</code>) or disable (<code class="literal">[ ]</code>) the encryption of the private key.
							</p><div class="figure" id="figure-apache-mod_ssl-genkey-04"><p class="title"><strong>Figure&nbsp;14.4.&nbsp;Encrypting the private key</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/apache-mod_ssl-genkey-04.png" alt="Encrypting the private key"></div></div></div><p class="simpara">
								Use the <span class="keycap"><strong>Tab</strong></span> key to select the <span class="guibutton">Next</span> button, and press <span class="keycap"><strong>Enter</strong></span> to proceed to the next screen.
							</p></li><li class="listitem"><p class="simpara">
								If you have enabled the private key encryption, enter an adequate passphrase. Note that for security reasons, it is not displayed as you type, and it must be at least five characters long.
							</p><div class="figure" id="figure-apache-mod_ssl-genkey-05"><p class="title"><strong>Figure&nbsp;14.5.&nbsp;Entering a passphrase</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/apache-mod_ssl-genkey-05.png" alt="Entering a passphrase"></div></div></div><p class="simpara">
								Use the <span class="keycap"><strong>Tab</strong></span> key to select the <span class="guibutton">Next</span> button, and press <span class="keycap"><strong>Enter</strong></span> to proceed to the next screen.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Entering the correct passphrase is required in order for the server to start. If you lose it, you will need to generate a new key and certificate.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Customize the certificate details.
							</p><div class="figure" id="figure-apache-mod_ssl-genkey-06"><p class="title"><strong>Figure&nbsp;14.6.&nbsp;Specifying certificate information</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/apache-mod_ssl-genkey-06.png" alt="Specifying certificate information"></div></div></div><p class="simpara">
								Use the <span class="keycap"><strong>Tab</strong></span> key to select the <span class="guibutton">Next</span> button, and press <span class="keycap"><strong>Enter</strong></span> to finish the key generation.
							</p></li><li class="listitem"><p class="simpara">
								If you have previously enabled the certificate request generation, you will be prompted to send it to a certificate authority.
							</p><div class="figure" id="figure-apache-mod_ssl-genkey-07"><p class="title"><strong>Figure&nbsp;14.7.&nbsp;Instructions on how to send a certificate request</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/apache-mod_ssl-genkey-07.png" alt="Instructions on how to send a certificate request"></div></div></div><p class="simpara">
								Press <span class="keycap"><strong>Enter</strong></span> to return to a shell prompt.
							</p></li></ol></div><p>
						Once generated, add the key and certificate locations to the <code class="literal">/etc/httpd/conf.d/ssl.conf</code> configuration file:
					</p><pre class="literallayout">SSLCertificateFile /etc/pki/tls/certs/<span class="emphasis"><em>hostname</em></span>.crt
SSLCertificateKeyFile /etc/pki/tls/private/<span class="emphasis"><em>hostname</em></span>.key</pre><p>
						Finally, restart the <code class="literal">httpd</code> service as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-running-restarting" title="14.1.3.3. Restarting the Service">Section&nbsp;14.1.3.3, “Restarting the Service”</a>, so that the updated configuration is loaded.
					</p></section><section class="section" id="s2-Configure_the_Firewall_for_HTTP_and_HTTPS_Using_the_CLI"><div class="titlepage"><div><div><h3 class="title">14.1.12.&nbsp;Configure the Firewall for HTTP and HTTPS Using the Command Line</h3></div></div></div><p>
						Red Hat Enterprise Linux does not allow <code class="literal">HTTP</code> and <code class="literal">HTTPS</code> traffic by default. To enable the system to act as a web server, make use of <code class="literal">firewalld</code>'s supported services to enable <code class="literal">HTTP</code> and <code class="literal">HTTPS</code> traffic to pass through the firewall as required.
					</p><p>
						To enable <code class="literal">HTTP</code> using the command line, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# firewall-cmd --add-service http
 success</pre><p>
						To enable <code class="literal">HTTPS</code> using the command line, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# firewall-cmd --add-service https
 success</pre><p>
						Note that these changes will not persist after the next system start. To make permanent changes to the firewall, repeat the commands adding the <code class="literal option">--permanent</code> option.
					</p><section class="section" id="s3-Checking_Network_Access_for_Incoming_HTTP_and_HTTPS_CLI"><div class="titlepage"><div><div><h4 class="title">14.1.12.1.&nbsp;Checking Network Access for Incoming HTTPS and HTTPS Using the Command Line</h4></div></div></div><p>
							To check what services the firewall is configured to allow, using the command line, issue the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# firewall-cmd --list-all
public (default, active)
 interfaces: em1
 sources:
 services: dhcpv6-client ssh
<span class="emphasis"><em>output truncated</em></span></pre><p>
							In this example taken from a default installation, the firewall is enabled but <code class="literal">HTTP</code> and <code class="literal">HTTPS</code> have not been allowed to pass through.
						</p><p>
							Once the <code class="literal">HTTP</code> and <code class="literal">HTTP</code> firewall services are enabled, the <code class="literal">services</code> line will appear similar to the following:
						</p><pre class="literallayout">services: dhcpv6-client http https ssh</pre><p>
							For more information on enabling firewall services, or opening and closing ports with <code class="literal">firewalld</code>, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a>.
						</p></section></section><section class="section" id="s2-apache-resources"><div class="titlepage"><div><div><h3 class="title">14.1.13.&nbsp;Additional Resources</h3></div></div></div><p>
						To learn more about the Apache HTTP Server, see the following resources.
					</p><h5 id="bh-The_Apache_HTTP_Server-Installed_Documentation">Installed Documentation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">httpd(8)</code> — The manual page for the <code class="literal">httpd</code> service containing the complete list of its command-line options.
							</li><li class="listitem">
								<code class="literal">genkey(1)</code> — The manual page for <code class="literal command">genkey</code> utility, provided by the <span class="strong strong"><strong><span class="package package">crypto-utils</span></strong></span> package.
							</li><li class="listitem">
								<code class="literal">apachectl(8)</code> — The manual page for the Apache HTTP Server Control Interface.
							</li></ul></div><h5 id="bh-The_Apache_HTTP_Server-Installable_Documentation">Installable Documentation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<a class="link" href="http://localhost/manual/">http://localhost/manual/</a> — The official documentation for the Apache HTTP Server with the full description of its directives and available modules. Note that in order to access this documentation, you must have the <span class="strong strong"><strong><span class="package package">httpd-manual</span></strong></span> package installed, and the web server must be running.
							</p><p class="simpara">
								Before accessing the documentation, issue the following commands as <code class="literal">root</code>:
							</p><pre class="literallayout">~]<span class="marked marked">&nbsp;yum install httpd-manual ~]</span>&nbsp;apachectl graceful</pre></li></ul></div><h5 id="bh-The_Apache_HTTP_Server-Online_Documentation">Online Documentation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="http://httpd.apache.org/">http://httpd.apache.org/</a> — The official website for the Apache HTTP Server with documentation on all the directives and default modules.
							</li><li class="listitem">
								<a class="link" href="http://www.openssl.org/">http://www.openssl.org/</a> — The OpenSSL home page containing further documentation, frequently asked questions, links to the mailing lists, and other useful resources.
							</li></ul></div></section></section></section><section class="chapter" id="ch-Mail_Servers"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;15.&nbsp;Mail Servers</h2></div></div></div><p>
				Red Hat Enterprise Linux offers many advanced applications to serve and access email. This chapter describes modern email protocols in use today, and some of the programs designed to send and receive email.
			</p><section class="section" id="s1-email-protocols"><div class="titlepage"><div><div><h2 class="title">15.1.&nbsp;Email Protocols</h2></div></div></div><p>
					Today, email is delivered using a client/server architecture. An email message is created using a mail client program. This program then sends the message to a server. The server then forwards the message to the recipient’s email server, where the message is then supplied to the recipient’s email client.
				</p><p>
					To enable this process, a variety of standard network protocols allow different machines, often running different operating systems and using different email programs, to send and receive email.
				</p><p>
					The following protocols discussed are the most commonly used in the transfer of email.
				</p><section class="section" id="s2-email-protocols-send"><div class="titlepage"><div><div><h3 class="title">15.1.1.&nbsp;Mail Transport Protocols</h3></div></div></div><p>
						Mail delivery from a client application to the server, and from an originating server to the destination server, is handled by the <span class="emphasis"><em>Simple Mail Transfer Protocol</em></span> (<span class="emphasis"><em>SMTP</em></span>).
					</p><section class="section" id="s3-email-protocols-smtp"><div class="titlepage"><div><div><h4 class="title">15.1.1.1.&nbsp;SMTP</h4></div></div></div><p>
							The primary purpose of SMTP is to transfer email between mail servers. However, it is critical for email clients as well. To send email, the client sends the message to an outgoing mail server, which in turn contacts the destination mail server for delivery. But more intermediate SMTP servers may be included in this chain. This concept is called a mail relaying. For this reason, it is necessary to specify an SMTP server when configuring an email client.
						</p><p>
							Under Red Hat Enterprise Linux, a user can configure an SMTP server on the local machine to handle mail delivery. However, it is also possible to configure remote SMTP servers for outgoing mail.
						</p><p>
							One important point to make about the SMTP protocol is that it does not require authentication. This allows anyone on the Internet to send email to anyone else or even to large groups of people. It is this characteristic of SMTP that makes junk email or <span class="emphasis"><em>spam</em></span> possible. Imposing relay restrictions limits random users on the Internet from sending email through your SMTP server, to other servers on the internet. Servers that do not impose such restrictions are called <span class="emphasis"><em>open relay</em></span> servers.
						</p><p>
							Red Hat Enterprise Linux 7 provides the Postfix and Sendmail SMTP programs.
						</p></section></section><section class="section" id="s2-email-protocols-client"><div class="titlepage"><div><div><h3 class="title">15.1.2.&nbsp;Mail Access Protocols</h3></div></div></div><p>
						There are two primary protocols used by email client applications to retrieve email from mail servers: the <span class="emphasis"><em>Post Office Protocol</em></span> (<span class="emphasis"><em>POP</em></span>) and the <span class="emphasis"><em>Internet Message Access Protocol</em></span> (<span class="emphasis"><em>IMAP</em></span>).
					</p><section class="section" id="s3-email-protocols-pop"><div class="titlepage"><div><div><h4 class="title">15.1.2.1.&nbsp;POP</h4></div></div></div><p>
							The default POP server under Red Hat Enterprise Linux is <span class="strong strong"><strong><span class="application application">Dovecot</span></strong></span> and is provided by the <span class="strong strong"><strong><span class="package package">dovecot</span></strong></span> package.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								To install <span class="strong strong"><strong><span class="application application">Dovecot</span></strong></span> run the following command:
							</p><pre class="literallayout">~]# yum install dovecot</pre><p>
								For more information on installing packages with Yum, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
							</p></div></div><p>
							When using a <code class="literal">POP</code> server, email messages are downloaded by email client applications. By default, most <code class="literal">POP</code> email clients are automatically configured to delete the message on the email server after it has been successfully transferred, however this setting usually can be changed.
						</p><p>
							<code class="literal">POP</code> is fully compatible with important Internet messaging standards, such as <span class="emphasis"><em>Multipurpose Internet Mail Extensions</em></span> (<span class="emphasis"><em>MIME</em></span>), which allow for email attachments.
						</p><p>
							<code class="literal">POP</code> works best for users who have one system on which to read email. It also works well for users who do not have a persistent connection to the Internet or the network containing the mail server. Unfortunately for those with slow network connections, <code class="literal">POP</code> requires client programs upon authentication to download the entire content of each message. This can take a long time if any messages have large attachments.
						</p><p>
							The most current version of the standard <code class="literal">POP</code> protocol is <code class="literal">POP3</code>.
						</p><p>
							There are, however, a variety of lesser-used <code class="literal">POP</code> protocol variants:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="emphasis"><em>APOP</em></span> — <code class="literal">POP3</code> with <code class="literal">MD5</code> authentication. An encoded hash of the user’s password is sent from the email client to the server rather than sending an unencrypted password.
								</li><li class="listitem">
									<span class="emphasis"><em>KPOP</em></span> — <code class="literal">POP3</code> with Kerberos authentication.
								</li><li class="listitem">
									<span class="emphasis"><em>RPOP</em></span> — <code class="literal">POP3</code> with <code class="literal">RPOP</code> authentication. This uses a per-user ID, similar to a password, to authenticate POP requests. However, this ID is not encrypted, so <code class="literal">RPOP</code> is no more secure than standard <code class="literal">POP</code>.
								</li></ul></div><p>
							To improve security, you can use <span class="emphasis"><em>Secure Socket Layer</em></span> (<span class="emphasis"><em>SSL</em></span>) encryption for client authentication and data transfer sessions. To enable SSL encryption, use:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal command">pop3s</code> service
								</li><li class="listitem">
									The <code class="literal command">stunnel</code> application
								</li><li class="listitem">
									The <code class="literal command">starttls</code> command
								</li></ul></div><p>
							For more information on securing email communication, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-security" title="15.5.1. Securing Communication">Section&nbsp;15.5.1, “Securing Communication”</a>.
						</p></section><section class="section" id="s3-email-protocols-imap"><div class="titlepage"><div><div><h4 class="title">15.1.2.2.&nbsp;IMAP</h4></div></div></div><p>
							The default <code class="literal">IMAP</code> server under Red Hat Enterprise Linux is <span class="strong strong"><strong><span class="application application">Dovecot</span></strong></span> and is provided by the <span class="strong strong"><strong><span class="package package">dovecot</span></strong></span> package. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-protocols-pop" title="15.1.2.1. POP">Section&nbsp;15.1.2.1, “POP”</a> for information on how to install <span class="strong strong"><strong><span class="application application">Dovecot</span></strong></span>.
						</p><p>
							When using an <code class="literal">IMAP</code> mail server, email messages remain on the server where users can read or delete them. <code class="literal">IMAP</code> also allows client applications to create, rename, or delete mail directories on the server to organize and store email.
						</p><p>
							<code class="literal">IMAP</code> is particularly useful for users who access their email using multiple machines. The protocol is also convenient for users connecting to the mail server via a slow connection, because only the email header information is downloaded for messages until opened, saving bandwidth. The user also has the ability to delete messages without viewing or downloading them.
						</p><p>
							For convenience, <code class="literal">IMAP</code> client applications are capable of caching copies of messages locally, so the user can browse previously read messages when not directly connected to the <code class="literal">IMAP</code> server.
						</p><p>
							<code class="literal">IMAP</code>, like <code class="literal">POP</code>, is fully compatible with important Internet messaging standards, such as MIME, which allow for email attachments.
						</p><p>
							For added security, it is possible to use <code class="literal">SSL</code> encryption for client authentication and data transfer sessions. This can be enabled by using the <code class="literal command">imaps</code> service, or by using the <code class="literal command">stunnel</code> program.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal command">pop3s</code> service
								</li><li class="listitem">
									The <code class="literal command">stunnel</code> application
								</li><li class="listitem">
									The <code class="literal command">starttls</code> command
								</li></ul></div><p>
							For more information on securing email communication, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-security" title="15.5.1. Securing Communication">Section&nbsp;15.5.1, “Securing Communication”</a>.
						</p><p>
							Other free, as well as commercial, IMAP clients and servers are available, many of which extend the IMAP protocol and provide additional functionality.
						</p></section><section class="section" id="s3-mail-server-dovecot"><div class="titlepage"><div><div><h4 class="title">15.1.2.3.&nbsp;Dovecot</h4></div></div></div><p>
							The <code class="literal command">imap-login</code> and <code class="literal command">pop3-login</code> processes which implement the <code class="literal">IMAP</code> and <code class="literal">POP3</code> protocols are spawned by the master <code class="literal">dovecot</code> daemon included in the <span class="strong strong"><strong><span class="package package">dovecot</span></strong></span> package. The use of <code class="literal">IMAP</code> and <code class="literal">POP</code> is configured through the <code class="literal">/etc/dovecot/dovecot.conf</code> configuration file; by default <code class="literal command">dovecot</code> runs <code class="literal">IMAP</code> and <code class="literal">POP3</code> together with their secure versions using <code class="literal">SSL</code>. To configure <code class="literal command">dovecot</code> to use <code class="literal">POP</code>, complete the following steps:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/dovecot/dovecot.conf</code> configuration file to make sure the <code class="literal">protocols</code> variable is uncommented (remove the hash sign (<code class="literal">#</code>) at the beginning of the line) and contains the <code class="literal">pop3</code> argument. For example:
								</p><pre class="literallayout">protocols = imap pop3 lmtp</pre><p class="simpara">
									When the <code class="literal">protocols</code> variable is left commented out, <code class="literal command">dovecot</code> will use the default values as described above.
								</p></li><li class="listitem"><p class="simpara">
									Make the change operational for the current session by running the following command as <code class="literal">root</code>:
								</p><pre class="literallayout">~]# systemctl restart dovecot</pre></li><li class="listitem"><p class="simpara">
									Make the change operational after the next reboot by running the command:
								</p><pre class="literallayout">~]# systemctl enable dovecot
Created symlink from /etc/systemd/system/multi-user.target.wants/dovecot.service to /usr/lib/systemd/system/dovecot.service.</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Please note that <code class="literal command">dovecot</code> only reports that it started the <code class="literal">IMAP</code> server, but also starts the <code class="literal">POP3</code> server.
									</p></div></div></li></ol></div><p>
							Unlike <code class="literal">SMTP</code>, both <code class="literal">IMAP</code> and <code class="literal">POP3</code> require connecting clients to authenticate using a user name and password. By default, passwords for both protocols are passed over the network unencrypted.
						</p><p>
							To configure <code class="literal">SSL</code> on <code class="literal command">dovecot</code>:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/dovecot/conf.d/10-ssl.conf</code> configuration to make sure the <code class="literal">ssl_protocols</code> variable is uncommented and contains the <code class="literal">!SSLv2 !SSLv3</code> arguments:
								</p><pre class="literallayout">ssl_protocols = !SSLv2 !SSLv3</pre><p class="simpara">
									These values ensure that <code class="literal command">dovecot</code> avoids SSL versions 2 and also 3, which are both known to be insecure. This is due to the vulnerability described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a></span></em></span>. See <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/solutions/120383">Resolution for POODLE SSL 3.0 vulnerability (CVE-2014-3566) in Postfix and Dovecot</a></span></em></span> for details.
								</p><p class="simpara">
									Make sure that <code class="literal">/etc/dovecot/conf.d/10-ssl.conf</code> contains the following option:
								</p><pre class="literallayout">        ssl=required</pre></li><li class="listitem">
									Edit the <code class="literal">/etc/pki/dovecot/dovecot-openssl.cnf</code> configuration file as you prefer. However, in a typical installation, this file does not require modification.
								</li><li class="listitem">
									Rename, move or delete the files <code class="literal">/etc/pki/dovecot/certs/dovecot.pem</code> and <code class="literal">/etc/pki/dovecot/private/dovecot.pem</code>.
								</li><li class="listitem"><p class="simpara">
									Execute the <code class="literal">/usr/libexec/dovecot/mkcert.sh</code> script which creates the <code class="literal command">dovecot</code> self signed certificates. These certificates are copied in the <code class="literal">/etc/pki/dovecot/certs</code> and <code class="literal">/etc/pki/dovecot/private</code> directories. To implement the changes, restart <code class="literal command">dovecot</code> by issuing the following command as <code class="literal">root</code>:
								</p><pre class="literallayout">~]# systemctl restart dovecot</pre></li></ul></div><p>
							More details on <code class="literal command">dovecot</code> can be found online at <a class="link" href="http://www.dovecot.org/">http://www.dovecot.org</a>.
						</p></section></section></section><section class="section" id="s1-email-types"><div class="titlepage"><div><div><h2 class="title">15.2.&nbsp;Email Program Classifications</h2></div></div></div><p>
					In general, all email applications fall into at least one of three classifications. Each classification plays a specific role in the process of moving and managing email messages. While most users are only aware of the specific email program they use to receive and send messages, each one is important for ensuring that email arrives at the correct destination.
				</p><section class="section" id="s2-email-types-mta"><div class="titlepage"><div><div><h3 class="title">15.2.1.&nbsp;Mail Transport Agent</h3></div></div></div><p>
						A <span class="emphasis"><em>Mail Transport Agent</em></span> (<span class="emphasis"><em>MTA</em></span>) transports email messages between hosts using <code class="literal">SMTP</code>. A message may involve several MTAs as it moves to its intended destination.
					</p><p>
						While the delivery of messages between machines may seem rather straightforward, the entire process of deciding if a particular MTA can or should accept a message for delivery is quite complicated. In addition, due to problems from spam, use of a particular MTA is usually restricted by the MTA’s configuration or the access configuration for the network on which the MTA resides.
					</p><p>
						Some email client programs, can act as an MTA when sending an email. However, such email client programs do not have the role of a true MTA, because they can only send outbound messages to an MTA they are authorized to use, but they cannot directly deliver the message to the intended recipient’s email server. This functionality is useful if host running the application does not have its own MTA.
					</p><p>
						Since Red Hat Enterprise Linux offers two MTAs, <span class="emphasis"><em>Postfix</em></span> and <span class="emphasis"><em>Sendmail</em></span>, email client programs are often not required to act as an MTA. Red Hat Enterprise Linux also includes a special purpose MTA called <span class="emphasis"><em>Fetchmail</em></span>.
					</p><p>
						For more information on Postfix, Sendmail, and Fetchmail, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-mta" title="15.3. Mail Transport Agents">Section&nbsp;15.3, “Mail Transport Agents”</a>.
					</p></section><section class="section" id="s2-email-types-mda"><div class="titlepage"><div><div><h3 class="title">15.2.2.&nbsp;Mail Delivery Agent</h3></div></div></div><p>
						A <span class="emphasis"><em>Mail Delivery Agent</em></span> (<span class="emphasis"><em>MDA</em></span>) is invoked by the MTA to file incoming email in the proper user’s mailbox. In many cases, the MDA is actually a <span class="emphasis"><em>Local Delivery Agent</em></span> (<span class="emphasis"><em>LDA</em></span>), such as <code class="literal command">mail</code> or Procmail.
					</p><p>
						Any program that actually handles a message for delivery to the point where it can be read by an email client application can be considered an MDA. For this reason, some MTAs (such as Sendmail and Postfix) can fill the role of an MDA when they append new email messages to a local user’s mail spool file. In general, MDAs do not transport messages between systems nor do they provide a user interface; MDAs distribute and sort messages on the local machine for an email client application to access.
					</p></section><section class="section" id="s2-email-types-mua"><div class="titlepage"><div><div><h3 class="title">15.2.3.&nbsp;Mail User Agent</h3></div></div></div><p>
						A <span class="emphasis"><em>Mail User Agent</em></span> (<span class="emphasis"><em>MUA</em></span>) is synonymous with an email client application. MUA is a program that, at a minimum, allows a user to read and compose email messages. MUAs can handle these tasks:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Retrieving messages via the <code class="literal">POP</code> or <code class="literal">IMAP</code> protocols
							</li><li class="listitem">
								Setting up mailboxes to store messages.
							</li><li class="listitem">
								Sending outbound messages to an MTA.
							</li></ul></div><p>
						MUAs may be graphical, such as <span class="strong strong"><strong><span class="application application">Thunderbird</span></strong></span>, <span class="strong strong"><strong><span class="application application">Evolution</span></strong></span>, or have simple text-based interfaces, such as <code class="literal">mail</code> or <span class="strong strong"><strong><span class="application application">Mutt</span></strong></span>.
					</p></section></section><section class="section" id="s1-email-mta"><div class="titlepage"><div><div><h2 class="title">15.3.&nbsp;Mail Transport Agents</h2></div></div></div><p>
					Red Hat Enterprise Linux 7 offers two primary MTAs: Postfix and Sendmail. Postfix is configured as the default MTA and Sendmail is considered deprecated. If required to switch the default MTA to Sendmail, you can either uninstall Postfix or use the following command as <code class="literal">root</code> to switch to Sendmail:
				</p><pre class="literallayout">~]# alternatives --config mta</pre><p>
					You can also use the following command to enable the desired service:
				</p><pre class="literallayout">~]# systemctl enable service</pre><p>
					Similarly, to disable the service, type the following at a shell prompt:
				</p><pre class="literallayout">~]# systemctl disable service</pre><p>
					For more information on how to manage system services in Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
				</p><section class="section" id="s2-email-mta-postfix"><div class="titlepage"><div><div><h3 class="title">15.3.1.&nbsp;Postfix</h3></div></div></div><p>
						Originally developed at IBM by security expert and programmer Wietse Venema, Postfix is a Sendmail-compatible MTA that is designed to be secure, fast, and easy to configure.
					</p><p>
						To improve security, Postfix uses a modular design, where small processes with limited privileges are launched by a <span class="emphasis"><em>master</em></span> daemon. The smaller, less privileged processes perform very specific tasks related to the various stages of mail delivery and run in a changed root environment to limit the effects of attacks.
					</p><p>
						Configuring Postfix to accept network connections from hosts other than the local computer takes only a few minor changes in its configuration file. Yet for those with more complex needs, Postfix provides a variety of configuration options, as well as third party add-ons that make it a very versatile and full-featured MTA.
					</p><p>
						The configuration files for Postfix are human readable and support upward of 250 directives. Unlike Sendmail, no macro processing is required for changes to take effect and the majority of the most commonly used options are described in the heavily commented files.
					</p><section class="section" id="s3-email-mta-postfix-default"><div class="titlepage"><div><div><h4 class="title">15.3.1.1.&nbsp;The Default Postfix Installation</h4></div></div></div><p>
							The Postfix executable is <code class="literal">postfix</code>. This daemon launches all related processes needed to handle mail delivery.
						</p><p>
							Postfix stores its configuration files in the <code class="literal">/etc/postfix/</code> directory. The following is a list of the more commonly used files:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">access</code> — Used for access control, this file specifies which hosts are allowed to connect to Postfix.
								</li><li class="listitem">
									<code class="literal">main.cf</code> — The global Postfix configuration file. The majority of configuration options are specified in this file.
								</li><li class="listitem">
									<code class="literal">master.cf</code> — Specifies how Postfix interacts with various processes to accomplish mail delivery.
								</li><li class="listitem">
									<code class="literal">transport</code> — Maps email addresses to relay hosts.
								</li></ul></div><p>
							The <code class="literal">aliases</code> file can be found in the <code class="literal">/etc</code> directory. This file is shared between Postfix and Sendmail. It is a configurable list required by the mail protocol that describes user ID aliases.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The default <code class="literal">/etc/postfix/main.cf</code> file does not allow Postfix to accept network connections from a host other than the local computer. For instructions on configuring Postfix as a server for other clients, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-mta-postfix-conf" title="15.3.1.3. Basic Postfix Configuration">Section&nbsp;15.3.1.3, “Basic Postfix Configuration”</a>.
							</p></div></div><p>
							Restart the <code class="literal">postfix</code> service after changing any options in the configuration files under the <code class="literal">/etc/postfix/</code> directory in order for those changes to take effect. To do so, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# systemctl restart postfix</pre></section><section class="section" id="s3-email-mta-postfix-upgrading_from_a_previous_release"><div class="titlepage"><div><div><h4 class="title">15.3.1.2.&nbsp;Upgrading From a Previous Release</h4></div></div></div><p>
							The following settings in Red Hat Enterprise Linux 7 are different to previous releases:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">disable_vrfy_command = no</code> — This is disabled by default, which is different to the default for Sendmail. If changed to <code class="literal">yes</code> it can prevent certain email address harvesting methods.
								</li><li class="listitem">
									<code class="literal command">allow_percent_hack = yes</code> — This is enabled by default. It allows removing <code class="literal">%</code> characters in email addresses. The percent hack is an old workaround that allowed sender-controlled routing of email messages. <code class="literal">DNS</code> and mail routing are now much more reliable, but Postfix continues to support the hack. To turn off percent rewriting, set <code class="literal command">allow_percent_hack</code> to <code class="literal">no</code>.
								</li><li class="listitem">
									<code class="literal command">smtpd_helo_required = no</code> — This is disabled by default, as it is in Sendmail, because it can prevent some applications from sending mail. It can be changed to <code class="literal">yes</code> to require clients to send the HELO or EHLO commands before attempting to send the MAIL, FROM, or ETRN commands.
								</li></ul></div></section><section class="section" id="s3-email-mta-postfix-conf"><div class="titlepage"><div><div><h4 class="title">15.3.1.3.&nbsp;Basic Postfix Configuration</h4></div></div></div><p>
							By default, Postfix does not accept network connections from any host other than the local host. Perform the following steps as <code class="literal">root</code> to enable mail delivery for other hosts on the network:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Edit the <code class="literal">/etc/postfix/main.cf</code> file with a text editor, such as <code class="literal command">vi</code>.
								</li><li class="listitem">
									Uncomment the <code class="literal command">mydomain</code> line by removing the hash sign (<code class="literal">#</code>), and replace <span class="emphasis"><em>domain.tld</em></span> with the domain the mail server is servicing, such as <code class="literal command">example.com</code>.
								</li><li class="listitem">
									Uncomment the <code class="literal command">myorigin = $mydomain</code> line.
								</li><li class="listitem">
									Uncomment the <code class="literal command">myhostname</code> line, and replace <span class="emphasis"><em>host.domain.tld</em></span> with the host name for the machine.
								</li><li class="listitem">
									Uncomment the <code class="literal command">mydestination = $myhostname, localhost.$mydomain</code> line.
								</li><li class="listitem">
									Uncomment the <code class="literal command">mynetworks</code> line, and replace <span class="emphasis"><em>168.100.189.0/28</em></span> with a valid network setting for hosts that can connect to the server.
								</li><li class="listitem">
									Uncomment the <code class="literal command">inet_interfaces = all</code> line.
								</li><li class="listitem">
									Comment the <code class="literal command">inet_interfaces = localhost</code> line.
								</li><li class="listitem">
									Restart the <code class="literal command">postfix</code> service.
								</li></ul></div><p>
							Once these steps are complete, the host accepts outside emails for delivery.
						</p><p>
							Postfix has a large assortment of configuration options. One of the best ways to learn how to configure Postfix is to read the comments within the <code class="literal">/etc/postfix/main.cf</code> configuration file. Additional resources including information about Postfix configuration, SpamAssassin integration, or detailed descriptions of the <code class="literal">/etc/postfix/main.cf</code> parameters are available online at <a class="link" href="http://www.postfix.org/">http://www.postfix.org/</a>.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Due to the vulnerability described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a></span></em></span>, Red Hat recommends disabling <code class="literal">SSL</code> and using only <code class="literal">TLSv1.1</code> or <code class="literal">TLSv1.2</code>. See <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/solutions/120383">Resolution for POODLE SSL 3.0 vulnerability (CVE-2014-3566) in Postfix and Dovecot</a></span></em></span> for details.
							</p></div></div></section><section class="section" id="using-postfix-with-ldap"><div class="titlepage"><div><div><h4 class="title">15.3.1.4.&nbsp;Using Postfix with LDAP</h4></div></div></div><p>
							Postfix can use an <code class="literal">LDAP</code> directory as a source for various lookup tables (for example, <code class="literal">aliases</code>, <code class="literal">virtual</code>, <code class="literal">canonical</code>, and so on). This allows <code class="literal">LDAP</code> to store hierarchical user information and Postfix to only be given the result of <code class="literal">LDAP</code> queries when needed. By not storing this information locally, administrators can easily maintain it.
						</p><section class="section" id="aliases-example"><div class="titlepage"><div><div><h5 class="title">15.3.1.4.1.&nbsp;The /etc/aliases lookup example</h5></div></div></div><p>
								The following is a basic example for using <code class="literal">LDAP</code> to look up the <code class="literal">/etc/aliases</code> file. Make sure your <code class="literal">/etc/postfix/main.cf</code> file contains the following:
							</p><pre class="literallayout">alias_maps = hash:/etc/aliases, ldap:/etc/postfix/ldap-aliases.cf</pre><p>
								Create a <code class="literal">/etc/postfix/ldap-aliases.cf</code> file if you do not have one already and make sure it contains the following:
							</p><pre class="literallayout">server_host = <span class="emphasis"><em>ldap.example.com</em></span>
search_base = dc=<span class="emphasis"><em>example</em></span>, dc=<span class="emphasis"><em>com</em></span></pre><p>
								where <code class="literal">ldap.example.com</code>, <code class="literal">example</code>, and <code class="literal">com</code> are parameters that need to be replaced with specification of an existing available <code class="literal">LDAP</code> server.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The <code class="literal">/etc/postfix/ldap-aliases.cf</code> file can specify various parameters, including parameters that enable <code class="literal">LDAP</code> <code class="literal">SSL</code> and <code class="literal">STARTTLS</code>. For more information, see the <code class="literal">ldap_table(5)</code> man page.
								</p></div></div><p>
								For more information on <code class="literal">LDAP</code>, see <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System-Level_Authentication_Guide/openldap.html">OpenLDAP</a> in the <span class="emphasis"><em><span class="citetitle citetitle">System-Level Authentication Guide</span></em></span>.
							</p></section></section></section><section class="section" id="s2-email-mta-sendmail"><div class="titlepage"><div><div><h3 class="title">15.3.2.&nbsp;Sendmail</h3></div></div></div><p>
						Sendmail’s core purpose, like other MTAs, is to safely transfer email between hosts, usually using the <code class="literal">SMTP</code> protocol. Note that Sendmail is considered deprecated and administrators are encouraged to use Postfix when possible. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-mta-postfix" title="15.3.1. Postfix">Section&nbsp;15.3.1, “Postfix”</a> for more information.
					</p><section class="section" id="s3-email-mta-sendmail-purpose"><div class="titlepage"><div><div><h4 class="title">15.3.2.1.&nbsp;Purpose and Limitations</h4></div></div></div><p>
							It is important to be aware of what Sendmail is and what it can do, as opposed to what it is not. In these days of monolithic applications that fulfill multiple roles, Sendmail may seem like the only application needed to run an email server within an organization. Technically, this is true, as Sendmail can spool mail to each users' directory and deliver outbound mail for users. However, most users actually require much more than simple email delivery. Users usually want to interact with their email using an MUA, that uses <code class="literal">POP</code> or <code class="literal">IMAP</code>, to download their messages to their local machine. Or, they may prefer a Web interface to gain access to their mailbox. These other applications can work in conjunction with Sendmail, but they actually exist for different reasons and can operate separately from one another.
						</p><p>
							It is beyond the scope of this section to go into all that Sendmail should or could be configured to do. With literally hundreds of different options and rule sets, entire volumes have been dedicated to helping explain everything that can be done and how to fix things that go wrong. See the <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-additional-resources" title="15.7. Additional Resources">Section&nbsp;15.7, “Additional Resources”</a> for a list of Sendmail resources.
						</p><p>
							This section reviews the files installed with Sendmail by default and reviews basic configuration changes, including how to stop unwanted email (spam) and how to extend Sendmail with the <span class="emphasis"><em>Lightweight Directory Access Protocol (LDAP)</em></span>.
						</p></section><section class="section" id="s3-email-mta-sendmail-default"><div class="titlepage"><div><div><h4 class="title">15.3.2.2.&nbsp;The Default Sendmail Installation</h4></div></div></div><p>
							In order to use Sendmail, first ensure the <span class="strong strong"><strong><span class="package package">sendmail</span></strong></span> package is installed on your system by running, as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# yum install sendmail</pre><p>
							In order to configure Sendmail, ensure the <span class="strong strong"><strong><span class="package package">sendmail-cf</span></strong></span> package is installed on your system by running, as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# yum install sendmail-cf</pre><p>
							For more information on installing packages with Yum, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
						</p><p>
							Before using Sendmail, the default MTA has to be switched from Postfix. For more information how to switch the default MTA refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-mta" title="15.3. Mail Transport Agents">Section&nbsp;15.3, “Mail Transport Agents”</a>.
						</p><p>
							The Sendmail executable is <code class="literal">sendmail</code>.
						</p><p>
							Sendmail configuration file is located at <code class="literal">/etc/mail/sendmail.cf</code>. Avoid editing the <code class="literal">sendmail.cf</code> file directly. To make configuration changes to Sendmail, edit the <code class="literal">/etc/mail/sendmail.mc</code> file, back up the original <code class="literal">/etc/mail/sendmail.cf</code> file, and restart the <code class="literal">sendmail</code> service. As a part of the restart, the sendmail.cf file and all binary representations of the databases are rebuild:
						</p><pre class="literallayout"># systemctl restart sendmail</pre><p>
							More information on configuring Sendmail can be found in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-mta-sendmail-changes" title="15.3.2.3. Common Sendmail Configuration Changes">Section&nbsp;15.3.2.3, “Common Sendmail Configuration Changes”</a>.
						</p><p>
							Various Sendmail configuration files are installed in the <code class="literal">/etc/mail/</code> directory including:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">access</code> — Specifies which systems can use Sendmail for outbound email.
								</li><li class="listitem">
									<code class="literal">domaintable</code> — Specifies domain name mapping.
								</li><li class="listitem">
									<code class="literal">local-host-names</code> — Specifies aliases for the host.
								</li><li class="listitem">
									<code class="literal">mailertable</code> — Specifies instructions that override routing for particular domains.
								</li><li class="listitem">
									<code class="literal">virtusertable</code> — Specifies a domain-specific form of aliasing, allowing multiple virtual domains to be hosted on one machine.
								</li></ul></div><p>
							Several configuration files in the <code class="literal">/etc/mail/</code> directory, such as <code class="literal">access</code>, <code class="literal">domaintable</code>, <code class="literal">mailertable</code> and <code class="literal">virtusertable</code>, store their information in database files before Sendmail can use any configuration changes.
						</p><p>
							To include any changes made to these configurations in their database files, run the following command:
						</p><pre class="literallayout"># systemctl restart sendmail</pre></section><section class="section" id="s3-email-mta-sendmail-changes"><div class="titlepage"><div><div><h4 class="title">15.3.2.3.&nbsp;Common Sendmail Configuration Changes</h4></div></div></div><p>
							When altering the Sendmail configuration file, it is best not to edit an existing file, but to generate an entirely new <code class="literal">/etc/mail/sendmail.cf</code> file.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Before replacing or making any changes to the <code class="literal">sendmail.cf</code> file, create a backup copy.
							</p></div></div><p>
							To add the desired functionality to Sendmail, edit the <code class="literal">/etc/mail/sendmail.mc</code> file as <code class="literal">root</code>. Once you are finished, restart the <code class="literal">sendmail</code> service and, if the <span class="strong strong"><strong><span class="package package">m4</span></strong></span> package is installed, the <code class="literal command">m4</code> macro processor will automatically generate a new <code class="literal">sendmail.cf</code> configuration file:
						</p><pre class="literallayout">~]# systemctl restart sendmail</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The default <code class="literal">sendmail.cf</code> file does not allow Sendmail to accept network connections from any host other than the local computer. To configure Sendmail as a server for other clients, edit the <code class="literal">/etc/mail/sendmail.mc</code> file, and either change the address specified in the <code class="literal command">Addr=</code> option of the <code class="literal command">DAEMON_OPTIONS</code> directive from <code class="literal command">127.0.0.1</code> to the IP address of an active network device or comment out the <code class="literal command">DAEMON_OPTIONS</code> directive all together by placing <code class="literal command">dnl</code> at the beginning of the line. When finished, regenerate <code class="literal">/etc/mail/sendmail.cf</code> by restarting the service:
							</p><pre class="literallayout">~]# systemctl restart sendmail</pre></div></div><p>
							The default configuration in Red Hat Enterprise Linux works for most <code class="literal">SMTP</code>-only sites.
						</p><p>
							Consult the <code class="literal">/usr/share/sendmail-cf/README</code> file before editing any files in the directories under the <code class="literal">/usr/share/sendmail-cf/</code> directory, as they can affect the future configuration of the <code class="literal">/etc/mail/sendmail.cf</code> file.
						</p></section><section class="section" id="s3-email-sendmail-changes-masquerading"><div class="titlepage"><div><div><h4 class="title">15.3.2.4.&nbsp;Masquerading</h4></div></div></div><p>
							One common Sendmail configuration is to have a single machine act as a mail gateway for all machines on the network. For example, a company may want to have a machine called <code class="literal">mail.example.com</code> that handles all of their email and assigns a consistent return address to all outgoing mail.
						</p><p>
							In this situation, the Sendmail server must masquerade the machine names on the company network so that their return address is <code class="literal">user@example.com</code> instead of <code class="literal">user@host.example.com</code>.
						</p><p>
							To do this, add the following lines to <code class="literal">/etc/mail/sendmail.mc</code>:
						</p><pre class="literallayout">FEATURE(always_add_domain)dnl
FEATURE(masquerade_entire_domain)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(allmasquerade)dnl
MASQUERADE_DOMAIN(`example.com.')dnl
MASQUERADE_AS(`example.com')dnl</pre><p>
							After generating a new <code class="literal">sendmail.cf</code> file from the changed configuration in sendmail.mc, restart the sendmail service by a following command:
						</p><pre class="literallayout"># systemctl restart sendmail</pre><p>
							Note that administrators of mail servers, <code class="literal">DNS</code> and <code class="literal">DHCP</code> servers, as well as any provisioning applications, should agree on the host name format used in an organization. See the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">Red Hat Enterprise Linux 7 Networking Guide</a> for more information on recommended naming practices.
						</p></section><section class="section" id="s3-email-sendmail-stopping-spam"><div class="titlepage"><div><div><h4 class="title">15.3.2.5.&nbsp;Stopping Spam</h4></div></div></div><p>
							Email spam can be defined as unnecessary and unwanted email received by a user who never requested the communication. It is a disruptive, costly, and widespread abuse of Internet communication standards.
						</p><p>
							Sendmail makes it relatively easy to block new spamming techniques being employed to send junk email. It even blocks many of the more usual spamming methods by default. Main anti-spam features available in sendmail are <span class="emphasis"><em>header checks</em></span>, <span class="emphasis"><em>relaying denial</em></span> (default from version 8.9), <span class="emphasis"><em>access database and sender information checks</em></span>.
						</p><p>
							For example, forwarding of <code class="literal">SMTP</code> messages, also called relaying, has been disabled by default since Sendmail version 8.9. Before this change occurred, Sendmail directed the mail host (<code class="literal">x.edu</code>) to accept messages from one party (<code class="literal">y.com</code>) and sent them to a different party (<code class="literal">z.net</code>). Now, however, Sendmail must be configured to permit any domain to relay mail through the server. To configure relay domains, edit the <code class="literal">/etc/mail/relay-domains</code> file and restart Sendmail
						</p><pre class="literallayout">~]# systemctl restart sendmail</pre><p>
							However, servers on the Internet can also send spam messages. In these instances, Sendmail’s access control features available through the <code class="literal">/etc/mail/access</code> file can be used to prevent connections from unwanted hosts. The following example illustrates how this file can be used to both block and specifically allow access to the Sendmail server:
						</p><pre class="literallayout"><code class="literal command">badspammer.com ERROR:550 "Go away and do not spam us anymore" tux.badspammer.com OK 10.0 RELAY</code></pre><p>
							This example shows that any email sent from <code class="literal">badspammer.com</code> is blocked with a 550 RFC-821 compliant error code, with a message sent back. Emails sent from the <code class="literal">tux.badspammer.com</code> sub-domain are accepted. The last line shows that any email sent from the 10.0.<span class="strong strong"><strong>.</strong></span> network can be relayed through the mail server.
						</p><p>
							Because the <code class="literal">/etc/mail/access.db</code> file is a database, use the following command to update any changes:
						</p><pre class="literallayout"># systemctl restart sendmail</pre><p>
							The above examples only represent a small part of what Sendmail can do in terms of allowing or blocking access. See the <code class="literal">/usr/share/sendmail-cf/README</code> file for more information and examples.
						</p><p>
							Since Sendmail calls the Procmail MDA when delivering mail, it is also possible to use a spam filtering program, such as SpamAssassin, to identify and file spam for users. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-mda-spam" title="15.4.2.6. Spam Filters">Section&nbsp;15.4.2.6, “Spam Filters”</a> for more information about using SpamAssassin.
						</p></section><section class="section" id="s3-email-mta-sendmail-ldap"><div class="titlepage"><div><div><h4 class="title">15.3.2.6.&nbsp;Using Sendmail with LDAP</h4></div></div></div><p>
							Using <code class="literal">LDAP</code> is a very quick and powerful way to find specific information about a particular user from a much larger group. For example, an <code class="literal">LDAP</code> server can be used to look up a particular email address from a common corporate directory by the user’s last name. In this kind of implementation, <code class="literal">LDAP</code> is largely separate from Sendmail, with <code class="literal">LDAP</code> storing the hierarchical user information and Sendmail only being given the result of <code class="literal">LDAP</code> queries in pre-addressed email messages.
						</p><p>
							However, Sendmail supports a much greater integration with <code class="literal">LDAP</code>, where it uses <code class="literal">LDAP</code> to replace separately maintained files, such as <code class="literal">/etc/aliases</code> and <code class="literal">/etc/mail/virtusertables</code>, on different mail servers that work together to support a medium- to enterprise-level organization. In short, <code class="literal">LDAP</code> abstracts the mail routing level from Sendmail and its separate configuration files to a powerful <code class="literal">LDAP</code> cluster that can be leveraged by many different applications.
						</p><p>
							The current version of Sendmail contains support for <code class="literal">LDAP</code>. To extend the Sendmail server using <code class="literal">LDAP</code>, first get an <code class="literal">LDAP</code> server, such as <span class="strong strong"><strong><span class="application application">OpenLDAP</span></strong></span>, running and properly configured. Then edit the <code class="literal">/etc/mail/sendmail.mc</code> to include the following:
						</p><pre class="literallayout">LDAPROUTE_DOMAIN('<span class="emphasis"><em>yourdomain.com</em></span>')dnl
FEATURE('ldap_routing')dnl</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This is only for a very basic configuration of Sendmail with <code class="literal">LDAP</code>. The configuration can differ greatly from this depending on the implementation of <code class="literal">LDAP</code>, especially when configuring several Sendmail machines to use a common <code class="literal">LDAP</code> server.
							</p><p>
								Consult <code class="literal">/usr/share/sendmail-cf/README</code> for detailed <code class="literal">LDAP</code> routing configuration instructions and examples.
							</p></div></div><p>
							Next, recreate the <code class="literal">/etc/mail/sendmail.cf</code> file by running the <code class="literal command">m4</code> macro processor and again restarting Sendmail. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-mta-sendmail-changes" title="15.3.2.3. Common Sendmail Configuration Changes">Section&nbsp;15.3.2.3, “Common Sendmail Configuration Changes”</a> for instructions.
						</p><p>
							For more information on <code class="literal">LDAP</code>, see <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System-Level_Authentication_Guide/openldap.html">OpenLDAP</a> in the <span class="emphasis"><em><span class="citetitle citetitle">System-Level Authentication Guide</span></em></span>.
						</p></section></section><section class="section" id="s2-email-mta-fetchmail"><div class="titlepage"><div><div><h3 class="title">15.3.3.&nbsp;Fetchmail</h3></div></div></div><p>
						Fetchmail is an MTA which retrieves email from remote servers and delivers it to the local MTA. Many users appreciate the ability to separate the process of downloading their messages located on a remote server from the process of reading and organizing their email in an MUA. Designed with the needs of dial-up users in mind, Fetchmail connects and quickly downloads all of the email messages to the mail spool file using any number of protocols, including <code class="literal">POP3</code> and <code class="literal">IMAP</code>. It can even forward email messages to an <code class="literal">SMTP</code> server, if necessary.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							In order to use <span class="strong strong"><strong><span class="application application">Fetchmail</span></strong></span>, first ensure the <span class="strong strong"><strong><span class="package package">fetchmail</span></strong></span> package is installed on your system by running, as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# yum install fetchmail</pre><p>
							For more information on installing packages with Yum, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
						</p></div></div><p>
						Fetchmail is configured for each user through the use of a <code class="literal">.fetchmailrc</code> file in the user’s home directory. If it does not already exist, create the <code class="literal">.fetchmailrc</code> file in your home directory
					</p><p>
						Using preferences in the <code class="literal">.fetchmailrc</code> file, Fetchmail checks for email on a remote server and downloads it. It then delivers it to port 25 on the local machine, using the local MTA to place the email in the correct user’s spool file. If Procmail is available, it is launched to filter the email and place it in a mailbox so that it can be read by an MUA.
					</p><section class="section" id="s3-email-mda-fetchmail-configuration"><div class="titlepage"><div><div><h4 class="title">15.3.3.1.&nbsp;Fetchmail Configuration Options</h4></div></div></div><p>
							Although it is possible to pass all necessary options on the command line to check for email on a remote server when executing Fetchmail, using a <code class="literal">.fetchmailrc</code> file is much easier. Place any desired configuration options in the <code class="literal">.fetchmailrc</code> file for those options to be used each time the <code class="literal command">fetchmail</code> command is issued. It is possible to override these at the time Fetchmail is run by specifying that option on the command line.
						</p><p>
							A user’s <code class="literal">.fetchmailrc</code> file contains three classes of configuration options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="emphasis"><em>global options</em></span> — Gives Fetchmail instructions that control the operation of the program or provide settings for every connection that checks for email.
								</li><li class="listitem">
									<span class="emphasis"><em>server options</em></span> — Specifies necessary information about the server being polled, such as the host name, as well as preferences for specific email servers, such as the port to check or number of seconds to wait before timing out. These options affect every user using that server.
								</li><li class="listitem">
									<span class="emphasis"><em>user options</em></span> — Contains information, such as user name and password, necessary to authenticate and check for email using a specified email server.
								</li></ul></div><p>
							Global options appear at the top of the <code class="literal">.fetchmailrc</code> file, followed by one or more server options, each of which designate a different email server that Fetchmail should check. User options follow server options for each user account checking that email server. Like server options, multiple user options may be specified for use with a particular server as well as to check multiple email accounts on the same server.
						</p><p>
							Server options are called into service in the <code class="literal">.fetchmailrc</code> file by the use of a special option verb, <code class="literal command">poll</code> or <code class="literal command">skip</code>, that precedes any of the server information. The <code class="literal command">poll</code> action tells Fetchmail to use this server option when it is run, which checks for email using the specified user options. Any server options after a <code class="literal command">skip</code> action, however, are not checked unless this server’s host name is specified when Fetchmail is invoked. The <code class="literal command">skip</code> option is useful when testing configurations in the <code class="literal">.fetchmailrc</code> file because it only checks skipped servers when specifically invoked, and does not affect any currently working configurations.
						</p><p>
							The following is an example of a <code class="literal">.fetchmailrc</code> file:
						</p><pre class="literallayout">set postmaster "user1"
set bouncemail

poll pop.domain.com proto pop3
  user 'user1' there with password 'secret' is user1 here

poll mail.domain2.com
  user 'user5' there with password 'secret2' is user1 here
  user 'user7' there with password 'secret3' is user1 here</pre><p>
							In this example, the global options specify that the user is sent email as a last resort (<code class="literal command">postmaster</code> option) and all email errors are sent to the postmaster instead of the sender (<code class="literal command">bouncemail</code> option). The <code class="literal command">set</code> action tells Fetchmail that this line contains a global option. Then, two email servers are specified, one set to check using <code class="literal">POP3</code>, the other for trying various protocols to find one that works. Two users are checked using the second server option, but all email found for any user is sent to <code class="literal command">user1</code>'s mail spool. This allows multiple mailboxes to be checked on multiple servers, while appearing in a single MUA inbox. Each user’s specific information begins with the <code class="literal command">user</code> action.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Users are not required to place their password in the <code class="literal">.fetchmailrc</code> file. Omitting the <code class="literal command">with password '<span class="emphasis"><em>password</em></span>'</code> section causes Fetchmail to ask for a password when it is launched.
							</p></div></div><p>
							Fetchmail has numerous global, server, and local options. Many of these options are rarely used or only apply to very specific situations. The <code class="literal">fetchmail</code> man page explains each option in detail, but the most common ones are listed in the following three sections.
						</p></section><section class="section" id="s3-email-mda-fetchmail-configuration-global"><div class="titlepage"><div><div><h4 class="title">15.3.3.2.&nbsp;Global Options</h4></div></div></div><p>
							Each global option should be placed on a single line after a <code class="literal command">set</code> action.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">daemon <span class="emphasis"><em>seconds</em></span></code> — Specifies daemon-mode, where Fetchmail stays in the background. Replace <span class="emphasis"><em>seconds</em></span> with the number of seconds Fetchmail is to wait before polling the server.
								</li><li class="listitem">
									<code class="literal command">postmaster</code> — Specifies a local user to send mail to in case of delivery problems.
								</li><li class="listitem">
									<code class="literal command">syslog</code> — Specifies the log file for errors and status messages. By default, this is <code class="literal">/var/log/maillog</code>.
								</li></ul></div></section><section class="section" id="s3-email-mda-fetchmail-configuration-server"><div class="titlepage"><div><div><h4 class="title">15.3.3.3.&nbsp;Server Options</h4></div></div></div><p>
							Server options must be placed on their own line in <code class="literal">.fetchmailrc</code> after a <code class="literal command">poll</code> or <code class="literal command">skip</code> action.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">auth <span class="emphasis"><em>auth-type</em></span></code> — Replace <span class="emphasis"><em>auth-type</em></span> with the type of authentication to be used. By default, <code class="literal command">password</code> authentication is used, but some protocols support other types of authentication, including <code class="literal command">kerberos_v5</code>, <code class="literal command">kerberos_v4</code>, and <code class="literal command">ssh</code>. If the <code class="literal command">any</code> authentication type is used, Fetchmail first tries methods that do not require a password, then methods that mask the password, and finally attempts to send the password unencrypted to authenticate to the server.
								</li><li class="listitem">
									<code class="literal command">interval <span class="emphasis"><em>number</em></span></code> — Polls the specified server every <code class="literal command"><span class="emphasis"><em>number</em></span></code> of times that it checks for email on all configured servers. This option is generally used for email servers where the user rarely receives messages.
								</li><li class="listitem">
									<code class="literal command">port <span class="emphasis"><em>port-number</em></span></code> — Replace <span class="emphasis"><em>port-number</em></span> with the port number. This value overrides the default port number for the specified protocol.
								</li><li class="listitem">
									<code class="literal command">proto <span class="emphasis"><em>protocol</em></span></code> — Replace <span class="emphasis"><em>protocol</em></span> with the protocol, such as <code class="literal command">pop3</code> or <code class="literal command">imap</code>, to use when checking for messages on the server.
								</li><li class="listitem">
									<code class="literal command">timeout <span class="emphasis"><em>seconds</em></span></code> — Replace <span class="emphasis"><em>seconds</em></span> with the number of seconds of server inactivity after which Fetchmail gives up on a connection attempt. If this value is not set, a default of <code class="literal command">300</code> seconds is used.
								</li></ul></div></section><section class="section" id="s3-email-fetchmail-configuration-user"><div class="titlepage"><div><div><h4 class="title">15.3.3.4.&nbsp;User Options</h4></div></div></div><p>
							User options may be placed on their own lines beneath a server option or on the same line as the server option. In either case, the defined options must follow the <code class="literal command">user</code> option (defined below).
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">fetchall</code> — Orders Fetchmail to download all messages in the queue, including messages that have already been viewed. By default, Fetchmail only pulls down new messages.
								</li><li class="listitem">
									<code class="literal command">fetchlimit <span class="emphasis"><em>number</em></span></code> — Replace <span class="emphasis"><em>number</em></span> with the number of messages to be retrieved before stopping.
								</li><li class="listitem">
									<code class="literal command">flush</code> — Deletes all previously viewed messages in the queue before retrieving new messages.
								</li><li class="listitem">
									<code class="literal command">limit <span class="emphasis"><em>max-number-bytes</em></span></code> — Replace <span class="emphasis"><em>max-number-bytes</em></span> with the maximum size in bytes that messages are allowed to be when retrieved by Fetchmail. This option is useful with slow network links, when a large message takes too long to download.
								</li><li class="listitem">
									<code class="literal command">password '<span class="emphasis"><em>password</em></span>'</code> — Replace <span class="emphasis"><em>password</em></span> with the user’s password.
								</li><li class="listitem">
									<code class="literal command">preconnect "<span class="emphasis"><em>command</em></span>"</code> — Replace <span class="emphasis"><em>command</em></span> with a command to be executed before retrieving messages for the user.
								</li><li class="listitem">
									<code class="literal command">postconnect "<span class="emphasis"><em>command</em></span>"</code> — Replace <span class="emphasis"><em>command</em></span> with a command to be executed after retrieving messages for the user.
								</li><li class="listitem">
									<code class="literal command">ssl</code> — Activates SSL encryption. At the time of writing, the default action is to use the best available from <code class="literal">SSL2</code>, <code class="literal">SSL3</code>, <code class="literal">SSL23</code>, <code class="literal">TLS1</code>, <code class="literal">TLS1.1</code> and <code class="literal">TLS1.2</code>. Note that <code class="literal">SSL2</code> is considered obsolete and due to the <a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a>, <code class="literal">SSLv3</code> should not be used. However there is no way to force the use of TLS1 or newer, therefore ensure the mail server being connected to is configured <span class="emphasis"><em>not</em></span> to use <code class="literal">SSLv2</code> and <code class="literal">SSLv3</code>. Use <code class="literal command">stunnel</code> where the server cannot be configured <span class="emphasis"><em>not</em></span> to use <code class="literal">SSLv2</code> and <code class="literal">SSLv3</code>.
								</li><li class="listitem">
									<code class="literal command">sslproto</code> — Defines allowed SSL or TLS protocols. Possible values are <code class="literal">SSL2</code>, <code class="literal">SSL3</code>, <code class="literal">SSL23</code>, and <code class="literal">TLS1</code>. The default value, if <code class="literal command">sslproto</code> is omitted, unset, or set to an invalid value, is <code class="literal">SSL23</code>. The default action is to use the best from <code class="literal">SSLv2</code>, <code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLS1.1</code> and <code class="literal">TLS1.2</code>. Note that setting any other value for SSL or TLS will disable all the other protocols. Due to the <a class="link" href="https://access.redhat.com/articles/1232123">POODLE: SSLv3 vulnerability (CVE-2014-3566)</a>, it is recommend to omit this option, or set it to <code class="literal">SSLv23</code>, and configure the corresponding mail server <span class="emphasis"><em>not</em></span> to use <code class="literal">SSLv2</code> and <code class="literal">SSLv3</code>. Use <code class="literal command">stunnel</code> where the server cannot be configured <span class="emphasis"><em>not</em></span> to use <code class="literal">SSLv2</code> and <code class="literal">SSLv3</code>.
								</li><li class="listitem">
									<code class="literal command">user "<span class="emphasis"><em>username</em></span>"</code> — Replace <span class="emphasis"><em>username</em></span> with the user name used by Fetchmail to retrieve messages. <span class="emphasis"><em>This option must precede all other user options.</em></span>
								</li></ul></div></section><section class="section" id="s3-email-mda-fetchmail-commands"><div class="titlepage"><div><div><h4 class="title">15.3.3.5.&nbsp;Fetchmail Command Options</h4></div></div></div><p>
							Most Fetchmail options used on the command line when executing the <code class="literal command">fetchmail</code> command mirror the <code class="literal">.fetchmailrc</code> configuration options. In this way, Fetchmail may be used with or without a configuration file. These options are not used on the command line by most users because it is easier to leave them in the <code class="literal">.fetchmailrc</code> file.
						</p><p>
							There may be times when it is desirable to run the <code class="literal command">fetchmail</code> command with other options for a particular purpose. It is possible to issue command options to temporarily override a <code class="literal">.fetchmailrc</code> setting that is causing an error, as any options specified at the command line override configuration file options.
						</p></section><section class="section" id="s3-email-mda-fetchmail-commands-info"><div class="titlepage"><div><div><h4 class="title">15.3.3.6.&nbsp;Informational or Debugging Options</h4></div></div></div><p>
							Certain options used after the <code class="literal command">fetchmail</code> command can supply important information.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">--configdump</code> — Displays every possible option based on information from <code class="literal">.fetchmailrc</code> and Fetchmail defaults. No email is retrieved for any users when using this option.
								</li><li class="listitem">
									<code class="literal command">-s</code> — Executes Fetchmail in silent mode, preventing any messages, other than errors, from appearing after the <code class="literal command">fetchmail</code> command.
								</li><li class="listitem">
									<code class="literal command">-v</code> — Executes Fetchmail in verbose mode, displaying every communication between Fetchmail and remote email servers.
								</li><li class="listitem">
									<code class="literal command">-V</code> — Displays detailed version information, lists its global options, and shows settings to be used with each user, including the email protocol and authentication method. No email is retrieved for any users when using this option.
								</li></ul></div></section><section class="section" id="s3-email-mda-fetchmail-commands-special"><div class="titlepage"><div><div><h4 class="title">15.3.3.7.&nbsp;Special Options</h4></div></div></div><p>
							These options are occasionally useful for overriding defaults often found in the <code class="literal">.fetchmailrc</code> file.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">-a</code> — Fetchmail downloads all messages from the remote email server, whether new or previously viewed. By default, Fetchmail only downloads new messages.
								</li><li class="listitem">
									<code class="literal command">-k</code> — Fetchmail leaves the messages on the remote email server after downloading them. This option overrides the default behavior of deleting messages after downloading them.
								</li><li class="listitem">
									<code class="literal command">-l <span class="emphasis"><em>max-number-bytes</em></span></code> — Fetchmail does not download any messages over a particular size and leaves them on the remote email server.
								</li><li class="listitem">
									<code class="literal command">--quit</code> — Quits the Fetchmail daemon process.
								</li></ul></div><p>
							More commands and <code class="literal">.fetchmailrc</code> options can be found in the <code class="literal command">fetchmail</code> man page.
						</p></section></section><section class="section" id="s2-email-switchmail"><div class="titlepage"><div><div><h3 class="title">15.3.4.&nbsp;Mail Transport Agent (MTA) Configuration</h3></div></div></div><p>
						A <span class="emphasis"><em>Mail Transport Agent</em></span> (MTA) is essential for sending email. A <span class="emphasis"><em>Mail User Agent</em></span> (MUA) such as <span class="strong strong"><strong><span class="application application">Evolution</span></strong></span> or <span class="strong strong"><strong><span class="application application">Mutt</span></strong></span>, is used to read and compose email. When a user sends an email from an MUA, the message is handed off to the MTA, which sends the message through a series of MTAs until it reaches its destination.
					</p><p>
						Even if a user does not plan to send email from the system, some automated tasks or system programs might use the <code class="literal command">mail</code> command to send email containing log messages to the <code class="literal">root</code> user of the local system.
					</p><p>
						Red Hat Enterprise Linux 7 provides two MTAs: Postfix and Sendmail. If both are installed, Postfix is the default MTA.
					</p></section></section><section class="section" id="s1-email-mda"><div class="titlepage"><div><div><h2 class="title">15.4.&nbsp;Mail Delivery Agents</h2></div></div></div><p>
					Red Hat Enterprise Linux includes <code class="literal">Procmail</code> as primary MDA. Both applications are considered LDAs and both move email from the MTA’s spool file into the user’s mailbox. However, Procmail provides a robust filtering system.
				</p><p>
					This section details only Procmail. For information on the <code class="literal command">mail</code> command, consult its man page (<code class="literal command">man mail</code>).
				</p><p>
					Procmail delivers and filters email as it is placed in the mail spool file of the localhost. It is powerful, gentle on system resources, and widely used. Procmail can play a critical role in delivering email to be read by email client applications.
				</p><p>
					Procmail can be invoked in several different ways. Whenever an MTA places an email into the mail spool file, Procmail is launched. Procmail then filters and files the email for the MUA and quits. Alternatively, the MUA can be configured to execute Procmail any time a message is received so that messages are moved into their correct mailboxes. By default, the presence of <code class="literal">/etc/procmailrc</code> or of a <code class="literal">~/.procmailrc</code> file (also called an <span class="emphasis"><em>rc</em></span> file) in the user’s home directory invokes Procmail whenever an MTA receives a new message.
				</p><p>
					By default, no system-wide <code class="literal">rc</code> files exist in the <code class="literal">/etc</code> directory and no <code class="literal">.procmailrc</code> files exist in any user’s home directory. Therefore, to use Procmail, each user must construct a <code class="literal">.procmailrc</code> file with specific environment variables and rules.
				</p><p>
					Whether Procmail acts upon an email message depends upon whether the message matches a specified set of conditions or <span class="emphasis"><em>recipes</em></span> in the <code class="literal">rc</code> file. If a message matches a recipe, then the email is placed in a specified file, is deleted, or is otherwise processed.
				</p><p>
					When Procmail starts, it reads the email message and separates the body from the header information. Next, Procmail looks for a <code class="literal">/etc/procmailrc</code> file and <code class="literal">rc</code> files in the <code class="literal">/etc/procmailrcs/</code> directory for default, system-wide, Procmail environmental variables and recipes. Procmail then searches for a <code class="literal">.procmailrc</code> file in the user’s home directory. Many users also create additional <code class="literal">rc</code> files for Procmail that are referred to within the <code class="literal">.procmailrc</code> file in their home directory.
				</p><section class="section" id="s2-email-procmail-configuration"><div class="titlepage"><div><div><h3 class="title">15.4.1.&nbsp;Procmail Configuration</h3></div></div></div><p>
						The Procmail configuration file contains important environmental variables. These variables specify things such as which messages to sort and what to do with the messages that do not match any recipes.
					</p><p>
						These environmental variables usually appear at the beginning of the <code class="literal">~/.procmailrc</code> file in the following format:
					</p><pre class="literallayout"><span class="emphasis"><em>env-variable</em></span>="<span class="emphasis"><em>value</em></span>"</pre><p>
						In this example, <code class="literal command"><span class="emphasis"><em>env-variable</em></span></code> is the name of the variable and <code class="literal command"><span class="emphasis"><em>value</em></span></code> defines the variable.
					</p><p>
						There are many environment variables not used by most Procmail users and many of the more important environment variables are already defined by a default value. Most of the time, the following variables are used:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal command">DEFAULT</code> — Sets the default mailbox where messages that do not match any recipes are placed.
							</p><p class="simpara">
								The default <code class="literal command">DEFAULT</code> value is the same as <code class="literal command">$ORGMAIL</code>.
							</p></li><li class="listitem"><p class="simpara">
								<code class="literal command">INCLUDERC</code> — Specifies additional <code class="literal">rc</code> files containing more recipes for messages to be checked against. This breaks up the Procmail recipe lists into individual files that fulfill different roles, such as blocking spam and managing email lists, that can then be turned off or on by using comment characters in the user’s <code class="literal">~/.procmailrc</code> file.
							</p><p class="simpara">
								For example, lines in a user’s <code class="literal">~/.procmailrc</code> file may look like this:
							</p><pre class="literallayout">MAILDIR=$HOME/Msgs
INCLUDERC=$MAILDIR/lists.rc
INCLUDERC=$MAILDIR/spam.rc</pre><p class="simpara">
								To turn off Procmail filtering of email lists but leaving spam control in place, comment out the first <code class="literal command">INCLUDERC</code> line with a hash sign (<code class="literal">#</code>). Note that it uses paths relative to the current directory.
							</p></li><li class="listitem">
								<code class="literal command">LOCKSLEEP</code> — Sets the amount of time, in seconds, between attempts by Procmail to use a particular lockfile. The default is 8 seconds.
							</li><li class="listitem">
								<code class="literal command">LOCKTIMEOUT</code> — Sets the amount of time, in seconds, that must pass after a lockfile was last modified before Procmail assumes that the lockfile is old and can be deleted. The default is 1024 seconds.
							</li><li class="listitem">
								<code class="literal command">LOGFILE</code> — The file to which any Procmail information or error messages are written.
							</li><li class="listitem">
								<code class="literal command">MAILDIR</code> — Sets the current working directory for Procmail. If set, all other Procmail paths are relative to this directory.
							</li><li class="listitem"><p class="simpara">
								<code class="literal command">ORGMAIL</code> — Specifies the original mailbox, or another place to put the messages if they cannot be placed in the default or recipe-required location.
							</p><p class="simpara">
								By default, a value of <code class="literal command">/var/spool/mail/$LOGNAME</code> is used.
							</p></li><li class="listitem">
								<code class="literal command">SUSPEND</code> — Sets the amount of time, in seconds, that Procmail pauses if a necessary resource, such as swap space, is not available.
							</li><li class="listitem">
								<code class="literal command">SWITCHRC</code> — Allows a user to specify an external file containing additional Procmail recipes, much like the <code class="literal command">INCLUDERC</code> option, except that recipe checking is actually stopped on the referring configuration file and only the recipes on the <code class="literal command">SWITCHRC</code>-specified file are used.
							</li><li class="listitem">
								<code class="literal command">VERBOSE</code> — Causes Procmail to log more information. This option is useful for debugging.
							</li></ul></div><p>
						Other important environmental variables are pulled from the shell, such as <code class="literal command">LOGNAME</code>, the login name; <code class="literal command">HOME</code>, the location of the home directory; and <code class="literal command">SHELL</code>, the default shell.
					</p><p>
						A comprehensive explanation of all environments variables, and their default values, is available in the <code class="literal">procmailrc</code> man page.
					</p></section><section class="section" id="s2-email-procmail-recipes"><div class="titlepage"><div><div><h3 class="title">15.4.2.&nbsp;Procmail Recipes</h3></div></div></div><p>
						New users often find the construction of recipes the most difficult part of learning to use Procmail. This difficulty is often attributed to recipes matching messages by using <span class="emphasis"><em>regular expressions</em></span> which are used to specify qualifications for string matching. However, regular expressions are not very difficult to construct and even less difficult to understand when read. Additionally, the consistency of the way Procmail recipes are written, regardless of regular expressions, makes it easy to learn by example. To see example Procmail recipes, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-procmail-recipes-examples" title="15.4.2.5. Recipe Examples">Section&nbsp;15.4.2.5, “Recipe Examples”</a>.
					</p><p>
						Procmail recipes take the following form:
					</p><pre class="literallayout">:0 <span class="emphasis"><em>flags</em></span> : <span class="emphasis"><em>lockfile-name</em></span>
* <span class="emphasis"><em>condition_1_special-condition-character</em></span> <span class="emphasis"><em>condition_1_regular_expression</em></span>
* <span class="emphasis"><em>condition_2_special-condition-character</em></span> <span class="emphasis"><em>condition-2_regular_expression</em></span>
* <span class="emphasis"><em>condition_N_special-condition-character</em></span> <span class="emphasis"><em>condition-N_regular_expression</em></span>
    <span class="emphasis"><em>special-action-character</em></span>
    <span class="emphasis"><em>action-to-perform</em></span></pre><p>
						The first two characters in a Procmail recipe are a colon and a zero. Various flags can be placed after the zero to control how Procmail processes the recipe. A colon after the <code class="literal command"><span class="emphasis"><em>flags</em></span></code> section specifies that a lockfile is created for this message. If a lockfile is created, the name can be specified by replacing <code class="literal command"><span class="emphasis"><em>lockfile-name</em></span></code>.
					</p><p>
						A recipe can contain several conditions to match against the message. If it has no conditions, every message matches the recipe. Regular expressions are placed in some conditions to facilitate message matching. If multiple conditions are used, they must all match for the action to be performed. Conditions are checked based on the flags set in the recipe’s first line. Optional special characters placed after the asterisk character (<code class="literal command">*</code>) can further control the condition.
					</p><p>
						The <code class="literal command"><span class="emphasis"><em>action-to-perform</em></span></code> argument specifies the action taken when the message matches one of the conditions. There can only be one action per recipe. In many cases, the name of a mailbox is used here to direct matching messages into that file, effectively sorting the email. Special action characters may also be used before the action is specified. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-procmail-recipes-special" title="15.4.2.4. Special Conditions and Actions">Section&nbsp;15.4.2.4, “Special Conditions and Actions”</a> for more information.
					</p><section class="section" id="s2-email-procmail-recipes-delivering"><div class="titlepage"><div><div><h4 class="title">15.4.2.1.&nbsp;Delivering vs. Non-Delivering Recipes</h4></div></div></div><p>
							The action used if the recipe matches a particular message determines whether it is considered a <span class="emphasis"><em>delivering</em></span> or <span class="emphasis"><em>non-delivering</em></span> recipe. A delivering recipe contains an action that writes the message to a file, sends the message to another program, or forwards the message to another email address. A non-delivering recipe covers any other actions, such as a <span class="emphasis"><em>nesting block</em></span>. A nesting block is a set of actions, contained in braces <code class="literal command">{</code><code class="literal command">}</code>, that are performed on messages which match the recipe’s conditions. Nesting blocks can be nested inside one another, providing greater control for identifying and performing actions on messages.
						</p><p>
							When messages match a delivering recipe, Procmail performs the specified action and stops comparing the message against any other recipes. Messages that match non-delivering recipes continue to be compared against other recipes.
						</p></section><section class="section" id="s3-email-procmail-recipes-flags"><div class="titlepage"><div><div><h4 class="title">15.4.2.2.&nbsp;Flags</h4></div></div></div><p>
							Flags are essential to determine how or if a recipe’s conditions are compared to a message. The <span class="strong strong"><strong><span class="application application">egrep</span></strong></span> utility is used internally for matching of the conditions. The following flags are commonly used:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">A</code> — Specifies that this recipe is only used if the previous recipe without an <code class="literal command">A</code> or <code class="literal command">a</code> flag also matched this message.
								</li><li class="listitem">
									<code class="literal command">a</code> — Specifies that this recipe is only used if the previous recipe with an <code class="literal command">A</code> or <code class="literal command">a</code> flag also matched this message <span class="emphasis"><em>and</em></span> was successfully completed.
								</li><li class="listitem">
									<code class="literal command">B</code> — Parses the body of the message and looks for matching conditions.
								</li><li class="listitem">
									<code class="literal command">b</code> — Uses the body in any resulting action, such as writing the message to a file or forwarding it. This is the default behavior.
								</li><li class="listitem">
									<code class="literal command">c</code> — Generates a carbon copy of the email. This is useful with delivering recipes, since the required action can be performed on the message and a copy of the message can continue being processed in the <code class="literal">rc</code> files.
								</li><li class="listitem">
									<code class="literal command">D</code> — Makes the <code class="literal command">egrep</code> comparison case-sensitive. By default, the comparison process is not case-sensitive.
								</li><li class="listitem">
									<code class="literal command">E</code> — While similar to the <code class="literal command">A</code> flag, the conditions in the recipe are only compared to the message if the immediately preceding recipe without an <code class="literal command">E</code> flag did not match. This is comparable to an <code class="literal">else</code> action.
								</li><li class="listitem">
									<code class="literal command">e</code> — The recipe is compared to the message only if the action specified in the immediately preceding recipe fails.
								</li><li class="listitem">
									<code class="literal command">f</code> — Uses the pipe as a filter.
								</li><li class="listitem">
									<code class="literal command">H</code> — Parses the header of the message and looks for matching conditions. This is the default behavior.
								</li><li class="listitem">
									<code class="literal command">h</code> — Uses the header in a resulting action. This is the default behavior.
								</li><li class="listitem">
									<code class="literal command">w</code> — Tells Procmail to wait for the specified filter or program to finish, and reports whether or not it was successful before considering the message filtered.
								</li><li class="listitem">
									<code class="literal command">W</code> — Is identical to <code class="literal command">w</code> except that "Program failure" messages are suppressed.
								</li></ul></div><p>
							For a detailed list of additional flags, see the <code class="literal">procmailrc</code> man page.
						</p></section><section class="section" id="s3-email-procmail-recipes-lockfile"><div class="titlepage"><div><div><h4 class="title">15.4.2.3.&nbsp;Specifying a Local Lockfile</h4></div></div></div><p>
							Lockfiles are very useful with Procmail to ensure that more than one process does not try to alter a message simultaneously. Specify a local lockfile by placing a colon (<code class="literal command">:</code>) after any flags on a recipe’s first line. This creates a local lockfile based on the destination file name plus whatever has been set in the <code class="literal command">LOCKEXT</code> global environment variable.
						</p><p>
							Alternatively, specify the name of the local lockfile to be used with this recipe after the colon.
						</p></section><section class="section" id="s3-email-procmail-recipes-special"><div class="titlepage"><div><div><h4 class="title">15.4.2.4.&nbsp;Special Conditions and Actions</h4></div></div></div><p>
							Special characters used before Procmail recipe conditions and actions change the way they are interpreted.
						</p><p>
							The following characters may be used after the asterisk character (<code class="literal command">*</code>) at the beginning of a recipe’s condition line:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">!</code> — In the condition line, this character inverts the condition, causing a match to occur only if the condition does not match the message.
								</li><li class="listitem">
									<code class="literal command">&lt;</code> — Checks if the message is under a specified number of bytes.
								</li><li class="listitem">
									<code class="literal command">&gt;</code> — Checks if the message is over a specified number of bytes.
								</li></ul></div><p>
							The following characters are used to perform special actions:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal command">!</code> — In the action line, this character tells Procmail to forward the message to the specified email addresses.
								</li><li class="listitem">
									<code class="literal command">$</code> — Refers to a variable set earlier in the <code class="literal">rc</code> file. This is often used to set a common mailbox that is referred to by various recipes.
								</li><li class="listitem">
									<code class="literal command">|</code> — Starts a specified program to process the message.
								</li><li class="listitem">
									<code class="literal command">{</code> and <code class="literal command">}</code> — Constructs a nesting block, used to contain additional recipes to apply to matching messages.
								</li></ul></div><p>
							If no special character is used at the beginning of the action line, Procmail assumes that the action line is specifying the mailbox in which to write the message.
						</p></section><section class="section" id="s3-email-procmail-recipes-examples"><div class="titlepage"><div><div><h4 class="title">15.4.2.5.&nbsp;Recipe Examples</h4></div></div></div><p>
							Procmail is an extremely flexible program, but as a result of this flexibility, composing Procmail recipes from scratch can be difficult for new users.
						</p><p>
							The best way to develop the skills to build Procmail recipe conditions stems from a strong understanding of regular expressions combined with looking at many examples built by others. A thorough explanation of regular expressions is beyond the scope of this section. The structure of Procmail recipes and useful sample Procmail recipes can be found at various places on the Internet. The proper use and adaptation of regular expressions can be derived by viewing these recipe examples. In addition, introductory information about basic regular expression rules can be found in the <code class="literal">grep(1)</code> man page.
						</p><p>
							The following simple examples demonstrate the basic structure of Procmail recipes and can provide the foundation for more intricate constructions.
						</p><p>
							A basic recipe may not even contain conditions, as is illustrated in the following example:
						</p><pre class="literallayout">:0:
new-mail.spool</pre><p>
							The first line specifies that a local lockfile is to be created but does not specify a name, so Procmail uses the destination file name and appends the value specified in the <code class="literal command">LOCKEXT</code> environment variable. No condition is specified, so every message matches this recipe and is placed in the single spool file called <code class="literal">new-mail.spool</code>, located within the directory specified by the <code class="literal command">MAILDIR</code> environment variable. An MUA can then view messages in this file.
						</p><p>
							A basic recipe, such as this, can be placed at the end of all <code class="literal">rc</code> files to direct messages to a default location.
						</p><p>
							The following example matched messages from a specific email address and throws them away.
						</p><pre class="literallayout">:0
* ^From: spammer@domain.com
/dev/null</pre><p>
							With this example, any messages sent by <code class="literal">spammer@domain.com</code> are sent to the <code class="literal">/dev/null</code> device, deleting them.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Be certain that rules are working as intended before sending messages to <code class="literal">/dev/null</code> for permanent deletion. If a recipe inadvertently catches unintended messages, and those messages disappear, it becomes difficult to troubleshoot the rule.
							</p><p>
								A better solution is to point the recipe’s action to a special mailbox, which can be checked from time to time to look for false positives. Once satisfied that no messages are accidentally being matched, delete the mailbox and direct the action to send the messages to <code class="literal">/dev/null</code>.
							</p></div></div><p>
							The following recipe grabs email sent from a particular mailing list and places it in a specified folder.
						</p><pre class="literallayout">:0:
* ^(From|Cc|To).*tux-lug
tuxlug</pre><p>
							Any messages sent from the <code class="literal">tux-lug@domain.com</code> mailing list are placed in the <code class="literal">tuxlug</code> mailbox automatically for the MUA. Note that the condition in this example matches the message if it has the mailing list’s email address on the <code class="literal">From</code>, <code class="literal">Cc</code>, or <code class="literal">To</code> lines.
						</p><p>
							Consult the many Procmail online resources available in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-additional-resources" title="15.7. Additional Resources">Section&nbsp;15.7, “Additional Resources”</a> for more detailed and powerful recipes.
						</p></section><section class="section" id="s3-email-mda-spam"><div class="titlepage"><div><div><h4 class="title">15.4.2.6.&nbsp;Spam Filters</h4></div></div></div><p>
							Because it is called by Sendmail, Postfix, and Fetchmail upon receiving new emails, Procmail can be used as a powerful tool for combating spam.
						</p><p>
							This is particularly true when Procmail is used in conjunction with SpamAssassin. When used together, these two applications can quickly identify spam emails, and sort or destroy them.
						</p><p>
							SpamAssassin uses header analysis, text analysis, blacklists, a spam-tracking database, and self-learning Bayesian spam analysis to quickly and accurately identify and tag spam.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								In order to use <span class="strong strong"><strong><span class="application application">SpamAssassin</span></strong></span>, first ensure the <span class="strong strong"><strong><span class="package package">spamassassin</span></strong></span> package is installed on your system by running, as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# yum install spamassassin</pre><p>
								For more information on installing packages with Yum, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
							</p></div></div><p>
							The easiest way for a local user to use SpamAssassin is to place the following line near the top of the <code class="literal">~/.procmailrc</code> file:
						</p><pre class="literallayout"><code class="literal command">INCLUDERC=/etc/mail/spamassassin/spamassassin-default.rc</code></pre><p>
							The <code class="literal">/etc/mail/spamassassin/spamassassin-default.rc</code> contains a simple Procmail rule that activates SpamAssassin for all incoming email. If an email is determined to be spam, it is tagged in the header as such and the title is prepended with the following pattern:
						</p><pre class="literallayout"><span class="strong strong"><strong><span class="strong strong"><strong><!--Empty--></strong></span>SPAM<span class="strong strong"><strong><!--Empty--></strong></span></strong></span></pre><p>
							The message body of the email is also prepended with a running tally of what elements caused it to be diagnosed as spam.
						</p><p>
							To file email tagged as spam, a rule similar to the following can be used:
						</p><pre class="literallayout">      :0 Hw
      * ^X-Spam-Status: Yes
      spam</pre><p>
							This rule files all email tagged in the header as spam into a mailbox called <code class="literal">spam</code>.
						</p><p>
							Since SpamAssassin is a Perl script, it may be necessary on busy servers to use the binary SpamAssassin daemon (<code class="literal">spamd</code>) and the client application (<span class="strong strong"><strong><span class="application application">spamc</span></strong></span>). Configuring SpamAssassin this way, however, requires <code class="literal">root</code> access to the host.
						</p><p>
							To start the <code class="literal">spamd</code> daemon, type the following command:
						</p><pre class="literallayout">~]# systemctl start spamassassin</pre><p>
							To start the SpamAssassin daemon when the system is booted, run:
						</p><pre class="literallayout"><code class="literal command">systemctl enable spamassassin.service</code></pre><p>
							See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a> for more information about starting and stopping services.
						</p><p>
							To configure Procmail to use the SpamAssassin client application instead of the Perl script, place the following line near the top of the <code class="literal">~/.procmailrc</code> file. For a system-wide configuration, place it in <code class="literal">/etc/procmailrc</code>:
						</p><pre class="literallayout"><code class="literal command">INCLUDERC=/etc/mail/spamassassin/spamassassin-spamc.rc</code></pre></section></section></section><section class="section" id="s1-email-mua"><div class="titlepage"><div><div><h2 class="title">15.5.&nbsp;Mail User Agents</h2></div></div></div><p>
					Red Hat Enterprise Linux offers a variety of email programs, both graphical email client programs, such as <span class="strong strong"><strong><span class="application application">Evolution</span></strong></span>, and text-based email programs such as <code class="literal command">mutt</code>.
				</p><p>
					The remainder of this section focuses on securing communication between a client and a server.
				</p><section class="section" id="s2-email-security"><div class="titlepage"><div><div><h3 class="title">15.5.1.&nbsp;Securing Communication</h3></div></div></div><p>
						MUAs included with Red Hat Enterprise Linux, such as <span class="strong strong"><strong><span class="application application">Thunderbird</span></strong></span>, <span class="strong strong"><strong><span class="application application">Evolution</span></strong></span> and <span class="strong strong"><strong><span class="application application">Mutt</span></strong></span> offer SSL-encrypted email sessions.
					</p><p>
						Like any other service that flows over a network unencrypted, important email information, such as user names, passwords, and entire messages, may be intercepted and viewed by users on the network. Additionally, since the standard <code class="literal">POP</code> and <code class="literal">IMAP</code> protocols pass authentication information unencrypted, it is possible for an attacker to gain access to user accounts by collecting user names and passwords as they are passed over the network.
					</p><section class="section" id="s3-email-security-clients"><div class="titlepage"><div><div><h4 class="title">15.5.1.1.&nbsp;Secure Email Clients</h4></div></div></div><p>
							Most Linux MUAs designed to check email on remote servers support SSL encryption. To use SSL when retrieving email, it must be enabled on both the email client and the server.
						</p><p>
							SSL is easy to enable on the client-side, often done with the click of a button in the MUA’s configuration window or via an option in the MUA’s configuration file. Secure <code class="literal">IMAP</code> and <code class="literal">POP</code> have known port numbers (993 and 995, respectively) that the MUA uses to authenticate and download messages.
						</p></section><section class="section" id="s3-email-security-servers"><div class="titlepage"><div><div><h4 class="title">15.5.1.2.&nbsp;Securing Email Client Communications</h4></div></div></div><p>
							Offering SSL encryption to <code class="literal">IMAP</code> and <code class="literal">POP</code> users on the email server is a simple matter.
						</p><p>
							First, create an SSL certificate. This can be done in two ways: by applying to a <span class="emphasis"><em>Certificate Authority</em></span> (<span class="emphasis"><em>CA</em></span>) for an SSL certificate or by creating a self-signed certificate.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Self-signed certificates should be used for testing purposes only. Any server used in a production environment should use an SSL certificate signed by a CA.
							</p></div></div><p>
							To create a self-signed SSL certificate for <code class="literal">IMAP</code> or <code class="literal">POP</code>, change to the <code class="literal">/etc/pki/dovecot/</code> directory, edit the certificate parameters in the <code class="literal">/etc/pki/dovecot/dovecot-openssl.cnf</code> configuration file as you prefer, and type the following commands, as <code class="literal">root</code>:
						</p><pre class="literallayout">dovecot]# rm -f certs/dovecot.pem private/dovecot.pem
dovecot]# /usr/libexec/dovecot/mkcert.sh</pre><p>
							Once finished, make sure you have the following configurations in your <code class="literal">/etc/dovecot/conf.d/10-ssl.conf</code> file:
						</p><pre class="literallayout">ssl_cert = &lt;/etc/pki/dovecot/certs/dovecot.pem
ssl_key = &lt;/etc/pki/dovecot/private/dovecot.pem</pre><p>
							Issue the following command to restart the <code class="literal command">dovecot</code> daemon:
						</p><pre class="literallayout">~]# systemctl restart dovecot</pre><p>
							Alternatively, the <code class="literal command">stunnel</code> command can be used as an encryption wrapper around the standard, non-secure connections to <code class="literal">IMAP</code> or <code class="literal">POP</code> services.
						</p><p>
							The <code class="literal command">stunnel</code> utility uses external OpenSSL libraries included with Red Hat Enterprise Linux to provide strong cryptography and to protect the network connections. It is recommended to apply to a CA to obtain an SSL certificate, but it is also possible to create a self-signed certificate.
						</p><p>
							See <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/sec-Using_stunnel.html">Using stunnel</a> in the Red Hat Enterprise Linux 7 Security Guide for instructions on how to install <code class="literal command">stunnel</code> and create its basic configuration. To configure <code class="literal command">stunnel</code> as a wrapper for <code class="literal">IMAPS</code> and <code class="literal">POP3S</code>, add the following lines to the <code class="literal">/etc/stunnel/stunnel.conf</code> configuration file:
						</p><pre class="literallayout">[pop3s]
accept = 995
connect = 110

[imaps]
accept = 993
connect = 143</pre><p>
							The Security Guide also explains how to start and stop <code class="literal command">stunnel</code>. Once you start it, it is possible to use an <code class="literal">IMAP</code> or a <code class="literal">POP</code> email client and connect to the email server using SSL encryption.
						</p></section></section></section><section class="section" id="s1-email-conf-mailserver"><div class="titlepage"><div><div><h2 class="title">15.6.&nbsp;Configuring Mail Server with Antispam and Antivirus</h2></div></div></div><p>
					Once your email delivery works, incoming emails may contain unsolicited messages also known as spam. These messages can also contain harmful viruses and malware, posing security risk and potential production loss on your systems.
				</p><p>
					To avoid these risks, you can filter the incoming messages and check them against viruses by using an antispam and antivirus solution.
				</p><section class="section" id="sec-email-conf-spamfiltering"><div class="titlepage"><div><div><h3 class="title">15.6.1.&nbsp;Configuring Spam Filtering for Mail Transport Agent or Mail Delivery Agent</h3></div></div></div><p>
						You can filter spam in a Mail Transport Agent (MTA), Mail Delivery Agent (MDA), or Mail User Agent (MUA). This chapter describes spam filtering in MTAs and MDAs.
					</p><section class="section" id="sec-email-conf-spamfiltering-mta"><div class="titlepage"><div><div><h4 class="title">15.6.1.1.&nbsp;Configuring Spam Filtering in a Mail Transport Agent</h4></div></div></div><p>
							Red Hat Enterprise Linux 7 offers two primary MTAs: Postfix and Sendmail.
						</p><p>
							For details on how to install and configure an MTA, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-email-mta" title="15.3. Mail Transport Agents">Section&nbsp;15.3, “Mail Transport Agents”</a>.
						</p><p>
							Stopping spam in a MTA side is possible with the use of Sendmail, which has several anti-spam features: <span class="emphasis"><em>header checks</em></span>, <span class="emphasis"><em>relaying denial</em></span>, <span class="emphasis"><em>access database</em></span> and <span class="emphasis"><em>sender information checks</em></span>. Fore more information, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-sendmail-stopping-spam" title="15.3.2.5. Stopping Spam">Section&nbsp;15.3.2.5, “Stopping Spam”</a>.
						</p><p>
							Moreover, both Postfix and Sendmail can work with third-party mail filters (milters) to filter spam and viruses in the mail-processing chain. In case of Postfix, the support for milters is included directly in the <span class="strong strong"><strong><span class="package package">postfix</span></strong></span> package. In case of Sendmail, you need to install the <span class="strong strong"><strong><span class="package package">sendmail-milter</span></strong></span> package, to be able to use milters.
						</p></section><section class="section" id="sec-email-conf-spamfiltering-mda"><div class="titlepage"><div><div><h4 class="title">15.6.1.2.&nbsp;Configuring Spam Filtering in a Mail Delivery Agent</h4></div></div></div><p>
							Red Hat Enterprise Linux includes two primary MDAs, Procmail and the <code class="literal command">mail</code> utility. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-email-types-mda" title="15.2.2. Mail Delivery Agent">Section&nbsp;15.2.2, “Mail Delivery Agent”</a> for more information.
						</p><p>
							To stop spam in an MDA, users of Procmail can install third-party software named SpamAssassin available in the <span class="strong strong"><strong><span class="package package">spamassassin</span></strong></span> package. SpamAssassin is a spam detection system that uses a variety of methods to identify spam in incoming mail. For further information on Spamassassin installation, configuration and deployment, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-email-mda-spam" title="15.4.2.6. Spam Filters">Section&nbsp;15.4.2.6, “Spam Filters”</a> or the <a class="link" href="https://access.redhat.com/articles/10714">How can I configure Spamassassin to filter all the incoming mail on my server?</a> Red Hat Knowledgebase article. For additional information on SpamAssassin, see the <a class="link" href="http://spamassassin.apache.org/">SpamAssassin project website</a>.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Note that SpamAssasin is a third-party software, and Red Hat does not support its use.
							</p><p>
								The <span class="strong strong"><strong><span class="package package">spamassassin</span></strong></span> package is available only through the Extra Packages for Enterprise Linux (EPEL) repository. To learn more about using the EPEL repository, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-spamassasin-clamav_epel" title="15.6.3. Using the EPEL Repository to install Antispam and Antivirus Software">Section&nbsp;15.6.3, “Using the EPEL Repository to install Antispam and Antivirus Software”</a>.
							</p><p>
								To learn more about how Red Hat handles the third party software and what level of support for it Red Hat provides, see <a class="link" href="https://access.redhat.com/articles/1067">How does Red Hat Global Support Services handle third-party software, drivers, and/or uncertified hardware/hypervisors or guest operating systems?</a> Red Hat Knowledgebase article.
							</p></div></div></section></section><section class="section" id="sec-email-conf-antivirus_protection"><div class="titlepage"><div><div><h3 class="title">15.6.2.&nbsp;Configuring Antivirus Protection</h3></div></div></div><p>
						To protect your system against viruses, you can install ClamAV, an open source antivirus engine for detecting trojans, viruses, malware, and other malicious software. For additional information about ClamAV, see the <a class="link" href="http://www.clamav.net/">ClamAV project website</a>.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Note that ClamAV is a third-party software, and Red Hat does not support its use.
						</p><p>
							The <span class="strong strong"><strong><span class="package package">clamav</span></strong></span>, <span class="strong strong"><strong><span class="package package">clamav-data</span></strong></span>, <span class="strong strong"><strong><span class="package package">clamav-server</span></strong></span> and <span class="strong strong"><strong><span class="package package">clamav-update</span></strong></span> packages are only available in the Extra Packages for Enterprise Linux (EPEL) repository. To learn more about using the EPEL repository, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-spamassasin-clamav_epel" title="15.6.3. Using the EPEL Repository to install Antispam and Antivirus Software">Section&nbsp;15.6.3, “Using the EPEL Repository to install Antispam and Antivirus Software”</a>.
						</p><p>
							To learn more about how Red Hat handles the third party software and what level of support for it Red Hat provides, see <a class="link" href="https://access.redhat.com/articles/1067">How does Red Hat Global Support Services handle third-party software, drivers, and/or uncertified hardware/hypervisors or guest operating systems?</a> Red Hat Knowledgebase article.
						</p></div></div><p>
						Once you have enabled the EPEL repository, install ClamAV by running the following command as the <code class="literal">root</code> user:
					</p><pre class="literallayout">~]# yum install clamav clamav-data clamav-server clamav-update</pre></section><section class="section" id="sec-spamassasin-clamav_epel"><div class="titlepage"><div><div><h3 class="title">15.6.3.&nbsp;Using the EPEL Repository to install Antispam and Antivirus Software</h3></div></div></div><p>
						EPEL is a Fedora Special Interest Group that creates, maintains, and manages a high quality set of additional packages for Red Hat Enterprise Linux. For more information, see the <a class="link" href="http://fedoraproject.org/wiki/EPEL">Fedora EPEL website</a>.
					</p><p>
						To use the EPEL repository, download <span class="strong strong"><strong><span class="package package"><a class="link" href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm">the latest version of the epel-release package for Red Hat Enterprise Linux 7</a></span></strong></span>. You can also run the following command as the <code class="literal">root</code> user:
					</p><pre class="literallayout">~]# yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpmzu</pre><p>
						When using the EPEL repository for the first time, you need to authenticate with a public GPG key. For more information, see <a class="link" href="https://getfedora.org/keys/">Fedora Package Signing Keys</a>.
					</p></section></section><section class="section" id="s1-email-additional-resources"><div class="titlepage"><div><div><h2 class="title">15.7.&nbsp;Additional Resources</h2></div></div></div><p>
					The following is a list of additional documentation about email applications.
				</p><section class="section" id="s2-email-installed-docs"><div class="titlepage"><div><div><h3 class="title">15.7.1.&nbsp;Installed Documentation</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Information on configuring Sendmail is included with the <span class="strong strong"><strong><span class="package package">sendmail</span></strong></span> and <span class="strong strong"><strong><span class="package package">sendmail-cf</span></strong></span> packages.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										<code class="literal">/usr/share/sendmail-cf/README</code> — Contains information on the <code class="literal command">m4</code> macro processor, file locations for Sendmail, supported mailers, how to access enhanced features, and more.
									</p><p class="simpara">
										In addition, the <code class="literal">sendmail</code> and <code class="literal">aliases</code> man pages contain helpful information covering various Sendmail options and the proper configuration of the Sendmail <code class="literal">/etc/mail/aliases</code> file.
									</p></li></ul></div></li><li class="listitem">
								<code class="literal">/usr/share/doc/postfix-<span class="emphasis"><em>version-number</em></span>/</code> — Contains a large amount of information on how to configure Postfix. Replace <span class="emphasis"><em>version-number</em></span> with the version number of Postfix.
							</li><li class="listitem">
								<code class="literal">/usr/share/doc/fetchmail-<span class="emphasis"><em>version-number</em></span>/</code> — Contains a full list of Fetchmail features in the <code class="literal">FEATURES</code> file and an introductory <code class="literal">FAQ</code> document. Replace <span class="emphasis"><em>version-number</em></span> with the version number of Fetchmail.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">/usr/share/doc/procmail-<span class="emphasis"><em>version-number</em></span>/</code> — Contains a <code class="literal">README</code> file that provides an overview of Procmail, a <code class="literal">FEATURES</code> file that explores every program feature, and an <code class="literal">FAQ</code> file with answers to many common configuration questions. Replace <span class="emphasis"><em>version-number</em></span> with the version number of Procmail.
							</p><p class="simpara">
								When learning how Procmail works and creating new recipes, the following Procmail man pages are invaluable:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">procmail</code> — Provides an overview of how Procmail works and the steps involved with filtering email.
									</li><li class="listitem">
										<code class="literal">procmailrc</code> — Explains the <code class="literal">rc</code> file format used to construct recipes.
									</li><li class="listitem">
										<code class="literal">procmailex</code> — Gives a number of useful, real-world examples of Procmail recipes.
									</li><li class="listitem">
										<code class="literal">procmailsc</code> — Explains the weighted scoring technique used by Procmail to match a particular recipe to a message.
									</li><li class="listitem">
										<code class="literal">/usr/share/doc/spamassassin-<span class="emphasis"><em>version-number</em></span>/</code> — Contains a large amount of information pertaining to SpamAssassin. Replace <span class="emphasis"><em>version-number</em></span> with the version number of the <span class="strong strong"><strong><span class="package package">spamassassin</span></strong></span> package.
									</li></ul></div></li></ul></div></section><section class="section" id="s2-email-online-documentation"><div class="titlepage"><div><div><h3 class="title">15.7.2.&nbsp;Online Documentation</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/solutions/75293">How to configure postfix with TLS?</a> — A Red Hat Knowledgebase article that describes configuring postfix to use TLS.
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/node/10658">How to configure a Sendmail Smart Host</a> — A Red Hat Knowledgebase solution that describes configuring a sendmail Smart Host.
							</li><li class="listitem">
								<a class="link" href="http://www.sendmail.org/">http://www.sendmail.org/</a> — Offers a thorough technical breakdown of Sendmail features, documentation and configuration examples.
							</li><li class="listitem">
								<a class="link" href="http://www.sendmail.com/">http://www.sendmail.com/</a> — Contains news, interviews and articles concerning Sendmail, including an expanded view of the many options available.
							</li><li class="listitem">
								<a class="link" href="http://www.postfix.org/">http://www.postfix.org/</a> — The Postfix project home page contains a wealth of information about Postfix. The mailing list is a particularly good place to look for information.
							</li><li class="listitem">
								<a class="link" href="http://www.fetchmail.info/fetchmail-FAQ.html">http://www.fetchmail.info/fetchmail-FAQ.html</a> — A thorough FAQ about Fetchmail.
							</li><li class="listitem">
								<a class="link" href="http://www.spamassassin.org/">http://www.spamassassin.org/</a> — The official site of the SpamAssassin project.
							</li></ul></div></section><section class="section" id="s2-email-related-books"><div class="titlepage"><div><div><h3 class="title">15.7.3.&nbsp;Related Books</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em><span class="citetitle citetitle">Sendmail Milters: A Guide for Fighting Spam</span></em></span> by Bryan Costales and Marcia Flynt; Addison-Wesley — A good Sendmail guide that can help you customize your mail filters.
							</li><li class="listitem">
								<span class="emphasis"><em><span class="citetitle citetitle">Sendmail</span></em></span> by Bryan Costales with Eric Allman et al.; O’Reilly &amp; Associates — A good Sendmail reference written with the assistance of the original creator of Delivermail and Sendmail.
							</li><li class="listitem">
								<span class="emphasis"><em><span class="citetitle citetitle">Removing the Spam: Email Processing and Filtering</span></em></span> by Geoff Mulligan; Addison-Wesley Publishing Company — A volume that looks at various methods used by email administrators using established tools, such as Sendmail and Procmail, to manage spam problems.
							</li><li class="listitem">
								<span class="emphasis"><em><span class="citetitle citetitle">Internet Email Protocols: A Developer’s Guide</span></em></span> by Kevin Johnson; Addison-Wesley Publishing Company — Provides a very thorough review of major email protocols and the security they provide.
							</li><li class="listitem">
								<span class="emphasis"><em><span class="citetitle citetitle">Managing IMAP</span></em></span> by Dianna Mullet and Kevin Mullet; O’Reilly &amp; Associates — Details the steps required to configure an IMAP server.
							</li></ul></div></section></section></section><section class="chapter" id="ch-File_and_Print_Servers"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;16.&nbsp;File and Print Servers</h2></div></div></div><p>
				This chapter guides you through the installation and configuration of <span class="strong strong"><strong><span class="application application">Samba</span></strong></span>, an open source implementation of the <span class="emphasis"><em>Server Message Block</em></span> (<span class="strong strong"><strong>SMB</strong></span>) and <span class="emphasis"><em>common Internet file system</em></span> (<code class="literal">CIFS</code>) protocol, and <span class="strong strong"><strong><span class="application application">vsftpd</span></strong></span>, the primary FTP server shipped with Red Hat Enterprise Linux. Additionally, it explains how to use the <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> tool to configure printers.
			</p><section class="section" id="sect-Samba"><div class="titlepage"><div><div><h2 class="title">16.1.&nbsp;Samba</h2></div></div></div><p>
					Samba implements the Server Message Block (SMB) protocol in Red Hat Enterprise Linux. The SMB protocol is used to access resources on a server, such as file shares and shared printers. Additionally, Samba implements the Distributed Computing Environment Remote Procedure Call (DCE RPC) protocol used by Microsoft Windows.
				</p><p>
					You can run Samba as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							An Active Directory (AD) or NT4 domain member
						</li><li class="listitem">
							A standalone server
						</li><li class="listitem"><p class="simpara">
							An NT4 Primary Domain Controller (PDC) or Backup Domain Controller (BDC)
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Red Hat supports these modes only in existing installations with Windows versions which support NT4 domains. Red Hat recommends not setting up a new Samba NT4 domain, because Microsoft operating systems later than Windows 7 and Windows Server 2008 R2 do not support NT4 domains.
							</p></div></div></li></ul></div><p>
					Independently of the installation mode, you can optionally share directories and printers. This enables Samba to act as a file and print server.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Red Hat does not support running Samba as an AD domain controller (DC).
					</p></div></div><section class="section" id="the_samba_services"><div class="titlepage"><div><div><h3 class="title">16.1.1.&nbsp;The Samba Services</h3></div></div></div><p>
						Samba provides the following services:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">smbd</code></span></dt><dd><p class="simpara">
									This service provides file sharing and printing services using the SMB protocol. Additionally, the service is responsible for resource locking and for authenticating connecting users. The <code class="literal">smb</code> <code class="literal">systemd</code> service starts and stops the <code class="literal">smbd</code> daemon.
								</p><p class="simpara">
									To use the <code class="literal">smbd</code> service, install the <span class="strong strong"><strong><span class="package package">samba</span></strong></span> package.
								</p></dd><dt><span class="term"><code class="literal">nmbd</code></span></dt><dd><p class="simpara">
									This service provides host name and IP resolution using the NetBIOS over IPv4 protocol. Additionally to the name resolution, the <code class="literal">nmbd</code> service enables browsing the SMB network to locate domains, work groups, hosts, file shares, and printers. For this, the service either reports this information directly to the broadcasting client or forwards it to a local or master browser. The <code class="literal">nmb</code> <code class="literal">systemd</code> service starts and stops the <code class="literal">nmbd</code> daemon.
								</p><p class="simpara">
									Note that modern SMB networks use DNS to resolve clients and IP addresses.
								</p><p class="simpara">
									To use the <code class="literal">nmbd</code> service, install the <span class="strong strong"><strong><span class="package package">samba</span></strong></span> package.
								</p></dd><dt><span class="term"><code class="literal">winbindd</code></span></dt><dd><p class="simpara">
									The <code class="literal">winbindd</code> service provides an interface for the Name Service Switch (NSS) to use AD or NT4 domain users and groups on the local system. This enables, for example, domain users to authenticate to services hosted on a Samba server or to other local services. The <code class="literal">winbind</code> <code class="literal">systemd</code> service starts and stops the <code class="literal">winbindd</code> daemon.
								</p><p class="simpara">
									If you set up Samba as a domain member, <code class="literal">winbindd</code> must be started before the <code class="literal">smbd</code> service. Otherwise, domain users and groups are not available to the local system.
								</p><p class="simpara">
									To use the <code class="literal">winbindd</code> service, install the <span class="strong strong"><strong><span class="package package">samba-winbind</span></strong></span> package.
								</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
										Red Hat only supports running Samba as a server with the <code class="literal">winbindd</code> service to provide domain users and groups to the local system. Due to certain limitations, such as missing Windows access control list (ACL) support and NT LAN Manager (NTLM) fallback, use of the System Security Services Daemon (SSSD) with Samba is currently not supported for these use cases. For further details, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/articles/4355391">What is the support status for Samba file server running on IdM clients or directly enrolled AD clients where SSSD is used as the client daemon</a>.
									</p></div></div></dd></dl></div></section><section class="section" id="verifying_the_smb_conf_file_by_using_the_testparm_utility"><div class="titlepage"><div><div><h3 class="title">16.1.2.&nbsp;Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility</h3></div></div></div><p>
						The <code class="literal">testparm</code> utility verifies that the Samba configuration in the <code class="literal">/etc/samba/smb.conf</code> file is correct. The utility detects invalid parameters and values, but also incorrect settings, such as for ID mapping. If <code class="literal">testparm</code> reports no problem, the Samba services will successfully load the <code class="literal">/etc/samba/smb.conf</code> file. Note that <code class="literal">testparm</code> cannot verify that the configured services will be available or work as expected.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Red Hat recommends that you verify the <code class="literal">/etc/samba/smb.conf</code> file by using <code class="literal">testparm</code> after each modification of this file.
						</p></div></div><p>
						To verify the <code class="literal">/etc/samba/smb.conf</code> file, run the <code class="literal">testparm</code> utility as the root user. If <code class="literal command">testparm</code> reports incorrect parameters, values, or other errors in the configuration, fix the problem and run the utility again.
					</p><div class="example" id="ex.verifying_the_smb_conf_file_by_using_the_testparm_utility"><p class="title"><strong>Example&nbsp;16.1.&nbsp;Using <code class="literal">testparm</code></strong></p><div class="example-contents"><p>
							The following output reports a non-existent parameter and an incorrect ID mapping configuration:
						</p><pre class="literallayout">~]# testparm
Load smb config files from /etc/samba/smb.conf
rlimit_max: increasing rlimit_max (1024) to minimum Windows limit (16384)
<span class="emphasis"><em>Unknown parameter encountered: "log levell"</em></span>
Processing section "[example_share]"
Loaded services file OK.
<span class="emphasis"><em>ERROR: The idmap range for the domain * (tdb) overlaps with the range of DOMAIN (ad)!</em></span>

Server role: ROLE_DOMAIN_MEMBER

Press enter to see a dump of your service definitions

# Global parameters
[global]
	...

[example_share]
	...</pre></div></div></section><section class="section" id="understanding_the_samba_security_modes"><div class="titlepage"><div><div><h3 class="title">16.1.3.&nbsp;Understanding the Samba Security Modes</h3></div></div></div><p>
						The <code class="literal">security</code> parameter in the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file manages how Samba authenticates users that are connecting to the service. Depending on the mode you install Samba in, the parameter must be set to different values:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On an AD domain member, set <code class="literal">security</code> = <code class="literal command">ads</code>.
							</p><p class="simpara">
								In this mode, Samba uses Kerberos to authenticate AD users.
							</p><p class="simpara">
								For details about setting up Samba as a domain member, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_domain_member" title="16.1.5. Setting up Samba as a Domain Member">Section&nbsp;16.1.5, “Setting up Samba as a Domain Member”</a>.
							</p></li><li class="listitem"><p class="simpara">
								On a standalone server, set <code class="literal">security</code> = <code class="literal command">user</code>.
							</p><p class="simpara">
								In this mode, Samba uses a local database to authenticate connecting users.
							</p><p class="simpara">
								For details about setting up Samba as a standalone server, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_standalone_server" title="16.1.4. Setting up Samba as a Standalone Server">Section&nbsp;16.1.4, “Setting up Samba as a Standalone Server”</a>.
							</p></li><li class="listitem"><p class="simpara">
								On an NT4 PDC or BDC, set <code class="literal">security</code> = <code class="literal command">user</code>.
							</p><p class="simpara">
								In this mode, Samba authenticates users to a local or LDAP database.
							</p></li><li class="listitem"><p class="simpara">
								On an NT4 domain member, set <code class="literal">security</code> = <code class="literal command">domain</code>.
							</p><p class="simpara">
								In this mode, Samba authenticates connecting users to an NT4 PDC or BDC. You cannot use this mode on AD domain members.
							</p><p class="simpara">
								For details about setting up Samba as a domain member, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_domain_member" title="16.1.5. Setting up Samba as a Domain Member">Section&nbsp;16.1.5, “Setting up Samba as a Domain Member”</a>.
							</p></li></ul></div><p>
						For further details, see the description of the <code class="literal">security</code> parameter in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
					</p></section><section class="section" id="setting_up_samba_as_a_standalone_server"><div class="titlepage"><div><div><h3 class="title">16.1.4.&nbsp;Setting up Samba as a Standalone Server</h3></div></div></div><p>
						In certain situations, administrators want to set up a Samba server that is not a member of a domain. In this installation mode, Samba authenticates users to a local database instead of to a central DC. Additionally, you can enable guest access to allow users to connect to one or multiple services without authentication.
					</p><section class="section" id="setting_up_the_server_configuration_for_the_standalone_server"><div class="titlepage"><div><div><h4 class="title">16.1.4.1.&nbsp;Setting up the Server Configuration for the Standalone Server</h4></div></div></div><p>
							To set up Samba as a standalone server:
						</p><div class="orderedlist" id="proc.standalone_server"><p class="title"><strong>Setting up Samba as a Standalone Server</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Install the <span class="strong strong"><strong><span class="package package">samba</span></strong></span> package:
								</p><pre class="literallayout">~]# yum install samba</pre></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/samba/smb.conf</code> file and set the following parameters:
								</p><pre class="literallayout">[global]
	workgroup = <span class="emphasis"><em>Example-WG</em></span>
	netbios name = <span class="emphasis"><em>Server</em></span>
	security = user

	log file = /var/log/samba/%m.log
	log level = 1</pre><p class="simpara">
									This configuration defines a standalone server named <code class="literal">Server</code> within the <code class="literal">Example-WG</code> work group. Additionally, this configuration enables logging on a minimal level (<code class="literal command">1</code>) and log files will be stored in the <code class="literal">/var/log/samba/</code> directory. Samba will expand the <code class="literal command">%m</code> macro in the <code class="literal">log file</code> parameter to the NetBIOS name of connecting clients. This enables individual log files for each client.
								</p><p class="simpara">
									For further details, see the parameter descriptions in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
								</p></li><li class="listitem"><p class="simpara">
									Configure file or printer sharing. See:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#configuring_file_shares_on_a_samba_server" title="16.1.6. Configuring File Shares on a Samba Server">Section&nbsp;16.1.6, “Configuring File Shares on a Samba Server”</a>
										</li><li class="listitem">
											<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_samba_print_server" title="16.1.7. Setting up a Samba Print Server">Section&nbsp;16.1.7, “Setting up a Samba Print Server”</a>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									Verify the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
									For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
								</p></li><li class="listitem">
									If you set up shares that require authentication, create the user accounts. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#creating_and_enabling_local_user_accounts" title="16.1.4.2. Creating and Enabling Local User Accounts">Section&nbsp;16.1.4.2, “Creating and Enabling Local User Accounts”</a>.
								</li><li class="listitem"><p class="simpara">
									Open the required ports and reload the firewall configuration by using the <code class="literal">firewall-cmd</code> utility:
								</p><pre class="literallayout">~]# firewall-cmd --permanent --add-port={139/tcp,445/tcp}
~]# firewall-cmd --reload</pre></li><li class="listitem"><p class="simpara">
									Start the <code class="literal">smb</code> service:
								</p><pre class="literallayout">~]# systemctl start smb</pre></li><li class="listitem"><p class="simpara">
									Optionally, enable the <code class="literal">smb</code> service to start automatically when the system boots:
								</p><pre class="literallayout">~]# systemctl enable smb</pre></li></ol></div></section><section class="section" id="creating_and_enabling_local_user_accounts"><div class="titlepage"><div><div><h4 class="title">16.1.4.2.&nbsp;Creating and Enabling Local User Accounts</h4></div></div></div><p>
							To enable users to authenticate when they connect to a share, you must create the accounts on the Samba host both in the operating system and in the Samba database. Samba requires the operating system account to validate the Access Control Lists (ACL) on file system objects and the Samba account to authenticate connecting users.
						</p><p>
							If you use the <code class="literal command">passdb backend = tdbsam</code> default setting, Samba stores user accounts in the <code class="literal">/var/lib/samba/private/passdb.tdb</code> database.
						</p><p>
							For example, to create the <code class="literal">example</code> Samba user:
						</p><div class="orderedlist" id="proc.creating_and_enabling_a_local_user_account"><p class="title"><strong>Creating a Samba User</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create the operating system account:
								</p><pre class="literallayout">~]# useradd -M -s /sbin/nologin <span class="emphasis"><em>example</em></span></pre><p class="simpara">
									The previous command adds the <code class="literal">example</code> account without creating a home directory. If the account is only used to authenticate to Samba, assign the <code class="literal">/sbin/nologin</code> command as shell to prevent the account from logging in locally.
								</p></li><li class="listitem"><p class="simpara">
									Set a password to the operating system account to enable it:
								</p><pre class="literallayout">~]# passwd <span class="emphasis"><em>example</em></span>
Enter new UNIX password: <span class="emphasis"><em>password</em></span>
Retype new UNIX password: <span class="emphasis"><em>password</em></span>
passwd: password updated successfully</pre><p class="simpara">
									Samba does not use the password set on the operating system account to authenticate. However, you need to set a password to enable the account. If an account is disabled, Samba denies access if this user connects.
								</p></li><li class="listitem"><p class="simpara">
									Add the user to the Samba database and set a password to the account:
								</p><pre class="literallayout">~]# smbpasswd -a <span class="emphasis"><em>example</em></span>
New SMB password: <span class="emphasis"><em>password</em></span>
Retype new SMB password: <span class="emphasis"><em>password</em></span>
Added user <span class="emphasis"><em>example</em></span>.</pre><p class="simpara">
									Use this password to authenticate when using this account to connect to a Samba share.
								</p></li><li class="listitem"><p class="simpara">
									Enable the Samba account:
								</p><pre class="literallayout">~]# smbpasswd -e <span class="emphasis"><em>example</em></span>
Enabled user <span class="emphasis"><em>example</em></span>.</pre></li></ol></div></section></section><section class="section" id="setting_up_samba_as_a_domain_member"><div class="titlepage"><div><div><h3 class="title">16.1.5.&nbsp;Setting up Samba as a Domain Member</h3></div></div></div><p>
						Administrators running an AD or NT4 domain often want to use Samba to join their Red Hat Enterprise Linux server as a member to the domain. This enables you to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Access domain resources on other domain members
							</li><li class="listitem">
								Authenticate domain users to local services, such as <code class="literal">sshd</code>
							</li><li class="listitem">
								Share directories and printers hosted on the server to act as a file and print server
							</li></ul></div><section class="section" id="joining_a_domain"><div class="titlepage"><div><div><h4 class="title">16.1.5.1.&nbsp;Joining a Domain</h4></div></div></div><p>
							To join a Red Hat Enterprise Linux system to a domain:
						</p><div class="orderedlist" id="proc.join_samba_to_a_domain"><p class="title"><strong>Joining a Red Hat Enterprise Linux System to a Domain</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Install the following packages:
								</p><pre class="literallayout">~]# yum install realmd oddjob-mkhomedir oddjob samba-winbind-clients \
    samba-winbind samba-common-tools</pre></li><li class="listitem"><p class="simpara">
									To share directories or printers on the domain member, install the <span class="strong strong"><strong><span class="package package">samba</span></strong></span> package:
								</p><pre class="literallayout">~]# yum install samba</pre></li><li class="listitem"><p class="simpara">
									If you join an AD, additionally install the <span class="strong strong"><strong><span class="package package">samba-winbind-krb5-locator</span></strong></span> package:
								</p><pre class="literallayout">~]# yum install samba-winbind-krb5-locator</pre><p class="simpara">
									This plug-in enables Kerberos to locate the Key Distribution Center (KDC) based on AD sites using DNS service records.
								</p></li><li class="listitem"><p class="simpara">
									Optionally, rename the existing <code class="literal">/etc/samba/smb.conf</code> Samba configuration file:
								</p><pre class="literallayout">~]# mv /etc/samba/smb.conf /etc/samba/smb.conf.old</pre></li><li class="listitem"><p class="simpara">
									Join the domain. For example, to join a domain named <code class="literal">ad.example.com</code>
								</p><pre class="literallayout">~]# realm join --membership-software=samba --client-software=winbind <span class="emphasis"><em>ad.example.com</em></span></pre><p class="simpara">
									Using the previous command, the <code class="literal">realm</code> utility automatically:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Creates a <code class="literal">/etc/samba/smb.conf</code> file for a membership in the <code class="literal">ad.example.com</code> domain
										</li><li class="listitem">
											Adds the <code class="literal command">winbind</code> module for user and group lookups to the <code class="literal">/etc/nsswitch.conf</code> file
										</li><li class="listitem">
											Updates the Pluggable Authentication Module (PAM) configuration files in the <code class="literal">/etc/pam.d/</code> directory
										</li><li class="listitem"><p class="simpara">
											Starts the <code class="literal">winbind</code> service and enables the service to start when the system boots
										</p><p class="simpara">
											For further details about the <code class="literal">realm</code> utility, see the <span class="strong strong"><strong>realm</strong></span>(8) man page and the corresponding section in the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Windows_Integration_Guide/ch-Configuring_Authentication.html">Red Hat Windows Integration Guide</a></span></em></span>.
										</p></li></ul></div></li><li class="listitem">
									Optionally, set an alternative ID mapping back end or customized ID mapping settings in the <code class="literal">/etc/samba/smb.conf</code> file. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#understanding_id_mapping" title="16.1.5.3. Understanding ID Mapping">Section&nbsp;16.1.5.3, “Understanding ID Mapping”</a>.
								</li><li class="listitem">
									Optionally, verify the configuration. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_that_samba_was_correctly_joined_as_a_domain_member" title="16.1.5.2. Verifying That Samba Was Correctly Joined As a Domain Member">Section&nbsp;16.1.5.2, “Verifying That Samba Was Correctly Joined As a Domain Member”</a>.
								</li><li class="listitem"><p class="simpara">
									Verify that the <code class="literal">winbindd</code> is running:
								</p><pre class="literallayout">~]# systemctl status winbind</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
										To enable Samba to query domain user and group information, the <code class="literal">winbindd</code> service must be running before you start <code class="literal">smbd</code>.
									</p></div></div></li><li class="listitem"><p class="simpara">
									If you installed the <span class="strong strong"><strong><span class="package package">samba</span></strong></span> package to share directories and printers, start the <code class="literal">smbd</code> service:
								</p><pre class="literallayout">~]# systemctl start smb</pre></li></ol></div></section><section class="section" id="verifying_that_samba_was_correctly_joined_as_a_domain_member"><div class="titlepage"><div><div><h4 class="title">16.1.5.2.&nbsp;Verifying That Samba Was Correctly Joined As a Domain Member</h4></div></div></div><p>
							After you joined a Red Hat Enterprise Linux as a domain member, you can run different tests to verify that the join succeeded. See:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh.verifying_that_the_os_can_retrieve_domain_user_accounts_and_groups" title="Verifying That the Operating System Can Retrieve Domain User Accounts and Groups">the section called “Verifying That the Operating System Can Retrieve Domain User Accounts and Groups”</a>
								</li><li class="listitem">
									<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh.verifying_if_domain_users_can_obtain_a_kerberos_ticket" title="Verifying If AD Domain Users Can Obtain a Kerberos Ticket">the section called “Verifying If AD Domain Users Can Obtain a Kerberos Ticket”</a>
								</li><li class="listitem">
									<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh.listing_the_available_domains" title="Listing the Available Domains">the section called “Listing the Available Domains”</a>
								</li></ul></div><h6 id="bh.verifying_that_the_os_can_retrieve_domain_user_accounts_and_groups">Verifying That the Operating System Can Retrieve Domain User Accounts and Groups</h6><p>
							Use the <code class="literal">getent</code> utility to verify that the operating system can retrieve domain users and groups. For example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To query the <code class="literal">administrator</code> account in the <code class="literal">AD</code> domain:
								</p><pre class="literallayout">~]# getent passwd AD\\administrator
AD\administrator:*:10000:10000::/home/administrator@AD:/bin/bash</pre></li><li class="listitem"><p class="simpara">
									To query the members of the <code class="literal">Domain Users</code> group in the <code class="literal">AD</code> domain:
								</p><pre class="literallayout">~]# getent group "AD\\Domain Users"
AD\domain users:x:10000:user</pre></li></ul></div><p>
							If the command works correctly, verify that you can use domain users and groups when you set permissions on files and directories. For example, to set the owner of the <code class="literal">/srv/samba/example.txt</code> file to <code class="literal">AD\administrator</code> and the group to <code class="literal">AD\Domain Users</code>:
						</p><pre class="literallayout">~]# chown "AD\administrator":"AD\Domain Users" /srv/samba/example.txt</pre><h6 id="bh.verifying_if_domain_users_can_obtain_a_kerberos_ticket">Verifying If AD Domain Users Can Obtain a Kerberos Ticket</h6><p>
							In an AD environment, users can obtain a Kerberos ticket from the DC. For example, to verify if the <code class="literal">administrator</code> user can obtain a Kerberos ticket:
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								To use the <code class="literal">kinit</code> and <code class="literal">klist</code> utilities, install the <span class="strong strong"><strong><span class="package package">krb5-workstation</span></strong></span> package on the Samba domain member.
							</p></div></div><div class="orderedlist" id="proc.obtaining_a_kerberos_ticket"><p class="title"><strong>Obtaining a Kerberos Ticket</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Obtain a ticket for the <code class="literal">administrator@AD.EXAMPLE.COM</code> principal:
								</p><pre class="literallayout">~]# kinit administrator@AD.EXAMPLE.COM</pre></li><li class="listitem"><p class="simpara">
									Display the cached Kerberos ticket:
								</p><pre class="literallayout">~]# klist
Ticket cache: KEYRING:persistent:0:0
Default principal: administrator@AD.EXAMPLE.COM

Valid starting    Expires       Service principal
11.09.2017 14:46:21 12.09.2017 00:46:21 krbtgt/AD.EXAMPLE.COM@AD.EXAMPLE.COM
	renew until 18.09.2017 14:46:19</pre></li></ol></div><h6 id="bh.listing_the_available_domains">Listing the Available Domains</h6><p>
							To list all domains available through the <code class="literal">winbindd</code> service, enter:
						</p><pre class="literallayout">~]# wbinfo --all-domains</pre><p>
							If Samba was successfully joined as a domain member, the command displays the built-in and local host name, as well as the domain Samba is a member of including trusted domains.
						</p><div class="example" id="ex.wbinfo_all-domains"><p class="title"><strong>Example&nbsp;16.2.&nbsp;Displaying the Available Domains</strong></p><div class="example-contents"><pre class="literallayout">~]# wbinfo --all-domains
BUILTIN
<span class="emphasis"><em>SAMBA-SERVER</em></span>
AD</pre></div></div></section><section class="section" id="understanding_id_mapping"><div class="titlepage"><div><div><h4 class="title">16.1.5.3.&nbsp;Understanding ID Mapping</h4></div></div></div><p>
							Windows domains distinguish users and groups by unique Security Identifiers (SID). However, Linux requires unique UIDs and GIDs for each user and group. If you run Samba as a domain member, the <code class="literal">winbindd</code> service is responsible for providing information about domain users and groups to the operating system.
						</p><p>
							To enable the <code class="literal">winbindd</code> service to provide unique IDs for users and groups to Linux, you must configure ID mapping in the <code class="literal">/etc/samba/smb.conf</code> file for:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The local database (default domain)
								</li><li class="listitem">
									The AD or NT4 domain the Samba server is a member of
								</li><li class="listitem">
									Each trusted domain from which users must be able to access resources on this Samba server
								</li></ul></div><section class="section" id="planning_id_ranges"><div class="titlepage"><div><div><h5 class="title">16.1.5.3.1.&nbsp;Planning ID Ranges</h5></div></div></div><p>
								Regardless of whether you store the Linux UIDs and GIDs in AD or if you configure Samba to generate them, each domain configuration requires a unique ID range that <span class="emphasis"><em>must not</em></span> overlap with any of the other domains.
							</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									If you set overlapping ID ranges, Samba fails to work correctly.
								</p></div></div><div class="example" id="ex.unique_id_ranges"><p class="title"><strong>Example&nbsp;16.3.&nbsp;Unique ID Ranges</strong></p><div class="example-contents"><p>
									The following shows non-overlapping ID mapping ranges for the default (<code class="literal">*</code>), <code class="literal">AD-DOM</code>, and the <code class="literal">TRUST-DOM</code> domains.
								</p><pre class="literallayout">[global]
...
idmap config * : backend = tdb
idmap config * : range = 10000-999999

idmap config <span class="emphasis"><em>AD-DOM</em></span>:backend = rid
idmap config <span class="emphasis"><em>AD-DOM</em></span>:range = 2000000-2999999

idmap config <span class="emphasis"><em>TRUST-DOM</em></span>:backend = rid
idmap config <span class="emphasis"><em>TRUST-DOM</em></span>:range = 4000000-4999999</pre></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									You can only assign one range per domain. Therefore, leave enough space between the domains ranges. This enables you to extend the range later if your domain grows.
								</p><p>
									If you later assign a different range to a domain, the ownership of files and directories previously created by these users and groups will be lost.
								</p></div></div></section><section class="section" id="the_default_domain"><div class="titlepage"><div><div><h5 class="title">16.1.5.3.2.&nbsp;The <code class="literal">*</code> Default Domain</h5></div></div></div><p>
								In a domain environment, you add one ID mapping configuration for each of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The domain the Samba server is a member of
									</li><li class="listitem">
										Each trusted domain that should be able to access the Samba server
									</li></ul></div><p>
								However, for all other objects, Samba assigns IDs from the default domain. This includes:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Local Samba users and groups
									</li><li class="listitem">
										Samba built-in accounts and groups, such as <code class="literal">BUILTIN\Administrators</code>
									</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									You must configure the default domain as described in this section to enable Samba to operate correctly.
								</p></div></div><p>
								The default domain back end must be writable to permanently store the assigned IDs.
							</p><p>
								For the default domain, you can use one of the following back ends:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">tdb</code></span></dt><dd><p class="simpara">
											When you configure the default domain to use the <code class="literal command">tdb</code> back end, set an ID range that is big enough to include objects that will be created in the future and that are not part of a defined domain ID mapping configuration.
										</p><p class="simpara">
											For example, set the following in the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file:
										</p><pre class="literallayout">idmap config * : backend = tdb
idmap config * : range = 10000-999999</pre><p class="simpara">
											For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#using_the_tdb_id_mapping_mapping_back_end" title="16.1.5.4.1. Using the tdb ID Mapping Back End">Section&nbsp;16.1.5.4.1, “Using the <code class="literal">tdb</code> ID Mapping Back End”</a>.
										</p></dd><dt><span class="term"><code class="literal">autorid</code></span></dt><dd><p class="simpara">
											When you configure the default domain to use the <code class="literal">autorid</code> back end, adding additional ID mapping configurations for domains is optional.
										</p><p class="simpara">
											For example, set the following in the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file:
										</p><pre class="literallayout">idmap config * : backend = autorid
idmap config * : range = 10000-999999</pre><p class="simpara">
											For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#configuring_the_autorid_back_end" title="Configuring the autorid Back End">Configuring the <code class="literal">autorid</code> Back End</a>.
										</p></dd></dl></div></section></section><section class="section" id="the_different_id_mapping_back_ends"><div class="titlepage"><div><div><h4 class="title">16.1.5.4.&nbsp;The Different ID Mapping Back Ends</h4></div></div></div><p>
							Samba provides different ID mapping back ends for specific configurations. The most frequently used back ends are:
						</p><div class="table" id="tab."><p class="title"><strong>Table&nbsp;16.1.&nbsp;Frequently Used ID Mapping Back Ends</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569351804704" scope="col">Back End</th><th align="left" valign="top" id="idm140569351803616" scope="col">Use Case</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569351804704"> <p>
											<code class="literal">tdb</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569351803616"> <p>
											The <code class="literal">*</code> default domain only
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569351804704"> <p>
											<code class="literal">ad</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569351803616"> <p>
											AD domains only
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569351804704"> <p>
											<code class="literal">rid</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569351803616"> <p>
											AD and NT4 domains
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569351804704"> <p>
											<code class="literal">autorid</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569351803616"> <p>
											AD, NT4, and the <code class="literal">*</code> default domain
										</p>
										 </td></tr></tbody></table></div></div><p>
							The following sections describe the benefits, recommended scenarios where to use the back end, and how to configure it.
						</p><section class="section" id="using_the_tdb_id_mapping_mapping_back_end"><div class="titlepage"><div><div><h5 class="title">16.1.5.4.1.&nbsp;Using the <code class="literal">tdb</code> ID Mapping Back End</h5></div></div></div><p>
								The <code class="literal">winbindd</code> service uses the writable <code class="literal">tdb</code> ID mapping back end by default to store Security Identifier (SID), UID, and GID mapping tables. This includes local users, groups, and built-in principals.
							</p><p>
								Use this back end only for the <code class="literal">*</code> default domain. For example:
							</p><pre class="literallayout">idmap config * : backend = tdb
idmap config * : range = 10000-999999</pre><p>
								For further details about the <code class="literal">*</code> default domain, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#the_default_domain" title="16.1.5.3.2. The * Default Domain">Section&nbsp;16.1.5.3.2, “The <code class="literal">*</code> Default Domain”</a>.
							</p></section><section class="section" id="using_the_ad_id_mapping_mapping_back_end"><div class="titlepage"><div><div><h5 class="title">16.1.5.4.2.&nbsp;Using the <code class="literal">ad</code> ID Mapping Back End</h5></div></div></div><p>
								The <code class="literal">ad</code> ID mapping back end implements a read-only API to read account and group information from AD. This provides the following benefits:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										All user and group settings are stored centrally in AD.
									</li><li class="listitem">
										User and group IDs are consistent on all Samba servers that use this back end.
									</li><li class="listitem">
										The IDs are not stored in a local database which can corrupt, and therefore file ownerships cannot be lost.
									</li></ul></div><p>
								The <code class="literal">ad</code> back end reads the following attributes from AD:
							</p><div class="table" id="tab.attributes_the_ad_back_end_reads_from_user_and_group_objects"><p class="title"><strong>Table&nbsp;16.2.&nbsp;Attributes the <code class="literal">ad</code> Back End Reads from User and Group Objects</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569351034464" scope="col">AD Attribute Name</th><th align="left" valign="top" id="idm140569351033376" scope="col">Object Type</th><th align="left" valign="top" id="idm140569351032288" scope="col">Mapped to</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569351034464"> <p>
												<code class="literal">sAMAccountName</code>
											</p>
											 </td><td align="left" valign="top" headers="idm140569351033376"> <p>
												User and group
											</p>
											 </td><td align="left" valign="top" headers="idm140569351032288"> <p>
												User or group name, depending on the object
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140569351034464"> <p>
												<code class="literal">uidNumber</code>
											</p>
											 </td><td align="left" valign="top" headers="idm140569351033376"> <p>
												User
											</p>
											 </td><td align="left" valign="top" headers="idm140569351032288"> <p>
												User ID (UID)
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140569351034464"> <p>
												<code class="literal">gidNumber</code>
											</p>
											 </td><td align="left" valign="top" headers="idm140569351033376"> <p>
												Group
											</p>
											 </td><td align="left" valign="top" headers="idm140569351032288"> <p>
												Group ID (GID)
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140569351034464"> <p>
												<code class="literal">loginShell</code> <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569347414976" class="footnote"><sup class="footnote" id="idm140569347414976">[a]</sup></a>
											</p>
											 </td><td align="left" valign="top" headers="idm140569351033376"> <p>
												User
											</p>
											 </td><td align="left" valign="top" headers="idm140569351032288"> <p>
												Path to the shell of the user
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140569351034464"> <p>
												<code class="literal">unixHomeDirectory</code>
											</p>
											 </td><td align="left" valign="top" headers="idm140569351033376"> <p>
												User
											</p>
											 </td><td align="left" valign="top" headers="idm140569351032288"> <p>
												Path to the home directory of the user
											</p>
											 </td></tr><tr><td align="left" valign="top" headers="idm140569351034464"> <p>
												<code class="literal">primaryGroupID</code> <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569347395648" class="footnote"><sup class="footnote" id="idm140569347395648">[b]</sup></a>
											</p>
											 </td><td align="left" valign="top" headers="idm140569351033376"> <p>
												User
											</p>
											 </td><td align="left" valign="top" headers="idm140569351032288"> <p>
												Primary group ID
											</p>
											 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="3"><div id="ftn.idm140569347414976" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569347414976" class="simpara"><sup class="simpara">[a] </sup></a>
													Samba only reads this attribute if you set <code class="literal command">idmap config <span class="emphasis"><em>DOMAIN</em></span>:unix_nss_info = yes</code>.
												</div></div><div id="ftn.idm140569347395648" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569347395648" class="simpara"><sup class="simpara">[b] </sup></a>
													Samba only reads this attribute if you set <code class="literal command">idmap config <span class="emphasis"><em>DOMAIN</em></span>:unix_primary_group = yes</code>.
												</div></div></td></tr></tbody></table></div></div><div id="prereuisites_of_the_ad_back_end" class="formalpara"><p class="title"><strong>Prerequisites of the <code class="literal">ad</code> Back End</strong></p><p>
									To use the <code class="literal">ad</code> ID mapping back end:
								</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Both users and groups must have unique IDs set in AD, and the IDs must be within the range configured in the <code class="literal">/etc/samba/smb.conf</code> file. Objects whose IDs are outside of the range will not be available on the Samba server.
									</li><li class="listitem">
										Users and groups must have all required attributes set in AD. If required attributes are missing, the user or group will not be available on the Samba server. The required attributes depend on your configuration. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tab.attributes_the_ad_back_end_reads_from_user_and_group_objects" title="Table 16.2. Attributes the ad Back End Reads from User and Group Objects">Table&nbsp;16.2, “Attributes the <code class="literal">ad</code> Back End Reads from User and Group Objects”</a>.
									</li></ul></div><div id="configuring_the_ad_back_end" class="formalpara"><p class="title"><strong>Configuring the <code class="literal">ad</code> Back End</strong></p><p>
									To configure a Samba AD member to use the <code class="literal">ad</code> ID mapping back end:
								</p></div><div class="orderedlist"><p class="title"><strong>Configuring the <code class="literal">ad</code> Back End on a Domain Member</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Edit the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
												Add an ID mapping configuration for the default domain (<code class="literal">*</code>) if it does not exist. For example:
											</p><pre class="literallayout">idmap config * : backend = tdb
idmap config * : range = 10000-999999</pre><p class="simpara">
												For further details about the default domain configuration, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#the_default_domain" title="16.1.5.3.2. The * Default Domain">Section&nbsp;16.1.5.3.2, “The <code class="literal">*</code> Default Domain”</a>.
											</p></li><li class="listitem"><p class="simpara">
												Enable the <code class="literal">ad</code> ID mapping back end for the AD domain:
											</p><pre class="literallayout">idmap config <span class="emphasis"><em>DOMAIN</em></span> : backend = ad</pre></li><li class="listitem"><p class="simpara">
												Set the range of IDs that is assigned to users and groups in the AD domain. For example:
											</p><pre class="literallayout">idmap config <span class="emphasis"><em>DOMAIN</em></span> : range = 2000000-2999999</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													The range must not overlap with any other domain configuration on this server. Additionally, the range must be set big enough to include all IDs assigned in the future. For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#planning_id_ranges" title="16.1.5.3.1. Planning ID Ranges">Section&nbsp;16.1.5.3.1, “Planning ID Ranges”</a>.
												</p></div></div></li><li class="listitem"><p class="simpara">
												Set that Samba uses the <a class="link" href="https://www.ietf.org/rfc/rfc2307.txt">RFC 2307</a> schema when reading attributes from AD:
											</p><pre class="literallayout">idmap config <span class="emphasis"><em>DOMAIN</em></span> : schema_mode = rfc2307</pre></li><li class="listitem"><p class="simpara">
												To enable Samba to read the login shell and the path to the users home directory from the corresponding AD attribute, set:
											</p><pre class="literallayout">idmap config <span class="emphasis"><em>DOMAIN</em></span> : unix_nss_info = yes</pre><p class="simpara">
												Alternatively, you can set a uniform domain-wide home directory path and login shell that is applied to all users. For example:
											</p><pre class="literallayout">template shell = /bin/bash
template homedir = /home/%U</pre><p class="simpara">
												For details about variable substitution, see the <span class="emphasis"><em><span class="citetitle citetitle">VARIABLE SUBSTITUTIONS</span></em></span> section in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
											</p></li><li class="listitem"><p class="simpara">
												By default, Samba uses the <code class="literal">primaryGroupID</code> attribute of a user object as the user’s primary group on Linux. Alternatively, you can configure Samba to use the value set in the <code class="literal">gidNumber</code> attribute instead:
											</p><pre class="literallayout">idmap config <span class="emphasis"><em>DOMAIN</em></span> : unix_primary_group = yes</pre></li></ol></div></li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Reload the Samba configuration:
									</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li><li class="listitem">
										Verify that the settings work as expected. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh.verifying_that_the_os_can_retrieve_domain_user_accounts_and_groups" title="Verifying That the Operating System Can Retrieve Domain User Accounts and Groups">the section called “Verifying That the Operating System Can Retrieve Domain User Accounts and Groups”</a>.
									</li></ol></div><p>
								For further details, see the <span class="strong strong"><strong>smb.conf</strong></span>(5) and <span class="strong strong"><strong>idmap_ad</strong></span>(8) man pages.
							</p></section><section class="section" id="using_the_rid_id_mapping_mapping_back_end"><div class="titlepage"><div><div><h5 class="title">16.1.5.4.3.&nbsp;Using the <code class="literal">rid</code> ID Mapping Back End</h5></div></div></div><p>
								Samba can use the relative identifier (RID) of a Windows SID to generate an ID on Red Hat Enterprise Linux.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The RID is the last part of a SID. For example, if the SID of a user is <code class="literal">S-1-5-21-5421822485-1151247151-421485315-30014</code>, then <code class="literal">30014</code> is the corresponding RID. For details, how Samba calculates the local ID, see the <span class="strong strong"><strong>idmap_rid</strong></span>(8) man page.
								</p></div></div><p>
								The <code class="literal">rid</code> ID mapping back end implements a read-only API to calculate account and group information based on an algorithmic mapping scheme for AD and NT4 domains. When you configure the back end, you must set the lowest and highest RID in the <code class="literal command">idmap config <span class="emphasis"><em>DOMAIN</em></span> : range</code> parameter. Samba will not map users or groups with a lower or higher RID than set in this parameter.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									As a read-only back end, <code class="literal">rid</code> cannot assign new IDs, such as for <code class="literal">BUILTIN</code> groups. Therefore, do not use this back end for the <code class="literal">*</code> default domain.
								</p></div></div><div class="itemizedlist" id="benefits_and_drawbacks_of_using_the_rid_back_end"><p class="title"><strong>Benefits</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
										All domain users and groups that have an RID within the configured range are automatically available on the domain member.
									</li><li class="listitem">
										You do not need to manually assign IDs, home directories, and login shells.
									</li></ul></div><div class="itemizedlist"><p class="title"><strong>Drawbacks</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
										All domain users get the same login shell and home directory assigned. However, you can use variables.
									</li><li class="listitem">
										User and group IDs are only the same across Samba domain members if all use the <code class="literal">rid</code> back end with the same ID range settings.
									</li><li class="listitem">
										You cannot exclude individual users or groups from being available on the domain member. Only users and groups outside of the configured range are excluded.
									</li><li class="listitem">
										Based on the formulas the <code class="literal">winbindd</code> service uses to calculate the IDs, duplicate IDs can occur in multi-domain environments if objects in different domains have the same RID.
									</li></ul></div><div id="configuring_the_rid_back_end" class="formalpara"><p class="title"><strong>Configuring the <code class="literal">rid</code> Back End</strong></p><p>
									To configure a Samba domain member to use the <code class="literal">rid</code> ID mapping back end:
								</p></div><div class="orderedlist" id="proc.configuring_the_rid_back_end"><p class="title"><strong>Configuring the <code class="literal">rid</code> Back End on a Domain Member</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Edit the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
												Add an ID mapping configuration for the default domain (<code class="literal">*</code>) if it does not exist. For example:
											</p><pre class="literallayout">idmap config * : backend = tdb
idmap config * : range = 10000-999999</pre><p class="simpara">
												For further details about the default domain configuration, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#the_default_domain" title="16.1.5.3.2. The * Default Domain">Section&nbsp;16.1.5.3.2, “The <code class="literal">*</code> Default Domain”</a>.
											</p></li><li class="listitem"><p class="simpara">
												Enable the <code class="literal">rid</code> ID mapping back end for the domain:
											</p><pre class="literallayout">idmap config <span class="emphasis"><em>DOMAIN</em></span> : backend = rid</pre></li><li class="listitem"><p class="simpara">
												Set a range that is big enough to include all RIDs that will be assigned in the future. For example:
											</p><pre class="literallayout">idmap config <span class="emphasis"><em>DOMAIN</em></span> : range = 2000000-2999999</pre><p class="simpara">
												Samba ignores users and groups whose RIDs in this domain are not within the range.
											</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													The range must not overlap with any other domain configuration on this server. For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#planning_id_ranges" title="16.1.5.3.1. Planning ID Ranges">Section&nbsp;16.1.5.3.1, “Planning ID Ranges”</a>.
												</p></div></div></li><li class="listitem"><p class="simpara">
												Set a shell and home directory path that will be assigned to all mapped users. For example:
											</p><pre class="literallayout">template shell = /bin/bash
template homedir = /home/%U</pre><p class="simpara">
												For details about variable substitution, see the <span class="emphasis"><em><span class="citetitle citetitle">VARIABLE SUBSTITUTIONS</span></em></span> section in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
											</p></li></ol></div></li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Reload the Samba configuration:
									</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li><li class="listitem">
										Verify that the settings work as expected. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh.verifying_that_the_os_can_retrieve_domain_user_accounts_and_groups" title="Verifying That the Operating System Can Retrieve Domain User Accounts and Groups">the section called “Verifying That the Operating System Can Retrieve Domain User Accounts and Groups”</a>.
									</li></ol></div></section><section class="section" id="using_the_autorid_id_mapping_mapping_back_end"><div class="titlepage"><div><div><h5 class="title">16.1.5.4.4.&nbsp;Using the <code class="literal">autorid</code> ID Mapping Back End</h5></div></div></div><p>
								The <code class="literal">autorid</code> back end works similar to the <code class="literal">rid</code> ID mapping back end, but can automatically assign IDs for different domains. This enables you to use the <code class="literal">autorid</code> back end in the following situations:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Only for the <code class="literal">*</code> default domain.
									</li><li class="listitem">
										For the <code class="literal">*</code> default domain and additional domains, without the need to create ID mapping configurations for each of the additional domains.
									</li><li class="listitem">
										Only for specific domains.
									</li></ul></div><div class="itemizedlist" id="benefits_and_drawbacks_of_using_the_autorid_back_end"><p class="title"><strong>Benefits</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
										All domain users and groups whose calculated UID and GID is within the configured range are automatically available on the domain member.
									</li><li class="listitem">
										You do not need to manually assign IDs, home directories, and login shells.
									</li><li class="listitem">
										No duplicate IDs, even if multiple objects in a multi-domain environment have the same RID.
									</li></ul></div><div class="itemizedlist"><p class="title"><strong>Drawbacks</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
										User and group IDs are not the same across Samba domain members.
									</li><li class="listitem">
										All domain users get the same login shell and home directory assigned. However, you can use variables.
									</li><li class="listitem">
										You cannot exclude individual users or groups from being available on the domain member. Only users and groups whose calculated UID or GID is outside of the configured range are excluded.
									</li></ul></div><div id="configuring_the_autorid_back_end" class="formalpara"><p class="title"><strong>Configuring the <code class="literal">autorid</code> Back End</strong></p><p>
									To configure a Samba domain member to use the <code class="literal">autorid</code> ID mapping back end for the <code class="literal">*</code> default domain:
								</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If you use <code class="literal">autorid</code> for the default domain, adding additional ID mapping configuration for domains is optional.
								</p></div></div><div class="orderedlist" id="proc.configuring_the_autorid_back_end"><p class="title"><strong>Configuring the <code class="literal">autorid</code> Back End on a Domain Member</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Edit the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
												Enable the <code class="literal">autorid</code> ID mapping back end for the <code class="literal">*</code> default domain:
											</p><pre class="literallayout">idmap config * : backend = autorid</pre></li><li class="listitem"><p class="simpara">
												Set a range that is big enough to assign IDs for all existing and future objects. For example:
											</p><pre class="literallayout">idmap config * : range = 10000-999999</pre><p class="simpara">
												Samba ignores users and groups whose calculated IDs in this domain are not within the range. For details about how the back end calculated IDs, see the <span class="emphasis"><em><span class="citetitle citetitle">THE MAPPING FORMULAS</span></em></span> section in the <span class="strong strong"><strong>idmap_autorid</strong></span>(8) man page.
											</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
													After you set the range and Samba starts using it, you can only increase the upper limit of the range. Any other change to the range can result in new ID assignments, and thus in loosing file ownerships.
												</p></div></div></li><li class="listitem"><p class="simpara">
												Optionally, set a range size. For example:
											</p><pre class="literallayout">idmap config * : rangesize = 200000</pre><p class="simpara">
												Samba assigns this number of continuous IDs for each domain’s object until all IDs from the range set in the <code class="literal">idmap config * : range</code> parameter are taken. For further details, see the <code class="literal">rangesize</code> parameter description in the <span class="strong strong"><strong>idmap_autorid</strong></span>(8) man page.
											</p></li><li class="listitem"><p class="simpara">
												Set a shell and home directory path that will be assigned to all mapped users. For example:
											</p><pre class="literallayout">template shell = /bin/bash
template homedir = /home/%U</pre><p class="simpara">
												For details about variable substitution, see the <span class="emphasis"><em><span class="citetitle citetitle">VARIABLE SUBSTITUTIONS</span></em></span> section in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
											</p></li><li class="listitem"><p class="simpara">
												Optionally, add additional ID mapping configuration for domains. If no configuration for an individual domain is available, Samba calculates the ID using the <code class="literal">autorid</code> back end settings in the previously configured <code class="literal">*</code> default domain.
											</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
													If you configure additional back ends for individual domains, the ranges for all ID mapping configuration must not overlap. For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#planning_id_ranges" title="16.1.5.3.1. Planning ID Ranges">Section&nbsp;16.1.5.3.1, “Planning ID Ranges”</a>.
												</p></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Reload the Samba configuration:
									</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li><li class="listitem">
										Verify that the settings work as expected. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh.verifying_that_the_os_can_retrieve_domain_user_accounts_and_groups" title="Verifying That the Operating System Can Retrieve Domain User Accounts and Groups">the section called “Verifying That the Operating System Can Retrieve Domain User Accounts and Groups”</a>.
									</li></ol></div></section></section></section><section class="section" id="configuring_file_shares_on_a_samba_server"><div class="titlepage"><div><div><h3 class="title">16.1.6.&nbsp;Configuring File Shares on a Samba Server</h3></div></div></div><p>
						To use Samba as a file server, add shares to the <code class="literal">/etc/samba/smb.conf</code> file of your standalone or domain member configuration.
					</p><p>
						You can add shares that uses either:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								POSIX ACLs. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_share_that_uses_posix_acls" title="16.1.6.1. Setting up a Share That Uses POSIX ACLs">Section&nbsp;16.1.6.1, “Setting up a Share That Uses POSIX ACLs”</a>.
							</li><li class="listitem">
								Fine-granular Windows ACLs. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_share_that_uses_windows_acls" title="16.1.6.2. Setting up a Share That Uses Windows ACLs">Section&nbsp;16.1.6.2, “Setting up a Share That Uses Windows ACLs”</a>.
							</li></ul></div><section class="section" id="setting_up_a_share_that_uses_posix_acls"><div class="titlepage"><div><div><h4 class="title">16.1.6.1.&nbsp;Setting up a Share That Uses POSIX ACLs</h4></div></div></div><p>
							As a Linux service, Samba supports shares with POSIX ACLs. They enable you to manage permissions locally on the Samba server using utilities, such as <code class="literal">chmod</code>. If the share is stored on a file system that supports extended attributes, you can define ACLs with multiple users and groups.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If you need to use fine-granular Windows ACLs instead, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_share_that_uses_windows_acls" title="16.1.6.2. Setting up a Share That Uses Windows ACLs">Section&nbsp;16.1.6.2, “Setting up a Share That Uses Windows ACLs”</a>.
							</p></div></div><p>
							Before you can add a share, set up Samba. See:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_standalone_server" title="16.1.4. Setting up Samba as a Standalone Server">Section&nbsp;16.1.4, “Setting up Samba as a Standalone Server”</a>
								</li><li class="listitem">
									<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_domain_member" title="16.1.5. Setting up Samba as a Domain Member">Section&nbsp;16.1.5, “Setting up Samba as a Domain Member”</a>
								</li></ul></div><section class="section" id="adding_a_share_that_uses_posix_acls"><div class="titlepage"><div><div><h5 class="title">16.1.6.1.1.&nbsp;Adding a Share That Uses POSIX ACLs</h5></div></div></div><p>
								To create a share named <code class="literal command">example</code>, that provides the content of the <code class="literal">/srv/samba/example/</code> directory, and uses POSIX ACLs:
							</p><div class="orderedlist" id="proc.adding_a_share-posix_acls"><p class="title"><strong>Adding a Share That Uses POSIX ACLs</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Optionally, create the folder if it does not exist. For example:
									</p><pre class="literallayout">~]# mkdir -p /srv/samba/example/</pre></li><li class="listitem"><p class="simpara">
										If you run SELinux in <code class="literal command">enforcing</code> mode, set the <code class="literal">samba_share_t</code> context on the directory:
									</p><pre class="literallayout">~]# semanage fcontext -a -t samba_share_t "/srv/samba/example(/.*)?"
~]# restorecon -Rv /srv/samba/example/</pre></li><li class="listitem">
										Set file system ACLs on the directory. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_acls-posix" title="16.1.6.1.2. Setting ACLs">Section&nbsp;16.1.6.1.2, “Setting ACLs”</a>.
									</li><li class="listitem"><p class="simpara">
										Add the <code class="literal">example</code> share to the <code class="literal">/etc/samba/smb.conf</code> file. For example, to add the share write-enabled:
									</p><pre class="literallayout">[example]
	path = /srv/samba/example/
	read only = no</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Regardless of the file system ACLs; if you do not set <code class="literal command">read only = no</code>, Samba shares the directory in read-only mode.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Open the required ports and reload the firewall configuration using the <code class="literal">firewall-cmd</code> utility:
									</p><pre class="literallayout">~]# firewall-cmd --permanent --add-service=samba
~]# firewall-cmd --reload</pre></li><li class="listitem"><p class="simpara">
										Restart the <code class="literal">smb</code> service:
									</p><pre class="literallayout">~]# systemctl restart smb</pre></li><li class="listitem"><p class="simpara">
										Optionally, enable the <code class="literal">smb</code> service to start automatically at boot time:
									</p><pre class="literallayout">~]# systemctl enable smb</pre></li></ol></div></section><section class="section" id="setting_acls-posix"><div class="titlepage"><div><div><h5 class="title">16.1.6.1.2.&nbsp;Setting ACLs</h5></div></div></div><p>
								Shares that use POSIX ACLs support:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Standard Linux ACLs. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_standard_linux_acls" title="Setting Standard Linux ACLs">Setting Standard Linux ACLs</a>.
									</li><li class="listitem">
										Extended ACLs. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_extended_acls" title="Setting Extended ACLs">Setting Extended ACLs</a>.
									</li></ul></div><div id="setting_standard_linux_acls" class="formalpara"><p class="title"><strong>Setting Standard Linux ACLs</strong></p><p>
									The standard ACLs on Linux support setting permissions for one owner, one group, and for all other undefined users. You can use the <code class="literal">chown</code>, <code class="literal">chgrp</code>, and <code class="literal">chmod</code> utility to update the ACLs. If you require precise control, then you use the more complex POSIX ACLs, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_extended_acls" title="Setting Extended ACLs">Setting Extended ACLs</a>.
								</p></div><p>
								For example, to set the owner of the <code class="literal">/srv/samba/example/</code> directory to the <code class="literal">root</code> user, grant read and write permissions to the <code class="literal">Domain Users</code> group, and deny access to all other users:
							</p><pre class="literallayout">~]# chown root:"Domain Users" /srv/samba/example/
~]# chmod 2770 /srv/samba/example/</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Enabling the set-group-ID (SGID) bit on a directory automatically sets the default group for all new files and subdirectories to that of the directory group, instead of the usual behavior of setting it to the primary group of the user who created the new directory entry.
								</p></div></div><p>
								For further details about permissions, see the <span class="strong strong"><strong>chown</strong></span>(1) and <span class="strong strong"><strong>chmod</strong></span>(1) man pages.
							</p><div id="setting_extended_acls" class="formalpara"><p class="title"><strong>Setting Extended ACLs</strong></p><p>
									If the file system the shared directory is stored on supports extended ACLs, you can use them to set complex permissions. Extended ACLs can contain permissions for multiple users and groups.
								</p></div><p>
								Extended POSIX ACLs enable you to configure complex ACLs with multiple users and groups. However, you can only set the following permissions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										No access
									</li><li class="listitem">
										Read access
									</li><li class="listitem">
										Write access
									</li><li class="listitem">
										Full control
									</li></ul></div><p>
								If you require the fine-granular Windows permissions, such as <code class="literal">Create folder / append data</code>, configure the share to use Windows ACLs. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_share_that_uses_windows_acls" title="16.1.6.2. Setting up a Share That Uses Windows ACLs">Section&nbsp;16.1.6.2, “Setting up a Share That Uses Windows ACLs”</a>.
							</p><p>
								To use extended POSIX ACLs on a share:
							</p><div class="orderedlist" id="proc.setting_extended_acls"><p class="title"><strong>Enabling Extended POSIX ACLs on a Share</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Enable the following parameter in the share’s section in the <code class="literal">/etc/samba/smb.conf</code> file to enable ACL inheritance of extended ACLs:
									</p><pre class="literallayout">inherit acls = yes</pre><p class="simpara">
										For details, see the parameter description in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
									</p></li><li class="listitem"><p class="simpara">
										Restart the <code class="literal">smb</code> service:
									</p><pre class="literallayout">~]# systemctl restart smb</pre></li><li class="listitem"><p class="simpara">
										Optionally, enable the <code class="literal">smb</code> service to start automatically at boot time:
									</p><pre class="literallayout">~]# systemctl enable smb</pre></li><li class="listitem"><p class="simpara">
										Set the ACLs on the directory. For details about using extended ACLs, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Access_Control_Lists" title="Chapter 5. Access Control Lists">Chapter&nbsp;5, <em>Access Control Lists</em></a>.
									</p><div class="example" id="ex.setting_extended_acls"><p class="title"><strong>Example&nbsp;16.4.&nbsp;Setting Extended ACLs</strong></p><div class="example-contents"><p>
											The following procedure sets read, write, and execute permissions for the <code class="literal">Domain Admins</code> group, read, and execute permissions for the <code class="literal">Domain Users</code> group, and deny access to everyone else on the <code class="literal">/srv/samba/example/</code> directory:
										</p><div class="orderedlist" id="proc.ex.setting_extended_acls"><p class="title"><strong>Setting Extended ACLs</strong></p><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
													Disable auto-granting permissions to the primary group of user accounts:
												</p><pre class="literallayout">~]# setfacl -m group::--- /srv/samba/example/
~]# setfacl -m default:group::--- /srv/samba/example/</pre><p class="simpara">
													The primary group of the directory is additionally mapped to the dynamic <code class="literal">CREATOR GROUP</code> principal. When you use extended POSIX ACLs on a Samba share, this principal is automatically added and you cannot remove it.
												</p></li><li class="listitem"><p class="simpara">
													Set the permissions on the directory:
												</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
															Grant read, write, and execute permissions to the <code class="literal">Domain Admins</code> group:
														</p><pre class="literallayout">~]# setfacl -m group:"<span class="emphasis"><em>DOMAIN</em></span>\Domain Admins":rwx /srv/samba/example/</pre></li><li class="listitem"><p class="simpara">
															Grant read and execute permissions to the <code class="literal">Domain Users</code> group:
														</p><pre class="literallayout">~]# setfacl -m group:"<span class="emphasis"><em>DOMAIN</em></span>\Domain Users":r-x /srv/samba/example/</pre></li><li class="listitem"><p class="simpara">
															Set permissions for the <code class="literal">other</code> ACL entry to deny access to users that do not match the other ACL entries:
														</p><pre class="literallayout">~]# setfacl -R -m other::--- /srv/samba/example/</pre><p class="simpara">
															These settings apply only to this directory. In Windows, these ACLs are mapped to the <code class="literal">This folder only</code> mode.
														</p></li></ol></div></li><li class="listitem"><p class="simpara">
													To enable the permissions set in the previous step to be inherited by new file system objects created in this directory:
												</p><pre class="literallayout">~]# setfacl -m default:group:"<span class="emphasis"><em>DOMAIN</em></span>\Domain Admins":rwx /srv/samba/example/
~]# setfacl -m default:group:"<span class="emphasis"><em>DOMAIN</em></span>\Domain Users":r-x /srv/samba/example/
~]# setfacl -m default:other::--- /srv/samba/example/</pre><p class="simpara">
													With these settings, the <code class="literal">This folder only</code> mode for the principals is now set to <code class="literal">This folder, subfolders, and files</code>.
												</p></li></ol></div><p>
											Samba maps the previously set permissions to the following Windows ACLs:
										</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569351181728" scope="col">Principal</th><th align="left" valign="top" id="idm140569351180640" scope="col">Access</th><th align="left" valign="top" id="idm140569351179552" scope="col">Applies to</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569351181728"> <p>
															<span class="emphasis"><em>DOMAIN</em></span>\Domain Admins
														</p>
														 </td><td align="left" valign="top" headers="idm140569351180640"> <p>
															Full control
														</p>
														 </td><td align="left" valign="top" headers="idm140569351179552"> <p>
															This folder, subfolders, and files
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569351181728"> <p>
															<span class="emphasis"><em>DOMAIN</em></span>\Domain Users
														</p>
														 </td><td align="left" valign="top" headers="idm140569351180640"> <p>
															Read &amp; execute
														</p>
														 </td><td align="left" valign="top" headers="idm140569351179552"> <p>
															This folder, subfolders, and files
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569351181728"> <p>
															Everyone <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569351164784" class="footnote"><sup class="footnote" id="idm140569351164784">[a]</sup></a>
														</p>
														 </td><td align="left" valign="top" headers="idm140569351180640"> <p>
															None
														</p>
														 </td><td align="left" valign="top" headers="idm140569351179552"> <p>
															This folder, subfolders, and files
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569351181728"> <p>
															<span class="emphasis"><em>owner</em></span> (Unix Userpass:attributes[]<span class="emphasis"><em>owner</em></span>) <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569351157040" class="footnote"><sup class="footnote" id="idm140569351157040">[b]</sup></a>
														</p>
														 </td><td align="left" valign="top" headers="idm140569351180640"> <p>
															Full control
														</p>
														 </td><td align="left" valign="top" headers="idm140569351179552"> <p>
															This folder only
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569351181728"> <p>
															<span class="emphasis"><em>primary_group</em></span> (Unix Userpass:attributes[]<span class="emphasis"><em>primary_group</em></span>) <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569351579072" class="footnote"><sup class="footnote" id="idm140569351579072">[c]</sup></a>
														</p>
														 </td><td align="left" valign="top" headers="idm140569351180640"> <p>
															None
														</p>
														 </td><td align="left" valign="top" headers="idm140569351179552"> <p>
															This folder only
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569351181728"> <p>
															<code class="literal">CREATOR OWNER</code> <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569351572320" class="footnote"><sup class="footnote" id="idm140569351572320">[d]</sup></a> <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569351571248" class="footnote"><sup class="footnote" id="idm140569351571248">[e]</sup></a>
														</p>
														 </td><td align="left" valign="top" headers="idm140569351180640"> <p>
															Full control
														</p>
														 </td><td align="left" valign="top" headers="idm140569351179552"> <p>
															Subfolders and files only
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569351181728"> <p>
															<code class="literal">CREATOR GROUP</code> <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569351564432" class="footnote"><sup class="footnote" id="idm140569351564432">[f]</sup></a>
														</p>
														 </td><td align="left" valign="top" headers="idm140569351180640"> <p>
															None
														</p>
														 </td><td align="left" valign="top" headers="idm140569351179552"> <p>
															Subfolders and files only
														</p>
														 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="3"><div id="ftn.idm140569351164784" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569351164784" class="simpara"><sup class="simpara">[a] </sup></a>
																Samba maps the permissions for this principal from the <code class="literal">other</code> ACL entry.
															</div></div><div id="ftn.idm140569351157040" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569351157040" class="simpara"><sup class="simpara">[b] </sup></a>
																Samba maps the owner of the directory to this entry.
															</div></div><div id="ftn.idm140569351579072" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569351579072" class="simpara"><sup class="simpara">[c] </sup></a>
																Samba maps the primary group of the directory to this entry.
															</div></div><div id="ftn.idm140569351572320" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569351572320" class="simpara"><sup class="simpara">[d] </sup></a>
																On new file system objects, the creator inherits automatically the permissions of this principal.
															</div></div><div id="ftn.idm140569351571248" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569351571248" class="simpara"><sup class="simpara">[e] </sup></a>
																Configuring or removing these principals from the ACLs not supported on shares that use POSIX ACLs.
															</div></div><div id="ftn.idm140569351564432" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569351564432" class="simpara"><sup class="simpara">[f] </sup></a>
																On new file system objects, the creator’s primary group inherits automatically the permissions of this principal.
															</div></div></td></tr></tbody></table></div></div></div></li></ol></div></section><section class="section" id="setting_permissions_on_a_share-posix"><div class="titlepage"><div><div><h5 class="title">16.1.6.1.3.&nbsp;Setting Permissions on a Share</h5></div></div></div><p>
								Optionally, to limit or grant access to a Samba share, you can set certain parameters in the share’s section in the <code class="literal">/etc/samba/smb.conf</code> file.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Share-based permissions manage if a user, group, or host is able to access a share. These settings do not affect file system ACLs.
								</p></div></div><p>
								Use share-based settings to restrict access to shares. For example, to deny access from specific hosts.
							</p><div id="configuring_and_group-based_share_access-posix" class="formalpara"><p class="title"><strong>Configuring User and Group-based Share Access</strong></p><p>
									User and group-based access control enables you to grant or deny access to a share for certain users and groups. For example, to enable all members of the <code class="literal">Domain Users</code> group to access a share while access is denied for the <code class="literal">user</code> account, add the following parameters to the share’s configuration:
								</p></div><pre class="literallayout">valid users = +<span class="emphasis"><em>DOMAIN</em></span>\"Domain Users"
invalid users = <span class="emphasis"><em>DOMAIN</em></span>\user</pre><p>
								The <code class="literal">invalid users</code> parameter has a higher priority than <code class="literal">valid users</code> parameter. For example, if the <code class="literal">user</code> account is a member of the <code class="literal">Domain Users</code> group, access is denied to this account when you use the previous example.
							</p><p>
								For further details, see the parameter descriptions in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
							</p><div id="configuring_host-based_share_access-posix" class="formalpara"><p class="title"><strong>Configuring Host-based Share Access</strong></p><p>
									Host-based access control enables you to grant or deny access to a share based on client’s host names, IP addresses, or IP ranges.
								</p></div><p>
								For example, to enable the <code class="literal">127.0.0.1</code> IP address, the <code class="literal">192.0.2.0/24</code> IP range, and the <code class="literal">client1.example.com</code> host to access a share, and additionally deny access for the <code class="literal">client2.example.com</code> host:
							</p><div class="orderedlist" id="proc.configuring_host-based_share_access"><p class="title"><strong>Configuring Host-based Share Access</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Add the following parameters to the configuration of the share in the <code class="literal">/etc/samba/smb.conf</code>:
									</p><pre class="literallayout">hosts allow = 127.0.0.1 192.0.2.0/24 client1.example.com
hosts deny = client2.example.com</pre></li><li class="listitem"><p class="simpara">
										Reload the Samba configuration
									</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li></ol></div><p>
								The <code class="literal">hosts deny</code> parameter has a higher priority than <code class="literal">hosts allow</code>. For example, if <code class="literal">client1.example.com</code> resolves to an IP address that is listed in the <code class="literal">hosts allow</code> parameter, access for this host is denied.
							</p><p>
								For further details, see the parameter description in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
							</p></section></section><section class="section" id="setting_up_a_share_that_uses_windows_acls"><div class="titlepage"><div><div><h4 class="title">16.1.6.2.&nbsp;Setting up a Share That Uses Windows ACLs</h4></div></div></div><p>
							Samba supports setting Windows ACLs on shares and file system object. This enables you to:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Use the fine-granular Windows ACLs
								</li><li class="listitem">
									Manage share permissions and file system ACLs using Windows
								</li></ul></div><p>
							Alternatively, you can configure a share to use POSIX ACLs. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_share_that_uses_posix_acls" title="16.1.6.1. Setting up a Share That Uses POSIX ACLs">Section&nbsp;16.1.6.1, “Setting up a Share That Uses POSIX ACLs”</a>.
						</p><section class="section" id="granting_the_sediskoperatorprivilege_privilege"><div class="titlepage"><div><div><h5 class="title">16.1.6.2.1.&nbsp;Granting the <code class="literal">SeDiskOperatorPrivilege</code> Privilege</h5></div></div></div><p>
								Only users and groups having the <code class="literal">SeDiskOperatorPrivilege</code> privilege granted can configure permissions on shares that use Windows ACLs. For example, to grant the privilege to the <code class="literal"><span class="emphasis"><em>DOMAIN</em></span>\Domain Admins</code> group:
							</p><pre class="literallayout">~]# net rpc rights grant "<span class="emphasis"><em>DOMAIN</em></span>\Domain Admins" SeDiskOperatorPrivilege \
    -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
Enter <span class="emphasis"><em>DOMAIN</em></span>\administrator's password:
Successfully granted rights.</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									In a domain environment, grant <code class="literal">SeDiskOperatorPrivilege</code> to a domain group. This enables you to centrally manage the privilege by updating a user’s group membership.
								</p></div></div><p>
								To list all users and groups having <code class="literal">SeDiskOperatorPrivilege</code> granted:
							</p><pre class="literallayout">~]# net rpc rights list privileges SeDiskOperatorPrivilege \
    -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
Enter administrator's password:
SeDiskOperatorPrivilege:
 BUILTIN\Administrators
 <span class="emphasis"><em>DOMAIN</em></span>\Domain Admins</pre></section><section class="section" id="enabling_windows_acl_support"><div class="titlepage"><div><div><h5 class="title">16.1.6.2.2.&nbsp;Enabling Windows ACL Support</h5></div></div></div><p>
								To configure shares that support Windows ACLs, you must enable this feature in Samba. To enable it globally for all shares, add the following settings to the <code class="literal">[global]</code> section of the <code class="literal">/etc/samba/smb.conf</code> file:
							</p><pre class="literallayout">vfs objects = acl_xattr
map acl inherit = yes
store dos attributes = yes</pre><p>
								Alternatively, you can enable Windows ACL support for individual shares, by adding the same parameters to a share’s section instead.
							</p></section><section class="section" id="adding_a_share_that_uses_windows_acls"><div class="titlepage"><div><div><h5 class="title">16.1.6.2.3.&nbsp;Adding a Share That Uses Windows ACLs</h5></div></div></div><p>
								To create a share named <code class="literal command">example</code>, that shares the content of the <code class="literal">/srv/samba/example/</code> directory, and uses Windows ACLs:
							</p><div class="orderedlist" id="proc.adding_a_share_that_uses_windows_acls"><p class="title"><strong>Adding a Share That Uses Windows ACLs</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Optionally, create the folder if it does not exists. For example:
									</p><pre class="literallayout">~]# mkdir -p /srv/samba/example/</pre></li><li class="listitem"><p class="simpara">
										If you run SELinux in <code class="literal command">enforcing</code> mode, set the <code class="literal">samba_share_t</code> context on the directory:
									</p><pre class="literallayout">~]# semanage fcontext -a -t samba_share_t "/srv/samba/example(/.*)?"
~]# restorecon -Rv /srv/samba/example/</pre></li><li class="listitem"><p class="simpara">
										Add the <code class="literal">example</code> share to the <code class="literal">/etc/samba/smb.conf</code> file. For example, to add the share write-enabled:
									</p><pre class="literallayout">[example]
	path = /srv/samba/example/
	read only = no</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Regardless of the file system ACLs; if you do not set <code class="literal command">read only = no</code>, Samba shares the directory in read-only mode.
										</p></div></div></li><li class="listitem"><p class="simpara">
										If you have not enabled Windows ACL support in the <code class="literal">[global]</code> section for all shares, add the following parameters to the <code class="literal">[example]</code> section to enable this feature for this share:
									</p><pre class="literallayout">vfs objects = acl_xattr
map acl inherit = yes
store dos attributes = yes</pre></li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Open the required ports and reload the firewall configuration using the <code class="literal">firewall-cmd</code> utility:
									</p><pre class="literallayout">~]# firewall-cmd --permanent --add-service=samba
~]# firewall-cmd --reload</pre></li><li class="listitem"><p class="simpara">
										Restart the <code class="literal">smb</code> service:
									</p><pre class="literallayout">~]# systemctl restart smb</pre></li><li class="listitem"><p class="simpara">
										Optionally, enable the <code class="literal">smb</code> service to start automatically at boot time:
									</p><pre class="literallayout">~]# systemctl enable smb</pre></li></ol></div></section><section class="section" id="managing_share_permissions_and_file_system_acls_of_a_share_that_uses_windows_acls"><div class="titlepage"><div><div><h5 class="title">16.1.6.2.4.&nbsp;Managing Share Permissions and File System ACLs of a Share That Uses Windows ACLs</h5></div></div></div><p>
								To manage share and file system ACLs on a Samba share that uses Windows ACLs, use a Windows applications, such as <span class="strong strong"><strong><span class="application application">Computer Management</span></strong></span>. For details, see your Windows documentation.
							</p><p>
								Alternatively, use the <code class="literal">smbcacls</code> utility to manage ACLs. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#managing_acls_on_an_smb_share_using_smbcacls" title="16.1.6.3. Managing ACLs on an SMB Share Using smbcacls">Section&nbsp;16.1.6.3, “Managing ACLs on an SMB Share Using <code class="literal">smbcacls</code>”</a>.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									To modify the file system permissions from Windows, you must use an account that has the <code class="literal">SeDiskOperatorPrivilege</code> privilege granted. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#granting_the_sediskoperatorprivilege_privilege" title="16.1.6.2.1. Granting the SeDiskOperatorPrivilege Privilege">Section&nbsp;16.1.6.2.1, “Granting the <code class="literal">SeDiskOperatorPrivilege</code> Privilege”</a>.
								</p></div></div></section></section><section class="section" id="managing_acls_on_an_smb_share_using_smbcacls"><div class="titlepage"><div><div><h4 class="title">16.1.6.3.&nbsp;Managing ACLs on an SMB Share Using <code class="literal">smbcacls</code></h4></div></div></div><p>
							The <code class="literal">smbcacls</code> utility can list, set, and delete ACLs of files and directories stored on an SMB share. You can use <code class="literal">smbcacls</code> to manage file system ACLs:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									On a local or remote Samba server that uses advanced Windows ACLs or POSIX ACLs.
								</li><li class="listitem">
									On Red Hat Enterprise Linux to remotely manage ACLs on a share hosted on Windows.
								</li></ul></div><section class="section" id="understanding_access_control_entries"><div class="titlepage"><div><div><h5 class="title">16.1.6.3.1.&nbsp;Understanding Access Control Entries</h5></div></div></div><p>
								Each ACL entry of a file system object contains Access Control Entries (ACE) in the following format:
							</p><pre class="literallayout"><span class="emphasis"><em>security_principal</em></span>:<span class="emphasis"><em>access_right</em></span>/<span class="emphasis"><em>inheritance_information</em></span>/<span class="emphasis"><em>permissions</em></span></pre><div class="example" id="ex.access_control_entries"><p class="title"><strong>Example&nbsp;16.5.&nbsp;Access Control Entries</strong></p><div class="example-contents"><p>
									If the <code class="literal">AD\Domain Users</code> group has <code class="literal command">Modify</code> permissions that apply to <code class="literal command">This folder, subfolders, and files</code> on Windows, the ACL contains the following ACEs:
								</p><pre class="literallayout">AD\Domain Users:ALLOWED/OI|CI/CHANGE</pre></div></div><p>
								The following describes the individual ACEs:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Security principal</span></dt><dd>
											The security principal is the user, group, or SID the permissions in the ACL are applied to.
										</dd><dt><span class="term">Access right</span></dt><dd>
											Defines if access to an object is granted or denied. The value can be <code class="literal command">ALLOWED</code> or <code class="literal command">DENIED</code>.
										</dd><dt><span class="term">Inheritance information</span></dt><dd><p class="simpara">
											The following values exist:
										</p><div class="table" id="inheritance_settings"><p class="title"><strong>Table&nbsp;16.3.&nbsp;Inheritance Settings</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140569347903472" scope="col">Value</th><th style="text-align: left; vertical-align: top; " id="idm140569347902384" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm140569347901296" scope="col">Maps to</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140569347903472"> <p>
															<code class="literal command">OI</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347902384"> <p>
															Object Inherit
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347901296"> <p>
															This folder and files
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569347903472"> <p>
															<code class="literal command">CI</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347902384"> <p>
															Container Inherit
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347901296"> <p>
															This folder and subfolders
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569347903472"> <p>
															<code class="literal command">IO</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347902384"> <p>
															Inherit Only
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347901296"> <p>
															The ACE does not apply to the current file or directory.
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569347903472"> <p>
															<code class="literal command">ID</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347902384"> <p>
															Inherited
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569347901296"> <p>
															The ACE was inherited from the parent directory.
														</p>
														 </td></tr></tbody></table></div></div><p class="simpara">
											Additionally, the values can be combined as follows:
										</p><div class="table" id="inheritance_settings_combinations"><p class="title"><strong>Table&nbsp;16.4.&nbsp;Inheritance Settings Combinations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140569351845296" scope="col">Value Combinations</th><th style="text-align: left; vertical-align: top; " id="idm140569351844208" scope="col">Maps to the Windows <code class="literal command">Applies to</code> Setting</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140569351845296"> <p>
															[command]`OI
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569351844208"> <p>
															CI`
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569351845296"> <p>
															This folder, subfolders, and files
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569351844208"> <p>
															[command]`OI
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569351845296"> <p>
															CI
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569351844208"> <p>
															IO`
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569351845296"> <p>
															Subfolders and files only
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569351844208"> <p>
															[command]`CI
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569351845296"> <p>
															IO`
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569351844208"> <p>
															Subfolders only
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569351845296"> <p>
															[command]`OI
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569351844208"> <p>
															IO`
														</p>
														 </td></tr></tbody></table></div></div></dd><dt><span class="term">Permissions</span></dt><dd><p class="simpara">
											This value can be either a hex value that represents one or more Windows permissions or an <code class="literal">smbcacls</code> alias:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
													A hex value that represents one or more Windows permissions.
												</p><p class="simpara">
													The following table displays the advanced Windows permissions and their corresponding value in hex format:
												</p><div class="table" id="windows_permissions_and_their_corresponding_smbcacls_value_in_hex_format"><p class="title"><strong>Table&nbsp;16.5.&nbsp;Windows Permissions and Their Corresponding <code class="literal">smbcacls</code> Value in Hex Format</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140569348429024" scope="col">Windows Permissions</th><th style="text-align: left; vertical-align: top; " id="idm140569348427936" scope="col">Hex Values</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Full control
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x001F01FF</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Traverse folder / execute file
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100020</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	List folder / read data
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100001</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Read attributes
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100080</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Read extended attributes
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100008</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Create files / write data
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100002</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Create folders / append data
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100004</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Write attributes
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100100</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Write extended attributes
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100010</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Delete subfolders and files
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00100040</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Delete
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00110000</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Read permissions
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00120000</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Change permissions
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00140000</code>
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569348429024"> <p>
																	Take ownership
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569348427936"> <p>
																	<code class="literal command">0x00180000</code>
																</p>
																 </td></tr></tbody></table></div></div><p class="simpara">
													Multiple permissions can be combined as a single hex value using the bit-wise <code class="literal command">OR</code> operation. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#calculating_an_ace_mask" title="16.1.6.3.3. Calculating an ACE Mask">Section&nbsp;16.1.6.3.3, “Calculating an ACE Mask”</a>.
												</p></li><li class="listitem"><p class="simpara">
													An <code class="literal">smbcacls</code> alias. The following table displays the available aliases:
												</p><div class="table" id="existing_smbcacls_and_their_corresponding_windows_permission"><p class="title"><strong>Table&nbsp;16.6.&nbsp;Existing <code class="literal">smbcacls</code> Aliases and Their Corresponding Windows Permission</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140569363625648" scope="col"><code class="literal">smbcacls</code> Alias</th><th style="text-align: left; vertical-align: top; " id="idm140569350974944" scope="col">Maps to Windows Permission</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">R</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Read
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">READ</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Read &amp; execute
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">W</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Special +
																</p>
																 <p>
																	+ <span class="strong strong"><strong>* Create files / write data + </strong></span>* Create folders / append data + <span class="strong strong"><strong>* Write attributes + </strong></span>* Write extended attributes + <span class="strong strong"><strong>*</strong></span> Read permissions
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">D</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Delete
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">P</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Change permissions
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">O</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Take ownership
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">X</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Traverse / execute
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">CHANGE</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Modify
																</p>
																 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569363625648"> <p>
																	<code class="literal command">FULL</code>
																</p>
																 </td><td style="text-align: left; vertical-align: top; " headers="idm140569350974944"> <p>
																	Full control
																</p>
																 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
														You can combine single-letter aliases when you set permissions. For example, you can set <code class="literal command">RD</code> to apply the Windows permission <code class="literal command">Read</code> and <code class="literal command">Delete</code>. However, you can neither combine multiple non-single-letter aliases nor combine aliases and hex values.
													</p></div></div></li></ul></div></dd></dl></div></section><section class="section" id="displaying_acls_using_smbcacls"><div class="titlepage"><div><div><h5 class="title">16.1.6.3.2.&nbsp;Displaying ACLs Using <code class="literal">smbcacls</code></h5></div></div></div><p>
								If you run <code class="literal">smbcacls</code> without any operation parameter, such as <code class="literal">--add</code>, the utility displays the ACLs of a file system object.
							</p><p>
								For example, to list the ACLs of the root directory of the <code class="literal">//server/example</code> share:
							</p><pre class="literallayout">~]# smbcacls //server/example / -U "<span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]"
Enter <span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]'s password:
REVISION:1
CONTROL:SR|PD|DI|DP
OWNER:AD\Administrators
GROUP:AD\Domain Users
ACL:AD\Administrator:ALLOWED/OI|CI/FULL
ACL:AD\Domain Users:ALLOWED/OI|CI/CHANGE
ACL:AD\Domain Guests:ALLOWED/OI|CI/0x00100021</pre><p>
								The output of the command displays:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">REVISION</code>: The internal Windows NT ACL revision of the security descriptor
									</li><li class="listitem">
										<code class="literal">CONTROL</code>: Security descriptor control
									</li><li class="listitem">
										<code class="literal">OWNER</code>: Name or SID of the security descriptor’s owner
									</li><li class="listitem">
										<code class="literal">GROUP</code>: Name or SID of the security descriptor’s group
									</li><li class="listitem">
										<code class="literal">ACL</code> entries. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#understanding_access_control_entries" title="16.1.6.3.1. Understanding Access Control Entries">Section&nbsp;16.1.6.3.1, “Understanding Access Control Entries”</a>.
									</li></ul></div></section><section class="section" id="calculating_an_ace_mask"><div class="titlepage"><div><div><h5 class="title">16.1.6.3.3.&nbsp;Calculating an ACE Mask</h5></div></div></div><p>
								In most situations, when you add or update an ACE, you use the <code class="literal">smbcacls</code> aliases listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#existing_smbcacls_and_their_corresponding_windows_permission" title="Table 16.6. Existing smbcacls Aliases and Their Corresponding Windows Permission">Table&nbsp;16.6, “Existing <code class="literal">smbcacls</code> Aliases and Their Corresponding Windows Permission”</a>.
							</p><p>
								However, if you want to set advanced Windows permissions as listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#windows_permissions_and_their_corresponding_smbcacls_value_in_hex_format" title="Table 16.5. Windows Permissions and Their Corresponding smbcacls Value in Hex Format">Table&nbsp;16.5, “Windows Permissions and Their Corresponding <code class="literal">smbcacls</code> Value in Hex Format”</a>, you must use the bit-wise <code class="literal command">OR</code> operation to calculate the correct value. You can use the following shell command to calculate the value:
							</p><pre class="literallayout">~]# echo $(printf '0x%X' $
							
							<a id="idm140569349987520" class="indexterm"><!--Empty--></a>
							
							<span class="emphasis"><em>hex_value_1</em></span> | <span class="emphasis"><em>hex_value_2</em></span> | ...)</pre><div class="example" id="ex.calculating_an_ace_mask"><p class="title"><strong>Example&nbsp;16.6.&nbsp;Calculating an ACE Mask</strong></p><div class="example-contents"><p>
									You want set following permissions:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal command">Traverse folder / execute file</code> (<code class="literal command">0x00100020</code>)
										</li><li class="listitem">
											<code class="literal command">List folder / read data</code> (<code class="literal command">0x00100001</code>)
										</li><li class="listitem">
											<code class="literal command">Read attributes</code> (<code class="literal command">0x00100080</code>)
										</li></ul></div><p>
									To calculate the hex value for the previous permissions, enter:
								</p><pre class="literallayout">~]# echo $(printf '0x%X' $(( 0x00100020 | 0x00100001 | 0x00100080 )))
0x1000A1</pre><p>
									Use the returned value when you set or update an ACE.
								</p></div></div></section><section class="section" id="setting_an_acl_using_smbcacls"><div class="titlepage"><div><div><h5 class="title">16.1.6.3.4.&nbsp;Adding, Updating, And Removing an ACL Using <code class="literal">smbcacls</code></h5></div></div></div><p>
								Depending on the parameter you pass to the <code class="literal">smbcacls</code> utility, you can add, update, and remove ACLs from a file or directory.
							</p><div class="formalpara"><p class="title"><strong>Adding an ACL</strong></p><p>
									To add an ACL to the root of the <code class="literal">//server/example</code> share that grants <code class="literal">CHANGE</code> permissions for <code class="literal">This folder, subfolders, and files</code> to the <code class="literal">AD\Domain Users</code> group:
								</p></div><pre class="literallayout">~]# smbcacls //server/example / -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator \
    --add ACL:"AD\Domain Users":ALLOWED/OI|CI/CHANGE</pre><div class="formalpara"><p class="title"><strong>Updating an ACL</strong></p><p>
									Updating an ACL is similar to adding a new ACL. You update an ACL by overriding the ACL using the <code class="literal">--modify</code> parameter with an existing security principal. If <code class="literal">smbcacls</code> finds the security principal in the ACL list, the utility updates the permissions. Otherwise the command fails with an error:
								</p></div><pre class="literallayout">ACL for SID <span class="emphasis"><em>principal_name</em></span> not found</pre><p>
								For example, to update the permissions of the <code class="literal">AD\Domain Users</code> group and set them to <code class="literal">READ</code> for <code class="literal">This folder, subfolders, and files</code>:
							</p><pre class="literallayout">~]# smbcacls //server/example / -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator \
    --modify ACL:"AD\Domain Users":ALLOWED/OI|CI/READ</pre><div class="formalpara"><p class="title"><strong>Deleting an ACL</strong></p><p>
									To delete an ACL, pass the <code class="literal">--delete</code> with the exact ACL to the <code class="literal">smbcacls</code> utility. For example:
								</p></div><pre class="literallayout">~]# smbcacls //server/example / -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator \
    --delete ACL:"AD\Domain Users":ALLOWED/OI|CI/READ</pre></section></section><section class="section" id="enabling_users_to_share_directories_on_a_samba_server"><div class="titlepage"><div><div><h4 class="title">16.1.6.4.&nbsp;Enabling Users to Share Directories on a Samba Server</h4></div></div></div><p>
							On a Samba server, you can configure that users can share directories without <code class="literal">root</code> permissions.
						</p><section class="section" id="enabling_the_user_shares_feature"><div class="titlepage"><div><div><h5 class="title">16.1.6.4.1.&nbsp;Enabling the User Shares Feature</h5></div></div></div><p>
								Before users can share directories, the administrator must enable user shares in Samba. For example, to enable only members of the local <code class="literal">example</code> group to create user shares:
							</p><div class="orderedlist" id="proc.enabling_the_user_shares_feature"><p class="title"><strong>Enabling User Shares</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Create the local <code class="literal">example</code> group, if it does not exist:
									</p><pre class="literallayout">~]# groupadd <span class="emphasis"><em>example</em></span></pre></li><li class="listitem"><p class="simpara">
										Prepare the directory for Samba to store the user share definitions and set its permissions properly. For example:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
												Create the directory:
											</p><pre class="literallayout">~]# mkdir -p /var/lib/samba/usershares/</pre></li><li class="listitem"><p class="simpara">
												Set write permissions for the <code class="literal">example</code> group:
											</p><pre class="literallayout">~]# chgrp <span class="emphasis"><em>example</em></span> /var/lib/samba/usershares/
~]# chmod 1770 /var/lib/samba/usershares/</pre><p class="simpara">
												Set the sticky bit to prevent users to rename or delete files stored by other users in this directory.
											</p></li></ol></div></li><li class="listitem"><p class="simpara">
										Edit the <code class="literal">/etc/samba/smb.conf</code> file and add the following to the <code class="literal">[global]</code> section:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
												Set the path to the directory you configured to store the user share definitions. For example:
											</p><pre class="literallayout">usershare path = /var/lib/samba/usershares/</pre></li><li class="listitem"><p class="simpara">
												Set how many user shares Samba allows to be created on this server. For example:
											</p><pre class="literallayout">usershare max shares = <span class="emphasis"><em>100</em></span></pre><p class="simpara">
												If you use the default of <code class="literal command">0</code> for the <code class="literal">usershare max shares</code> parameter, user shares are disabled.
											</p></li><li class="listitem"><p class="simpara">
												Optionally, set a list of absolute directory paths. For example, to configure that Samba only allows to share subdirectories of the <code class="literal">/data</code> and <code class="literal">/srv</code> directory to be shared, set:
											</p><pre class="literallayout">usershare prefix allow list = /data /srv</pre><p class="simpara">
												For a list of further user share-related parameters you can set, see the <span class="emphasis"><em><span class="citetitle citetitle">USERSHARES</span></em></span> section in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
											</p></li></ol></div></li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Reload the Samba configuration:
									</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li></ol></div><p>
								Users are now able to create user shares. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#adding_a_user_share" title="16.1.6.4.2. Adding a User Share">Section&nbsp;16.1.6.4.2, “Adding a User Share”</a>.
							</p></section><section class="section" id="adding_a_user_share"><div class="titlepage"><div><div><h5 class="title">16.1.6.4.2.&nbsp;Adding a User Share</h5></div></div></div><p>
								After you configured Samba according to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#enabling_the_user_shares_feature" title="16.1.6.4.1. Enabling the User Shares Feature">Section&nbsp;16.1.6.4.1, “Enabling the User Shares Feature”</a>, users can share directories on the Samba server without <code class="literal">root</code> permissions by running the <code class="literal command">net usershare add</code> command.
							</p><p>
								Synopsis of the <code class="literal command">net usershare add</code> command: <code class="literal command">net usershare add</code>share_namepathcommentACLsguest_ok=y|n
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									If you set ACLs when you create a user share, you must specify the comment parameter prior to the ACLs. To set an empty comment, use an empty string in double quotes.
								</p></div></div><p>
								Note that users can only enable guest access on a user share, if the administrator set <code class="literal command">usershare allow guests = yes</code> in the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file.
							</p><div class="example" id="ex.adding_a_user_share"><p class="title"><strong>Example&nbsp;16.7.&nbsp;Adding a User Share</strong></p><div class="example-contents"><p>
									A user wants to share the <code class="literal">/srv/samba/</code> directory on a Samba server. The share should be named <code class="literal">example</code>, have no comment set, and should be accessible by guest users. Additionally, the share permissions should be set to full access for the <code class="literal">AD\Domain Users</code> group and read permissions for other users. To add this share, run as the user:
								</p><pre class="literallayout">~]$ net usershare add <span class="emphasis"><em>example</em></span> <span class="emphasis"><em>/srv/samba/</em></span> "" \
    <span class="emphasis"><em>"AD\Domain Users":F,Everyone:R</em></span> guest_ok=yes</pre></div></div></section><section class="section" id="updating_settings_of_a_user_share"><div class="titlepage"><div><div><h5 class="title">16.1.6.4.3.&nbsp;Updating Settings of a User Share</h5></div></div></div><p>
								If you want to update settings of a user share, override the share by using the <code class="literal command">net usershare add</code> command with the same share name and the new settings. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#adding_a_user_share" title="16.1.6.4.2. Adding a User Share">Section&nbsp;16.1.6.4.2, “Adding a User Share”</a>.
							</p></section><section class="section" id="displaying_information_about_existing_user_shares"><div class="titlepage"><div><div><h5 class="title">16.1.6.4.4.&nbsp;Displaying Information About Existing User Shares</h5></div></div></div><p>
								Users can enter the <code class="literal command">net usershare info</code> command on a Samba server to display user shares and their settings.
							</p><p>
								To display all user shares created by any user:
							</p><pre class="literallayout">~]$ net usershare info -l
[<span class="emphasis"><em>share_1</em></span>]
path=/srv/samba/
comment=
usershare_acl=Everyone:R,<span class="emphasis"><em>host_name</em></span>\user:F,
guest_ok=y
...</pre><p>
								To list only shares created by the user who runs the command, omit the <code class="literal">-l</code> parameter.
							</p><p>
								To display only the information about specific shares, pass the share name or wild cards to the command. For example, to display the information about shares whose name starts with <code class="literal">share_</code>:
							</p><pre class="literallayout">~]$ net usershare info -l <span class="emphasis"><em>share</em></span>*_</pre></section><section class="section" id="listing_user_shares"><div class="titlepage"><div><div><h5 class="title">16.1.6.4.5.&nbsp;Listing User Shares</h5></div></div></div><p>
								If you want to list only the available user shares without their settings on a Samba server, use the <code class="literal command">net usershare list</code> command.
							</p><p>
								To list the shares created by any user:
							</p><pre class="literallayout">~]$ net usershare list -l
<span class="emphasis"><em>share_1</em></span>
<span class="emphasis"><em>share_2</em></span>
...</pre><p>
								To list only shares created by the user who runs the command, omit the <code class="literal">-l</code> parameter.
							</p><p>
								To list only specific shares, pass the share name or wild cards to the command. For example, to list only shares whose name starts with <code class="literal">share_</code>:
							</p><pre class="literallayout">~]$ net usershare list -l share_*</pre></section><section class="section" id="deleting_a_user_share"><div class="titlepage"><div><div><h5 class="title">16.1.6.4.6.&nbsp;Deleting a User Share</h5></div></div></div><p>
								To delete a user share, enter as the user who created the share or as the <code class="literal">root</code> user:
							</p><pre class="literallayout">~]$ net usershare delete <span class="emphasis"><em>share_name</em></span></pre></section></section><section class="section" id="enabling_guest_access_to_a_share"><div class="titlepage"><div><div><h4 class="title">16.1.6.5.&nbsp;Enabling Guest Access to a Share</h4></div></div></div><p>
							In certain situations, you want to share a directory to which users can connect without authentication. To configure this, enable guest access on a share.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Shares that do not require authentication can be a security risk.
							</p></div></div><p>
							If guest access is enabled on a share, Samba maps guest connections to the operating system account set in the <code class="literal">guest account</code> parameter. Guest users can access these files if at least one of the following conditions is satisfied:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The account is listed in file system ACLs
								</li><li class="listitem">
									The POSIX permissions for <code class="literal">other</code> users allow it
								</li></ul></div><div class="example" id="ex.guest_share_permissions"><p class="title"><strong>Example&nbsp;16.8.&nbsp;Guest Share Permissions</strong></p><div class="example-contents"><p>
								If you configured Samba to map the guest account to <code class="literal">nobody</code>, which is the default, the ACLs in the following example:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Allow guest users to read <code class="literal">file1.txt</code>
									</li><li class="listitem">
										Allow guest users to read and modify <code class="literal">file2.txt</code>.
									</li><li class="listitem">
										Prevent guest users to read or modify <code class="literal">file3.txt</code>
									</li></ul></div><pre class="literallayout">-rw-r--r--. 1 root    root   1024 1. Sep 10:00 file1.txt
-rw-r-----. 1 nobody   root   1024 1. Sep 10:00 file2.txt
-rw-r-----. 1 root    root   1024 1. Sep 10:00 file3.txt</pre></div></div><p>
							For example, to enable guest access for the existing <code class="literal">[example]</code> share:
						</p><div class="orderedlist" id="proc.setting_up_a_guest_share"><p class="title"><strong>Setting up a Guest Share</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											If this is the first guest share you set up on this server:
										</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
													Set <code class="literal command">map to guest = Bad User</code> in the <code class="literal">[global]</code> section:
												</p><pre class="literallayout">[global]
	...
	map to guest = Bad User</pre><p class="simpara">
													With this setting, Samba rejects login attempts that use an incorrect password unless the user name does not exist. If the specified user name does not exist and guest access is enabled on a share, Samba treats the connection as a guest log in.
												</p></li><li class="listitem"><p class="simpara">
													By default, Samba maps the guest account to the <code class="literal">nobody</code> account on Red Hat Enterprise Linux. Optionally, you can set a different account. For example:
												</p><pre class="literallayout">[global]
	...
	guest account = <span class="emphasis"><em>user_name</em></span></pre><p class="simpara">
													The account set in this parameter must exist locally on the Samba server. For security reasons, Red Hat recommends using an account that does not have a valid shell assigned.
												</p></li></ol></div></li><li class="listitem"><p class="simpara">
											Add the <code class="literal command">guest ok = yes</code> setting to the <code class="literal">[example]</code> section:
										</p><pre class="literallayout">[example]
	...
	guest ok = yes</pre></li></ol></div></li><li class="listitem"><p class="simpara">
									Verify the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
									For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
								</p></li><li class="listitem"><p class="simpara">
									Reload the Samba configuration:
								</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li></ol></div></section></section><section class="section" id="setting_up_a_samba_print_server"><div class="titlepage"><div><div><h3 class="title">16.1.7.&nbsp;Setting up a Samba Print Server</h3></div></div></div><p>
						If you set up Samba as a print server, clients in your network can use Samba to print. Additionally, Windows clients can, if configured, download the driver from the Samba server.
					</p><p>
						Before you can share a printer, set up Samba:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_standalone_server" title="16.1.4. Setting up Samba as a Standalone Server">Section&nbsp;16.1.4, “Setting up Samba as a Standalone Server”</a>
							</li><li class="listitem">
								<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_samba_as_a_domain_member" title="16.1.5. Setting up Samba as a Domain Member">Section&nbsp;16.1.5, “Setting up Samba as a Domain Member”</a>
							</li></ul></div><section class="section" id="the_samba_spoolssd_service"><div class="titlepage"><div><div><h4 class="title">16.1.7.1.&nbsp;The Samba <code class="literal">spoolssd</code> Service</h4></div></div></div><p>
							The Samba <code class="literal">spoolssd</code> is a service that is integrated into the <code class="literal">smbd</code> service. Enable <code class="literal">spoolssd</code> in the Samba configuration to significantly increase the performance on print servers with a high number of jobs or printers.
						</p><p>
							Without <code class="literal">spoolssd</code>, Samba forks the <code class="literal">smbd</code> process and initializes the <code class="literal">printcap</code> cache for each print job. In case of a large number of printers, the <code class="literal">smbd</code> service can become unresponsive for multiple seconds while the cache is initialized. The <code class="literal">spoolssd</code> service enables you to start pre-forked <code class="literal">smbd</code> processes that are processing print jobs without any delays. The main <code class="literal">spoolssd</code> <code class="literal">smbd</code> process uses a low amount of memory, and forks and terminates child processes.
						</p><p>
							To enable the <code class="literal">spoolssd</code> service:
						</p><div class="orderedlist" id="proc.the_samba_spoolssd_service"><p class="title"><strong>Enabling the <code class="literal">spoolssd</code> Service</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Edit the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											Add the following parameters:
										</p><pre class="literallayout">rpc_server:spoolss = external
rpc_daemon:spoolssd = fork</pre></li><li class="listitem"><p class="simpara">
											Optionally, you can set the following parameters:
										</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569349994704" scope="col">Parameter</th><th align="left" valign="top" id="idm140569349993616" scope="col">Default</th><th align="left" valign="top" id="idm140569349992528" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569349994704"> <p>
															spoolssd:prefork_min_children
														</p>
														 </td><td align="left" valign="top" headers="idm140569349993616"> <p>
															5
														</p>
														 </td><td align="left" valign="top" headers="idm140569349992528"> <p>
															Minimum number of child processes
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569349994704"> <p>
															spoolssd:prefork_max_children
														</p>
														 </td><td align="left" valign="top" headers="idm140569349993616"> <p>
															25
														</p>
														 </td><td align="left" valign="top" headers="idm140569349992528"> <p>
															Maximum number of child processes
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569349994704"> <p>
															spoolssd:prefork_spawn_rate
														</p>
														 </td><td align="left" valign="top" headers="idm140569349993616"> <p>
															5
														</p>
														 </td><td align="left" valign="top" headers="idm140569349992528"> <p>
															Samba forks the number of new child processes set in this parameter, up to the value set in <code class="literal">spoolssd:prefork_max_children</code>, if a new connection is established
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569349994704"> <p>
															spoolssd:prefork_max_allowed_clients
														</p>
														 </td><td align="left" valign="top" headers="idm140569349993616"> <p>
															100
														</p>
														 </td><td align="left" valign="top" headers="idm140569349992528"> <p>
															Number of clients, a child process serves
														</p>
														 </td></tr><tr><td align="left" valign="top" headers="idm140569349994704"> <p>
															spoolssd:prefork_child_min_life
														</p>
														 </td><td align="left" valign="top" headers="idm140569349993616"> <p>
															60
														</p>
														 </td><td align="left" valign="top" headers="idm140569349992528"> <p>
															Minimum lifetime of a child process in seconds. 60 seconds is the minimum.
														</p>
														 </td></tr></tbody></table></div></li></ol></div></li><li class="listitem"><p class="simpara">
									Verify the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
									For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
								</p></li><li class="listitem"><p class="simpara">
									Restart the <code class="literal">smb</code> service:
								</p><pre class="literallayout">~]# systemctl restart smb</pre></li></ol></div><p>
							After you restarted the service, Samba automatically starts <code class="literal">smbd</code> child processes:
						</p><pre class="literallayout">~]# ps axf
...
30903 smbd
30912 \_ smbd
30913   \_ smbd
30914   \_ smbd
30915   \_ smbd
...</pre></section><section class="section" id="enabling_the_print_server_support_in_samba"><div class="titlepage"><div><div><h4 class="title">16.1.7.2.&nbsp;Enabling Print Server Support in Samba</h4></div></div></div><p>
							To enable the print server support:
						</p><div class="orderedlist" id="proc.enabling_the_print_server_support_in_samba"><p class="title"><strong>Enabling Print Server Support in Samba</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									On the Samba server, set up CUPS and add the printer to the CUPS back end. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Printer_Configuration" title="16.3. Print Settings">Section&nbsp;16.3, “Print Settings”</a>.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Samba can only forward the print jobs to CUPS if CUPS is installed locally on the Samba print server.
									</p></div></div></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											If you want to enable the <code class="literal">spoolssd</code> service, add the following parameters to the <code class="literal">[global]</code> section:
										</p><pre class="literallayout">rpc_server:spoolss = external
rpc_daemon:spoolssd = fork</pre><p class="simpara">
											For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#the_samba_spoolssd_service" title="16.1.7.1. The Samba spoolssd Service">Section&nbsp;16.1.7.1, “The Samba <code class="literal">spoolssd</code> Service”</a>.
										</p></li><li class="listitem"><p class="simpara">
											To configure the printing back end, add the <code class="literal">[printers]</code> section:
										</p><pre class="literallayout">[printers]
	comment = All Printers
	path = /var/tmp/
	printable = yes
	create mask = 0600</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
												The <code class="literal">printers</code> share name is hard-coded and cannot be changed.
											</p></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
									Verify the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
									For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
								</p></li><li class="listitem"><p class="simpara">
									Open the required ports and reload the firewall configuration using the <code class="literal">firewall-cmd</code> utility:
								</p><pre class="literallayout">~]# firewall-cmd --permanent --add-service=samba
~]# firewall-cmd --reload</pre></li><li class="listitem"><p class="simpara">
									Restart the <code class="literal">smb</code> service:
								</p><pre class="literallayout">~]# systemctl restart smb</pre></li></ol></div><p>
							After restarting the service, Samba automatically shares all printers that are configured in the CUPS back end. If you want to manually share only specific printers, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#manually_sharing_specific_printers" title="16.1.7.3. Manually Sharing Specific Printers">Section&nbsp;16.1.7.3, “Manually Sharing Specific Printers”</a>.
						</p></section><section class="section" id="manually_sharing_specific_printers"><div class="titlepage"><div><div><h4 class="title">16.1.7.3.&nbsp;Manually Sharing Specific Printers</h4></div></div></div><p>
							If you configured Samba as a print server, by default, Samba shares all printers that are configured in the CUPS back end. To share only specific printers:
						</p><div class="orderedlist" id="proc.manually_sharing_individual_printers"><p class="title"><strong>Manually Sharing a Specific Printer</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Edit the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											In the <code class="literal">[global]</code> section, disable automatic printer sharing by setting:
										</p><pre class="literallayout">load printers = no</pre></li><li class="listitem"><p class="simpara">
											Add a section for each printer you want to share. For example, to share the printer named <code class="literal">example</code> in the CUPS back end as <code class="literal">Example-Printer</code> in Samba, add the following section:
										</p><pre class="literallayout">[<span class="emphasis"><em>Example-Printer</em></span>]
	path = /var/tmp/
	printable = yes
	printer name = <span class="emphasis"><em>example</em></span></pre><p class="simpara">
											You do not need individual spool directories for each printer. You can set the same spool directory in the <code class="literal">path</code> parameter for the printer as you set in the <code class="literal">[printers]</code> section.
										</p></li></ol></div></li><li class="listitem"><p class="simpara">
									Verify the <code class="literal">/etc/samba/smb.conf</code> file:
								</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
									For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
								</p></li><li class="listitem"><p class="simpara">
									Reload the Samba configuration:
								</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li></ol></div></section><section class="section" id="setting_up_automatic_printer_driver_downloads_for_windows_clients"><div class="titlepage"><div><div><h4 class="title">16.1.7.4.&nbsp;Setting up Automatic Printer Driver Downloads for Windows Clients</h4></div></div></div><p>
							If you are running a Samba print server for Windows clients, you can upload drivers and preconfigure printers. If a user connects to a printer, Windows automatically downloads and installs the driver locally on the client. The user does not require local administrator permissions for the installation. Additionally, Windows applies preconfigured driver settings, such as the number of trays.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Before setting up automatic printer driver download, must configure Samba as a print server and share a printer. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#setting_up_a_samba_print_server" title="16.1.7. Setting up a Samba Print Server">Section&nbsp;16.1.7, “Setting up a Samba Print Server”</a>.
							</p></div></div><section class="section" id="basic_information_about_printer_drivers"><div class="titlepage"><div><div><h5 class="title">16.1.7.4.1.&nbsp;Basic Information about Printer Drivers</h5></div></div></div><p>
								This section provides general information about printer drivers.
							</p><div class="formalpara"><p class="title"><strong>Supported Driver Model Version</strong></p><p>
									Samba only supports the printer driver model version 3 which is supported in Windows 2000 and later, and Windows Server 2000 and later. Samba does not support the driver model version 4, introduced in Windows 8 and Windows Server 2012. However, these and later Windows versions also support version 3 drivers.
								</p></div><div class="formalpara"><p class="title"><strong>Package-aware Drivers</strong></p><p>
									Samba does not support package-aware drivers.
								</p></div><div class="formalpara"><p class="title"><strong>Preparing a Printer Driver for Being Uploaded</strong></p><p>
									Before you can upload a driver to a Samba print server:
								</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Unpack the driver if it is provided in a compressed format.
									</li><li class="listitem"><p class="simpara">
										Some drivers require to start a setup application that installs the driver locally on a Windows host. In certain situations, the installer extracts the individual files into the operating system’s temporary folder during the setup runs. To use the driver files for uploading:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
												Start the installer.
											</li><li class="listitem">
												Copy the files from the temporary folder to a new location.
											</li><li class="listitem">
												Cancel the installation.
											</li></ol></div></li></ul></div><p>
								Ask your printer manufacturer for drivers that support uploading to a print server.
							</p><div class="formalpara"><p class="title"><strong>Providing 32-bit and 64-bit Drivers for a Printer to a Client</strong></p><p>
									To provide the driver for a printer for both 32-bit and 64-bit Windows clients, you must upload a driver with exactly the same name for both architectures. For example, if you are uploading the 32-bit driver named <code class="literal">Example PostScript</code> and the 64-bit driver named <code class="literal">Example PostScript (v1.0)</code>, the names do not match. Consequently, you can only assign one of the drivers to a printer and the driver will not be available for both architectures.
								</p></div></section><section class="section" id="enabling_users_to_upload_and_preconfigure_drivers"><div class="titlepage"><div><div><h5 class="title">16.1.7.4.2.&nbsp;Enabling Users to Upload and Preconfigure Drivers</h5></div></div></div><p>
								To be able to upload and preconfigure printer drivers, a user or a group needs to have the <code class="literal">SePrintOperatorPrivilege</code> privilege granted. A user must be added into the <code class="literal">printadmin</code> group. Red Hat Enterprise Linux creates this group automatically when you install the <span class="strong strong"><strong><span class="package package">samba</span></strong></span> package. The <code class="literal">printadmin</code> group gets assigned the lowest available dynamic system GID that is lower than 1000.
							</p><p>
								To grant the <code class="literal">SePrintOperatorPrivilege</code> privilege to the <code class="literal">printadmin</code> group:
							</p><pre class="literallayout">~]# net rpc rights grant "printadmin" SePrintOperatorPrivilege \
    -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
Enter <span class="emphasis"><em>DOMAIN</em></span>\administrator's password:
Successfully granted rights.</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									In a domain environment, grant <code class="literal">SePrintOperatorPrivilege</code> to a domain group. This enables you to centrally manage the privilege by updating a user’s group membership.
								</p></div></div><p>
								To list all users and groups having <code class="literal">SePrintOperatorPrivilege</code> granted:
							</p><pre class="literallayout">~]# net rpc rights list privileges SePrintOperatorPrivilege \
    -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
Enter administrator's password:
SePrintOperatorPrivilege:
 BUILTIN\Administrators
 <span class="emphasis"><em>DOMAIN</em></span>\printadmin</pre></section><section class="section" id="setting_up_the_print_dollar_share"><div class="titlepage"><div><div><h5 class="title">16.1.7.4.3.&nbsp;Setting up the <code class="literal">print$</code> Share</h5></div></div></div><p>
								Windows operating systems download printer drivers from a share named <code class="literal">print$</code> from a print server. This share name is hard-coded in Windows and cannot be changed.
							</p><p>
								To share the <code class="literal">/var/lib/samba/drivers/</code> directory as <code class="literal">print$</code>, and enable members of the local <code class="literal">printadmin</code> group to upload printer drivers:
							</p><div class="orderedlist" id="proc.setting_up_the_print_dollar_share"><p class="title"><strong>Setting up the <code class="literal">print$</code> Share</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Add the <code class="literal">[print$]</code> section to the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">[print$]
	path = /var/lib/samba/drivers/
	read only = no
	write list = @printadmin
	force group = @printadmin
	create mask = 0664
	directory mask = 2775</pre><p class="simpara">
										Using these settings:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												Only members of the <code class="literal">printadmin</code> group can upload printer drivers to the share.
											</li><li class="listitem">
												The group of new created files and directories will be set to <code class="literal">printadmin</code>.
											</li><li class="listitem">
												The permissions of new files will be set to <code class="literal">664</code>.
											</li><li class="listitem">
												The permissions of new directories will be set to <code class="literal">2775</code>.
											</li></ul></div></li><li class="listitem"><p class="simpara">
										To upload only 64-bit drivers for a printer, include this setting in the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">spoolss: architecture = Windows x64</pre><p class="simpara">
										Without this setting, Windows only displays drivers for which you have uploaded at least the 32-bit version.
									</p></li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Reload the Samba configuration
									</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li><li class="listitem"><p class="simpara">
										Create the <code class="literal">printadmin</code> group if it does not exists:
									</p><pre class="literallayout">~]# groupadd printadmin</pre></li><li class="listitem"><p class="simpara">
										Grant the <code class="literal">SePrintOperatorPrivilege</code> privilege to the <code class="literal">printadmin</code> group.
									</p><pre class="literallayout">~]# net rpc rights grant "printadmin" SePrintOperatorPrivilege \
    -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
Enter <span class="emphasis"><em>DOMAIN</em></span>\administrator's password:
Successfully granted rights.</pre><p class="simpara">
										For further details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#enabling_users_to_upload_and_preconfigure_drivers" title="16.1.7.4.2. Enabling Users to Upload and Preconfigure Drivers">Section&nbsp;16.1.7.4.2, “Enabling Users to Upload and Preconfigure Drivers”</a>.
									</p></li><li class="listitem"><p class="simpara">
										If you run SELinux in <code class="literal command">enforcing</code> mode, set the <code class="literal">samba_share_t</code> context on the directory:
									</p><pre class="literallayout">~]# semanage fcontext -a -t samba_share_t "/var/lib/samba/drivers(/.*)?"
~]# restorecon -Rv /var/lib/samba/drivers/</pre></li><li class="listitem"><p class="simpara">
										Set the permissions on the <code class="literal">/var/lib/samba/drivers/</code> directory:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
												If you use POSIX ACLs, set:
											</p><pre class="literallayout">~]# chgrp -R "printadmin" /var/lib/samba/drivers/
~]# chmod -R 2775 /var/lib/samba/drivers/</pre></li><li class="listitem"><p class="simpara">
												If you use Windows ACLs, set:
											</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569348587008" scope="col">Principal</th><th align="left" valign="top" id="idm140569348585920" scope="col">Access</th><th align="left" valign="top" id="idm140569348584832" scope="col">Apply to</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569348587008"> <p>
																<code class="literal">CREATOR OWNER</code>
															</p>
															 </td><td align="left" valign="top" headers="idm140569348585920"> <p>
																Full control
															</p>
															 </td><td align="left" valign="top" headers="idm140569348584832"> <p>
																Subfolders and files only
															</p>
															 </td></tr><tr><td align="left" valign="top" headers="idm140569348587008"> <p>
																<code class="literal">Authenticated Users</code>
															</p>
															 </td><td align="left" valign="top" headers="idm140569348585920"> <p>
																Read &amp; execute, List folder contents, Read
															</p>
															 </td><td align="left" valign="top" headers="idm140569348584832"> <p>
																This folder, subfolders and files
															</p>
															 </td></tr><tr><td align="left" valign="top" headers="idm140569348587008"> <p>
																<code class="literal">printadmin</code>
															</p>
															 </td><td align="left" valign="top" headers="idm140569348585920"> <p>
																Full control
															</p>
															 </td><td align="left" valign="top" headers="idm140569348584832"> <p>
																This folder, subfolders and files
															</p>
															 </td></tr></tbody></table></div><p class="simpara">
												For details about setting ACLs on Windows, see your Windows documentation.
											</p></li></ul></div></li></ol></div></section><section class="section" id="creating_a_gpo_to_enable_clients_to_trust_the_samba_print_server"><div class="titlepage"><div><div><h5 class="title">16.1.7.4.4.&nbsp;Creating a GPO to Enable Clients to Trust the Samba Print Server</h5></div></div></div><p>
								For security reasons, recent Windows operating systems prevent clients from downloading non-package-aware printer drivers from an untrusted server. If your print server is a member in an AD, you can create a Group Policy Object (GPO) in your domain to trust the Samba server.
							</p><p>
								To create GPOs, the Windows computer you are using must have the Windows Remote Server Administration Tools (RSAT) installed. For details, see your Windows documentation.
							</p><div class="orderedlist" id="proc.creating_a_gpo_to_enable_clients_to_trust_the_samba_print_server"><p class="title"><strong>Creating a GPO to Enable Clients to Trust the Samba Print Server</strong></p><ol class="orderedlist" type="1"><li class="listitem">
										Log into a Windows computer using an account that is allowed to edit group policies, such as the AD domain <code class="literal">Administrator</code> user.
									</li><li class="listitem">
										Open the <span class="strong strong"><strong><span class="application application">Group Policy Management</span></strong></span> Console.
									</li><li class="listitem"><p class="simpara">
										Right-click to your AD domain and select <code class="literal">Create a GPO in this domain, and Link it here</code>
									</p><div class="informalfigure"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/samba_create_new_GPO.png" alt="samba create new GPO"></div></div></li><li class="listitem">
										Enter a name for the GPO, such as <code class="literal">Legacy printer Driver Policy</code> and click <span class="guibutton">OK</span>. The new GPO will be displayed under the domain entry.
									</li><li class="listitem">
										Right-click to the newly-created GPO and select <code class="literal">Edit</code> to open the <span class="strong strong"><strong><span class="application application">Group Policy Management Editor</span></strong></span>.
									</li><li class="listitem"><p class="simpara">
										Navigate to <span class="guimenu">Computer Configuration</span> → <span class="guisubmenu">Policies</span> → <span class="guisubmenu">Administrative Templates</span> → <span class="guimenuitem">Printers</span>.
									</p><div class="informalfigure"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/samba_select_printer_GPO_group.png" alt="samba select printer GPO group"></div></div></li><li class="listitem"><p class="simpara">
										On the right side of the window, double-click <code class="literal">Point and Print Restriction</code> to edit the policy:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
												Enable the policy and set the following options:
											</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
														Select <code class="literal">Users can only point and print to these servers</code> and enter the fully-qualified domain name (FQDN) of the Samba print server to the field next to this option.
													</li><li class="listitem"><p class="simpara">
														In both check boxes under <code class="literal">Security Prompts</code>, select <code class="literal">Do not show warning or elevation prompt</code>.
													</p><div class="informalfigure"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/samba_GPO_point_and_print.png" alt="samba GPO point and print"></div></div></li></ol></div></li><li class="listitem">
												Click <span class="guibutton">OK</span>.
											</li></ol></div></li><li class="listitem"><p class="simpara">
										Double-click <code class="literal">Package Point and Print - Approved servers</code> to edit the policy:
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
												Enable the policy and click the <span class="guibutton">Show</span> button.
											</li><li class="listitem"><p class="simpara">
												Enter the FQDN of the Samba print server.
											</p><div class="informalfigure"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/samba_GPO_approved_servers.png" class="rh_docs--zoom" title="samba GPO approved servers"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/samba_GPO_approved_servers.png" alt="samba GPO approved servers"></a></div></div></li><li class="listitem">
												Close both the <code class="literal">Show Contents</code> and policy properties window by clicking <span class="guibutton">OK</span>.
											</li></ol></div></li><li class="listitem">
										Close the <span class="strong strong"><strong><span class="application application">Group Policy Management Editor</span></strong></span>.
									</li><li class="listitem">
										Close the <span class="strong strong"><strong><span class="application application">Group Policy Management</span></strong></span> Console.
									</li></ol></div><p>
								After the Windows domain members applied the group policy, printer drivers are automatically downloaded from the Samba server when a user connects to a printer.
							</p><p>
								For further details about using group policies, see your Windows documentation.
							</p></section><section class="section" id="upload_drivers_and_preconfiguring_printers"><div class="titlepage"><div><div><h5 class="title">16.1.7.4.5.&nbsp;Uploading Drivers and Preconfiguring Printers</h5></div></div></div><p>
								Use the <span class="strong strong"><strong><span class="application application">Print Management</span></strong></span> application on a Windows client to upload drivers and preconfigure printers hosted on the Samba print server. For further details, see your Windows documentation.
							</p></section></section></section><section class="section" id="tuning_the_performance_of_a_samba_server"><div class="titlepage"><div><div><h3 class="title">16.1.8.&nbsp;Tuning the Performance of a Samba Server</h3></div></div></div><p>
						This section describes what settings can improve the performance of Samba in certain situations, and which settings can have a negative performance impact.
					</p><section class="section" id="setting_the_smb_protocol_version"><div class="titlepage"><div><div><h4 class="title">16.1.8.1.&nbsp;Setting the SMB Protocol Version</h4></div></div></div><p>
							Each new SMB version adds features and improves the performance of the protocol. The recent Windows and Windows Server operating systems always supports the latest protocol version. If Samba also uses the latest protocol version, Windows clients connecting to Samba benefit from the performance improvements. In Samba, the default value of the <code class="literal">server max protocol</code> is set to the latest supported stable SMB protocol version.
						</p><p>
							To always have the latest stable SMB protocol version enabled, do not set the <code class="literal">server max protocol</code> parameter. If you set the parameter manually, you will need to modify the setting with each new version of the SMB protocol, to have the latest protocol version enabled.
						</p><p>
							To unset, remove the <code class="literal">server max protocol</code> parameter from the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code> file.
						</p></section><section class="section" id="tuning_shares_with_directories_that_contain_a_large_number_of_files"><div class="titlepage"><div><div><h4 class="title">16.1.8.2.&nbsp;Tuning Shares with Directories That Contain a Large Number of Files</h4></div></div></div><p>
							To improve the performance of shares that contain directories with more than 100.000 files:
						</p><div class="orderedlist" id="proc.tuning_shares_with_directories_that_contain_a_large_number_of_files"><p class="title"><strong>Tuning Shares with Directories That Contain a Large Number of Files</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Rename all files on the share to lowercase.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Using the settings in this procedure, files with names other than in lowercase will no longer be displayed.
									</p></div></div></li><li class="listitem"><p class="simpara">
									Set the following parameters in the share’s section:
								</p><pre class="literallayout">case sensitive = true
default case = lower
preserve case = no
short preserve case = no</pre><p class="simpara">
									For details about the parameters, see their descriptions in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
								</p></li><li class="listitem"><p class="simpara">
									Reload the Samba configuration:
								</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></li></ol></div><p>
							After you applied these settings, the names of all newly created files on this share use lowercase. Because of these settings, Samba no longer needs to scan the directory for uppercase and lowercase, which improves the performance.
						</p></section><section class="section" id="settings_that_can_have_a_negative_performance_impact"><div class="titlepage"><div><div><h4 class="title">16.1.8.3.&nbsp;Settings That Can Have a Negative Performance Impact</h4></div></div></div><p>
							By default, the kernel in Red Hat Enterprise Linux is tuned for high network performance. For example, the kernel uses an auto-tuning mechanism for buffer sizes. Setting the <code class="literal">socket options</code> parameter in the <code class="literal">/etc/samba/smb.conf</code> file overrides these kernel settings. As a result, setting this parameter decreases the Samba network performance in most cases.
						</p><p>
							To use the optimized settings from the Kernel, remove the <code class="literal">socket options</code> parameter from the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code>.
						</p></section></section><section class="section" id="frequently_used_samba_command_line_utilities"><div class="titlepage"><div><div><h3 class="title">16.1.9.&nbsp;Frequently Used Samba Command-line Utilities</h3></div></div></div><p>
						This section describes frequently used commands when working with a Samba server.
					</p><section class="section" id="using_the_net_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.1.&nbsp;Using the <code class="literal">net</code> Utility</h4></div></div></div><p>
							The <code class="literal">net</code> utility enables you to perform several administration tasks on a Samba server. This section describes the most frequently used subcommands of the <code class="literal">net</code> utility.
						</p><p>
							For further details, see the <span class="strong strong"><strong>net</strong></span>(8) man page.
						</p><section class="section" id="using_the_net_ads_join_and_net_rpc_join_command"><div class="titlepage"><div><div><h5 class="title">16.1.9.1.1.&nbsp;Using the <code class="literal command">net ads join</code> and <code class="literal command">net rpc join</code> Commands</h5></div></div></div><p>
								Using the <code class="literal">join</code> subcommand of the <code class="literal command">net</code> utility, you can join Samba to an AD or NT4 domain. To join the domain, you must create the <code class="literal">/etc/samba/smb.conf</code> file manually, and optionally update additional configurations, such as PAM.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									Red Hat recommends using the <code class="literal">realm</code> utility to join a domain. The <code class="literal">realm</code> utility automatically updates all involved configuration files. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#joining_a_domain" title="16.1.5.1. Joining a Domain">Section&nbsp;16.1.5.1, “Joining a Domain”</a>.
								</p></div></div><p>
								To join a domain using the <code class="literal command">net</code> command:
							</p><div class="orderedlist" id="samba.net-join"><p class="title"><strong>Joining a Domain Using the <code class="literal command">net</code> Command</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Manually create the <code class="literal">/etc/samba/smb.conf</code> file with the following settings:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
												For an AD domain member:
											</p><pre class="literallayout">[global]
workgroup = <span class="emphasis"><em>domain_name</em></span>
security = ads
passdb backend = tdbsam
realm = <span class="emphasis"><em>AD_REALM</em></span></pre></li><li class="listitem"><p class="simpara">
												For an NT4 domain member:
											</p><pre class="literallayout">[global]
workgroup = <span class="emphasis"><em>domain_name</em></span>
security = user
passdb backend = tdbsam</pre></li></ul></div></li><li class="listitem">
										Add an ID mapping configuration for the <code class="literal">*</code> default domain and for the domain you want to join to the <code class="literal">[global]</code> section in the <code class="literal">/etc/samba/smb.conf</code>. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#understanding_id_mapping" title="16.1.5.3. Understanding ID Mapping">Section&nbsp;16.1.5.3, “Understanding ID Mapping”</a>.
									</li><li class="listitem"><p class="simpara">
										Verify the <code class="literal">/etc/samba/smb.conf</code> file:
									</p><pre class="literallayout">~]# testparm</pre><p class="simpara">
										For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
									</p></li><li class="listitem"><p class="simpara">
										Join the domain as the domain administrator:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
												To join an AD domain:
											</p><pre class="literallayout">~]# net ads join -U "<span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]"</pre></li><li class="listitem"><p class="simpara">
												To join an NT4 domain:
											</p><pre class="literallayout">~]# net rpc join -U "<span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]"</pre></li></ul></div></li><li class="listitem"><p class="simpara">
										Append the <code class="literal command">winbind</code> source to the <code class="literal">passwd</code> and <code class="literal">group</code> database entry in the <code class="literal">/etc/nsswitch.conf</code> file:
									</p><pre class="literallayout">passwd:   files <span class="emphasis"><em>winbind</em></span>
group:   files <span class="emphasis"><em>winbind</em></span></pre></li><li class="listitem"><p class="simpara">
										Enable and start the <code class="literal">winbind</code> service:
									</p><pre class="literallayout">~]# systemctl enable winbind
~]# systemctl start winbind</pre></li><li class="listitem"><p class="simpara">
										Optionally, configure PAM using the <code class="literal">authconf</code> utility.
									</p><p class="simpara">
										For details, see the <span class="emphasis"><em><span class="citetitle citetitle">Using Pluggable Authentication Modules (PAM)</span></em></span> section in the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System-Level_Authentication_Guide/Pluggable_Authentication_Modules.html">Red Hat System-Level Authentication Guide</a></span></em></span>.
									</p></li><li class="listitem"><p class="simpara">
										Optionally for AD environments, configure the Kerberos client.
									</p><p class="simpara">
										For details, see the <span class="emphasis"><em><span class="citetitle citetitle">Configuring a Kerberos Client</span></em></span> section in the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System-Level_Authentication_Guide/Configuring_a_Kerberos_5_Client.html">Red Hat System-Level Authentication Guide</a></span></em></span>.
									</p></li></ol></div></section><section class="section" id="using_the_net_rpc_rights_command"><div class="titlepage"><div><div><h5 class="title">16.1.9.1.2.&nbsp;Using the <code class="literal command">net rpc rights</code> Command</h5></div></div></div><p>
								In Windows, you can assign privileges to accounts and groups to perform special operations, such as setting ACLs on a share or upload printer drivers. On a Samba server, you can use the <code class="literal command">net rpc rights</code> command to manage privileges.
							</p><div class="formalpara"><p class="title"><strong>Listing Privileges</strong></p><p>
									To list all available privileges and their owners, use the <code class="literal command">net rpc rights list</code> command. For example:
								</p></div><pre class="literallayout">net rpc rights list -U "<span class="emphasis"><em>DOMAIN</em></span>pass:attributes[{blank}]<span class="emphasis"><em>administrator</em></span>"
Enter <span class="emphasis"><em>DOMAIN</em></span>pass:attributes[{blank}]<span class="emphasis"><em>administrator</em></span>'s password:
   SeMachineAccountPrivilege Add machines to domain
   SeTakeOwnershipPrivilege Take ownership of files or other objects
       SeBackupPrivilege Back up files and directories
      SeRestorePrivilege Restore files and directories
   SeRemoteShutdownPrivilege Force shutdown from a remote system
   SePrintOperatorPrivilege Manage printers
      SeAddUsersPrivilege Add users and groups to the domain
    SeDiskOperatorPrivilege Manage disk shares
      SeSecurityPrivilege System security</pre><div class="formalpara"><p class="title"><strong>Granting Privileges</strong></p><p>
									To grant a privilege to an account or group, use the <code class="literal command">net rpc rights grant</code> command.
								</p></div><p>
								For example, grant the <code class="literal">SePrintOperatorPrivilege</code> privilege to the <code class="literal"><span class="emphasis"><em>DOMAIN</em></span>\printadmin</code> group:
							</p><pre class="literallayout">~]# net rpc rights grant "<span class="emphasis"><em>DOMAIN</em></span>\printadmin" SePrintOperatorPrivilege \
    -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
Enter <span class="emphasis"><em>DOMAIN</em></span>\administrator's password:
Successfully granted rights.</pre><div class="formalpara"><p class="title"><strong>Revoking Privileges</strong></p><p>
									To revoke a privilege from an account or group, use the <code class="literal command">net rpc rights revoke</code>.
								</p></div><p>
								For example, to revoke the <code class="literal">SePrintOperatorPrivilege</code> privilege from the <code class="literal"><span class="emphasis"><em>DOMAIN</em></span>\printadmin</code> group:
							</p><pre class="literallayout">~]# net rpc rights remoke "<span class="emphasis"><em>DOMAIN</em></span>\printadmin" SePrintOperatorPrivilege \
    -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
Enter <span class="emphasis"><em>DOMAIN</em></span>\administrator's password:
Successfully revoked rights.</pre></section><section class="section" id="using_the_net_share_command"><div class="titlepage"><div><div><h5 class="title">16.1.9.1.3.&nbsp;Using the <code class="literal command">net rpc share</code> Command</h5></div></div></div><p>
								The <code class="literal command">net rpc share</code> command provides the capability to list, add, and remove shares on a local or remote Samba or Windows server.
							</p><div class="formalpara"><p class="title"><strong>Listing Shares</strong></p><p>
									To list the shares on an SMB server, use the <code class="literal command">net rpc share list command</code>. Optionally, pass the <code class="literal">-S <span class="emphasis"><em>server_name</em></span></code> parameter to the command to list the shares of a remote server. For example:
								</p></div><pre class="literallayout">~]# net rpc share list -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator" -S <span class="emphasis"><em>example</em></span>
Enter <span class="emphasis"><em>DOMAIN</em></span>\administrator's password:
IPC$
share_1
share_2
...</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Shares hosted on a Samba server that have <code class="literal command">browseable = no</code> set in their section in the <code class="literal">/etc/samba/smb.conf</code> file are not displayed in the output.
								</p></div></div><div class="formalpara"><p class="title"><strong>Adding a Share</strong></p><p>
									The <code class="literal command">net rpc share add</code> command enables you to add a share to an SMB server.
								</p></div><p>
								For example, to add a share named <code class="literal">example</code> on a remote Windows server that shares the <code class="literal">C:\example\</code> directory:
							</p><pre class="literallayout">~]# net rpc share add example="C:\example" -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator" -S <span class="emphasis"><em>server</em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									You must omit the trailing backslash in the path when specifying a Windows directory name.
								</p></div></div><p>
								To use the command to add a share to a Samba server:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The user specified in the <code class="literal">-U</code> parameter must have the <code class="literal">SeDiskOperatorPrivilege</code> privilege granted.
									</li><li class="listitem">
										You must write a script that adds a share section to the <code class="literal">/etc/samba/smb.conf</code> file and reloads Samba. The script must be set in the <code class="literal">add share command</code> parameter in the <code class="literal">[global]</code> section in <code class="literal">/etc/samba/smb.conf</code>. For further details, see the <code class="literal">add share command</code> description in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
									</li></ul></div><div class="formalpara"><p class="title"><strong>Removing a Share</strong></p><p>
									The <code class="literal command">net rpc share delete</code> command enables you to remove a share from an SMB server.
								</p></div><p>
								For example, to remove the share named <code class="literal">example</code> from a remote Windows server:
							</p><pre class="literallayout">~]# net rpc share delete example -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator" -S <span class="emphasis"><em>server</em></span></pre><p>
								To use the command to remove a share from a Samba server:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The user specified in the <code class="literal">-U</code> parameter must have the <code class="literal">SeDiskOperatorPrivilege</code> privilege granted.
									</li><li class="listitem">
										You must write a script that removes the share’s section from the <code class="literal">/etc/samba/smb.conf</code> file and reloads Samba. The script must be set in the <code class="literal">delete share command</code> parameter in the <code class="literal">[global]</code> section in <code class="literal">/etc/samba/smb.conf</code>. For further details, see the <code class="literal">delete share command</code> description in the <span class="strong strong"><strong>smb.conf</strong></span>(5) man page.
									</li></ul></div></section><section class="section" id="using_the_net_user_command"><div class="titlepage"><div><div><h5 class="title">16.1.9.1.4.&nbsp;Using the <code class="literal command">net user</code> Command</h5></div></div></div><p>
								The <code class="literal command">net user</code> command enables you to perform the following actions on an AD DC or NT4 PDC:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										List all user accounts
									</li><li class="listitem">
										Add users
									</li><li class="listitem">
										Remove Users
									</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Specifying a connection method, such as <code class="literal">ads</code> for AD domains or <code class="literal">rpc</code> for NT4 domains, is only required when you list domain user accounts. Other user-related subcommands can auto-detect the connection method.
								</p></div></div><p>
								Pass the <code class="literal">-U <span class="emphasis"><em>user_name</em></span></code> parameter to the command to specify a user that is allowed to perform the requested action.
							</p><div class="formalpara"><p class="title"><strong>Listing Domain User Accounts</strong></p><p>
									To list all users in an AD domain:
								</p></div><pre class="literallayout">~]# net ads user -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"</pre><p>
								To list all users in an NT4 domain:
							</p><pre class="literallayout">~]# net rpc user -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"</pre><div class="formalpara"><p class="title"><strong>Adding a User Account to the Domain</strong></p><p>
									On a Samba domain member, you can use the <code class="literal command">net user add</code> command to add a user account to the domain.
								</p></div><p>
								For example, add the <code class="literal">user</code> account to the domain:
							</p><div class="orderedlist" id="proc.adding_a_user_account_to_the_domain"><p class="title"><strong>Adding a User Account to the Domain</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Add the account:
									</p><pre class="literallayout">~]# net user add <span class="emphasis"><em>user</em></span> <span class="emphasis"><em>password</em></span> -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
User <span class="emphasis"><em>user</em></span> added</pre></li><li class="listitem"><p class="simpara">
										Optionally, use the remote procedure call (RPC) shell to enable the account on the AD DC or NT4 PDC. For example:
									</p><pre class="literallayout">~]# net rpc shell -U <span class="emphasis"><em>DOMAIN</em></span>\administrator -S <span class="emphasis"><em>DC_or_PDC_name</em></span>
Talking to domain <span class="emphasis"><em>DOMAIN</em></span> (S-1-5-21-1424831554-512457234-5642315751)

net rpc&gt; user edit disabled <span class="emphasis"><em>user</em></span> no
Set <span class="emphasis"><em>user</em></span>'s disabled flag from [yes] to [no]

net rpc&gt; exit</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Deleting a User Account from the Domain</strong></p><p>
									On a Samba domain member, you can use the <code class="literal command">net user delete</code> command to remove a user account from the domain.
								</p></div><p>
								For example, to remove the <code class="literal">user</code> account from the domain:
							</p><pre class="literallayout">~]# net user delete <span class="emphasis"><em>user</em></span> -U "<span class="emphasis"><em>DOMAIN</em></span>\administrator"
User <span class="emphasis"><em>user</em></span> deleted</pre></section><section class="section" id="using_the_net_usershare_command"><div class="titlepage"><div><div><h5 class="title">16.1.9.1.5.&nbsp;Using the <code class="literal command">net usershare</code> Command</h5></div></div></div><p>
								See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#enabling_users_to_share_directories_on_a_samba_server" title="16.1.6.4. Enabling Users to Share Directories on a Samba Server">Section&nbsp;16.1.6.4, “Enabling Users to Share Directories on a Samba Server”</a>.
							</p></section></section><section class="section" id="using_the_rpcclient_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.2.&nbsp;Using the <code class="literal">rpcclient</code> Utility</h4></div></div></div><p>
							The <code class="literal">rpcclient</code> utility enables you to manually execute client-side Microsoft Remote Procedure Call (MS-RPC) functions on a local or remote SMB server. However, most of the features are integrated into separate utilities provided by Samba. Use <code class="literal">rpcclient</code> only for testing MS-PRC functions.
						</p><p>
							For example, you can use the utility to:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Manage the printer Spool Subsystem (SPOOLSS).
								</p><div class="example" id="idm140569347456000"><p class="title"><strong>Example&nbsp;16.9.&nbsp;Assigning a Driver to a Printer</strong></p><div class="example-contents"><pre class="literallayout">~]# rpcclient <span class="emphasis"><em>server_name</em></span> -U "<span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]" \
    -c 'setdriver "<span class="emphasis"><em>printer_name</em></span>" "<span class="emphasis"><em>driver_name</em></span>"'
Enter <span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]s password:
Successfully set <span class="emphasis"><em>printer_name</em></span> to driver <span class="emphasis"><em>driver_name</em></span>.</pre></div></div></li><li class="listitem"><p class="simpara">
									Retrieve information about an SMB server.
								</p><div class="example" id="idm140569347448928"><p class="title"><strong>Example&nbsp;16.10.&nbsp;Listing all File Shares and Shared Printers</strong></p><div class="example-contents"><pre class="literallayout">~]# rpcclient <span class="emphasis"><em>server_name</em></span> -U "<span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]" -c 'netshareenum'
Enter <span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]s password:
netname: <span class="emphasis"><em>Example_Share</em></span>
	remark:
	path:  <span class="emphasis"><em>C:\srv\samba\example_share</em></span>\
	password:
netname: <span class="emphasis"><em>Example_Printer</em></span>
	remark:
	path:  <span class="emphasis"><em>C:\var\spool\samba\</em></span>
	password:</pre></div></div></li><li class="listitem"><p class="simpara">
									Perform actions using the Security Account Manager Remote (SAMR) protocol.
								</p><div class="example" id="idm140569351961920"><p class="title"><strong>Example&nbsp;16.11.&nbsp;Listing Users on an SMB Server</strong></p><div class="example-contents"><pre class="literallayout">~]# rpcclient <span class="emphasis"><em>server_name</em></span> -U "<span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]" -c 'enumdomusers'
Enter <span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>administrator</em></span>]s password:
user:[user1] rid:[0x3e8]
user:[user2] rid:[0x3e9]</pre></div></div><p class="simpara">
									If you run the command against a standalone server or a domain member, it lists the users in the local database. Running the command against an AD DC or NT4 PDC lists the domain users.
								</p></li></ul></div><p>
							For a complete list of supported subcommands, see <span class="emphasis"><em><span class="citetitle citetitle">COMMANDS</span></em></span> section in the <span class="strong strong"><strong>rpcclient</strong></span>(1) man page.
						</p></section><section class="section" id="using_the_samba-regedit_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.3.&nbsp;Using the <code class="literal command">samba-regedit</code> Application</h4></div></div></div><p>
							Certain settings, such as printer configurations, are stored in the registry on the Samba server. You can use the ncurses-based <code class="literal">samba-regedit</code> application to edit the registry of a Samba server.
						</p><div class="informalfigure"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/samba-regedit.png" alt="samba regedit"></div></div><p>
							To start the application, enter:
						</p><pre class="literallayout">~]# samba-regedit</pre><p>
							Use the following keys:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Cursor up and cursor down: Navigate through the registry tree and the values.
								</li><li class="listitem">
									<span class="keycap"><strong>Enter</strong></span>: Opens a key or edits a value.
								</li><li class="listitem">
									<span class="keycap"><strong>Tab</strong></span>: Switches between the <code class="literal">Key</code> and <code class="literal">Value</code> pane.
								</li><li class="listitem">
									<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>: Closes the application.
								</li></ul></div></section><section class="section" id="using_the_smbcacls_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.4.&nbsp;Using the <code class="literal">smbcacls</code> Utility</h4></div></div></div><p>
							See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#managing_acls_on_an_smb_share_using_smbcacls" title="16.1.6.3. Managing ACLs on an SMB Share Using smbcacls">Section&nbsp;16.1.6.3, “Managing ACLs on an SMB Share Using <code class="literal">smbcacls</code>”</a>.
						</p></section><section class="section" id="using_the_smbclient_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.5.&nbsp;Using the <code class="literal">smbclient</code> Utility</h4></div></div></div><p>
							The <code class="literal">smbclient</code> utility enables you to access file shares on an SMB server, similarly to a command-line FTP client. You can use it, for example, to upload and download files to and from a share.
						</p><p>
							For example, to authenticate to the <code class="literal">example</code> share hosted on <code class="literal">server</code> using the <code class="literal">DOMAIN\user</code> account:
						</p><pre class="literallayout">~]# smbclient -U "<span class="emphasis"><em>DOMAIN\user</em></span>" //<span class="emphasis"><em>server</em></span>/<span class="emphasis"><em>example</em></span>
Enter <span class="emphasis"><em>domain</em></span>\user's password:
Domain=[SERVER] OS=[Windows 6.1] Server=[Samba 4.6.2]
smb: \&gt;</pre><p>
							After <code class="literal">smbclient</code> connected successfully to the share, the utility enters the interactive mode and shows the following prompt:
						</p><pre class="literallayout">smb: \&gt;</pre><p>
							To display all available commands in the interactive shell, enter:
						</p><pre class="literallayout">smb: \&gt; help</pre><p>
							To display the help for a specific command, enter:
						</p><pre class="literallayout">smb: \&gt; help <span class="emphasis"><em>command_name</em></span></pre><p>
							For further details and descriptions of the commands available in the interactive shell, see the <span class="strong strong"><strong>smbclient</strong></span>(1) man page.
						</p><section class="section" id="using_smbclient_in_interactive_mode"><div class="titlepage"><div><div><h5 class="title">16.1.9.5.1.&nbsp;Using <code class="literal">smbclient</code> in Interactive Mode</h5></div></div></div><p>
								If you use <code class="literal">smbclient</code> without the <code class="literal">-c</code> parameter, the utility enters the interactive mode.
							</p><p>
								The following procedure shows how to connect to an SMB share and download a file from a subdirectory:
							</p><div class="orderedlist" id="proc.ex.using_the_smbclient_utility"><p class="title"><strong>Downloading a File from an SMB Share Using <code class="literal">smbclient</code></strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Connect to the share:
									</p><pre class="literallayout">~]# smbclient -U "<span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>user_name</em></span>]" //<span class="emphasis"><em>server_name</em></span>/<span class="emphasis"><em>share_name</em></span></pre></li><li class="listitem"><p class="simpara">
										Change into the <code class="literal">/example/</code> directory:
									</p><pre class="literallayout">smb: \&gt; cd /example/</pre></li><li class="listitem"><p class="simpara">
										List the files in the directory:
									</p><pre class="literallayout">smb: \example\&gt; ls
 .          D     0 Mon Sep 1 10:00:00 2017
 ..          D     0 Mon Sep 1 10:00:00 2017
 example.txt     N  1048576 Mon Sep 1 10:00:00 2017

     9950208 blocks of size 1024. 8247144 blocks available</pre></li><li class="listitem"><p class="simpara">
										Download the <code class="literal">example.txt</code> file:
									</p><pre class="literallayout">smb: \example\&gt; get example.txt
getting file \directory\subdirectory\example.txt of size 1048576 as example.txt (511975,0 KiloBytes/sec) (average 170666,7 KiloBytes/sec)</pre></li><li class="listitem"><p class="simpara">
										Disconnect from the share:
									</p><pre class="literallayout">smb: \example\&gt; exit</pre></li></ol></div></section><section class="section" id="using_smbclient_in_scripting_mode"><div class="titlepage"><div><div><h5 class="title">16.1.9.5.2.&nbsp;Using <code class="literal">smbclient</code> in Scripting Mode</h5></div></div></div><p>
								If you pass the <code class="literal">-c <span class="emphasis"><em>commands</em></span></code> parameter to <code class="literal">smbclient</code>, you can automatically execute the commands on the remote SMB share. This enables you to use <code class="literal">smbclient</code> in scripts.
							</p><p>
								The following command shows how to connect to an SMB share and download a file from a subdirectory:
							</p><pre class="literallayout">~]# smbclient -U <span class="emphasis"><em>DOMAIN</em></span>pass:quotes[<span class="emphasis"><em>user_name</em></span>] //<span class="emphasis"><em>server_name</em></span>/<span class="emphasis"><em>share_name</em></span> \
    -c "cd /example/ ; get example.txt ; exit"</pre></section></section><section class="section" id="using_the_smbcontrol_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.6.&nbsp;Using the <code class="literal command">smbcontrol</code> Utility</h4></div></div></div><p>
							The <code class="literal command">smbcontrol</code> utility enables you to send command messages to the <code class="literal">smbd</code>, <code class="literal">nmbd</code>, <code class="literal">winbindd</code>, or all of these services. These control messages instruct the service, for example, to reload its configuration.
						</p><div class="example" id="ex.reloading_the_configuration_of_smbd_nmbd_winbindd_service"><p class="title"><strong>Example&nbsp;16.12.&nbsp;Reloading the Configuration of the <code class="literal">smbd</code>, <code class="literal">nmbd</code>, and <code class="literal">winbindd</code> Service</strong></p><div class="example-contents"><p>
								For example, to reload the configuration of the <code class="literal">smbd</code>, <code class="literal">nmbd</code>, <code class="literal">winbindd</code>, send the <code class="literal command">reload-config</code> message-type to the <code class="literal">all</code> destination:
							</p><pre class="literallayout">~]# smbcontrol all reload-config</pre></div></div><p>
							For further details and a list of available command message types, see the <span class="strong strong"><strong>smbcontrol</strong></span>(1) man page.
						</p></section><section class="section" id="using_the_smbpasswd_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.7.&nbsp;Using the <code class="literal">smbpasswd</code> Utility</h4></div></div></div><p>
							The <code class="literal">smbpasswd</code> utility manages user accounts and passwords in the local Samba database.
						</p><p>
							If you run the command as a user, <code class="literal">smbpasswd</code> changes the Samba password of the user. For example:
						</p><pre class="literallayout">[user@server ~]$ smbpasswd
New SMB password:
Retype new SMB password:</pre><p>
							If you run <code class="literal">smbpasswd</code> as the <code class="literal">root</code> user, you can use the utility, for example, to:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Create a new user:
								</p><pre class="literallayout">[root@server ~]# smbpasswd -a <span class="emphasis"><em>user_name</em></span>
New SMB password:
Retype new SMB password:
Added user <span class="emphasis"><em>user_name</em></span>.</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Before you can add a user to the Samba database, you must create the account in the local operating system. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-users-tools-users-add" title="4.3.1. Adding a New User">Section&nbsp;4.3.1, “Adding a New User”</a>
									</p></div></div></li><li class="listitem"><p class="simpara">
									Enable a Samba user:
								</p><pre class="literallayout">[root@server ~]# smbpasswd -e <span class="emphasis"><em>user_name</em></span>
Enabled user <span class="emphasis"><em>user_name</em></span>.</pre></li><li class="listitem"><p class="simpara">
									Disable a Samba user:
								</p><pre class="literallayout">[root@server ~]# smbpasswd -x <span class="emphasis"><em>user_name</em></span>
Disabled user <span class="emphasis"><em>user_name</em></span>.</pre></li><li class="listitem"><p class="simpara">
									Delete a user:
								</p><pre class="literallayout">[root@server ~]# smbpasswd -x <span class="emphasis"><em>user_name</em></span>
Deleted user <span class="emphasis"><em>user_name</em></span>.</pre></li></ul></div><p>
							For further details, see the <span class="strong strong"><strong>smbpasswd</strong></span>(8) man page.
						</p></section><section class="section" id="using_the_smbstatus_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.8.&nbsp;Using the <code class="literal command">smbstatus</code> Utility</h4></div></div></div><p>
							The <code class="literal command">smbstatus</code> utility reports on:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Connections per PID of each <code class="literal">smbd</code> daemon to the Samba server. This report includes the user name, primary group, SMB protocol version, encryption, and signing information.
								</li><li class="listitem">
									Connections per Samba share. This report includes the PID of the <code class="literal">smbd</code> daemon, the IP of the connecting machine, the time stamp when the connection was established, encryption, and signing information.
								</li><li class="listitem">
									A list of locked files. The report entries include further details, such as opportunistic lock (oplock) types
								</li></ul></div><div class="example" id="ex.smbstatus"><p class="title"><strong>Example&nbsp;16.13.&nbsp;Output of the <code class="literal command">smbstatus</code> Utility</strong></p><div class="example-contents"><pre class="literallayout">~]# smbstatus

Samba version 4.6.2
PID Username       Group        Machine              Protocol Version Encryption Signing
-----------------------------------------------------------------------------------------------------------------------------
963 <span class="emphasis"><em>DOMAIN</em></span>\administrator <span class="emphasis"><em>DOMAIN</em></span>\domain users client-pc (ipv4:192.0.2.1:57786) SMB3_02      -      AES-128-CMAC

Service pid Machine  Connected at         Encryption Signing:
-------------------------------------------------------------------------------
example 969 192.0.2.1 Mo Sep 1 10:00:00 2017 CEST -      AES-128-CMAC

Locked files:
Pid Uid  DenyMode  Access  R/W   Oplock   SharePath      Name   Time
------------------------------------------------------------------------------------------------------------
969 10000 DENY_WRITE 0x120089 RDONLY LEASE(RWH) /srv/samba/example file.txt Mon Sep 1 10:00:00 2017</pre></div></div><p>
							For further details, see the <span class="strong strong"><strong>smbstatus</strong></span>(1) man page.
						</p></section><section class="section" id="using_the_smbtar_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.9.&nbsp;Using the <code class="literal">smbtar</code> Utility</h4></div></div></div><p>
							The <code class="literal">smbtar</code> utility backs up the content of an SMB share or a subdirectory of it and stores the content in a <code class="literal">tar</code> archive. Alternatively, you can write the content to a tape device.
						</p><p>
							For example, to back up the content of the <code class="literal">demo</code> directory on the <code class="literal">//server/example/</code> share and store the content in the <code class="literal">/root/example.tar</code> archive:
						</p><pre class="literallayout">~]# smbtar -s <span class="emphasis"><em>server</em></span> -x <span class="emphasis"><em>example</em></span> -u <span class="emphasis"><em>user_name</em></span> -p <span class="emphasis"><em>password</em></span> -t /root/example.tar</pre><p>
							For further details, see the <span class="strong strong"><strong>smbtar</strong></span>(1) man page.
						</p></section><section class="section" id="using_the_testparm_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.10.&nbsp;Using the <code class="literal command">testparm</code> Utility</h4></div></div></div><p>
							See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#verifying_the_smb_conf_file_by_using_the_testparm_utility" title="16.1.2. Verifying the smb.conf File by Using the testparm Utility">Section&nbsp;16.1.2, “Verifying the <code class="literal">smb.conf</code> File by Using the <code class="literal">testparm</code> Utility”</a>.
						</p></section><section class="section" id="using_the_wbinfo_utility"><div class="titlepage"><div><div><h4 class="title">16.1.9.11.&nbsp;Using the <code class="literal">wbinfo</code> Utility</h4></div></div></div><p>
							The <code class="literal">wbinfo</code> utility queries and returns information created and used by the <code class="literal">winbindd</code> service.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal">winbindd</code> service must be configured and running to use <code class="literal">wbinfo</code>.
							</p></div></div><p>
							You can use <code class="literal">wbinfo</code>, for example, to:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									List domain users:
								</p><pre class="literallayout">~]# wbinfo -u
AD\administrator
AD\guest
...</pre></li><li class="listitem"><p class="simpara">
									List domain groups:
								</p><pre class="literallayout">~]# wbinfo -g
AD\domain computers
AD\domain admins
AD\domain users
...</pre></li><li class="listitem"><p class="simpara">
									Display the SID of a user:
								</p><pre class="literallayout">~]# wbinfo --name-to-sid="AD\administrator"
S-1-5-21-1762709870-351891212-3141221786-500 SID_USER (1)</pre></li><li class="listitem"><p class="simpara">
									Display information about domains and trusts:
								</p><pre class="literallayout">~]# wbinfo --trusted-domains --verbose
Domain Name  DNS Domain      Trust Type Transitive In  Out
BUILTIN               None    Yes     Yes Yes
<span class="emphasis"><em>server</em></span>               None    Yes     Yes Yes
<span class="emphasis"><em>DOMAIN1</em></span>    <span class="emphasis"><em>domain1.example.com</em></span>  None    Yes     Yes Yes
<span class="emphasis"><em>DOMAIN2</em></span>    <span class="emphasis"><em>domain2.example.com</em></span>  External  No     Yes Yes</pre></li></ul></div><p>
							For further details, see the <span class="strong strong"><strong>wbinfo</strong></span>(1) man page.
						</p></section></section><section class="section" id="additional_resources"><div class="titlepage"><div><div><h3 class="title">16.1.10.&nbsp;Additional Resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The Red Hat Samba packages include manual pages for all Samba commands and configuration files the package installs. For example, to display the man page of the <code class="literal">/etc/samba/smb.conf</code> file that explains all configuration parameters you can set in this file:
							</p><pre class="literallayout">~]# man 5 smb.conf</pre></li><li class="listitem">
								<code class="literal">/usr/share/docs/samba-<span class="emphasis"><em>version</em></span>/</code>: Contains general documentation, example scripts, and LDAP schema files, provided by the Samba project.
							</li><li class="listitem">
								<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_gluster_storage/3.3/html/administration_guide/sect-smb">Red Hat Cluster Storage Administration Guide</a></span></em></span>: Provides information about setting up Samba and the Clustered Trivial Database (CDTB) to share directories stored on an GlusterFS volume.
							</li><li class="listitem">
								The <span class="emphasis"><em><span class="citetitle citetitle">An active/active Samba Server in a Red Hat High Availability Cluster</span></em></span> chapter in the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/high_availability_add-on_administration/ch-hasamba-haaa">Red Hat Enterprise Linux High Availability Add-on Administration</a></span></em></span> guide describes how to up a Samba high-availability installation.
							</li><li class="listitem">
								For details about mounting an SMB share on Red Hat Enterprise Linux, see the corresponding section in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/mounting_an_smb_share">Red Hat Storage Administration Guide</a>.
							</li></ul></div></section></section><section class="section" id="s1-FTP"><div class="titlepage"><div><div><h2 class="title">16.2.&nbsp;FTP</h2></div></div></div><p>
					The <span class="emphasis"><em>File Transfer Protocol</em></span> (<code class="literal">FTP</code>) is one of the oldest and most commonly used protocols found on the Internet today. Its purpose is to reliably transfer files between computer hosts on a network without requiring the user to log directly in to the remote host or to have knowledge of how to use the remote system. It allows users to access files on remote systems using a standard set of simple commands.
				</p><p>
					This section outlines the basics of the <code class="literal">FTP</code> protocol and introduces <span class="emphasis"><em><code class="literal">vsftpd</code></em></span>, which is the preferred <code class="literal">FTP</code> server in Red Hat Enterprise Linux.
				</p><section class="section" id="s2-ftp-protocol"><div class="titlepage"><div><div><h3 class="title">16.2.1.&nbsp;The File Transfer Protocol</h3></div></div></div><p>
						FTP uses a client-server architecture to transfer files using the <code class="literal">TCP</code> network protocol. Because <code class="literal">FTP</code> is a rather old protocol, it uses unencrypted user name and password authentication. For this reason, it is considered an insecure protocol and should not be used unless absolutely necessary. However, because <code class="literal">FTP</code> is so prevalent on the Internet, it is often required for sharing files to the public. System administrators, therefore, should be aware of <code class="literal">FTP</code>'s unique characteristics.
					</p><p>
						This section describes how to configure <span class="strong strong"><strong><span class="application application">vsftpd</span></strong></span> to establish connections secured by <code class="literal">TLS</code> and how to secure an <code class="literal">FTP</code> server with the help of <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span>. A good substitute for <code class="literal">FTP</code> is <span class="strong strong"><strong><span class="application application">sftp</span></strong></span> from the <span class="strong strong"><strong><span class="application application">OpenSSH</span></strong></span> suite of tools. For information about configuring <span class="strong strong"><strong><span class="application application">OpenSSH</span></strong></span> and about the <code class="literal">SSH</code> protocol in general, refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-OpenSSH" title="Chapter 12. OpenSSH">Chapter&nbsp;12, <em>OpenSSH</em></a>.
					</p><p>
						Unlike most protocols used on the Internet, <code class="literal">FTP</code> requires multiple network ports to work properly. When an <code class="literal">FTP</code> client application initiates a connection to an <code class="literal">FTP</code> server, it opens port 21 on the server — known as the <span class="emphasis"><em>command port</em></span>. This port is used to issue all commands to the server. Any data requested from the server is returned to the client via a <span class="emphasis"><em>data port</em></span>. The port number for data connections, and the way in which data connections are initialized, vary depending upon whether the client requests the data in <span class="emphasis"><em>active</em></span> or <span class="emphasis"><em>passive</em></span> mode.
					</p><p>
						The following defines these modes:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">active mode</span></dt><dd>
									Active mode is the original method used by the <code class="literal">FTP</code> protocol for transferring data to the client application. When an active-mode data transfer is initiated by the <code class="literal">FTP</code> client, the server opens a connection from port 20 on the server to the <code class="literal">IP</code> address and a random, unprivileged port (greater than 1024) specified by the client. This arrangement means that the client machine must be allowed to accept connections over any port above 1024. With the growth of insecure networks, such as the Internet, the use of firewalls for protecting client machines is now prevalent. Because these client-side firewalls often deny incoming connections from active-mode <code class="literal">FTP</code> servers, passive mode was devised.
								</dd><dt><span class="term">passive mode</span></dt><dd><p class="simpara">
									Passive mode, like active mode, is initiated by the <code class="literal">FTP</code> client application. When requesting data from the server, the <code class="literal">FTP</code> client indicates it wants to access the data in passive mode and the server provides the <code class="literal">IP</code> address and a random, unprivileged port (greater than 1024) on the server. The client then connects to that port on the server to download the requested information.
								</p><p class="simpara">
									While passive mode does resolve issues for client-side firewall interference with data connections, it can complicate administration of the server-side firewall. You can reduce the number of open ports on a server by limiting the range of unprivileged ports on the <code class="literal">FTP</code> server. This also simplifies the process of configuring firewall rules for the server.
								</p></dd></dl></div></section><section class="section" id="s2-ftp-servers-vsftpd"><div class="titlepage"><div><div><h3 class="title">16.2.2.&nbsp;The vsftpd Server</h3></div></div></div><p>
						<span class="emphasis"><em>The Very Secure FTP Daemon</em></span> (<code class="literal">vsftpd</code>) is designed from the ground up to be fast, stable, and, most importantly, secure. <code class="literal">vsftpd</code> is the only stand-alone <code class="literal">FTP</code> server distributed with Red Hat Enterprise Linux, due to its ability to handle large numbers of connections efficiently and securely.
					</p><p>
						The security model used by <code class="literal">vsftpd</code> has three primary aspects:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>Strong separation of privileged and non-privileged processes</em></span> — Separate processes handle different tasks, and each of these processes runs with the minimal privileges required for the task.
							</li><li class="listitem">
								<span class="emphasis"><em>Tasks requiring elevated privileges are handled by processes with the minimal privilege necessary</em></span> — By taking advantage of compatibilities found in the <code class="literal">libcap</code> library, tasks that usually require full root privileges can be executed more safely from a less privileged process.
							</li><li class="listitem">
								<span class="emphasis"><em>Most processes run in a <code class="literal command">chroot</code> jail</em></span> — Whenever possible, processes are change-rooted to the directory being shared; this directory is then considered a <code class="literal command">chroot</code> jail. For example, if the <code class="literal">/var/ftp/</code> directory is the primary shared directory, <code class="literal">vsftpd</code> reassigns <code class="literal">/var/ftp/</code> to the new root directory, known as <code class="literal">/</code>. This disallows any potential malicious hacker activities for any directories not contained in the new root directory.
							</li></ul></div><p>
						Use of these security practices has the following effect on how <code class="literal">vsftpd</code> deals with requests:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>The parent process runs with the least privileges required</em></span> — The parent process dynamically calculates the level of privileges it requires to minimize the level of risk. Child processes handle direct interaction with the <code class="literal">FTP</code> clients and run with as close to no privileges as possible.
							</li><li class="listitem">
								<span class="emphasis"><em>All operations requiring elevated privileges are handled by a small parent process</em></span> — Much like the <span class="strong strong"><strong><span class="application application">Apache <code class="literal">HTTP</code> Server</span></strong></span>, <code class="literal">vsftpd</code> launches unprivileged child processes to handle incoming connections. This allows the privileged, parent process to be as small as possible and handle relatively few tasks.
							</li><li class="listitem">
								<span class="emphasis"><em>All requests from unprivileged child processes are distrusted by the parent process</em></span> — Communication with child processes is received over a socket, and the validity of any information from child processes is checked before being acted on.
							</li><li class="listitem">
								<span class="emphasis"><em>Most interactions with <code class="literal">FTP</code> clients are handled by unprivileged child processes in a <code class="literal command">chroot</code> jail</em></span> — Because these child processes are unprivileged and only have access to the directory being shared, any crashed processes only allow the attacker access to the shared files.
							</li></ul></div><section class="section" id="s3-ftp-vsftpd-start"><div class="titlepage"><div><div><h4 class="title">16.2.2.1.&nbsp;Starting and Stopping vsftpd</h4></div></div></div><p>
							To start the <code class="literal">vsftpd</code> service in the current session, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout">~]#&nbsp;systemctl start vsftpd.service</pre><p>
							To stop the service in the current session, type as <code class="literal">root</code>:
						</p><pre class="literallayout">~]#&nbsp;systemctl stop vsftpd.service</pre><p>
							To restart the <code class="literal">vsftpd</code> service, run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]#&nbsp;systemctl restart vsftpd.service</pre><p>
							This command stops and immediately starts the <code class="literal">vsftpd</code> service, which is the most efficient way to make configuration changes take effect after editing the configuration file for this <code class="literal">FTP</code> server. Alternatively, you can use the following command to restart the <code class="literal">vsftpd</code> service only if it is already running:
						</p><pre class="literallayout">~]#&nbsp;systemctl try-restart vsftpd.service</pre><p>
							By default, the <code class="literal">vsftpd</code> service does <span class="emphasis"><em>not</em></span> start automatically at boot time. To configure the <code class="literal">vsftpd</code> service to start at boot time, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout">~]#&nbsp;systemctl enable vsftpd.service
Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service.</pre><p>
							For more information on how to manage system services in Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
						</p></section><section class="section" id="s3-ftp-vsftpd-start-multi"><div class="titlepage"><div><div><h4 class="title">16.2.2.2.&nbsp;Starting Multiple Copies of vsftpd</h4></div></div></div><p>
							Sometimes, one computer is used to serve multiple <code class="literal">FTP</code> domains. This is a technique called <span class="emphasis"><em>multihoming</em></span>. One way to multihome using <code class="literal">vsftpd</code> is by running multiple copies of the daemon, each with its own configuration file.
						</p><p>
							To do this, first assign all relevant <code class="literal">IP</code> addresses to network devices or alias network devices on the system. For more information about configuring network devices, device aliases, and additional information about network configuration scripts, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">Red Hat Enterprise Linux 7 Networking Guide</a>.
						</p><p>
							Next, the <span class="emphasis"><em>DNS</em></span> server for the <code class="literal">FTP</code> domains must be configured to reference the correct machine. For information about <span class="strong strong"><strong><span class="application application">BIND</span></strong></span>, the <code class="literal">DNS</code> protocol implementation used in Red Hat Enterprise Linux, and its configuration files, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">Red Hat Enterprise Linux 7 Networking Guide</a>.
						</p><p>
							For <code class="literal">vsftpd</code> to answer requests on different <code class="literal">IP</code> addresses, multiple copies of the daemon must be running. To facilitate launching multiple instances of the <code class="literal">vsftpd</code> daemon, a special <span class="emphasis"><em>systemd</em></span> service unit (<code class="literal">vsftpd@.service</code>) for launching <code class="literal">vsftpd</code> as an instantiated service is supplied in the <span class="strong strong"><strong><span class="package package">vsftpd</span></strong></span> package.
						</p><p>
							In order to make use of this service unit, a separate <code class="literal">vsftpd</code> configuration file for each required instance of the <code class="literal">FTP</code> server must be created and placed in the <code class="literal">/etc/vsftpd/</code> directory. Note that each of these configuration files must have a unique name (such as <code class="literal">/etc/vsftpd/<span class="emphasis"><em>vsftpd-site-2</em></span>.conf</code>) and must be readable and writable only by the <code class="literal">root</code> user.
						</p><p>
							Within each configuration file for each <code class="literal">FTP</code> server listening on an <code class="literal">IPv4</code> network, the following directive must be unique:
						</p><pre class="literallayout">listen_address=N.N.N.N</pre><p>
							Replace <span class="emphasis"><em>N.N.N.N</em></span> with a <span class="emphasis"><em>unique</em></span> <code class="literal">IP</code> address for the <code class="literal">FTP</code> site being served. If the site is using <code class="literal">IPv6</code>, use the <code class="literal option">listen_address6</code> directive instead.
						</p><p>
							Once there are multiple configuration files present in the <code class="literal">/etc/vsftpd/</code> directory, individual instances of the <code class="literal">vsftpd</code> daemon can be started by executing the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]#&nbsp;systemctl start vsftpd@configuration-file-name.service</pre><p>
							In the above command, replace <span class="emphasis"><em>configuration-file-name</em></span> with the unique name of the requested server’s configuration file, such as <code class="literal">vsftpd-site-2</code>. Note that the configuration file’s <code class="literal">.conf</code> extension should not be included in the command.
						</p><p>
							If you want to start several instances of the <code class="literal">vsftpd</code> daemon at once, you can make use of a systemd target unit file (<code class="literal">vsftpd.target</code>), which is supplied in the <span class="strong strong"><strong><span class="package package">vsftpd</span></strong></span> package. This systemd target causes an independent <code class="literal">vsftpd</code> daemon to be launched for each available <code class="literal">vsftpd</code> configuration file in the <code class="literal">/etc/vsftpd/</code> directory. Execute the following command as <code class="literal">root</code> to enable the target:
						</p><pre class="literallayout">~]#&nbsp;systemctl enable vsftpd.target
Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.target to /usr/lib/systemd/system/vsftpd.target.</pre><p>
							The above command configures the systemd service manager to launch the <code class="literal">vsftpd</code> service (along with the configured <code class="literal">vsftpd</code> server instances) at boot time. To start the service immediately, without rebooting the system, execute the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]#&nbsp;systemctl start vsftpd.target</pre><p>
							See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Targets" title="10.3. Working with systemd Targets">Section&nbsp;10.3, “Working with systemd Targets”</a> for more information on how to use systemd targets to manage services.
						</p><p>
							Other directives to consider altering on a per-server basis are:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">anon_root</code>
								</li><li class="listitem">
									<code class="literal option">local_root</code>
								</li><li class="listitem">
									<code class="literal option">vsftpd_log_file</code>
								</li><li class="listitem">
									<code class="literal option">xferlog_file</code>
								</li></ul></div></section><section class="section" id="s3-ftp-vsftpd-tls"><div class="titlepage"><div><div><h4 class="title">16.2.2.3.&nbsp;Encrypting vsftpd Connections Using TLS</h4></div></div></div><p>
							In order to counter the inherently insecure nature of <code class="literal">FTP</code>, which transmits user names, passwords, and data without encryption by default, the <code class="literal">vsftpd</code> daemon can be configured to utilize the <code class="literal">TLS</code> protocol to authenticate connections and encrypt all transfers. Note that an <code class="literal">FTP</code> client that supports <code class="literal">TLS</code> is needed to communicate with <code class="literal">vsftpd</code> with <code class="literal">TLS</code> enabled.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								<code class="literal">SSL</code> (Secure Sockets Layer) is the name of an older implementation of the security protocol. The new versions are called <code class="literal">TLS</code> (Transport Layer Security). Only the newer versions (<code class="literal">TLS</code>) should be used as <code class="literal">SSL</code> suffers from serious security vulnerabilities. The documentation included with the <span class="strong strong"><strong><span class="application application">vsftpd</span></strong></span> server, as well as the configuration directives used in the <code class="literal">vsftpd.conf</code> file, use the <code class="literal">SSL</code> name when referring to security-related matters, but <code class="literal">TLS</code> is supported and used by default when the <code class="literal option">ssl_enable</code> directive is set to <code class="literal">YES</code>.
							</p></div></div><p>
							Set the <code class="literal option">ssl_enable</code> configuration directive in the <code class="literal">vsftpd.conf</code> file to <code class="literal">YES</code> to turn on <code class="literal">TLS</code> support. The default settings of other <code class="literal">TLS</code>-related directives that become automatically active when the <code class="literal option">ssl_enable</code> option is enabled provide for a reasonably well-configured <code class="literal">TLS</code> set up. This includes, among other things, the requirement to only use the <code class="literal">TLS</code> v1 protocol for all connections (the use of the insecure <code class="literal">SSL</code> protocol versions is disabled by default) or forcing all non-anonymous logins to use <code class="literal">TLS</code> for sending passwords and data transfers.
						</p><div class="example" id="s3-vft-vsftpd-tls-config"><p class="title"><strong>Example&nbsp;16.14.&nbsp;Configuring vsftpd to Use TLS</strong></p><div class="example-contents"><p>
								In this example, the configuration directives explicitly disable the older <code class="literal">SSL</code> versions of the security protocol in the <code class="literal">vsftpd.conf</code> file:
							</p><pre class="literallayout">ssl_enable=YES
ssl_tlsv1=YES
ssl_sslv2=NO
ssl_sslv3=NO</pre><p>
								Restart the <code class="literal">vsftpd</code> service after you modify its configuration:
							</p><pre class="literallayout">~]#&nbsp;systemctl restart vsftpd.service</pre></div></div><p>
							See the <span class="strong strong"><strong>vsftpd.conf</strong></span>(5) manual page for other <code class="literal">TLS</code>-related configuration directives for fine-tuning the use of <code class="literal">TLS</code> by <code class="literal">vsftpd</code>.
						</p></section><section class="section" id="s3-ftp-vsftpd-selinux"><div class="titlepage"><div><div><h4 class="title">16.2.2.4.&nbsp;SELinux Policy for vsftpd</h4></div></div></div><p>
							The SELinux policy governing the <code class="literal">vsftpd</code> daemon (as well as other <code class="literal">ftpd</code> processes), defines a mandatory access control, which, by default, is based on least access required. In order to allow the <code class="literal">FTP</code> daemon to access specific files or directories, appropriate labels need to be assigned to them.
						</p><p>
							For example, in order to be able to share files anonymously, the <code class="literal option">public_content_t</code> label must be assigned to the files and directories to be shared. You can do this using the <code class="literal command">chcon</code> command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]#&nbsp;chcon -R -t public_content_t /path/to/directory</pre><p>
							In the above command, replace <span class="emphasis"><em>/path/to/directory</em></span> with the path to the directory to which you want to assign the label. Similarly, if you want to set up a directory for uploading files, you need to assign that particular directory the <code class="literal option">public_content_rw_t</code> label. In addition to that, the <code class="literal option">allow_ftpd_anon_write</code> SELinux Boolean option must be set to <code class="literal">1</code>. Use the <code class="literal command">setsebool</code> command as <code class="literal">root</code> to do that:
						</p><pre class="literallayout">~]#&nbsp;setsebool -P allow_ftpd_anon_write=1</pre><p>
							If you want local users to be able to access their home directories through <code class="literal">FTP</code>, which is the default setting on Red Hat Enterprise Linux 7, the <code class="literal option">ftp_home_dir</code> Boolean option needs to be set to <code class="literal">1</code>. If <code class="literal">vsftpd</code> is to be allowed to run in standalone mode, which is also enabled by default on Red Hat Enterprise Linux 7, the <code class="literal option">ftpd_is_daemon</code> option needs to be set to <code class="literal">1</code> as well.
						</p><p>
							See the <span class="strong strong"><strong>ftpd_selinux</strong></span>(8) manual page for more information, including examples of other useful labels and Boolean options, on how to configure the SELinux policy pertaining to <code class="literal">FTP</code>. Also, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/">Red Hat Enterprise Linux 7 SELinux User’s and Administrator’s Guide</a> for more detailed information about SELinux in general.
						</p></section></section><section class="section" id="s2-ftp-resources"><div class="titlepage"><div><div><h3 class="title">16.2.3.&nbsp;Additional Resources</h3></div></div></div><p>
						For more information about <code class="literal">vsftpd</code>, see the following resources.
					</p><section class="section" id="s3-ftp-installed-documentation"><div class="titlepage"><div><div><h4 class="title">16.2.3.1.&nbsp;Installed Documentation</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">/usr/share/doc/vsftpd-<span class="emphasis"><em>version-number</em></span>/</code> directory — Replace <span class="emphasis"><em>version-number</em></span> with the installed version of the <span class="strong strong"><strong><span class="package package">vsftpd</span></strong></span> package. This directory contains a <code class="literal">README</code> file with basic information about the software. The <code class="literal">TUNING</code> file contains basic performance-tuning tips and the <code class="literal">SECURITY/</code> directory contains information about the security model employed by <code class="literal">vsftpd</code>.
								</li><li class="listitem"><p class="simpara">
									<code class="literal">vsftpd</code>-related manual pages — There are a number of manual pages for the daemon and the configuration files. The following lists some of the more important manual pages.
								</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Server Applications</span></dt><dd><pre class="literallayout">{blank}</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
														<span class="strong strong"><strong>vsftpd</strong></span>(8) — Describes available command-line options for <code class="literal">vsftpd</code>.
													</li></ul></div></dd><dt><span class="term">Configuration Files</span></dt><dd><pre class="literallayout">{blank}</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
														<span class="strong strong"><strong>vsftpd.conf</strong></span>(5) — Contains a detailed list of options available within the configuration file for <code class="literal">vsftpd</code>.
													</li><li class="listitem">
														<span class="strong strong"><strong>hosts_access</strong></span>(5) — Describes the format and options available within the <code class="literal">TCP</code> wrappers configuration files: <code class="literal">hosts.allow</code> and <code class="literal">hosts.deny</code>.
													</li></ul></div></dd><dt><span class="term">Interaction with SELinux</span></dt><dd><pre class="literallayout">{blank}</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
														<span class="strong strong"><strong>ftpd_selinux</strong></span>(8) — Contains a description of the <span class="emphasis"><em>SELinux</em></span> policy governing <code class="literal">ftpd</code> processes as well as an explanation of the way SELinux labels need to be assigned and Booleans set.
													</li></ul></div></dd></dl></div></li></ul></div></section><section class="section" id="sect-ftp-online-documentation"><div class="titlepage"><div><div><h4 class="title">16.2.3.2.&nbsp;Online Documentation</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">About vsftpd and FTP in General</span></dt><dd><pre class="literallayout">{blank}</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<a class="link" href="http://vsftpd.beasts.org/">http://vsftpd.beasts.org/</a> — The <code class="literal">vsftpd</code> project page is a great place to locate the latest documentation and to contact the author of the software.
											</li><li class="listitem">
												<a class="link" href="http://slacksite.com/other/ftp.html">http://slacksite.com/other/ftp.html</a> — This website provides a concise explanation of the differences between active and passive-mode <code class="literal">FTP</code>.
											</li></ul></div></dd><dt><span class="term">Red Hat Enterprise Linux Documentation</span></dt><dd><pre class="literallayout">{blank}</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">Red Hat Enterprise Linux 7 Networking Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Networking Guide</span></em></span> for Red Hat Enterprise Linux 7 documents relevant information regarding the configuration and administration of network interfaces, networks, and network services in this system. It provides an introduction to the <code class="literal command">hostnamectl</code> utility and explains how to use it to view and set host names on the command line, both locally and remotely.
											</li><li class="listitem">
												<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/">Red Hat Enterprise Linux 7 SELinux User’s and Administrator’s Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">SELinux User’s and Administrator’s Guide</span></em></span> for Red Hat Enterprise Linux 7 describes the basic principles of <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> and documents in detail how to configure and use <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> with various services such as the <span class="strong strong"><strong><span class="application application">Apache HTTP Server</span></strong></span>, <span class="strong strong"><strong><span class="application application">Postfix</span></strong></span>, <span class="strong strong"><strong><span class="application application">PostgreSQL</span></strong></span>, or <span class="strong strong"><strong><span class="application application">OpenShift</span></strong></span>. It explains how to configure <span class="strong strong"><strong><span class="application application">SELinux</span></strong></span> access permissions for system services managed by <code class="literal">systemd</code>.
											</li><li class="listitem">
												<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Security Guide</span></em></span> for Red Hat Enterprise Linux 7 assists users and administrators in learning the processes and practices of securing their workstations and servers against local and remote intrusion, exploitation, and malicious activity. It also explains how to secure critical system services.
											</li></ul></div></dd><dt><span class="term">Relevant <span class="strong strong"><strong>RFC</strong></span> Documents</span></dt><dd><pre class="literallayout">{blank}</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc959">RFC 0959</a></span></em></span> — The original <span class="emphasis"><em>Request for Comments</em></span> (<span class="strong strong"><strong>RFC</strong></span>) of the <code class="literal">FTP</code> protocol from the <span class="strong strong"><strong>IETF</strong></span>.
											</li><li class="listitem">
												<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc1123">RFC 1123</a></span></em></span> — The small <code class="literal">FTP</code>-related section extends and clarifies RFC 0959.
											</li><li class="listitem">
												<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc2228">RFC 2228</a></span></em></span> — <code class="literal">FTP</code> security extensions. <span class="strong strong"><strong><span class="application application">vsftpd</span></strong></span> implements the small subset needed to support <span class="strong strong"><strong>TLS</strong></span> and <span class="strong strong"><strong>SSL</strong></span> connections.
											</li><li class="listitem">
												<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc2389">RFC 2389</a></span></em></span> — Proposes <code class="literal command">FEAT</code> and <code class="literal command">OPTS</code> commands.
											</li><li class="listitem">
												<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc2428">RFC 2428</a></span></em></span> — <code class="literal">IPv6</code> support.
											</li></ul></div></dd></dl></div></section></section></section><section class="section" id="sec-Printer_Configuration"><div class="titlepage"><div><div><h2 class="title">16.3.&nbsp;Print Settings</h2></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> tool serves for printer configuring, maintenance of printer configuration files, print spool directories and print filters, and printer classes management.
				</p><p>
					The tool is based on the Common Unix Printing System (<span class="strong strong"><strong>CUPS</strong></span>). If you upgraded the system from a previous Red Hat Enterprise Linux version that used CUPS, the upgrade process preserved the configured printers.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The <code class="literal">cupsd.conf</code> man page documents configuration of a CUPS server. It includes directives for enabling <code class="literal">SSL</code> support. However, CUPS does not allow control of the protocol versions used. Due to the vulnerability described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/solutions/1234843">Resolution for POODLE SSLv3.0 vulnerability (CVE-2014-3566) for components that do not allow SSLv3 to be disabled via configuration settings</a></span></em></span>, Red Hat recommends that you do not rely on this for security. It is recommend that you use <span class="strong strong"><strong><span class="application application">stunnel</span></strong></span> to provide a secure tunnel and disable <code class="literal">SSLv3</code>. For more information on using <span class="strong strong"><strong><span class="application application">stunnel</span></strong></span>, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a>.
					</p><p>
						For ad-hoc secure connections to a remote system’s <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> tool, use X11 forwarding over <code class="literal">SSH</code> as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-ssh-beyondshell-x11" title="12.4.1. X11 Forwarding">Section&nbsp;12.4.1, “X11 Forwarding”</a>.
					</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can perform the same and additional operations on printers directly from the CUPS web application or command line. To access the application, in a web browser, go to <a class="link" href="http://localhost:631/">http://localhost:631/</a>. For CUPS manuals refer to the links on the <code class="literal">Home</code> tab of the web site.
					</p></div></div><section class="section" id="sec-Starting_Print_Settings_Config"><div class="titlepage"><div><div><h3 class="title">16.3.1.&nbsp;Starting the Print Settings Configuration Tool</h3></div></div></div><p>
						With the <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> configuration tool you can perform various operations on existing printers and set up new printers. You can also use CUPS directly (go to <a class="link" href="http://localhost:631/">http://localhost:631/</a> to access the CUPS web application).
					</p><p>
						To start the <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> tool from the command line, type <code class="literal command">system-config-printer</code> at a shell prompt. The <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> tool appears. Alternatively, if using the GNOME desktop, press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">Print Settings</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">Print Settings</span></strong></span> tool appears. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the <span class="keycap"><strong>Spacebar</strong></span>.
					</p><p>
						The <code class="literal">Print Settings</code> window depicted in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-print_settings-main" title="Figure 16.1. Print Settings window">Figure&nbsp;16.1, “Print Settings window”</a> appears.
					</p><div class="figure" id="fig-print_settings-main"><p class="title"><strong>Figure&nbsp;16.1.&nbsp;Print Settings window</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/print_settings-main.png" alt="Print Settings configuration window"></div></div></div></section><section class="section" id="sec-Setting_Printer"><div class="titlepage"><div><div><h3 class="title">16.3.2.&nbsp;Starting Printer Setup</h3></div></div></div><p>
						Printer setup process varies depending on the printer queue type.
					</p><p>
						If you are setting up a local printer connected with USB, the printer is discovered and added automatically. You will be prompted to confirm the packages to be installed and provide an administrator or the <code class="literal">root</code> user password. Local printers connected with other port types and network printers need to be set up manually.
					</p><p id="proc-Setting_up_Printer">
						Follow this procedure to start a manual printer setup:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Start the Print Settings tool (refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Starting_Print_Settings_Config" title="16.3.1. Starting the Print Settings Configuration Tool">Section&nbsp;16.3.1, “Starting the Print Settings Configuration Tool”</a>).
							</li><li class="listitem">
								Go to <span class="guimenu">Server</span> → <span class="guisubmenu">New</span> → <span class="guimenuitem"><code class="literal">Printer</code></span>.
							</li><li class="listitem">
								In the <code class="literal">Authenticate</code> dialog box, enter an administrator or <code class="literal">root</code> user password. If this is the first time you have configured a remote printer you will be prompted to authorize an adjustment to the firewall.
							</li><li class="listitem">
								Select the printer connection type and provide its details in the area on the right.
							</li></ol></div></section><section class="section" id="sec-Adding_Other_Printer"><div class="titlepage"><div><div><h3 class="title">16.3.3.&nbsp;Adding a Local Printer</h3></div></div></div><p>
						Follow this procedure to add a local printer connected with other than a serial port:
					</p><div class="orderedlist" id="proc-Adding_Other_Printer"><ol class="orderedlist" type="1"><li class="listitem">
								Open the <code class="literal">Add</code> printer dialog (refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_Printer" title="16.3.2. Starting Printer Setup">Section&nbsp;16.3.2, “Starting Printer Setup”</a>).
							</li><li class="listitem">
								If the device does not appear automatically, select the port to which the printer is connected in the list on the left (such as <code class="literal">Serial Port #1</code> or <code class="literal">LPT #1</code>).
							</li><li class="listitem"><p class="simpara">
								On the right, enter the connection properties:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">for <code class="literal">Other</code></span></dt><dd>
											<code class="literal">URI</code> (for example file:/dev/lp0)
										</dd><dt><span class="term">for <code class="literal">Serial Port</code></span></dt><dd><p class="simpara">
											Baud Rate
										</p><p class="simpara">
											Parity
										</p><p class="simpara">
											Data Bits
										</p><p class="simpara">
											Flow Control
										</p><div class="figure" id="idm140569349237168"><p class="title"><strong>Figure&nbsp;16.2.&nbsp;Adding a local printer</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/print_conf_window.png" alt="Adding a local printer"></div></div></div></dd></dl></div></li><li class="listitem">
								Click <span class="guibutton">Forward</span>.
							</li><li class="listitem">
								Select the printer model. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-select-model" title="16.3.8. Selecting the Printer Model and Finishing">Section&nbsp;16.3.8, “Selecting the Printer Model and Finishing”</a> for details.
							</li></ol></div></section><section class="section" id="s1-printing-jetdirect-printer"><div class="titlepage"><div><div><h3 class="title">16.3.4.&nbsp;Adding an AppSocket/HP JetDirect printer</h3></div></div></div><p>
						Follow this procedure to add an AppSocket/HP JetDirect printer:
					</p><div class="orderedlist" id="proc-Adding_JetDirect_Printer"><ol class="orderedlist" type="1"><li class="listitem">
								Open the <code class="literal">New Printer</code> dialog (refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Starting_Print_Settings_Config" title="16.3.1. Starting the Print Settings Configuration Tool">Section&nbsp;16.3.1, “Starting the Print Settings Configuration Tool”</a>).
							</li><li class="listitem">
								In the list on the left, select <span class="guimenu">Network Printer</span> → <span class="guimenuitem"><code class="literal">AppSocket/HP JetDirect</code></span>.
							</li><li class="listitem"><p class="simpara">
								On the right, enter the connection settings:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Hostname</code></span></dt><dd>
											Printer host name or <code class="literal">IP</code> address.
										</dd><dt><span class="term"><code class="literal">Port Number</code></span></dt><dd><p class="simpara">
											Printer port listening for print jobs (<code class="literal">9100</code> by default).
										</p><div class="figure" id="fig-printconf-jetdirect"><p class="title"><strong>Figure&nbsp;16.3.&nbsp;Adding a JetDirect printer</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-jetdirect.png" alt="Adding a JetDirect Printer"></div></div></div></dd></dl></div></li><li class="listitem">
								Click <span class="guibutton">Forward</span>.
							</li><li class="listitem">
								Select the printer model. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-select-model" title="16.3.8. Selecting the Printer Model and Finishing">Section&nbsp;16.3.8, “Selecting the Printer Model and Finishing”</a> for details.
							</li></ol></div></section><section class="section" id="s1-printing-ipp-printer"><div class="titlepage"><div><div><h3 class="title">16.3.5.&nbsp;Adding an IPP Printer</h3></div></div></div><p>
						An <code class="literal">IPP</code> printer is a printer attached to a different system on the same TCP/IP network. The system this printer is attached to may either be running CUPS or simply configured to use <code class="literal">IPP</code>.
					</p><p>
						If a firewall is enabled on the printer server, then the firewall must be configured to allow incoming <code class="literal">TCP</code> connections on port <code class="literal">631</code>. Note that the CUPS browsing protocol allows client machines to discover shared CUPS queues automatically. To enable this, the firewall on the client machine must be configured to allow incoming <code class="literal">UDP</code> packets on port <code class="literal">631</code>.
					</p><p id="proc-Adding_IPP_Printer">
						Follow this procedure to add an <code class="literal">IPP</code> printer:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Open the <code class="literal">New Printer</code> dialog (refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_Printer" title="16.3.2. Starting Printer Setup">Section&nbsp;16.3.2, “Starting Printer Setup”</a>).
							</li><li class="listitem">
								In the list of devices on the left, select Network Printer and <code class="literal">Internet Printing Protocol (ipp)</code> or <code class="literal">Internet Printing Protocol (https)</code>.
							</li><li class="listitem"><p class="simpara">
								On the right, enter the connection settings:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Host</code></span></dt><dd>
											The host name of the <code class="literal">IPP</code> printer.
										</dd><dt><span class="term"><code class="literal">Queue</code></span></dt><dd><p class="simpara">
											The queue name to be given to the new queue (if the box is left empty, a name based on the device node will be used).
										</p><div class="figure" id="fig-printconf-ipp"><p class="title"><strong>Figure&nbsp;16.4.&nbsp;Adding an IPP printer</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-ipp.png" class="rh_docs--zoom" title="Networked IPP Printer"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-ipp.png" alt="Networked IPP Printer"></a></div></div></div></dd></dl></div></li><li class="listitem">
								Click <span class="guibutton">Forward</span> to continue.
							</li><li class="listitem">
								Select the printer model. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-select-model" title="16.3.8. Selecting the Printer Model and Finishing">Section&nbsp;16.3.8, “Selecting the Printer Model and Finishing”</a> for details.
							</li></ol></div></section><section class="section" id="sec-printing-LPDLPR-printer"><div class="titlepage"><div><div><h3 class="title">16.3.6.&nbsp;Adding an LPD/LPR Host or Printer</h3></div></div></div><p id="proc-Adding_HTTPS_Printer">
						Follow this procedure to add an LPD/LPR host or printer:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Open the <code class="literal">New Printer</code> dialog (refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_Printer" title="16.3.2. Starting Printer Setup">Section&nbsp;16.3.2, “Starting Printer Setup”</a>).
							</li><li class="listitem">
								In the list of devices on the left, select <span class="guimenu">Network Printer</span> → <span class="guimenuitem"><code class="literal">LPD/LPR Host or Printer</code></span>.
							</li><li class="listitem"><p class="simpara">
								On the right, enter the connection settings:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Host</code></span></dt><dd><p class="simpara">
											The host name of the LPD/LPR printer or host.
										</p><p class="simpara">
											Optionally, click <span class="guibutton">Probe</span> to find queues on the LPD host.
										</p></dd><dt><span class="term"><code class="literal">Queue</code></span></dt><dd><p class="simpara">
											The queue name to be given to the new queue (if the box is left empty, a name based on the device node will be used).
										</p><div class="figure" id="fig-printconf-lpd"><p class="title"><strong>Figure&nbsp;16.5.&nbsp;Adding an LPD/LPR printer</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-lpd.png" class="rh_docs--zoom" title="Adding an LPD/LPR Printer"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-lpd.png" alt="Adding an LPD/LPR Printer"></a></div></div></div></dd></dl></div></li><li class="listitem">
								Click <span class="guibutton">Forward</span> to continue.
							</li><li class="listitem">
								Select the printer model. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-select-model" title="16.3.8. Selecting the Printer Model and Finishing">Section&nbsp;16.3.8, “Selecting the Printer Model and Finishing”</a> for details.
							</li></ol></div></section><section class="section" id="s1-printing-smb-printer"><div class="titlepage"><div><div><h3 class="title">16.3.7.&nbsp;Adding a Samba (SMB) printer</h3></div></div></div><p id="proc-Adding_SMB_Printer">
						Follow this procedure to add a Samba printer:
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Note that in order to add a Samba printer, you need to have the <span class="strong strong"><strong><span class="package package">samba-client</span></strong></span> package installed. You can do so by running, as <code class="literal">root</code>:
						</p><pre class="literallayout"><code class="literal command">yum install samba-client</code></pre><p>
							For more information on installing packages with Yum, refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Open the <code class="literal">New Printer</code> dialog (refer to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Setting_Printer" title="16.3.2. Starting Printer Setup">Section&nbsp;16.3.2, “Starting Printer Setup”</a>).
							</li><li class="listitem">
								In the list on the left, select <span class="guimenu">Network Printer</span> → <span class="guimenuitem"><code class="literal">Windows Printer via SAMBA</code></span>.
							</li><li class="listitem"><p class="simpara">
								Enter the SMB address in the <code class="literal">smb://</code> field. Use the format <span class="emphasis"><em>computer name/printer share</em></span>. In <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-printconf-smb" title="Figure 16.6. Adding a SMB printer">Figure&nbsp;16.6, “Adding a SMB printer”</a>, the <span class="emphasis"><em>computer name</em></span> is <code class="literal command">dellbox</code> and the <span class="emphasis"><em>printer share</em></span> is <code class="literal command">r2</code>.
							</p><div class="figure" id="fig-printconf-smb"><p class="title"><strong>Figure&nbsp;16.6.&nbsp;Adding a SMB printer</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-smb.png" class="rh_docs--zoom" title="SMB Printer"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-smb.png" alt="SMB Printer"></a></div></div></div></li><li class="listitem">
								Click <span class="guibutton">Browse</span> to see the available workgroups/domains. To display only queues of a particular host, type in the host name (NetBios name) and click <span class="guibutton">Browse</span>.
							</li><li class="listitem"><p class="simpara">
								Select either of the options:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										<code class="literal">Prompt user if authentication is required</code>: user name and password are collected from the user when printing a document.
									</li><li class="listitem">
										<code class="literal">Set authentication details now</code>: provide authentication information now so it is not required later. In the <code class="literal">Username</code> field, enter the user name to access the printer. This user must exist on the SMB system, and the user must have permission to access the printer. The default user name is typically <code class="literal">guest</code> for Windows servers, or <code class="literal">nobody</code> for Samba servers.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Enter the <code class="literal">Password</code> (if required) for the user specified in the <code class="literal">Username</code> field.
							</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									Samba printer user names and passwords are stored in the printer server as unencrypted files readable by <code class="literal">root</code> and the Linux Printing Daemon, <code class="literal">lpd</code>. Thus, other users that have <code class="literal">root</code> access to the printer server can view the user name and password you use to access the Samba printer.
								</p><p>
									Therefore, when you choose a user name and password to access a Samba printer, it is advisable that you choose a password that is different from what you use to access your local Red Hat Enterprise Linux system.
								</p><p>
									If there are files shared on the Samba print server, it is recommended that they also use a password different from what is used by the print queue.
								</p></div></div></li><li class="listitem">
								Click <span class="guibutton">Verify</span> to test the connection. Upon successful verification, a dialog box appears confirming printer share accessibility.
							</li><li class="listitem">
								Click <span class="guibutton">Forward</span>.
							</li><li class="listitem">
								Select the printer model. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-select-model" title="16.3.8. Selecting the Printer Model and Finishing">Section&nbsp;16.3.8, “Selecting the Printer Model and Finishing”</a> for details.
							</li></ol></div></section><section class="section" id="s1-printing-select-model"><div class="titlepage"><div><div><h3 class="title">16.3.8.&nbsp;Selecting the Printer Model and Finishing</h3></div></div></div><p>
						Once you have properly selected a printer connection type, the system attempts to acquire a driver. If the process fails, you can locate or search for the driver resources manually.
					</p><p id="proc-Selecting_Driver">
						Follow this procedure to provide the printer driver and finish the installation:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In the window displayed after the automatic driver detection has failed, select one of the following options:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										<code class="literal">Select a Printer from database</code> — the system chooses a driver based on the selected make of your printer from the list of <code class="literal">Makes</code>. If your printer model is not listed, choose <code class="literal">Generic</code>.
									</li><li class="listitem">
										<code class="literal">Provide PPD file</code> — the system uses the provided <span class="emphasis"><em>PostScript Printer Description</em></span> (<span class="strong strong"><strong>PPD</strong></span>) file for installation. A PPD file may also be delivered with your printer as being normally provided by the manufacturer. If the PPD file is available, you can choose this option and use the browser bar below the option description to select the PPD file.
									</li><li class="listitem"><p class="simpara">
										<code class="literal">Search for a printer driver to download</code> — enter the make and model of your printer into the <code class="literal">Make and model</code> field to search on OpenPrinting.org for the appropriate packages.
									</p><div class="figure" id="fig-printconf-select-model"><p class="title"><strong>Figure&nbsp;16.7.&nbsp;Selecting a printer brand</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-select-model.png" class="rh_docs--zoom" title="Selecting a printer brand from the printer database brands."><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-select-model.png" alt="Selecting a printer brand from the printer database brands."></a></div></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
								Depending on your previous choice provide details in the area displayed below:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Printer brand for the <code class="literal">Select printer from database</code> option.
									</li><li class="listitem">
										PPD file location for the <code class="literal">Provide PPD file</code> option.
									</li><li class="listitem">
										Printer make and model for the <code class="literal">Search for a printer driver to download</code> option.
									</li></ul></div></li><li class="listitem">
								Click <span class="guibutton">Forward</span> to continue.
							</li><li class="listitem"><p class="simpara">
								If applicable for your option, window shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-printconf-select-driver" title="Figure 16.8. Selecting a printer model">Figure&nbsp;16.8, “Selecting a printer model”</a> appears. Choose the corresponding model in the <code class="literal">Models</code> column on the left.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									On the right, the recommended printer driver is automatically selected; however, you can select another available driver. The print driver processes the data that you want to print into a format the printer can understand. Since a local printer is attached directly to your computer, you need a printer driver to process the data that is sent to the printer.
								</p></div></div><div class="figure" id="fig-printconf-select-driver"><p class="title"><strong>Figure&nbsp;16.8.&nbsp;Selecting a printer model</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-select-driver.png" class="rh_docs--zoom" title="Selecting a Printer Model with a Driver Menu"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-select-driver.png" alt="Selecting a Printer Model with a Driver Menu"></a></div></div></div></li><li class="listitem">
								Click <span class="guibutton">Forward</span>.
							</li><li class="listitem"><p class="simpara">
								Under the <code class="literal">Describe Printer</code> enter a unique name for the printer in the <code class="literal">Printer Name</code> field. The printer name can contain letters, numbers, dashes (-), and underscores (<span class="emphasis"><em>); it _must not</em></span> contain any spaces. You can also use the <code class="literal">Description</code> and <code class="literal">Location</code> fields to add further printer information. Both fields are optional, and may contain spaces.
							</p><div class="figure" id="fig-printconf-add"><p class="title"><strong>Figure&nbsp;16.9.&nbsp;Printer setup</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-add-printer.png" class="rh_docs--zoom" title="Printer Setup"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-add-printer.png" alt="Printer Setup"></a></div></div></div></li><li class="listitem">
								Click <span class="guibutton">Apply</span> to confirm your printer configuration and add the print queue if the settings are correct. Click <span class="guibutton">Back</span> to modify the printer configuration.
							</li><li class="listitem">
								After the changes are applied, a dialog box appears allowing you to print a test page. Click <span class="guibutton">Yes</span> to print a test page now. Alternatively, you can print a test page later as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-printing-test-page" title="16.3.9. Printing a Test Page">Section&nbsp;16.3.9, “Printing a Test Page”</a>.
							</li></ol></div></section><section class="section" id="s1-printing-test-page"><div class="titlepage"><div><div><h3 class="title">16.3.9.&nbsp;Printing a Test Page</h3></div></div></div><p id="proc-Printing_Test_Page">
						After you have set up a printer or changed a printer configuration, print a test page to make sure the printer is functioning properly:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Right-click the printer in the <code class="literal">Printing</code> window and click <code class="literal">Properties</code>.
							</li><li class="listitem">
								In the Properties window, click <code class="literal">Settings</code> on the left.
							</li><li class="listitem">
								On the displayed <code class="literal">Settings</code> tab, click the <span class="guibutton">Print Test Page</span> button.
							</li></ol></div></section><section class="section" id="s1-printing-edit"><div class="titlepage"><div><div><h3 class="title">16.3.10.&nbsp;Modifying Existing Printers</h3></div></div></div><p>
						To delete an existing printer, in the <code class="literal">Print Settings</code> window, select the printer and go to <span class="guimenu">Printer</span> → <span class="guimenuitem"><code class="literal">Delete</code></span>. Confirm the printer deletion. Alternatively, press the <span class="keycap"><strong>Delete</strong></span> key.
					</p><p>
						To set the default printer, right-click the printer in the printer list and click the <code class="literal">Set as Default</code> button in the context menu.
					</p><section class="section" id="the_settings_page"><div class="titlepage"><div><div><h4 class="title">16.3.10.1.&nbsp;The Settings Page</h4></div></div></div><p>
							To change printer driver configuration, double-click the corresponding name in the <code class="literal">Printer</code> list and click the <code class="literal">Settings</code> label on the left to display the <code class="literal">Settings</code> page.
						</p><p>
							You can modify printer settings such as make and model, print a test page, change the device location (URI), and more.
						</p><div class="figure" id="fig-printconf-config1"><p class="title"><strong>Figure&nbsp;16.10.&nbsp;Settings page</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-config1.png" alt="Settings Page"></div></div></div></section><section class="section" id="the_policies_page"><div class="titlepage"><div><div><h4 class="title">16.3.10.2.&nbsp;The Policies Page</h4></div></div></div><p>
							Click the <code class="literal">Policies</code> button on the left to change settings in printer state and print output.
						</p><p>
							You can select the printer states, configure the <code class="literal">Error Policy</code> of the printer (you can decide to abort the print job, retry, or stop it if an error occurs).
						</p><p>
							You can also create a <span class="emphasis"><em>banner page</em></span> (a page that describes aspects of the print job such as the originating printer, the user name from the which the job originated, and the security status of the document being printed): click the <code class="literal">Starting Banner</code> or <code class="literal">Ending Banner</code> drop-down menu and choose the option that best describes the nature of the print jobs (for example, <code class="literal">confidential</code>).
						</p><section class="section" id="sec-Sharing_Printers"><div class="titlepage"><div><div><h5 class="title">16.3.10.2.1.&nbsp;Sharing Printers</h5></div></div></div><p>
								On the <code class="literal">Policies</code> page, you can mark a printer as shared: if a printer is shared, users published on the network can use it. To allow the sharing function for printers, go to <span class="guimenu">Server</span> → <span class="guimenuitem"><code class="literal">Settings</code></span> and select <code class="literal">Publish shared printers connected to this system</code>.
							</p><div class="figure" id="fig-printconf-config2"><p class="title"><strong>Figure&nbsp;16.11.&nbsp;Policies page</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-config2.png" alt="Policies Page"></div></div></div><p>
								Make sure that the firewall allows incoming <code class="literal">TCP</code> connections to port <code class="literal">631</code>, the port for the Network Printing Server (<code class="literal">IPP</code>) protocol. To allow <code class="literal">IPP</code> traffic through the firewall on Red Hat Enterprise Linux 7, make use of <code class="literal">firewalld</code>'s <code class="literal">IPP</code> service. To do so, proceed as follows:
							</p><div class="orderedlist" id="proc-Enabling_IPP_Service_in_firewalld"><p class="title"><strong>Enabling IPP Service in firewalld</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										To start the graphical <span class="strong strong"><strong><span class="application application">firewall-config</span></strong></span> tool, press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">firewall</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <code class="literal">Firewall Configuration</code> window opens. You will be prompted for an administrator or <code class="literal">root</code> password.
									</p><p class="simpara">
										Alternatively, to start the graphical firewall configuration tool using the command line, enter the following command as <code class="literal">root</code> user:
									</p><pre class="literallayout">~]# firewall-config</pre><p class="simpara">
										The <code class="literal">Firewall Configuration</code> window opens.
									</p><p class="simpara">
										Look for the word "Connected" in the lower left corner. This indicates that the <span class="strong strong"><strong><span class="application application">firewall-config</span></strong></span> tool is connected to the user space daemon, <code class="literal">firewalld</code>.
									</p><p class="simpara">
										To immediately change the current firewall settings, ensure the drop-down selection menu labeled <code class="literal">Configuration</code> is set to <code class="literal">Runtime</code>. Alternatively, to edit the settings to be applied at the next system start, or firewall reload, select <code class="literal">Permanent</code> from the drop-down list.
									</p></li><li class="listitem">
										Select the <code class="literal">Zones</code> tab and then select the firewall zone to correspond with the network interface to be used. The default is the <code class="literal">public</code> zone. The <code class="literal">Interfaces</code> tab shows what interfaces have been assigned to a zone.
									</li><li class="listitem">
										Select the <code class="literal">Services</code> tab and then select the <code class="literal">ipp</code> service to enable sharing. The <code class="literal">ipp-client</code> service is required for accessing network printers.
									</li><li class="listitem">
										Close the <span class="strong strong"><strong><span class="application application">firewall-config</span></strong></span> tool.
									</li></ol></div><p>
								For more information on opening and closing ports in <code class="literal">firewalld</code>, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a>.
							</p></section><section class="section" id="sec-The_Access_Control_Page"><div class="titlepage"><div><div><h5 class="title">16.3.10.2.2.&nbsp;The Access Control Page</h5></div></div></div><p>
								You can change user-level access to the configured printer on the <code class="literal">Access Control</code> page. Click the <code class="literal">Access Control</code> label on the left to display the page. Select either <code class="literal">Allow printing for everyone except these users</code> or <code class="literal">Deny printing for everyone except these users</code> and define the user set below: enter the user name in the text box and click the <span class="guibutton">Add</span> button to add the user to the user set.
							</p><div class="figure" id="fig-printconf-config3"><p class="title"><strong>Figure&nbsp;16.12.&nbsp;Access Control page</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-config3.png" alt="Access Control Page"></div></div></div></section><section class="section" id="sec-The_Printer_Options_Page"><div class="titlepage"><div><div><h5 class="title">16.3.10.2.3.&nbsp;The Printer Options Page</h5></div></div></div><p>
								The <code class="literal">Printer Options</code> page contains various configuration options for the printer media and output, and its content may vary from printer to printer. It contains general printing, paper, quality, and printing size settings.
							</p><div class="figure" id="fig-printconf-config4"><p class="title"><strong>Figure&nbsp;16.13.&nbsp;Printer Options page</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-config4.png" alt="Printer Options Page"></div></div></div></section><section class="section" id="sec-Job_Options_Page"><div class="titlepage"><div><div><h5 class="title">16.3.10.2.4.&nbsp;Job Options Page</h5></div></div></div><p>
								On the <code class="literal">Job Options</code> page, you can detail the printer job options. Click the <code class="literal">Job Options</code> label on the left to display the page. Edit the default settings to apply custom job options, such as number of copies, orientation, pages per side, scaling (increase or decrease the size of the printable area, which can be used to fit an oversize print area onto a smaller physical sheet of print medium), detailed text options, and custom job options.
							</p><div class="figure" id="fig-printconf-config5"><p class="title"><strong>Figure&nbsp;16.14.&nbsp;Job Options page</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-config5.png" alt="Job Options Page"></div></div></div></section><section class="section" id="sec-Ink_Toner_Levels_Page"><div class="titlepage"><div><div><h5 class="title">16.3.10.2.5.&nbsp;Ink/Toner Levels Page</h5></div></div></div><p>
								The <code class="literal">Ink/Toner Levels</code> page contains details on toner status if available and printer status messages. Click the <code class="literal">Ink/Toner Levels</code> label on the left to display the page.
							</p><div class="figure" id="mediaobj-printconf-config6"><p class="title"><strong>Figure&nbsp;16.15.&nbsp;Ink/Toner Levels page</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/printconf-config6.png" alt="Ink/Toner Levels Page"></div></div></div></section></section><section class="section" id="s1-printing-managing"><div class="titlepage"><div><div><h4 class="title">16.3.10.3.&nbsp;Managing Print Jobs</h4></div></div></div><p>
							When you send a print job to the printer daemon, such as printing a text file from <span class="strong strong"><strong><span class="application application">Emacs</span></strong></span> or printing an image from <span class="strong strong"><strong><span class="application application">GIMP</span></strong></span>, the print job is added to the print spool queue. The print spool queue is a list of print jobs that have been sent to the printer and information about each print request, such as the status of the request, the job number, and more.
						</p><p>
							During the printing process, the <code class="literal">Printer Status</code> icon appears in the <span class="strong strong"><strong><span class="application application">Notification Area</span></strong></span> on the panel. To check the status of a print job, click the <code class="literal">Printer Status</code>, which displays a window similar to <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-gnome-print-manager-list" title="Figure 16.16. GNOME Print Status">Figure&nbsp;16.16, “GNOME Print Status”</a>.
						</p><div class="figure" id="fig-gnome-print-manager-list"><p class="title"><strong>Figure&nbsp;16.16.&nbsp;GNOME Print Status</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/gnome-print-queue.png" alt="GNOME Print Status"></div></div></div><p>
							To cancel, hold, release, reprint or authenticate a print job, select the job in the <span class="strong strong"><strong><span class="application application">GNOME Print Status</span></strong></span> and on the Job menu, click the respective command.
						</p><p>
							To view the list of print jobs in the print spool from a shell prompt, type the command <code class="literal command">lpstat -o</code>. The last few lines look similar to the following:
						</p><div class="example" id="lpq-example"><p class="title"><strong>Example&nbsp;16.15.&nbsp;Example of <code class="literal command">lpstat -o</code> output</strong></p><div class="example-contents"><pre class="literallayout">$ <code class="literal command">lpstat -o</code>
Charlie-60       twaugh      1024  Tue 08 Feb 2011 16:42:11 GMT
Aaron-61        twaugh      1024  Tue 08 Feb 2011 16:42:44 GMT
Ben-62         root       1024  Tue 08 Feb 2011 16:45:42 GMT</pre></div></div><p>
							If you want to cancel a print job, find the job number of the request with the command <code class="literal command">lpstat -o</code> and then use the command <code class="literal command">cancel <span class="emphasis"><em>job number</em></span></code>. For example, <code class="literal command">cancel 60</code> would cancel the print job in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#lpq-example" title="Example 16.15. Example of lpstat -o output">Example&nbsp;16.15, “Example of <code class="literal command">lpstat -o</code> output”</a>. You cannot cancel print jobs that were started by other users with the <code class="literal command">cancel</code> command. However, you can enforce deletion of such job by issuing the <code class="literal command">cancel -U root <span class="emphasis"><em>job_number</em></span></code> command. To prevent such canceling, change the printer operation policy to <code class="literal">Authenticated</code> to force <code class="literal">root</code> authentication.
						</p><p>
							You can also print a file directly from a shell prompt. For example, the command <code class="literal command">lp sample.txt</code> prints the text file <code class="literal">sample.txt</code>. The print filter determines what type of file it is and converts it into a format the printer can understand.
						</p></section></section><section class="section" id="s1-printing-additional-resources"><div class="titlepage"><div><div><h3 class="title">16.3.11.&nbsp;Additional Resources</h3></div></div></div><p>
						To learn more about printing on Red Hat Enterprise Linux, see the following resources.
					</p><h5 id="brid-Printing-Resources-Installed">Installed Documentation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">lp(1)</code> — The manual page for the <code class="literal command">lp</code> command that allows you to print files from the command line.
							</li><li class="listitem">
								<code class="literal">lpr(1)</code> — The manual page for the <code class="literal command">lpr</code> command that allows you to print files from the command line.
							</li><li class="listitem">
								<code class="literal">cancel(1)</code> — The manual page for the command-line utility to remove print jobs from the print queue.
							</li><li class="listitem">
								<code class="literal">mpage(1)</code> — The manual page for the command-line utility to print multiple pages on one sheet of paper.
							</li><li class="listitem">
								<code class="literal">cupsd(8)</code> — The manual page for the CUPS printer daemon.
							</li><li class="listitem">
								<code class="literal">cupsd.conf(5)</code> — The manual page for the CUPS printer daemon configuration file.
							</li><li class="listitem">
								<code class="literal">classes.conf(5)</code> — The manual page for the class configuration file for CUPS.
							</li><li class="listitem">
								<code class="literal">lpstat(1)</code> — The manual page for the <code class="literal command">lpstat</code> command, which displays status information about classes, jobs, and printers.
							</li></ul></div><h5 id="brid-Printing-Resources-Online">Online Documentation</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="http://www.linuxprinting.org/">http://www.linuxprinting.org/</a> — The OpenPrinting group on the Linux Foundation website contains a large amount of information about printing in Linux.
							</li><li class="listitem">
								<a class="link" href="http://www.cups.org/">http://www.cups.org/</a> — The CUPS website provides documentation, FAQs, and newsgroups about CUPS.
							</li></ul></div></section></section></section><section class="chapter" id="ch-Database_Servers"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;17.&nbsp;Database Servers</h2></div></div></div><p>
				This chapter guides you through the installation and configuration of the <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> server, which is an open source fast and robust database server that is based on MySQL technology. The chapter also describes how to back up <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> data.
			</p><section class="section" id="sect-MariaDB"><div class="titlepage"><div><div><h2 class="title">17.1.&nbsp;MariaDB</h2></div></div></div><p>
					<span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> is a relational database which converts data into structured information and provides an SQL interface for accessing data. It includes multiple storage engines and plug-ins, as well as geographic information system (GIS).
				</p><p>
					Red Hat Enterprise Linux 7 contains <span class="strong strong"><strong><span class="application application">MariaDB 5.5</span></strong></span> as the default implementation of a server from the MySQL databases family. Later versions of the <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> database server are available as Software Collections for Red Hat Enterprise Linux 6 and Red Hat Enterprise Linux 7. For more information about the latest versions, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_software_collections/3/">Release Notes for Red Hat Software Collections</a></span></em></span>.
				</p><section class="section" id="installing-mariadb"><div class="titlepage"><div><div><h3 class="title">17.1.1.&nbsp;Installing the MariaDB server</h3></div></div></div><p>
						To install the <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> server, follow this procedure:
					</p><div class="orderedlist" id="proc-Installing-MariaDB"><p class="title"><strong>Installing the <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> server</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Ensure that the <span class="strong strong"><strong><span class="package package">mariadb</span></strong></span> and <span class="strong strong"><strong><span class="package package">mariadb-server</span></strong></span> packages are installed on the required server:
							</p><pre class="literallayout">~]# yum install mariadb mariadb-server</pre></li><li class="listitem"><p class="simpara">
								Start the <code class="literal">mariadb</code> service:
							</p><pre class="literallayout">~]# systemctl start mariadb.service</pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">mariadb</code> service to start at boot:
							</p><pre class="literallayout">~]# systemctl enable mariadb.service</pre></li></ol></div><section class="section" id="sect-MariaDB-improving-installation-security"><div class="titlepage"><div><div><h4 class="title">17.1.1.1.&nbsp;Improving MariaDB installation security</h4></div></div></div><p>
							You can improve security when installing the <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> server by running the <code class="literal command">mysql_secure_installation</code> command:
						</p><pre class="literallayout">~]# mysql_secure_installation</pre><p>
							This command launches a fully interactive script, which prompts for each step in the process. The script enables to improve security in the following ways:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Setting a password for root accounts
								</li><li class="listitem">
									Removing anonymous users
								</li><li class="listitem">
									Disallowing remote (outside the local host) root logins
								</li><li class="listitem">
									Removing test database
								</li></ul></div></section></section><section class="section" id="configuring-mariadb-for-networking"><div class="titlepage"><div><div><h3 class="title">17.1.2.&nbsp;Configuring the MariaDB server for networking</h3></div></div></div><p>
						To configure the <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> server for networking, use the <code class="literal">[mysqld]</code> section of the <code class="literal">/etc/my.cnf.d/server.cnf</code> file, where you can set the following configuration directives:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								bind-address
							</p><p class="simpara">
								Bind-address is the address on which the server will listen.
							</p><p class="simpara">
								Possible options are: a host name, an IPv4 address, or an IPv6 address.
							</p></li><li class="listitem"><p class="simpara">
								skip-networking
							</p><p class="simpara">
								Possible values are:
							</p><p class="simpara">
								0 - to listen for all clients
							</p><p class="simpara">
								1 - to listen for local clients only
							</p></li><li class="listitem"><p class="simpara">
								port
							</p><p class="simpara">
								The port on which <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> listens for TCP/IP connections.
							</p></li></ul></div></section><section class="section" id="backing-up-mariadb"><div class="titlepage"><div><div><h3 class="title">17.1.3.&nbsp;Backing up MariaDB data</h3></div></div></div><p>
						There are two main ways to back up data from a <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> database:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Logical backup
							</li><li class="listitem">
								Physical backup
							</li></ul></div><section class="section" id="mariadb-logical-backup"><div class="titlepage"><div><div><h4 class="title">17.1.3.1.&nbsp;Logical back up</h4></div></div></div><p>
							Logical backup consists of the SQL statements necessary to restore the data. This type of backup exports information and records in plain text files.
						</p><p>
							The main advantage of logical backup over physical backup is portability and flexibility. The data can be restored on other hardware configurations, <span class="strong strong"><strong><span class="application application">MariaDB</span></strong></span> versions or Database Management System (DBMS), which is not possible with physical backups.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Logical backup can be performed only if the <code class="literal">mariadb.service</code> is running. Logical backup does not include log and configuration files.
							</p></div></div></section><section class="section" id="mariadb-physical-backup"><div class="titlepage"><div><div><h4 class="title">17.1.3.2.&nbsp;Physical back up</h4></div></div></div><p>
							Physical backup consists of copies of files and directories that store the content.
						</p><p>
							Physical backup has the following advantages compared to logical backup:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Output is more compact.
								</li><li class="listitem">
									Backup is smaller in size.
								</li><li class="listitem">
									Backup and restore are faster.
								</li><li class="listitem">
									Backup includes log and configuration files.
								</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Physical backup must be performed when the mariadb.service is not running or all tables in the database are locked to prevent changes during the backup.
							</p></div></div></section></section></section></section><section class="chapter" id="ch-Configuring_NTP_Using_the_chrony_Suite"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;18.&nbsp;Configuring NTP Using the chrony Suite</h2></div></div></div><p>
				Accurate time keeping is important for a number of reasons in IT. In networking for example, accurate time stamps in packets and logs are required. In Linux systems, the <code class="literal">NTP</code> protocol is implemented by a daemon running in user space.
			</p><p>
				The user space daemon updates the system clock running in the kernel. The system clock can keep time by using various clock sources. Usually, the <span class="emphasis"><em>Time Stamp Counter</em></span> (<span class="strong strong"><strong>TSC</strong></span>) is used. The TSC is a CPU register which counts the number of cycles since it was last reset. It is very fast, has a high resolution, and there are no interruptions.
			</p><p>
				There is a choice between the daemons <code class="literal">ntpd</code> and <code class="literal">chronyd</code>, available from the repositories in the <span class="strong strong"><strong><span class="package package">ntp</span></strong></span> and <span class="strong strong"><strong><span class="package package">chrony</span></strong></span> packages respectively.
			</p><p>
				This chapter describes the use of the <span class="strong strong"><strong><span class="application application">chrony</span></strong></span> suite.
			</p><section class="section" id="sect-Introduction_to_the_chrony_Suite"><div class="titlepage"><div><div><h2 class="title">18.1.&nbsp;Introduction to the chrony Suite</h2></div></div></div><p>
					<span class="strong strong"><strong><span class="application application">Chrony</span></strong></span> is an implementation of the Network Time Protocol (NTP). You can use <span class="strong strong"><strong><span class="application application">Chrony</span></strong></span>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							to synchronize the system clock with <code class="literal">NTP</code> servers,
						</li><li class="listitem">
							to synchronize the system clock with a reference clock, for example a GPS receiver,
						</li><li class="listitem">
							to synchronize the system clock with a manual time input,
						</li><li class="listitem">
							as an <code class="literal">NTPv4(RFC 5905)</code> server or peer to provide a time service to other computers in the network.
						</li></ul></div><p>
					<span class="strong strong"><strong><span class="application application">Chrony</span></strong></span> performs well in a wide range of conditions, including intermittent network connections, heavily congested networks, changing temperatures (ordinary computer clocks are sensitive to temperature), and systems that do not run continuously, or run on a virtual machine.
				</p><p>
					Typical accuracy between two machines synchronized over the Internet is within a few milliseconds, and for machines on a LAN within tens of microseconds. Hardware timestamping or a hardware reference clock may improve accuracy between two machines synchronized to a sub-microsecond level.
				</p><p>
					<span class="strong strong"><strong><span class="application application">Chrony</span></strong></span> consists of <code class="literal">chronyd</code>, a daemon that runs in user space, and <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span>, a command line program which can be used to monitor the performance of <code class="literal">chronyd</code> and to change various operating parameters when it is running.
				</p><section class="section" id="sect-differences_between_ntpd_and_chronyd"><div class="titlepage"><div><div><h3 class="title">18.1.1.&nbsp;Differences Between ntpd and chronyd</h3></div></div></div><p>
						Things <code class="literal">chronyd</code> can do better than <code class="literal">ntpd</code>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">chronyd</code> can work well in an environment where access to the time reference is intermittent, whereas <code class="literal">ntpd</code> needs regular polling of time reference to work well.
							</li><li class="listitem">
								<code class="literal">chronyd</code> can perform well even when the network is congested for longer periods of time.
							</li><li class="listitem">
								<code class="literal">chronyd</code> can usually synchronize the clock faster and with better accuracy.
							</li><li class="listitem">
								<code class="literal">chronyd</code> quickly adapts to sudden changes in the rate of the clock, for example, due to changes in the temperature of the crystal oscillator, whereas <code class="literal">ntpd</code> may need a long time to settle down again.
							</li><li class="listitem">
								In the default configuration, <code class="literal">chronyd</code> never steps the time after the clock has been synchronized at system start, in order not to upset other running programs. <code class="literal">ntpd</code> can be configured to never step the time too, but it has to use a different means of adjusting the clock, which has some disadvantages including negative effect on accuracy of the clock.
							</li><li class="listitem">
								<code class="literal">chronyd</code> can adjust the rate of the clock on a Linux system in a larger range, which allows it to operate even on machines with a broken or unstable clock. For example, on some virtual machines.
							</li><li class="listitem">
								<code class="literal">chronyd</code> is smaller, it uses less memory and it wakes up the CPU only when necessary, which is better for power saving.
							</li></ul></div><p>
						Things <code class="literal">chronyd</code> can do that <code class="literal">ntpd</code> cannot do:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">chronyd</code> provides support for isolated networks where the only method of time correction is manual entry. For example, by the administrator looking at a clock. <code class="literal">chronyd</code> can examine the errors corrected at different updates to estimate the rate at which the computer gains or loses time, and use this estimate to adjust the computer clock subsequently.
							</li><li class="listitem">
								<code class="literal">chronyd</code> provides support to work out the rate of gain or loss of the real-time clock, for example the clock that maintains the time when the computer is turned off. It can use this data when the system boots to set the system time using an adapted value of time taken from the real-time clock. These real-time clock facilities are currently only available on Linux systems.
							</li><li class="listitem">
								<code class="literal">chronyd</code> supports hardware timestamping on Linux, which allows extremely accurate synchronization on local networks.
							</li></ul></div><p>
						Things <code class="literal">ntpd</code> can do that <code class="literal">chronyd</code> cannot do:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">ntpd</code> supports all operating modes from <code class="literal">NTP</code> version 4 (<span class="emphasis"><em><span class="citetitle citetitle">RFC 5905</span></em></span>), including broadcast, multicast and manycast clients and servers. Note that the broadcast and multicast modes are, even with authentication, inherently less accurate and less secure than the ordinary server and client mode, and should generally be avoided.
							</li><li class="listitem">
								<code class="literal">ntpd</code> supports the Autokey protocol (<span class="emphasis"><em><span class="citetitle citetitle">RFC 5906</span></em></span>) to authenticate servers with public-key cryptography. Note that the protocol has proven to be insecure and will be probably replaced with an implementation of the Network Time Security (NTS) specification.
							</li><li class="listitem">
								<code class="literal">ntpd</code> includes drivers for many reference clocks, whereas <code class="literal">chronyd</code> relies on other programs, for example <span class="strong strong"><strong><span class="application application">gpsd</span></strong></span>, to access the data from the reference clocks using shared memory (SHM) or Unix domain socket (SOCK).
							</li></ul></div></section><section class="section" id="sect-Choosing_between_NTP_daemon"><div class="titlepage"><div><div><h3 class="title">18.1.2.&nbsp;Choosing Between NTP Daemons</h3></div></div></div><p>
						<span class="strong strong"><strong><span class="application application">Chrony</span></strong></span> should be preferred for all systems except for the systems that are managed or monitored by tools that do not support chrony, or the systems that have a hardware reference clock which cannot be used with chrony.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Systems which are required to perform authentication of packets with the <code class="literal">Autokey</code> protocol, can only be used with <code class="literal">ntpd</code>, because <code class="literal">chronyd</code> does not support this protocol. The <code class="literal">Autokey</code> protocol has serious security issues, and thus using this protocol should be avoided. Instead of <code class="literal">Autokey</code>, use authentication with symmetric keys, which is supported by both <code class="literal">chronyd</code> and <code class="literal">ntpd</code>. <span class="strong strong"><strong><span class="application application">Chrony</span></strong></span> supports stronger hash functions like SHA256 and SHA512, while <code class="literal">ntpd</code> can use only MD5 and SHA1.
						</p></div></div></section></section><section class="section" id="sect-Understanding_chrony_and-its_configuration"><div class="titlepage"><div><div><h2 class="title">18.2.&nbsp;Understanding chrony and Its Configuration</h2></div></div></div><section class="section" id="sect-Understanding_chronyd"><div class="titlepage"><div><div><h3 class="title">18.2.1.&nbsp;Understanding chronyd and chronyc</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">chrony</span></strong></span> daemon, <code class="literal">chronyd</code>, can be monitored and controlled by the command line utility <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span>. This utility provides a command prompt, which allows entering a number of commands to query the current state of <code class="literal">chronyd</code> and make changes to its configuration. By default, <code class="literal">chronyd</code> accepts only commands from a local instance of <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span>, but it can be configured to accept monitoring commands also from remote hosts. The remote access should be restricted.
					</p></section><section class="section" id="sect-Understanding_the_chrony_configuration_commands"><div class="titlepage"><div><div><h3 class="title">18.2.2.&nbsp;Understanding the chrony Configuration Commands</h3></div></div></div><p>
						The default configuration file for <code class="literal">chronyd</code> is <code class="literal">/etc/chrony.conf</code>. The <code class="literal option">-f</code> option can be used to specify an alternate configuration file path. See the <code class="literal">chronyd</code> man page for further options. For a complete list of the directives that can be used see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://chrony.tuxfamily.org/manual.html#Configuration-file">http://chrony.tuxfamily.org/manual.html#Configuration-file</a></span></em></span>.
					</p><p>
						Below is a selection of <code class="literal">chronyd</code> configuration options:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Comments</span></dt><dd>
									Comments should be preceded by #, %, ; or !
								</dd><dt><span class="term">allow</span></dt><dd>
									Optionally specify a host, subnet, or network from which to allow <code class="literal">NTP</code> connections to a machine acting as <code class="literal">NTP</code> server. The default is not to allow connections. Examples:
								</dd></dl></div><pre class="literallayout">allow 192.0.2.0/24</pre><p>
						+ Use this command to grant access to a specific network.
					</p><pre class="literallayout">allow 2001:0db8:85a3::8a2e:0370:7334</pre><p>
						+ Use this this command to grant access to an <code class="literal">IPv6</code>.
					</p><p>
						The UDP port number 123 needs to be open in the firewall in order to allow the client access:
					</p><p>
						+
					</p><pre class="literallayout">~]# firewall-cmd --zone=public --add-port=123/udp</pre><p>
						+ If you want to open port 123 permanently, use the <code class="literal option">--permanent</code> option:
					</p><p>
						+
					</p><pre class="literallayout">~]# firewall-cmd --permanent --zone=public --add-port=123/udp</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">cmdallow</span></dt><dd>
									This is similar to the <code class="literal command">allow</code> directive (see section <code class="literal command">allow</code>), except that it allows control access (rather than <code class="literal">NTP</code> client access) to a particular subnet or host. (By "control access" is meant that <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> can be run on those hosts and successfully connect to <code class="literal">chronyd</code> on this computer.) The syntax is identical. There is also a <code class="literal command">cmddeny all</code> directive with similar behavior to the <code class="literal command">cmdallow all</code> directive.
								</dd><dt><span class="term">dumpdir</span></dt><dd>
									Path to the directory to save the measurement history across restarts of <code class="literal">chronyd</code> (assuming no changes are made to the system clock behavior whilst it is not running). If this capability is to be used (via the <code class="literal command">dumponexit</code> command in the configuration file, or the <code class="literal command">dump</code> command in <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span>), the <code class="literal command">dumpdir</code> command should be used to define the directory where the measurement histories are saved.
								</dd><dt><span class="term">dumponexit</span></dt><dd>
									If this command is present, it indicates that <code class="literal">chronyd</code> should save the measurement history for each of its time sources recorded whenever the program exits. (See the <code class="literal command">dumpdir</code> command above).
								</dd><dt><span class="term">hwtimestamp</span></dt><dd>
									The <code class="literal command">hwtimestamp</code> directive enables hardware timestamping for extremely accurate synchronization. For more details, see <code class="literal">chrony.conf(5)</code> manual page.
								</dd><dt><span class="term">local</span></dt><dd><p class="simpara">
									The <code class="literal command">local</code> keyword is used to allow <code class="literal">chronyd</code> to appear synchronized to real time from the viewpoint of clients polling it, even if it has no current synchronization source. This option is normally used on the "master" computer in an isolated network, where several computers are required to synchronize to one another, and the "master" is kept in line with real time by manual input.
								</p><p class="simpara">
									An example of the command is:
								</p><pre class="literallayout">local stratum 10</pre><p class="simpara">
									A large value of 10 indicates that the clock is so many hops away from a reference clock that its time is unreliable. If the computer ever has access to another computer which is ultimately synchronized to a reference clock, it will almost certainly be at a stratum less than 10. Therefore, the choice of a high value like 10 for the <code class="literal command">local</code> command prevents the machine’s own time from ever being confused with real time, were it ever to leak out to clients that have visibility of real servers.
								</p></dd><dt><span class="term">log</span></dt><dd><p class="simpara">
									The <code class="literal command">log</code> command indicates that certain information is to be logged. It accepts the following options:
								</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">measurements</span></dt><dd>
												This option logs the raw <code class="literal">NTP</code> measurements and related information to a file called <code class="literal">measurements.log</code>.
											</dd><dt><span class="term">statistics</span></dt><dd>
												This option logs information about the regression processing to a file called <code class="literal">statistics.log</code>.
											</dd><dt><span class="term">tracking</span></dt><dd>
												This option logs changes to the estimate of the system’s gain or loss rate, and any slews made, to a file called <code class="literal">tracking.log</code>.
											</dd><dt><span class="term">rtc</span></dt><dd>
												This option logs information about the system’s real-time clock.
											</dd><dt><span class="term">refclocks</span></dt><dd>
												This option logs the raw and filtered reference clock measurements to a file called <code class="literal">refclocks.log</code>.
											</dd><dt><span class="term">tempcomp</span></dt><dd><p class="simpara">
												This option logs the temperature measurements and system rate compensations to a file called <code class="literal">tempcomp.log</code>.
											</p><p class="simpara">
												The log files are written to the directory specified by the <code class="literal command">logdir</code> command.
											</p><p class="simpara">
												An example of the command is:
											</p><pre class="literallayout">log measurements statistics tracking</pre></dd></dl></div></dd><dt><span class="term">logdir</span></dt><dd><p class="simpara">
									This directive allows the directory where log files are written to be specified.
								</p><p class="simpara">
									An example of the use of this directive is:
								</p><pre class="literallayout">logdir /var/log/chrony</pre></dd><dt><span class="term">makestep</span></dt><dd><p class="simpara">
									Normally <code class="literal">chronyd</code> will cause the system to gradually correct any time offset, by slowing down or speeding up the clock as required. In certain situations, the system clock may be so far adrift that this slewing process would take a very long time to correct the system clock. This directive forces <code class="literal">chronyd</code> to step system clock if the adjustment is larger than a threshold value, but only if there were no more clock updates since <code class="literal">chronyd</code> was started than a specified limit (a negative value can be used to disable the limit). This is particularly useful when using reference clock, because the <code class="literal command">initstepslew</code> directive only works with <code class="literal">NTP</code> sources.
								</p><p class="simpara">
									An example of the use of this directive is:
								</p><pre class="literallayout">makestep 1000 10</pre><p class="simpara">
									This would step the system clock if the adjustment is larger than 1000 seconds, but only in the first ten clock updates.
								</p></dd><dt><span class="term">maxchange</span></dt><dd><p class="simpara">
									This directive sets the maximum allowed offset corrected on a clock update. The check is performed only after the specified number of updates to allow a large initial adjustment of the system clock. When an offset larger than the specified maximum occurs, it will be ignored for the specified number of times and then <code class="literal">chronyd</code> will give up and exit (a negative value can be used to never exit). In both cases a message is sent to syslog.
								</p><p class="simpara">
									An example of the use of this directive is:
								</p><pre class="literallayout">maxchange 1000 1 2</pre><p class="simpara">
									After the first clock update, <code class="literal">chronyd</code> will check the offset on every clock update, it will ignore two adjustments larger than 1000 seconds and exit on another one.
								</p></dd><dt><span class="term">maxupdateskew</span></dt><dd><p class="simpara">
									One of <code class="literal">chronyd</code>'s tasks is to work out how fast or slow the computer’s clock runs relative to its reference sources. In addition, it computes an estimate of the error bounds around the estimated value.
								</p><p class="simpara">
									If the range of error is too large, it indicates that the measurements have not settled down yet, and that the estimated gain or loss rate is not very reliable.
								</p><p class="simpara">
									The <code class="literal command">maxupdateskew</code> parameter is the threshold for determining whether an estimate is too unreliable to be used. By default, the threshold is 1000 ppm.
								</p><p class="simpara">
									The format of the syntax is:
								</p><pre class="literallayout">maxupdateskew <span class="emphasis"><em>skew-in-ppm</em></span></pre><p class="simpara">
									Typical values for <span class="emphasis"><em>skew-in-ppm</em></span> might be 100 for a dial-up connection to servers over a telephone line, and 5 or 10 for a computer on a LAN.
								</p><p class="simpara">
									It should be noted that this is not the only means of protection against using unreliable estimates. At all times, <code class="literal">chronyd</code> keeps track of both the estimated gain or loss rate, and the error bound on the estimate. When a new estimate is generated following another measurement from one of the sources, a weighted combination algorithm is used to update the master estimate. So if <code class="literal">chronyd</code> has an existing highly-reliable master estimate and a new estimate is generated which has large error bounds, the existing master estimate will dominate in the new master estimate.
								</p></dd><dt><span class="term">minsources</span></dt><dd><p class="simpara">
									The <code class="literal command">minsources</code> directive sets the minimum number of sources that need to be considered as selectable in the source selection algorithm before the local clock is updated.
								</p><p class="simpara">
									The format of the syntax is:
								</p><pre class="literallayout">minsources <span class="emphasis"><em>number-of-sources</em></span></pre><p class="simpara">
									By default, <span class="emphasis"><em>number-of-sources</em></span> is 1. Setting minsources to a larger number can be used to improve the reliability, because multiple sources will need to correspond with each other.
								</p></dd><dt><span class="term">noclientlog</span></dt><dd>
									This directive, which takes no arguments, specifies that client accesses are not to be logged. Normally they are logged, allowing statistics to be reported using the clients command in <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span>.
								</dd><dt><span class="term">reselectdist</span></dt><dd><p class="simpara">
									When <code class="literal">chronyd</code> selects synchronization source from available sources, it will prefer the one with minimum synchronization distance. However, to avoid frequent reselecting when there are sources with similar distance, a fixed distance is added to the distance for sources that are currently not selected. This can be set with the <code class="literal option">reselectdist</code> option. By default, the distance is 100 microseconds.
								</p><p class="simpara">
									The format of the syntax is:
								</p><pre class="literallayout">reselectdist <span class="emphasis"><em>dist-in-seconds</em></span></pre></dd><dt><span class="term">stratumweight</span></dt><dd><p class="simpara">
									The <code class="literal command">stratumweight</code> directive sets how much distance should be added per stratum to the synchronization distance when <code class="literal">chronyd</code> selects the synchronization source from available sources.
								</p><p class="simpara">
									The format of the syntax is:
								</p><pre class="literallayout">stratumweight <span class="emphasis"><em>dist-in-seconds</em></span></pre><p class="simpara">
									By default, <span class="emphasis"><em>dist-in-seconds</em></span> is 1 millisecond. This means that sources with lower stratum are usually preferred to sources with higher stratum even when their distance is significantly worse. Setting <code class="literal command">stratumweight</code> to 0 makes <code class="literal">chronyd</code> ignore stratum when selecting the source.
								</p></dd><dt><span class="term">rtcfile</span></dt><dd><p class="simpara">
									The <code class="literal command">rtcfile</code> directive defines the name of the file in which <code class="literal">chronyd</code> can save parameters associated with tracking the accuracy of the system’s real-time clock (RTC).
								</p><p class="simpara">
									The format of the syntax is:
								</p><pre class="literallayout">rtcfile /var/lib/chrony/rtc</pre><p class="simpara">
									<code class="literal">chronyd</code> saves information in this file when it exits and when the <code class="literal command">writertc</code> command is issued in <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span>. The information saved is the RTC’s error at some epoch, that epoch (in seconds since January 1 1970), and the rate at which the RTC gains or loses time. Not all real-time clocks are supported as their code is system-specific. Note that if this directive is used then the real-time clock should not be manually adjusted as this would interfere with <span class="strong strong"><strong><span class="application application">chrony</span></strong></span>'s need to measure the rate at which the real-time clock drifts if it was adjusted at random intervals.
								</p></dd><dt><span class="term">rtcsync</span></dt><dd>
									The <code class="literal command">rtcsync</code> directive is present in the <code class="literal">/etc/chrony.conf</code> file by default. This will inform the kernel the system clock is kept synchronized and the kernel will update the real-time clock every 11 minutes.
								</dd></dl></div></section><section class="section" id="sect-Security_with_chronyc"><div class="titlepage"><div><div><h3 class="title">18.2.3.&nbsp;Security with chronyc</h3></div></div></div><p>
						<span class="strong strong"><strong><span class="application application">Chronyc</span></strong></span> can access <code class="literal">chronyd</code> in two ways:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Internet Protocol (IPv4 or IPv6,
							</li><li class="listitem">
								Unix domain socket, which is accessible locally by the <code class="literal">root</code> or chrony user.
							</li></ul></div><p>
						By default, <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> connects to the Unix domain socket. The default path is <code class="literal">/var/run/chrony/chronyd.sock</code>. If this connection fails, which can happen for example when <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> is running under a non-root user, <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> tries to connect to 127.0.0.1 and then ::1.
					</p><p>
						Only the following monitoring commands, which do not affect the behavior of <code class="literal">chronyd</code>, are allowed from the network:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								activity
							</li><li class="listitem">
								manual list
							</li><li class="listitem">
								rtcdata
							</li><li class="listitem">
								smoothing
							</li><li class="listitem">
								sources
							</li><li class="listitem">
								sourcestats
							</li><li class="listitem">
								tracking
							</li><li class="listitem">
								waitsync
							</li></ul></div><p>
						The set of hosts from which <code class="literal">chronyd</code> accepts these commands can be configured with the <code class="literal command">cmdallow</code> directive in the configuration file of <code class="literal">chronyd</code>, or the <code class="literal command">cmdallow</code> command in <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span>. By default, the commands are accepted only from localhost (127.0.0.1 or ::1).
					</p><p>
						All other commands are allowed only through the Unix domain socket. When sent over the network, <code class="literal">chronyd</code> responds with a <code class="literal">Not authorised</code> error, even if it is from localhost.
					</p><div class="orderedlist"><p class="title"><strong>Accessing chronyd remotely with <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span></strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Allow access from both IPv4 and IPv6 addresses by adding the following to the <code class="literal">/etc/chrony.conf</code> file:
							</p><pre class="literallayout">bindcmdaddress 0.0.0.0</pre><p class="simpara">
								or
							</p><pre class="literallayout">bindcmdaddress :</pre></li><li class="listitem"><p class="simpara">
								Allow commands from the remote IP address, network, or subnet by using the <code class="literal command">cmdallow</code> directive.
							</p><div class="informalexample"><p>
								Add the following content to the <code class="literal">/etc/chrony.conf</code> file:
							</p><pre class="literallayout">cmdallow 192.168.1.0/24</pre></div></li><li class="listitem"><p class="simpara">
								Open port 323 in the firewall to connect from a remote system.
							</p><pre class="literallayout">~]# firewall-cmd --zone=public --add-port=323/udp</pre><p class="simpara">
								If you want to open port 323 permanently, use the <code class="literal option">--permanent</code>.
							</p><pre class="literallayout">~]# firewall-cmd --permanent --zone=public --add-port=323/udp</pre></li></ol></div><p>
						Note that the <code class="literal command">allow</code> directive is for <code class="literal">NTP</code> access whereas the <code class="literal command">cmdallow</code> directive is to enable receiving of remote commands. It is possible to make these changes temporarily using <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> running locally. Edit the configuration file to make permanent changes.
					</p></section></section><section class="section" id="sect-Using_chrony"><div class="titlepage"><div><div><h2 class="title">18.3.&nbsp;Using chrony</h2></div></div></div><section class="section" id="sect-Installing_chrony"><div class="titlepage"><div><div><h3 class="title">18.3.1.&nbsp;Installing chrony</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">chrony</span></strong></span> suite is installed by default on some versions of Red Hat Enterprise Linux 7. If required, to ensure that it is, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install chrony</pre><p>
						The default location for the <span class="strong strong"><strong><span class="application application">chrony</span></strong></span> daemon is <code class="literal">/usr/sbin/chronyd</code>. The command line utility will be installed to <code class="literal">/usr/bin/chronyc</code>.
					</p></section><section class="section" id="sect-Checking_the_Status_of_chronyd"><div class="titlepage"><div><div><h3 class="title">18.3.2.&nbsp;Checking the Status of chronyd</h3></div></div></div><p>
						To check the status of <code class="literal">chronyd</code>, issue the following command:
					</p><pre class="literallayout">~]$ <code class="literal command">systemctl status chronyd</code>
chronyd.service - NTP client/server
  Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled)
  Active: active (running) since Wed 2013-06-12 22:23:16 CEST; 11h ago</pre></section><section class="section" id="sect-Starting_chronyd"><div class="titlepage"><div><div><h3 class="title">18.3.3.&nbsp;Starting chronyd</h3></div></div></div><p>
						To start <code class="literal">chronyd</code>, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl start chronyd</pre><p>
						To ensure <code class="literal">chronyd</code> starts automatically at system start, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl enable chronyd</pre></section><section class="section" id="sect-Stopping_chronyd"><div class="titlepage"><div><div><h3 class="title">18.3.4.&nbsp;Stopping chronyd</h3></div></div></div><p>
						To stop <code class="literal">chronyd</code>, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl stop chronyd</pre><p>
						To prevent <code class="literal">chronyd</code> from starting automatically at system start, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl disable chronyd</pre></section><section class="section" id="sect-Checking_if_chrony_is_synchronized"><div class="titlepage"><div><div><h3 class="title">18.3.5.&nbsp;Checking if chrony is Synchronized</h3></div></div></div><p>
						To check if <span class="strong strong"><strong><span class="application application">chrony</span></strong></span> is synchronized, make use of the <code class="literal command">tracking</code>, <code class="literal command">sources</code>, and <code class="literal command">sourcestats</code> commands.
					</p><section class="section" id="sect-Checking_chrony_tracking"><div class="titlepage"><div><div><h4 class="title">18.3.5.1.&nbsp;Checking chrony Tracking</h4></div></div></div><p>
							To check <span class="strong strong"><strong><span class="application application">chrony</span></strong></span> tracking, issue the following command:
						</p><pre class="literallayout">~]$ <code class="literal command">chronyc tracking</code>
Reference ID  : CB00710F (foo.example.net)
Stratum     : 3
Ref time (UTC) : Fri Jan 27 09:49:17 2017
System time   : 0.000006523 seconds slow of NTP time
Last offset   : -0.000006747 seconds
RMS offset   : 0.000035822 seconds
Frequency    : 3.225 ppm slow
Residual freq  : 0.000 ppm
Skew      : 0.129 ppm
Root delay   : 0.013639022 seconds
Root dispersion : 0.001100737 seconds
Update interval : 64.2 seconds
Leap status   : Normal</pre><p>
							The fields are as follows:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Reference ID</span></dt><dd>
										This is the reference ID and name (or <code class="literal">IP</code> address) if available, of the server to which the computer is currently synchronized. Reference ID is a hexadecimal number to avoid confusion with IPv4 addresses.
									</dd><dt><span class="term">Stratum</span></dt><dd>
										The stratum indicates how many hops away from a computer with an attached reference clock we are. Such a computer is a stratum-1 computer, so the computer in the example is two hops away (that is to say, a.b.c is a stratum-2 and is synchronized from a stratum-1).
									</dd><dt><span class="term">Ref time</span></dt><dd>
										This is the time (UTC) at which the last measurement from the reference source was processed.
									</dd><dt><span class="term">System time</span></dt><dd>
										In normal operation, <code class="literal">chronyd</code> never steps the system clock, because any jump in the timescale can have adverse consequences for certain application programs. Instead, any error in the system clock is corrected by slightly speeding up or slowing down the system clock until the error has been removed, and then returning to the system clock’s normal speed. A consequence of this is that there will be a period when the system clock (as read by other programs using the <code class="literal">gettimeofday()</code> system call, or by the date command in the shell) will be different from <code class="literal">chronyd</code>'s estimate of the current true time (which it reports to <code class="literal">NTP</code> clients when it is operating in server mode). The value reported on this line is the difference due to this effect.
									</dd><dt><span class="term">Last offset</span></dt><dd>
										This is the estimated local offset on the last clock update.
									</dd><dt><span class="term">RMS offset</span></dt><dd>
										This is a long-term average of the offset value.
									</dd><dt><span class="term">Frequency</span></dt><dd>
										The "frequency" is the rate by which the system’s clock would be wrong if <code class="literal">chronyd</code> was not correcting it. It is expressed in ppm (parts per million). For example, a value of 1 ppm would mean that when the system’s clock thinks it has advanced 1 second, it has actually advanced by 1.000001 seconds relative to true time.
									</dd><dt><span class="term">Residual freq</span></dt><dd><p class="simpara">
										This shows the "residual frequency" for the currently selected reference source. This reflects any difference between what the measurements from the reference source indicate the frequency should be and the frequency currently being used.
									</p><p class="simpara">
										The reason this is not always zero is that a smoothing procedure is applied to the frequency. Each time a measurement from the reference source is obtained and a new residual frequency computed, the estimated accuracy of this residual is compared with the estimated accuracy (see <code class="literal option">skew</code> next) of the existing frequency value. A weighted average is computed for the new frequency, with weights depending on these accuracies. If the measurements from the reference source follow a consistent trend, the residual will be driven to zero over time.
									</p></dd><dt><span class="term">Skew</span></dt><dd>
										This is the estimated error bound on the frequency.
									</dd><dt><span class="term">Root delay</span></dt><dd>
										This is the total of the network path delays to the stratum-1 computer from which the computer is ultimately synchronized. Root delay values are printed in nanosecond resolution. In certain extreme situations, this value can be negative. (This can arise in a symmetric peer arrangement where the computers’ frequencies are not tracking each other and the network delay is very short relative to the turn-around time at each computer.)
									</dd><dt><span class="term">Root dispersion</span></dt><dd>
										This is the total dispersion accumulated through all the computers back to the stratum-1 computer from which the computer is ultimately synchronized. Dispersion is due to system clock resolution, statistical measurement variations etc. Root dispersion values are printed in nanosecond resolution.
									</dd><dt><span class="term">Leap status</span></dt><dd>
										This is the leap status, which can be Normal, Insert second, Delete second or Not synchronized.
									</dd></dl></div></section><section class="section" id="sect-Checking_chrony_sources"><div class="titlepage"><div><div><h4 class="title">18.3.5.2.&nbsp;Checking chrony Sources</h4></div></div></div><p>
							The sources command displays information about the current time sources that <code class="literal">chronyd</code> is accessing.
						</p><p>
							The optional argument -v can be specified, meaning verbose. In this case, extra caption lines are shown as a reminder of the meanings of the columns.
						</p><pre class="literallayout">~]$ chronyc sources
	210 Number of sources = 3
MS Name/IP address     Stratum Poll Reach LastRx Last sample
===============================================================================
#* GPS0             0  4  377  11  -479ns[ -621ns] +/- 134ns
^? a.b.c             2  6  377  23  -923us[ -924us] +/-  43ms
^+ d.e.f             1  6  377  21 -2629us[-2619us] +/-  86ms</pre><p>
							The columns are as follows:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">M</span></dt><dd>
										This indicates the mode of the source. <code class="literal">^</code> means a server, <code class="literal">=</code> means a peer and <code class="literal">#</code> indicates a locally connected reference clock.
									</dd><dt><span class="term">S</span></dt><dd>
										This column indicates the state of the sources. "*" indicates the source to which <code class="literal">chronyd</code> is currently synchronized. "+" indicates acceptable sources which are combined with the selected source. "-" indicates acceptable sources which are excluded by the combining algorithm. "?" indicates sources to which connectivity has been lost or whose packets do not pass all tests. "x" indicates a clock which <code class="literal">chronyd</code> thinks is a <span class="emphasis"><em>falseticker</em></span> (its time is inconsistent with a majority of other sources). "~" indicates a source whose time appears to have too much variability. The "?" condition is also shown at start-up, until at least 3 samples have been gathered from it.
									</dd><dt><span class="term">Name/IP address</span></dt><dd>
										This shows the name or the <code class="literal">IP</code> address of the source, or reference ID for reference clock.
									</dd><dt><span class="term">Stratum</span></dt><dd>
										This shows the stratum of the source, as reported in its most recently received sample. Stratum 1 indicates a computer with a locally attached reference clock. A computer that is synchronized to a stratum 1 computer is at stratum 2. A computer that is synchronized to a stratum 2 computer is at stratum 3, and so on.
									</dd><dt><span class="term">Poll</span></dt><dd><p class="simpara">
										This shows the rate at which the source is being polled, as a base-2 logarithm of the interval in seconds. Thus, a value of 6 would indicate that a measurement is being made every 64 seconds.
									</p><p class="simpara">
										<code class="literal">chronyd</code> automatically varies the polling rate in response to prevailing conditions.
									</p></dd><dt><span class="term">Reach</span></dt><dd>
										This shows the source’s reach register printed as an octal number. The register has 8 bits and is updated on every received or missed packet from the source. A value of 377 indicates that a valid reply was received for all of the last eight transmissions.
									</dd><dt><span class="term">LastRx</span></dt><dd>
										This column shows how long ago the last sample was received from the source. This is normally in seconds. The letters <code class="literal">m</code>, <code class="literal">h</code>, <code class="literal">d</code> or <code class="literal">y</code> indicate minutes, hours, days or years. A value of 10 years indicates there were no samples received from this source yet.
									</dd><dt><span class="term">Last sample</span></dt><dd>
										This column shows the offset between the local clock and the source at the last measurement. The number in the square brackets shows the actual measured offset. This may be suffixed by <code class="literal">ns</code> (indicating nanoseconds), <code class="literal">us</code> (indicating microseconds), <code class="literal">ms</code> (indicating milliseconds), or <code class="literal">s</code> (indicating seconds). The number to the left of the square brackets shows the original measurement, adjusted to allow for any slews applied to the local clock since. The number following the <code class="literal">+/-</code> indicator shows the margin of error in the measurement. Positive offsets indicate that the local clock is ahead of the source.
									</dd></dl></div></section><section class="section" id="sect-Checking_chrony_Source_Statistics"><div class="titlepage"><div><div><h4 class="title">18.3.5.3.&nbsp;Checking chrony Source Statistics</h4></div></div></div><p>
							The <code class="literal command">sourcestats</code> command displays information about the drift rate and offset estimation process for each of the sources currently being examined by <code class="literal">chronyd</code>.
						</p><p>
							The optional argument <code class="literal option">-v</code> can be specified, meaning verbose. In this case, extra caption lines are shown as a reminder of the meanings of the columns.
						</p><pre class="literallayout">~]$ <code class="literal command">chronyc sourcestats</code>
210 Number of sources = 1
Name/IP Address      NP NR Span Frequency Freq Skew Offset Std Dev
===============================================================================
abc.def.ghi        11  5  46m   -0.001   0.045   1us  25us</pre><p>
							The columns are as follows:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Name/IP address</span></dt><dd>
										This is the name or <code class="literal">IP</code> address of the <code class="literal">NTP</code> server (or peer) or reference ID of the reference clock to which the rest of the line relates.
									</dd><dt><span class="term">NP</span></dt><dd>
										This is the number of sample points currently being retained for the server. The drift rate and current offset are estimated by performing a linear regression through these points.
									</dd><dt><span class="term">NR</span></dt><dd>
										This is the number of runs of residuals having the same sign following the last regression. If this number starts to become too small relative to the number of samples, it indicates that a straight line is no longer a good fit to the data. If the number of runs is too low, <code class="literal">chronyd</code> discards older samples and re-runs the regression until the number of runs becomes acceptable.
									</dd><dt><span class="term">Span</span></dt><dd>
										This is the interval between the oldest and newest samples. If no unit is shown the value is in seconds. In the example, the interval is 46 minutes.
									</dd><dt><span class="term">Frequency</span></dt><dd>
										This is the estimated residual frequency for the server, in parts per million. In this case, the computer’s clock is estimated to be running 1 part in <span class="emphasis"><em>10<sup>9</sup></em></span> slow relative to the server.
									</dd><dt><span class="term">Freq Skew</span></dt><dd>
										This is the estimated error bounds on Freq (again in parts per million).
									</dd><dt><span class="term">Offset</span></dt><dd>
										This is the estimated offset of the source.
									</dd><dt><span class="term">Std Dev</span></dt><dd>
										This is the estimated sample standard deviation.
									</dd></dl></div></section></section><section class="section" id="sect-Manually_Adjusting-the-System_Clock"><div class="titlepage"><div><div><h3 class="title">18.3.6.&nbsp;Manually Adjusting the System Clock</h3></div></div></div><p>
						To step the system clock immediately, bypassing any adjustments in progress by slewing, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# chronyc makestep</pre><p>
						If the <code class="literal command">rtcfile</code> directive is used, the real-time clock should not be manually adjusted. Random adjustments would interfere with <span class="strong strong"><strong><span class="application application">chrony</span></strong></span>'s need to measure the rate at which the real-time clock drifts.
					</p></section></section><section class="section" id="sect-Setting_up_chrony_for_different_environments"><div class="titlepage"><div><div><h2 class="title">18.4.&nbsp;Setting Up chrony for Different Environments</h2></div></div></div><section class="section" id="sect-Setting_up_chrony_for_a_system_in_an_isolated_network"><div class="titlepage"><div><div><h3 class="title">18.4.1.&nbsp;Setting Up chrony for a System in an Isolated Network</h3></div></div></div><p>
						For a network that is never connected to the Internet, one computer is selected to be the master timeserver. The other computers are either direct clients of the master, or clients of clients. On the master, the drift file must be manually set with the average rate of drift of the system clock. If the master is rebooted, it will obtain the time from surrounding systems and calculate an average to set its system clock. Thereafter it resumes applying adjustments based on the drift file. The drift file will be updated automatically when the <code class="literal command">settime</code> command is used.
					</p><p>
						On the system selected to be the master, using a text editor running as <code class="literal">root</code>, edit the <code class="literal">/etc/chrony.conf</code> as follows:
					</p><pre class="literallayout">driftfile /var/lib/chrony/drift
commandkey 1
keyfile /etc/chrony.keys
initstepslew 10 client1 client3 client6
local stratum 8
manual
allow 192.0.2.0</pre><p>
						Where <code class="literal">192.0.2.0</code> is the network or subnet address from which the clients are allowed to connect.
					</p><p>
						On the systems selected to be direct clients of the master, using a text editor running as <code class="literal">root</code>, edit the <code class="literal">/etc/chrony.conf</code> as follows:
					</p><pre class="literallayout">server master
driftfile /var/lib/chrony/drift
logdir /var/log/chrony
log measurements statistics tracking
keyfile /etc/chrony.keys
commandkey 24
local stratum 10
initstepslew 20 master
allow 192.0.2.123</pre><p>
						Where <code class="literal">192.0.2.123</code> is the address of the master, and <code class="literal">master</code> is the host name of the master. Clients with this configuration will resynchronize the master if it restarts.
					</p><p>
						On the client systems which are not to be direct clients of the master, the <code class="literal">/etc/chrony.conf</code> file should be the same except that the <code class="literal option">local</code> and <code class="literal option">allow</code> directives should be omitted.
					</p><p>
						In an Isolated Network, you can also use the <code class="literal command">local</code> directive that enables a local reference mode, which allows <code class="literal">chronyd</code> operating as an NTP server to appear synchronized to real time, even when it was never synchronized or the last update of the clock happened a long time ago.
					</p><p>
						To allow multiple servers in the network to use the same local configuration and to be synchronized to one another, without confusing clients that poll more than one server, use the <code class="literal option">orphan</code> option of the <code class="literal command">local</code> directive which enables the orphan mode. Each server needs to be configured to poll all other servers with <code class="literal command">local</code>. This ensures that only the server with the smallest reference ID has the local reference active and other servers are synchronized to it. When the server fails, another one will take over.
					</p></section></section><section class="section" id="sect-Using_chronyc"><div class="titlepage"><div><div><h2 class="title">18.5.&nbsp;Using chronyc</h2></div></div></div><section class="section" id="sect-Using_chronyc_chronyc_to_control_chronyd"><div class="titlepage"><div><div><h3 class="title">18.5.1.&nbsp;Using chronyc to Control chronyd</h3></div></div></div><p>
						To make changes to the local instance of <code class="literal">chronyd</code> using the command line utility <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> in interactive mode, enter the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# chronyc</pre><p>
						<span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> must run as <code class="literal">root</code> if some of the restricted commands are to be used.
					</p><p>
						The <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> command prompt will be displayed as follows:
					</p><pre class="literallayout">chronyc&gt;</pre><p>
						You can type <code class="literal command">help</code> to list all of the commands.
					</p><p>
						The utility can also be invoked in non-interactive command mode if called together with a command as follows:
					</p><pre class="literallayout"><code class="literal command">chronyc <span class="emphasis"><em>command</em></span></code></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Changes made using <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> are not permanent, they will be lost after a <code class="literal">chronyd</code> restart. For permanent changes, modify <code class="literal">/etc/chrony.conf</code>.
						</p></div></div></section></section><section class="section" id="sect-hw_timestamping"><div class="titlepage"><div><div><h2 class="title">18.6.&nbsp;Chrony with HW timestamping</h2></div></div></div><section class="section" id="s2-definition-hw-timestamping"><div class="titlepage"><div><div><h3 class="title">18.6.1.&nbsp;Understanding Hardware Timestamping</h3></div></div></div><p>
						Hardware timestamping is a feature supported in some Network Interface Controller (NICs) which provides accurate timestamping of incoming and outgoing packets. <code class="literal">NTP</code> timestamps are usually created by the kernel and <span class="strong strong"><strong><span class="application application">chronyd</span></strong></span> with the use of the system clock. However, when HW timestamping is enabled, the NIC uses its own clock to generate the timestamps when packets are entering or leaving the link layer or the physical layer. When used with <code class="literal">NTP</code>, hardware timestamping can significantly improve the accuracy of synchronization. For best accuracy, both <code class="literal">NTP</code> servers and <code class="literal">NTP</code> clients need to use hardware timestamping. Under ideal conditions, a sub-microsecond accuracy may be possible.
					</p><p>
						Another protocol for time synchronization that uses hardware timestamping is <code class="literal">PTP</code>. For further information about <code class="literal">PTP</code>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_PTP_Using_ptp4l" title="Chapter 20. Configuring PTP Using ptp4l">Chapter&nbsp;20, <em>Configuring PTP Using ptp4l</em></a>. Unlike <code class="literal">NTP</code>, <code class="literal">PTP</code> relies on assistance in network switches and routers. If you want to reach the best accuracy of synchronization, use <code class="literal">PTP</code> on networks that have switches and routers with <code class="literal">PTP</code> support, and prefer <code class="literal">NTP</code> on networks that do not have such switches and routers.
					</p></section><section class="section" id="s2-verifying-hw-timestamping"><div class="titlepage"><div><div><h3 class="title">18.6.2.&nbsp;Verifying Support for Hardware Timestamping</h3></div></div></div><p>
						To verify that hardware timestamping with <code class="literal">NTP</code> is supported by an interface, use the <code class="literal command">ethtool -T</code> command. An interface can be used for hardware timestamping with <code class="literal">NTP</code> if <code class="literal command">ethtool</code> lists the <code class="literal">SOF_TIMESTAMPING_TX_HARDWARE</code> and <code class="literal">SOF_TIMESTAMPING_TX_SOFTWARE</code> capabilities and also the <code class="literal">HWTSTAMP_FILTER_ALL</code> filter mode.
					</p><div class="example" id="verifying-hw-timestamping"><p class="title"><strong>Example&nbsp;18.1.&nbsp;Verifying Support for Hardware Timestamping on a Specific Interface</strong></p><div class="example-contents"><pre class="literallayout">~]# ethtool -T eth0</pre><p>
							Output:
						</p><pre class="literallayout">Timestamping parameters for eth0:
Capabilities:
    hardware-transmit   (SOF_TIMESTAMPING_TX_HARDWARE)
    software-transmit   (SOF_TIMESTAMPING_TX_SOFTWARE)
    hardware-receive   (SOF_TIMESTAMPING_RX_HARDWARE)
    software-receive   (SOF_TIMESTAMPING_RX_SOFTWARE)
    software-system-clock (SOF_TIMESTAMPING_SOFTWARE)
    hardware-raw-clock  (SOF_TIMESTAMPING_RAW_HARDWARE)
PTP Hardware Clock: 0
Hardware Transmit Timestamp Modes:
    off          (HWTSTAMP_TX_OFF)
    on          (HWTSTAMP_TX_ON)
Hardware Receive Filter Modes:
    none         (HWTSTAMP_FILTER_NONE)
    all          (HWTSTAMP_FILTER_ALL)
    ptpv1-l4-sync     (HWTSTAMP_FILTER_PTP_V1_L4_SYNC)
    ptpv1-l4-delay-req  (HWTSTAMP_FILTER_PTP_V1_L4_DELAY_REQ)
    ptpv2-l4-sync     (HWTSTAMP_FILTER_PTP_V2_L4_SYNC)
    ptpv2-l4-delay-req  (HWTSTAMP_FILTER_PTP_V2_L4_DELAY_REQ)
    ptpv2-l2-sync     (HWTSTAMP_FILTER_PTP_V2_L2_SYNC)
    ptpv2-l2-delay-req  (HWTSTAMP_FILTER_PTP_V2_L2_DELAY_REQ)
    ptpv2-event      (HWTSTAMP_FILTER_PTP_V2_EVENT)
    ptpv2-sync      (HWTSTAMP_FILTER_PTP_V2_SYNC)
    ptpv2-delay-req    (HWTSTAMP_FILTER_PTP_V2_DELAY_REQ)</pre></div></div></section><section class="section" id="s2-enabling-hw-timestamping"><div class="titlepage"><div><div><h3 class="title">18.6.3.&nbsp;Enabling Hardware Timestamping</h3></div></div></div><p>
						To enable hardware timestamping, use the <code class="literal command">hwtimestamp</code> directive in the <code class="literal">/etc/chrony.conf</code> file. The directive can either specify a single interface, or a wildcard character (<span class="strong strong"><strong>) can be used to enable hardware timestamping on all interfaces that support it. Use the wildcard specification in case that no other application, like [application]*ptp4l</strong></span> from the <span class="strong strong"><strong><span class="package package">linuxptp</span></strong></span> package, is using hardware timestamping on an interface. Multiple <code class="literal command">hwtimestamp</code> directives are allowed in the chrony configuration file.
					</p><div class="example" id="enabling-hardware-timestamping"><p class="title"><strong>Example&nbsp;18.2.&nbsp;Enabling Hardware Timestamping by Using the hwtimestamp Directive</strong></p><div class="example-contents"><pre class="literallayout">hwtimestamp eth0
hwtimestamp eth1
hwtimestamp *</pre></div></div></section><section class="section" id="s2-configuraing-polling-interval"><div class="titlepage"><div><div><h3 class="title">18.6.4.&nbsp;Configuring Client Polling Interval</h3></div></div></div><p>
						The default range of a polling interval (64-1024 seconds) is recommended for servers on the Internet. For local servers and hardware timestamping, a shorter polling interval needs to be configured in order to minimize offset of the system clock.
					</p><p>
						The following directive in <code class="literal">/etc/chrony.conf</code> specifies a local <code class="literal">NTP</code> server using one second polling interval:
					</p><pre class="literallayout">server ntp.local minpoll 0 maxpoll 0</pre></section><section class="section" id="s2-enabling-interleaved-mode"><div class="titlepage"><div><div><h3 class="title">18.6.5.&nbsp;Enabling Interleaved Mode</h3></div></div></div><p>
						<code class="literal">NTP</code> servers that are not hardware <code class="literal">NTP</code> appliances, but rather general purpose computers running a software <code class="literal">NTP</code> implementation, like <span class="strong strong"><strong><span class="application application">chrony</span></strong></span>, will get a hardware transmit timestamp only after sending a packet. This behavior prevents the server from saving the timestamp in the packet to which it corresponds. In order to enable <code class="literal">NTP</code> clients receiving transmit timestamps that were generated after the transmission, configure the clients to use the <code class="literal">NTP</code> interleaved mode by adding the <code class="literal option">xleave</code> option to the server directive in <code class="literal">/etc/chrony.conf</code>:
					</p><pre class="literallayout">server ntp.local minpoll 0 maxpoll 0 xleave</pre></section><section class="section" id="s2-configuration-many-clients"><div class="titlepage"><div><div><h3 class="title">18.6.6.&nbsp;Configuring Server for Large Number of Clients</h3></div></div></div><p>
						The default server configuration allows a few thousands of clients at most to use the interleaved mode concurrently. To configure the server for a larger number of clients, increase the <code class="literal command">clientloglimit</code> directive in <code class="literal">/etc/chrony.conf</code>. This directive specifies the maximum size of memory allocated for logging of clients' access on the server:
					</p><pre class="literallayout">clientloglimit 100000000</pre></section><section class="section" id="s2-verifying-hardware-timestamping"><div class="titlepage"><div><div><h3 class="title">18.6.7.&nbsp;Verifying Hardware Timestamping</h3></div></div></div><p>
						To verify that the interface has successfully enabled hardware timestamping, check the system log. The log should contain a message from <span class="strong strong"><strong><span class="application application">chronyd</span></strong></span> for each interface with successfully enabled hardware timestamping.
					</p><div class="example" id="verifying-hardware-timestamping"><p class="title"><strong>Example&nbsp;18.3.&nbsp;Log Messages for Interfaces with Enabled Hardware Timestamping</strong></p><div class="example-contents"><pre class="literallayout">chronyd[4081]: Enabled HW timestamping on eth0
chronyd[4081]: Enabled HW timestamping on eth1</pre></div></div><p>
						When <span class="strong strong"><strong><span class="application application">chronyd</span></strong></span> is configured as an <code class="literal">NTP</code> client or peer, you can have the transmit and receive timestamping modes and the interleaved mode reported for each <code class="literal">NTP</code> source by the <code class="literal command">chronyc ntpdata</code> command:
					</p><div class="example" id="Report-mode-for-source"><p class="title"><strong>Example&nbsp;18.4.&nbsp;Reporting the Transmit, Receive Timestamping and Interleaved Mode for Each NTP Source</strong></p><div class="example-contents"><pre class="literallayout">~]# chronyc ntpdata</pre><p>
							Output:
						</p><pre class="literallayout">Remote address : 203.0.113.15 (CB00710F)
Remote port   : 123
Local address  : 203.0.113.74 (CB00714A)
Leap status   : Normal
Version     : 4
Mode      : Server
Stratum     : 1
Poll interval  : 0 (1 seconds)
Precision    : -24 (0.000000060 seconds)
Root delay   : 0.000015 seconds
Root dispersion : 0.000015 seconds
Reference ID  : 47505300 (GPS)
Reference time : Wed May 03 13:47:45 2017
Offset     : -0.000000134 seconds
Peer delay   : 0.000005396 seconds
Peer dispersion : 0.000002329 seconds
Response time  : 0.000152073 seconds
Jitter asymmetry: +0.00
NTP tests    : 111 111 1111
Interleaved   : Yes
Authenticated  : No
TX timestamping : Hardware
RX timestamping : Hardware
Total TX    : 27
Total RX    : 27
Total valid RX : 27</pre></div></div><div class="example" id="stability-NTP-measurements"><p class="title"><strong>Example&nbsp;18.5.&nbsp;Reporting the Stability of NTP Measurements</strong></p><div class="example-contents"><pre class="literallayout"># chronyc sourcestats</pre><p>
							With hardware timestamping enabled, stability of <code class="literal">NTP</code> measurements should be in tens or hundreds of nanoseconds, under normal load. This stability is reported in the <code class="literal">Std Dev</code> column of the output of the <code class="literal command">chronyc sourcestats</code> command:
						</p><p>
							Output:
						</p><pre class="literallayout">210 Number of sources = 1
Name/IP Address      NP NR Span Frequency Freq Skew Offset Std Dev
ntp.local         12  7  11   +0.000   0.019   +0ns  49ns</pre></div></div></section><section class="section" id="s2-configuring-PTP-NTP-bridge"><div class="titlepage"><div><div><h3 class="title">18.6.8.&nbsp;Configuring PTP-NTP bridge</h3></div></div></div><p>
						If a highly accurate Precision Time Protocol (<code class="literal">PTP</code>) grandmaster is available in a network that does not have switches or routers with <code class="literal">PTP</code> support, a computer may be dedicated to operate as a <code class="literal">PTP</code> slave and a stratum-1 <code class="literal">NTP</code> server. Such a computer needs to have two or more network interfaces, and be close to the grandmaster or have a direct connection to it. This will ensure highly accurate synchronization in the network.
					</p><p>
						Configure the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> programs from the <span class="strong strong"><strong><span class="package package">linuxptp</span></strong></span> packages to use one interface to synchronize the system clock using <code class="literal">PTP</code>. The configuration is described in the <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_PTP_Using_ptp4l" title="Chapter 20. Configuring PTP Using ptp4l">Chapter&nbsp;20, <em>Configuring PTP Using ptp4l</em></a>. Configure <span class="strong strong"><strong><span class="application application">chronyd</span></strong></span> to provide the system time using the other interface:
					</p><div class="example" id="configuring-NTP-bridge"><p class="title"><strong>Example&nbsp;18.6.&nbsp;Configuring <span class="strong strong"><span class="application application">chronyd</span></span> to Provide the System Time Using the Other Interface</strong></p><div class="example-contents"><pre class="literallayout">bindaddress 203.0.113.74
hwtimestamp eth1
local stratum 1</pre></div></div></section></section><section class="section" id="sect-additional_resources"><div class="titlepage"><div><div><h2 class="title">18.7.&nbsp;Additional Resources</h2></div></div></div><p>
					The following sources of information provide additional resources regarding <span class="strong strong"><strong><span class="application application">chrony</span></strong></span>.
				</p><section class="section" id="s2-chrony-docs-inst"><div class="titlepage"><div><div><h3 class="title">18.7.1.&nbsp;Installed Documentation</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">chronyc(1)</code> man page — Describes the <span class="strong strong"><strong><span class="application application">chronyc</span></strong></span> command-line interface tool including commands and command options.
							</li><li class="listitem">
								<code class="literal">chronyd(8)</code> man page — Describes the <span class="strong strong"><strong><span class="application application">chronyd</span></strong></span> daemon including commands and command options.
							</li><li class="listitem">
								<code class="literal">chrony.conf(5)</code> man page — Describes the <span class="strong strong"><strong><span class="application application">chrony</span></strong></span> configuration file.
							</li></ul></div></section><section class="section" id="s2-chrony_Online_Documentation"><div class="titlepage"><div><div><h3 class="title">18.7.2.&nbsp;Online Documentation</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="http://chrony.tuxfamily.org/doc/3.1/chronyc.html">http://chrony.tuxfamily.org/doc/3.1/chronyc.html</a>
							</li><li class="listitem">
								<a class="link" href="http://chrony.tuxfamily.org/doc/3.1/chronyd.html">http://chrony.tuxfamily.org/doc/3.1/chronyd.html</a>
							</li><li class="listitem">
								<a class="link" href="http://chrony.tuxfamily.org/doc/3.1/chrony.conf.html">http://chrony.tuxfamily.org/doc/3.1/chrony.conf.html</a>
							</li></ul></div><p>
						For answers to FAQs, see <a class="link" href="http://chrony.tuxfamily.org/faq.html">http://chrony.tuxfamily.org/faq.html</a>
					</p></section></section></section><section class="chapter" id="ch-Configuring_NTP_Using_ntpd"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;19.&nbsp;Configuring NTP Using ntpd</h2></div></div></div><section class="section" id="s1-Introduction_to_NTP"><div class="titlepage"><div><div><h2 class="title">19.1.&nbsp;Introduction to NTP</h2></div></div></div><p>
					The <span class="emphasis"><em>Network Time Protocol</em></span> (<span class="strong strong"><strong>NTP</strong></span>) enables the accurate dissemination of time and date information in order to keep the time clocks on networked computer systems synchronized to a common reference over the network or the Internet. Many standards bodies around the world have atomic clocks which may be made available as a reference. The satellites that make up the Global Position System contain more than one atomic clock, making their time signals potentially very accurate. Their signals can be deliberately degraded for military reasons. An ideal situation would be where each site has a server, with its own reference clock attached, to act as a site-wide time server. Many devices which obtain the time and date via low frequency radio transmissions or the Global Position System (GPS) exist. However for most situations, a range of publicly accessible time servers connected to the Internet at geographically dispersed locations can be used. These <code class="literal">NTP</code> servers provide "<span class="emphasis"><em>Coordinated Universal Time</em></span>" (<span class="strong strong"><strong>UTC</strong></span>). Information about these time servers can found at <span class="emphasis"><em><span class="citetitle citetitle">www.pool.ntp.org</span></em></span>.
				</p><p>
					Accurate time keeping is important for a number of reasons in IT. In networking for example, accurate time stamps in packets and logs are required. Logs are used to investigate service and security issues and so time stamps made on different systems must be made by synchronized clocks to be of real value. As systems and networks become increasingly faster, there is a corresponding need for clocks with greater accuracy and resolution. In some countries there are legal obligations to keep accurately synchronized clocks. See <span class="emphasis"><em><span class="citetitle citetitle">www.ntp.org</span></em></span> for more information. In Linux systems, <code class="literal">NTP</code> is implemented by a daemon running in user space. The default <code class="literal">NTP</code> user space daemon in Red Hat Enterprise Linux 7 is <code class="literal">chronyd</code>. It must be disabled if you want to use the <code class="literal">ntpd</code> daemon. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_the_chrony_Suite" title="Chapter 18. Configuring NTP Using the chrony Suite">Chapter&nbsp;18, <em>Configuring NTP Using the chrony Suite</em></a> for information on <span class="strong strong"><strong><span class="application application">chrony</span></strong></span>.
				</p><p>
					The user space daemon updates the system clock, which is a software clock running in the kernel. Linux uses a software clock as its system clock for better resolution than the typical embedded hardware clock referred to as the "<span class="emphasis"><em>Real Time Clock</em></span>" <span class="strong strong"><strong>(RTC)</strong></span>. See the <code class="literal">rtc(4)</code> and <code class="literal">hwclock(8)</code> man pages for information on hardware clocks. The system clock can keep time by using various clock sources. Usually, the <span class="emphasis"><em>Time Stamp Counter</em></span> (<span class="strong strong"><strong>TSC</strong></span>) is used. The TSC is a CPU register which counts the number of cycles since it was last reset. It is very fast, has a high resolution, and there are no interrupts. On system start, the system clock reads the time and date from the RTC. The time kept by the RTC will drift away from actual time by up to 5 minutes per month due to temperature variations. Hence the need for the system clock to be constantly synchronized with external time references. When the system clock is being synchronized by <code class="literal">ntpd</code>, the kernel will in turn update the RTC every 11 minutes automatically.
				</p></section><section class="section" id="s1-NTP_Strata"><div class="titlepage"><div><div><h2 class="title">19.2.&nbsp;NTP Strata</h2></div></div></div><p>
					<code class="literal">NTP</code> servers are classified according to their synchronization distance from the atomic clocks which are the source of the time signals. The servers are thought of as being arranged in layers, or strata, from 1 at the top down to 15. Hence the word stratum is used when referring to a specific layer. Atomic clocks are referred to as Stratum 0 as this is the source, but no Stratum 0 packet is sent on the Internet, all stratum 0 atomic clocks are attached to a server which is referred to as stratum 1. These servers send out packets marked as Stratum 1. A server which is synchronized by means of packets marked stratum <code class="literal">n</code> belongs to the next, lower, stratum and will mark its packets as stratum <code class="literal">n+1</code>. Servers of the same stratum can exchange packets with each other but are still designated as belonging to just the one stratum, the stratum one below the best reference they are synchronized to. The designation Stratum 16 is used to indicate that the server is not currently synchronized to a reliable time source.
				</p><p>
					Note that by default <code class="literal">NTP</code> clients act as servers for those systems in the stratum below them.
				</p><p>
					Here is a summary of the <code class="literal">NTP</code> Strata:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Stratum 0</span></dt><dd><p class="simpara">
								Atomic Clocks and their signals broadcast over Radio and GPS
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										GPS (Global Positioning System)
									</li><li class="listitem">
										Mobile Phone Systems
									</li><li class="listitem"><p class="simpara">
										Low Frequency Radio Broadcasts WWVB (Colorado, USA.), JJY-40 and JJY-60 (Japan), DCF77 (Germany), and MSF (United Kingdom)
									</p><p class="simpara">
										These signals can be received by dedicated devices and are usually connected by RS-232 to a system used as an organizational or site-wide time server.
									</p></li></ul></div></dd><dt><span class="term">Stratum 1</span></dt><dd>
								Computer with radio clock, GPS clock, or atomic clock attached
							</dd><dt><span class="term">Stratum 2</span></dt><dd>
								Reads from stratum 1; Serves to lower strata
							</dd><dt><span class="term">Stratum 3</span></dt><dd>
								Reads from stratum 2; Serves to lower strata
							</dd><dt><span class="term">Stratum <span class="emphasis"><em>n+1</em></span></span></dt><dd>
								Reads from stratum <span class="emphasis"><em>n</em></span>; Serves to lower strata
							</dd><dt><span class="term">Stratum 15</span></dt><dd>
								Reads from stratum 14; This is the lowest stratum.
							</dd></dl></div><p>
					This process continues down to Stratum 15 which is the lowest valid stratum. The label Stratum 16 is used to indicated an unsynchronized state.
				</p></section><section class="section" id="s1-Understanding_NTP"><div class="titlepage"><div><div><h2 class="title">19.3.&nbsp;Understanding NTP</h2></div></div></div><p>
					The version of <code class="literal">NTP</code> used by Red Hat Enterprise Linux is as described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc1305">RFC 1305 Network Time Protocol (Version 3) Specification, Implementation and Analysis</a></span></em></span> and <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc5905">RFC 5905 Network Time Protocol Version 4: Protocol and Algorithms Specification</a></span></em></span>
				</p><p>
					This implementation of <code class="literal">NTP</code> enables sub-second accuracy to be achieved. Over the Internet, accuracy to 10s of milliseconds is normal. On a Local Area Network (LAN), 1 ms accuracy is possible under ideal conditions. This is because clock drift is now accounted and corrected for, which was not done in earlier, simpler, time protocol systems. A resolution of 233 picoseconds is provided by using 64-bit time stamps. The first 32-bits of the time stamp is used for seconds, the last 32-bits are used for fractions of seconds.
				</p><p>
					<code class="literal">NTP</code> represents the time as a count of the number of seconds since 00:00 (midnight) 1 January, 1900 GMT. As 32-bits is used to count the seconds, this means the time will "roll over" in 2036. However <code class="literal">NTP</code> works on the difference between time stamps so this does not present the same level of problem as other implementations of time protocols have done. If a hardware clock that is within 68 years of the correct time is available at boot time then <code class="literal">NTP</code> will correctly interpret the current date. The <code class="literal">NTP4</code> specification provides for an "Era Number" and an "Era Offset" which can be used to make software more robust when dealing with time lengths of more than 68 years. Do not confuse this with the Unix Year 2038 problem.
				</p><p>
					The <code class="literal">NTP</code> protocol provides additional information to improve accuracy. Four time stamps are used to allow the calculation of round-trip time and server response time. In order for a system in its role as <code class="literal">NTP</code> client to synchronize with a reference time server, a packet is sent with an "originate time stamp". When the packet arrives, the time server adds a "receive time stamp". After processing the request for time and date information and just before returning the packet, it adds a "transmit time stamp". When the returning packet arrives at the <code class="literal">NTP</code> client, a "receive time stamp" is generated. The client can now calculate the total round trip time and by subtracting the processing time derive the actual traveling time. By assuming the outgoing and return trips take equal time, the single-trip delay in receiving the <code class="literal">NTP</code> data is calculated. The full <code class="literal">NTP</code> algorithm is much more complex than presented here.
				</p><p>
					When a packet containing time information is received it is not immediately responded to, but is first subject to validation checks and then processed together with several other time samples to arrive at an estimate of the time. This is then compared to the system clock to determine the time offset, the difference between the system clock’s time and what <code class="literal">ntpd</code> has determined the time should be. The system clock is adjusted slowly, at most at a rate of 0.5 ms per second, to reduce this offset by changing the frequency of the counter being used. It will take at least 2000 seconds to adjust the clock by 1 second using this method. This slow change is referred to as slewing and cannot go backwards. If the time offset of the clock is more than 128 ms (the default setting), <code class="literal">ntpd</code> can "step" the clock forwards or backwards. If the time offset at system start is greater than 1000 seconds then the user, or an installation script, should make a manual adjustment. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Configuring_the_Date_and_Time" title="Chapter 3. Configuring the Date and Time">Chapter&nbsp;3, <em>Configuring the Date and Time</em></a>. With the <code class="literal option">-g</code> option to the <code class="literal command">ntpd</code> command (used by default), any offset at system start will be corrected, but during normal operation only offsets of up to 1000 seconds will be corrected.
				</p><p>
					Some software may fail or produce an error if the time is changed backwards. For systems that are sensitive to step changes in the time, the threshold can be changed to 600 s instead of 128 ms using the <code class="literal option">-x</code> option (unrelated to the <code class="literal option">-g</code> option). Using the <code class="literal option">-x</code> option to increase the stepping limit from 0.128 s to 600 s has a drawback because a different method of controlling the clock has to be used. It disables the kernel clock discipline and may have a negative impact on the clock accuracy. The <code class="literal option">-x</code> option can be added to the <code class="literal">/etc/sysconfig/ntpd</code> configuration file.
				</p></section><section class="section" id="s1-Understanding_the_Drift_File"><div class="titlepage"><div><div><h2 class="title">19.4.&nbsp;Understanding the Drift File</h2></div></div></div><p>
					The drift file is used to store the frequency offset between the system clock running at its nominal frequency and the frequency required to remain in synchronization with UTC. If present, the value contained in the drift file is read at system start and used to correct the clock source. Use of the drift file reduces the time required to achieve a stable and accurate time. The value is calculated, and the drift file replaced, once per hour by <code class="literal">ntpd</code>. The drift file is replaced, rather than just updated, and for this reason the drift file must be in a directory for which the <code class="literal">ntpd</code> has write permissions.
				</p></section><section class="section" id="s1-UTC_timezones_and_DST"><div class="titlepage"><div><div><h2 class="title">19.5.&nbsp;UTC, Timezones, and DST</h2></div></div></div><p>
					As <code class="literal">NTP</code> is entirely in UTC (Universal Time, Coordinated), Timezones and DST (Daylight Saving Time) are applied locally by the system. The file <code class="literal">/etc/localtime</code> is a copy of, or symlink to, a zone information file from <code class="literal">/usr/share/zoneinfo</code>. The RTC may be in localtime or in UTC, as specified by the 3rd line of <code class="literal">/etc/adjtime</code>, which will be one of LOCAL or UTC to indicate how the RTC clock has been set. Users can easily change this setting using the checkbox <code class="literal">System Clock Uses UTC</code> in the <span class="strong strong"><strong><span class="application application">Date and Time</span></strong></span> graphical configuration tool. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Configuring_the_Date_and_Time" title="Chapter 3. Configuring the Date and Time">Chapter&nbsp;3, <em>Configuring the Date and Time</em></a> for information on how to use that tool. Running the RTC in UTC is recommended to avoid various problems when daylight saving time is changed.
				</p><p>
					The operation of <code class="literal">ntpd</code> is explained in more detail in the man page <code class="literal">ntpd(8)</code>. The resources section lists useful sources of information. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-ntpd_additional-resources" title="19.20. Additional Resources">Section&nbsp;19.20, “Additional Resources”</a>.
				</p></section><section class="section" id="s1-Authentication_Options_for_NTP"><div class="titlepage"><div><div><h2 class="title">19.6.&nbsp;Authentication Options for NTP</h2></div></div></div><p>
					<code class="literal">NTPv4</code> NTPv4 added support for the Autokey Security Architecture, which is based on public asymmetric cryptography while retaining support for symmetric key cryptography. The Autokey protocol is described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc5906"> RFC 5906 Network Time Protocol Version 4: Autokey Specification</a></span></em></span>. Unfortunately, it was found later that the protocol has serious security issues, and thus Red Hat strongly recommends to use symmetric keys instead. The man page <code class="literal">ntp_auth(5)</code> describes the authentication options and commands for <code class="literal">ntpd</code>.
				</p><p>
					An attacker on the network can attempt to disrupt a service by sending <code class="literal">NTP</code> packets with incorrect time information. On systems using the public pool of <code class="literal">NTP</code> servers, this risk is mitigated by having more than three <code class="literal">NTP</code> servers in the list of public <code class="literal">NTP</code> servers in <code class="literal">/etc/ntp.conf</code>. If only one time source is compromised or spoofed, <code class="literal">ntpd</code> will ignore that source. You should conduct a risk assessment and consider the impact of incorrect time on your applications and organization. If you have internal time sources you should consider steps to protect the network over which the <code class="literal">NTP</code> packets are distributed. If you conduct a risk assessment and conclude that the risk is acceptable, and the impact to your applications minimal, then you can choose not to use authentication.
				</p><p>
					The broadcast and multicast modes require authentication by default. If you have decided to trust the network then you can disable authentication by using <code class="literal command">disable auth</code> directive in the <code class="literal">ntp.conf</code> file. Alternatively, authentication needs to be configured by using SHA1 or MD5 symmetric keys, or by public (asymmetric) key cryptography using the Autokey scheme. The Autokey scheme for asymmetric cryptography is explained in the <code class="literal">ntp_auth(8)</code> man page and the generation of keys is explained in <code class="literal">ntp-keygen(8</code>). To implement symmetric key cryptography, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configuring_Symmetric_Authentication_Using_a_Key" title="19.17.12. Configuring Symmetric Authentication Using a Key">Section&nbsp;19.17.12, “Configuring Symmetric Authentication Using a Key”</a> for an explanation of the <code class="literal option">key</code> option.
				</p></section><section class="section" id="s1-Managing_the_Time_on_Virtual_Machines"><div class="titlepage"><div><div><h2 class="title">19.7.&nbsp;Managing the Time on Virtual Machines</h2></div></div></div><p>
					Virtual machines cannot access a real hardware clock and a virtual clock is not stable enough as the stability is dependent on the host systems work load. For this reason, para-virtualized clocks should be provided by the virtualization application in use. On Red Hat Enterprise Linux with <span class="strong strong"><strong><span class="application application">KVM</span></strong></span> the default clock source is <code class="literal option">kvm-clock</code>. See the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Deployment_and_Administration_Guide/chap-KVM_guest_timing_management.html">KVM guest timing management</a></span></em></span> chapter of the <span class="emphasis"><em><span class="citetitle citetitle">Red Hat Enterprise Linux 7 Virtualization Deployment and Administration Guide</span></em></span>.
				</p></section><section class="section" id="s1-Understanding_Leap_Seconds"><div class="titlepage"><div><div><h2 class="title">19.8.&nbsp;Understanding Leap Seconds</h2></div></div></div><p>
					Greenwich Mean Time (GMT) was derived by measuring the solar day, which is dependent on the Earth’s rotation. When atomic clocks were first made, the potential for more accurate definitions of time became possible. In 1958, International Atomic Time (TAI) was introduced based on the more accurate and very stable atomic clocks. A more accurate astronomical time, Universal Time 1 (UT1), was also introduced to replace GMT. The atomic clocks are in fact far more stable than the rotation of the Earth and so the two times began to drift apart. For this reason UTC was introduced as a practical measure. It is kept within one second of UT1 but to avoid making many small trivial adjustments it was decided to introduce the concept of a <span class="emphasis"><em>leap second</em></span> in order to reconcile the difference in a manageable way. The difference between UT1 and UTC is monitored until they drift apart by more than half a second. Then only is it deemed necessary to introduce a one second adjustment, forward or backward. Due to the erratic nature of the Earth’s rotational speed, the need for an adjustment cannot be predicted far into the future. The decision as to when to make an adjustment is made by the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.iers.org/">International Earth Rotation and Reference Systems Service (IERS)</a></span></em></span>. However, these announcements are important only to administrators of Stratum 1 servers because <code class="literal">NTP</code> transmits information about pending leap seconds and applies them automatically.
				</p></section><section class="section" id="s1-Understanding_the_ntpd_Configuration_File"><div class="titlepage"><div><div><h2 class="title">19.9.&nbsp;Understanding the ntpd Configuration File</h2></div></div></div><p>
					The daemon, <code class="literal">ntpd</code>, reads the configuration file at system start or when the service is restarted. The default location for the file is <code class="literal">/etc/ntp.conf</code> and you can view the file by entering the following command:
				</p><pre class="literallayout">~]$ <code class="literal command">less /etc/ntp.conf</code></pre><p>
					The configuration commands are explained briefly later in this chapter, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configure_NTP" title="19.17. Configure NTP">Section&nbsp;19.17, “Configure NTP”</a>, and more verbosely in the <code class="literal">ntp.conf(5)</code> man page.
				</p><p>
					Here follows a brief explanation of the contents of the default configuration file:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The driftfile entry</span></dt><dd><p class="simpara">
								A path to the drift file is specified, the default entry on Red Hat Enterprise Linux is:
							</p><pre class="literallayout">driftfile /var/lib/ntp/drift</pre><p class="simpara">
								If you change this be certain that the directory is writable by <code class="literal">ntpd</code>. The file contains one value used to adjust the system clock frequency after every system or service start. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Understanding_the_Drift_File" title="19.4. Understanding the Drift File">Understanding the Drift File</a> for more information.
							</p></dd><dt><span class="term">The access control entries</span></dt><dd><p class="simpara">
								The following line sets the default access control restriction:
							</p><pre class="literallayout">restrict default nomodify notrap nopeer noquery</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal option">nomodify</code> options prevents any changes to the configuration.
									</li><li class="listitem">
										The <code class="literal option">notrap</code> option prevents <code class="literal">ntpdc</code> control message protocol traps.
									</li><li class="listitem">
										The <code class="literal option">nopeer</code> option prevents a peer association being formed.
									</li><li class="listitem"><p class="simpara">
										The <code class="literal option">noquery</code> option prevents <code class="literal">ntpq</code> and <code class="literal">ntpdc</code> queries, but not time queries, from being answered.
									</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
											The <code class="literal">ntpq</code> and <code class="literal">ntpdc</code> queries can be used in amplification attacks, therefore do not remove the <code class="literal option">noquery</code> option from the <code class="literal command">restrict default</code> command on publicly accessible systems.
										</p><p>
											See <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/security/cve/CVE-2013-5211">CVE-2013-5211</a></span></em></span> for more details.
										</p></div></div><p class="simpara">
										Addresses within the range <code class="literal">127.0.0.0/8</code> are sometimes required by various processes or applications. As the "restrict default" line above prevents access to everything not explicitly allowed, access to the standard loopback address for <code class="literal">IPv4</code> and <code class="literal">IPv6</code> is permitted by means of the following lines:
									</p><pre class="literallayout"># the administrative functions.
restrict 127.0.0.1
restrict ::1</pre><p class="simpara">
										Addresses can be added underneath if specifically required by another application.
									</p><p class="simpara">
										Hosts on the local network are not permitted because of the "restrict default" line above. To change this, for example to allow hosts from the <code class="literal">192.0.2.0/24</code> network to query the time and statistics but nothing more, a line in the following format is required:
									</p><pre class="literallayout">restrict 192.0.2.0 mask 255.255.255.0 nomodify notrap nopeer</pre><p class="simpara">
										To allow unrestricted access from a specific host, for example <code class="literal">192.0.2.250/32</code>, a line in the following format is required:
									</p><pre class="literallayout">restrict 192.0.2.250</pre><p class="simpara">
										A mask of <code class="literal">255.255.255.255</code> is applied if none is specified.
									</p><p class="simpara">
										The restrict commands are explained in the <code class="literal">ntp_acc(5)</code> man page.
									</p></li></ul></div></dd><dt><span class="term">The public servers entry</span></dt><dd><p class="simpara">
								By default, the <code class="literal">ntp.conf</code> file contains four public server entries:
							</p><pre class="literallayout">server 0.rhel.pool.ntp.org iburst
server 1.rhel.pool.ntp.org iburst
server 2.rhel.pool.ntp.org iburst
server 3.rhel.pool.ntp.org iburst</pre></dd><dt><span class="term">The broadcast multicast servers entry</span></dt><dd>
								By default, the <code class="literal">ntp.conf</code> file contains some commented out examples. These are largely self explanatory. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Configure_NTP" title="19.17. Configure NTP">Section&nbsp;19.17, “Configure NTP”</a> for the explanation of the specific commands. If required, add your commands just below the examples.
							</dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When the <code class="literal">DHCP</code> client program, <span class="strong strong"><strong><span class="application application">dhclient</span></strong></span>, receives a list of <code class="literal">NTP</code> servers from the <code class="literal">DHCP</code> server, it adds them to <code class="literal">ntp.conf</code> and restarts the service. To disable that feature, add <code class="literal command">PEERNTP=no</code> to <code class="literal">/etc/sysconfig/network</code>.
					</p></div></div></section><section class="section" id="s1-Understanding_the_ntpd_Sysconfig_File"><div class="titlepage"><div><div><h2 class="title">19.10.&nbsp;Understanding the ntpd Sysconfig File</h2></div></div></div><p>
					The file will be read by the <code class="literal">ntpd</code> init script on service start. The default contents is as follows:
				</p><pre class="literallayout"># Command line options for ntpd
OPTIONS="-g"</pre><p>
					The <code class="literal option">-g</code> option enables <code class="literal">ntpd</code> to ignore the offset limit of 1000 s and attempt to synchronize the time even if the offset is larger than 1000 s, but only on system start. Without that option <span class="strong strong"><strong><span class="application application">ntpd</span></strong></span> will exit if the time offset is greater than 1000 s. It will also exit after system start if the service is restarted and the offset is greater than 1000 s even with the <code class="literal option">-g</code> option.
				</p></section><section class="section" id="s1-Disabling_chrony"><div class="titlepage"><div><div><h2 class="title">19.11.&nbsp;Disabling chrony</h2></div></div></div><p>
					In order to use <code class="literal">ntpd</code> the default user space daemon, <code class="literal">chronyd</code>, must be stopped and disabled. Issue the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# systemctl stop chronyd</pre><p>
					To prevent it restarting at system start, issue the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# systemctl disable chronyd</pre><p>
					To check the status of <code class="literal">chronyd</code>, issue the following command:
				</p><pre class="literallayout">~]$ <code class="literal command">systemctl status chronyd</code></pre></section><section class="section" id="s1-Checking_if_the_NTP_Daemon_is_Installed"><div class="titlepage"><div><div><h2 class="title">19.12.&nbsp;Checking if the NTP Daemon is Installed</h2></div></div></div><p>
					To check if <code class="literal">ntpd</code> is installed, enter the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# yum install ntp</pre><p>
					<code class="literal">NTP</code> is implemented by means of the daemon or service <code class="literal">ntpd</code>, which is contained within the <span class="strong strong"><strong><span class="package package">ntp</span></strong></span> package.
				</p></section><section class="section" id="s1-Installing_the_NTP_Daemon_ntpd"><div class="titlepage"><div><div><h2 class="title">19.13.&nbsp;Installing the NTP Daemon (ntpd)</h2></div></div></div><p>
					To install <code class="literal">ntpd</code>, enter the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# yum install ntp</pre><p>
					To enable <code class="literal">ntpd</code> at system start, enter the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# systemctl enable ntpd</pre></section><section class="section" id="s1-Checking_the_Status_of_NTP"><div class="titlepage"><div><div><h2 class="title">19.14.&nbsp;Checking the Status of NTP</h2></div></div></div><p>
					To check if <code class="literal">ntpd</code> is running and configured to run at system start, issue the following command:
				</p><pre class="literallayout">~]$ <code class="literal command">systemctl status ntpd</code></pre><p>
					To obtain a brief status report from <code class="literal">ntpd</code>, issue the following command:
				</p><pre class="literallayout">~]$ <code class="literal command">ntpstat</code>
unsynchronised
 time server re-starting
  polling server every 64 s</pre><pre class="literallayout">~]$ <code class="literal command">ntpstat</code>
synchronised to NTP server (10.5.26.10) at stratum 2
  time correct to within 52 ms
  polling server every 1024 s</pre></section><section class="section" id="s1-Configure_the_Firewall_to_Allow_Incoming_NTP_Packets"><div class="titlepage"><div><div><h2 class="title">19.15.&nbsp;Configure the Firewall to Allow Incoming NTP Packets</h2></div></div></div><p>
					The <code class="literal">NTP</code> traffic consists of <code class="literal">UDP</code> packets on port <code class="literal">123</code> and needs to be permitted through network and host-based firewalls in order for <code class="literal">NTP</code> to function.
				</p><p>
					Check if the firewall is configured to allow incoming <code class="literal">NTP</code> traffic for clients using the graphical <span class="strong strong"><strong><span class="application application">Firewall Configuration</span></strong></span> tool.
				</p><p>
					To start the graphical <span class="strong strong"><strong><span class="application application">firewall-config</span></strong></span> tool, press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">firewall</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <code class="literal">Firewall Configuration</code> window opens. You will be prompted for your user password.
				</p><p>
					To start the graphical firewall configuration tool using the command line, enter the following command as <code class="literal">root</code> user:
				</p><pre class="literallayout">~]# firewall-config</pre><p>
					The <code class="literal">Firewall Configuration</code> window opens. Note, this command can be run as normal user but you will then be prompted for the <code class="literal">root</code> password from time to time.
				</p><p>
					Look for the word "Connected" in the lower left corner. This indicates that the <span class="strong strong"><strong><span class="application application">firewall-config</span></strong></span> tool is connected to the user space daemon, <code class="literal">firewalld</code>.
				</p><section class="section" id="s2-Change_the_firewall_settings"><div class="titlepage"><div><div><h3 class="title">19.15.1.&nbsp;Change the Firewall Settings</h3></div></div></div><p>
						To immediately change the current firewall settings, ensure the drop-down selection menu labeled <code class="literal">Configuration</code> is set to <code class="literal">Runtime</code>. Alternatively, to edit the settings to be applied at the next system start, or firewall reload, select <code class="literal">Permanent</code> from the drop-down list.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When making changes to the firewall settings in <code class="literal">Runtime</code> mode, your selection takes immediate effect when you set or clear the check box associated with the service. You should keep this in mind when working on a system that may be in use by other users.
						</p><p>
							When making changes to the firewall settings in <code class="literal">Permanent</code> mode, your selection will only take effect when you reload the firewall or the system restarts. To reload the firewall, select the Options menu and select <code class="literal">Reload Firewall</code>.
						</p></div></div></section><section class="section" id="s2-Open_Ports_in_the_firewall_for_ntp_packets"><div class="titlepage"><div><div><h3 class="title">19.15.2.&nbsp;Open Ports in the Firewall for NTP Packets</h3></div></div></div><p>
						To permit traffic through the firewall to a certain port, start the <span class="strong strong"><strong><span class="application application">firewall-config</span></strong></span> tool and select the network zone whose settings you want to change. Select the <code class="literal">Ports</code> tab and then click the <span class="guibutton">Add</span> button. The <code class="literal">Port and Protocol</code> window opens.
					</p><p>
						Enter the port number <code class="literal">123</code> and select <code class="literal">udp</code> from the drop-down list.
					</p></section></section><section class="section" id="s1-Configure_ntpdate_Servers"><div class="titlepage"><div><div><h2 class="title">19.16.&nbsp;Configure ntpdate Servers</h2></div></div></div><p>
					The purpose of the <code class="literal">ntpdate</code> service is to set the clock during system boot. This was used previously to ensure that the services started after <code class="literal">ntpdate</code> would have the correct time and not observe a jump in the clock. The use of <code class="literal">ntpdate</code> and the list of step-tickers is considered deprecated and so Red Hat Enterprise Linux 7 uses the <code class="literal option">-g</code> option to the <code class="literal command">ntpd</code> command and not <code class="literal">ntpdate</code> by default.
				</p><p>
					The <code class="literal">ntpdate</code> service in Red Hat Enterprise Linux 7 is beneficial if it is used without the <code class="literal">ntpd service</code> or when the <code class="literal option">-x</code> option is specified for the <code class="literal command">ntpd</code> command. If <code class="literal command">ntpd</code> is used with <code class="literal option">-x</code> but without the <code class="literal">ntpdate</code> service enabled, the clock is corrected by step only if the time difference is larger than 600 seconds. With a smaller offset than 600 seconds, the clock is adjusted slowly, approximately 2000 seconds for every corrected second.
				</p><p>
					To check if the <code class="literal">ntpdate</code> service is enabled to run at system start, issue the following command:
				</p><pre class="literallayout">~]$ <code class="literal command">systemctl status ntpdate</code></pre><p>
					To enable the service to run at system start, issue the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# systemctl enable ntpdate</pre><p>
					In Red Hat Enterprise Linux 7 the default <code class="literal">/etc/ntp/step-tickers</code> file contains <code class="literal">0.rhel.pool.ntp.org</code>. To configure additional <code class="literal">ntpdate</code> servers, using a text editor running as <code class="literal">root</code>, edit <code class="literal">/etc/ntp/step-tickers</code>. The number of servers listed is not very important as <code class="literal">ntpdate</code> will only use this to obtain the date information once when the system is starting. If you have an internal time server then use that host name for the first line. An additional host on the second line as a backup is sensible. The selection of backup servers and whether the second host is internal or external depends on your risk assessment. For example, what is the chance of any problem affecting the first server also affecting the second server? Would connectivity to an external server be more likely to be available than connectivity to internal servers in the event of a network failure disrupting access to the first server?
				</p></section><section class="section" id="s1-Configure_NTP"><div class="titlepage"><div><div><h2 class="title">19.17.&nbsp;Configure NTP</h2></div></div></div><p>
					To change the default configuration of the <code class="literal">NTP</code> service, use a text editor running as <code class="literal">root</code> user to edit the <code class="literal">/etc/ntp.conf</code> file. This file is installed together with <code class="literal">ntpd</code> and is configured to use time servers from the Red Hat pool by default. The man page <code class="literal">ntp.conf(5)</code> describes the command options that can be used in the configuration file apart from the access and rate limiting commands which are explained in the <code class="literal">ntp_acc(5)</code> man page.
				</p><section class="section" id="s2-Configure_Access_Control_to_an_NTP_service"><div class="titlepage"><div><div><h3 class="title">19.17.1.&nbsp;Configure Access Control to an NTP Service</h3></div></div></div><p>
						To restrict or control access to the <code class="literal">NTP</code> service running on a system, make use of the <code class="literal command">restrict</code> command in the <code class="literal">ntp.conf</code> file. See the commented out example:
					</p><pre class="literallayout"># Hosts on local network are less restricted.
#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</pre><p>
						The <code class="literal command">restrict</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">restrict</code> <span class="emphasis"><em>address</em></span> [mask <span class="emphasis"><em>mask</em></span>] <span class="emphasis"><em>option</em></span></pre><p>
						where <span class="emphasis"><em>address</em></span> and <span class="emphasis"><em>mask</em></span> specify the IP addresses to which you want to apply the restriction, and <span class="emphasis"><em>option</em></span> is one or more of:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal option">ignore</code> — All packets will be ignored, including <code class="literal">ntpq</code> and <code class="literal">ntpdc</code> queries.
							</li><li class="listitem">
								<code class="literal option">kod</code> — a "Kiss-o'-death" packet is to be sent to reduce unwanted queries.
							</li><li class="listitem">
								<code class="literal option">limited</code> — do not respond to time service requests if the packet violates the rate limit default values or those specified by the <code class="literal command">discard</code> command. <code class="literal">ntpq</code> and <code class="literal">ntpdc</code> queries are not affected. For more information on the <code class="literal command">discard</code> command and the default values, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2_Configure_Rate_Limiting_Access_to_an_NTP_Service" title="19.17.2. Configure Rate Limiting Access to an NTP Service">Section&nbsp;19.17.2, “Configure Rate Limiting Access to an NTP Service”</a>.
							</li><li class="listitem">
								<code class="literal option">lowpriotrap</code> — traps set by matching hosts to be low priority.
							</li><li class="listitem">
								<code class="literal option">nomodify</code> — prevents any changes to the configuration.
							</li><li class="listitem">
								<code class="literal option">noquery</code> — prevents <code class="literal">ntpq</code> and <code class="literal">ntpdc</code> queries, but not time queries, from being answered.
							</li><li class="listitem">
								<code class="literal option">nopeer</code> — prevents a peer association being formed.
							</li><li class="listitem">
								<code class="literal option">noserve</code> — deny all packets except <code class="literal">ntpq</code> and <code class="literal">ntpdc</code> queries.
							</li><li class="listitem">
								<code class="literal option">notrap</code> — prevents <code class="literal">ntpdc</code> control message protocol traps.
							</li><li class="listitem">
								<code class="literal option">notrust</code> — deny packets that are not cryptographically authenticated.
							</li><li class="listitem">
								<code class="literal option">ntpport</code> — modify the match algorithm to only apply the restriction if the source port is the standard <code class="literal">NTP</code> <code class="literal">UDP</code> port <code class="literal">123</code>.
							</li><li class="listitem">
								<code class="literal option">version</code> — deny packets that do not match the current <code class="literal">NTP</code> version.
							</li></ul></div><p>
						To configure rate limit access to not respond at all to a query, the respective <code class="literal command">restrict</code> command has to have the <code class="literal option">limited</code> option. If <code class="literal">ntpd</code> should reply with a <code class="literal">KoD</code> packet, the <code class="literal command">restrict</code> command needs to have both <code class="literal option">limited</code> and <code class="literal option">kod</code> options.
					</p><p>
						The <code class="literal">ntpq</code> and <code class="literal">ntpdc</code> queries can be used in amplification attacks (see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/security/cve/CVE-2013-5211">CVE-2013-5211</a></span></em></span> for more details), do not remove the <code class="literal option">noquery</code> option from the <code class="literal command">restrict default</code> command on publicly accessible systems.
					</p></section><section class="section" id="s2_Configure_Rate_Limiting_Access_to_an_NTP_Service"><div class="titlepage"><div><div><h3 class="title">19.17.2.&nbsp;Configure Rate Limiting Access to an NTP Service</h3></div></div></div><p>
						To enable rate limiting access to the <code class="literal">NTP</code> service running on a system, add the <code class="literal option">limited</code> option to the <code class="literal command">restrict</code> command as explained in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Configure_Access_Control_to_an_NTP_service" title="19.17.1. Configure Access Control to an NTP Service">Section&nbsp;19.17.1, “Configure Access Control to an NTP Service”</a>. If you do not want to use the default discard parameters, then also use the <code class="literal command">discard</code> command as explained here.
					</p><p>
						The <code class="literal command">discard</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">discard</code> <code class="literal option">average</code> <span class="emphasis"><em>value</em></span> <code class="literal option">minimum</code> <span class="emphasis"><em>value</em></span> <code class="literal option">monitor</code> <span class="emphasis"><em>value</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal option">average</code> — specifies the minimum average packet spacing to be permitted, it accepts an argument in <span class="emphasis"><em>log2</em></span> seconds. The default value is 3 (<span class="emphasis"><em>2<sup>3</sup></em></span> equates to 8 seconds).
							</li><li class="listitem">
								<code class="literal option">minimum</code> — specifies the minimum packet spacing to be permitted, it accepts an argument in <span class="emphasis"><em>log2</em></span> seconds. The default value is 1 (<span class="emphasis"><em>2<sup>1</sup></em></span> equates to 2 seconds).
							</li><li class="listitem">
								<code class="literal option">monitor</code> — specifies the discard probability for packets once the permitted rate limits have been exceeded. The default value is 3000 seconds. This option is intended for servers that receive 1000 or more requests per second.
							</li></ul></div><p>
						Examples of the <code class="literal command">discard</code> command are as follows:
					</p><pre class="literallayout">discard average 4</pre><pre class="literallayout">discard average 4 minimum 2</pre></section><section class="section" id="s2_Adding_a_Peer_Address"><div class="titlepage"><div><div><h3 class="title">19.17.3.&nbsp;Adding a Peer Address</h3></div></div></div><p>
						To add the address of a peer, that is to say, the address of a server running an <code class="literal">NTP</code> service of the same stratum, make use of the <code class="literal command">peer</code> command in the <code class="literal">ntp.conf</code> file.
					</p><p>
						The <code class="literal command">peer</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">peer</code> <span class="emphasis"><em>address</em></span></pre><p>
						where <span class="emphasis"><em>address</em></span> is an <code class="literal">IP</code> unicast address or a <code class="literal">DNS</code> resolvable name. The address must only be that of a system known to be a member of the same stratum. Peers should have at least one time source that is different to each other. Peers are normally systems under the same administrative control.
					</p></section><section class="section" id="s2_Adding_a_Server_Address"><div class="titlepage"><div><div><h3 class="title">19.17.4.&nbsp;Adding a Server Address</h3></div></div></div><p>
						To add the address of a server, that is to say, the address of a server running an <code class="literal">NTP</code> service of a higher stratum, make use of the <code class="literal command">server</code> command in the <code class="literal">ntp.conf</code> file.
					</p><p>
						The <code class="literal command">server</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">server</code> <span class="emphasis"><em>address</em></span></pre><p>
						where <span class="emphasis"><em>address</em></span> is an <code class="literal">IP</code> unicast address or a <code class="literal">DNS</code> resolvable name. The address of a remote reference server or local reference clock from which packets are to be received.
					</p></section><section class="section" id="s2_Adding_a_Broadcast_or_Mutlticast_Server_Address"><div class="titlepage"><div><div><h3 class="title">19.17.5.&nbsp;Adding a Broadcast or Multicast Server Address</h3></div></div></div><p>
						To add a broadcast or multicast address for sending, that is to say, the address to broadcast or multicast <code class="literal">NTP</code> packets to, make use of the <code class="literal command">broadcast</code> command in the <code class="literal">ntp.conf</code> file.
					</p><p>
						The broadcast and multicast modes require authentication by default. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Authentication_Options_for_NTP" title="19.6. Authentication Options for NTP">Section&nbsp;19.6, “Authentication Options for NTP”</a>.
					</p><p>
						The <code class="literal command">broadcast</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">broadcast</code> <span class="emphasis"><em>address</em></span></pre><p>
						where <span class="emphasis"><em>address</em></span> is an <code class="literal">IP</code> broadcast or multicast address to which packets are sent.
					</p><p>
						This command configures a system to act as an <code class="literal">NTP</code> broadcast server. The address used must be a broadcast or a multicast address. Broadcast address implies the <code class="literal">IPv4</code> address <code class="literal">255.255.255.255</code>. By default, routers do not pass broadcast messages. The multicast address can be an <code class="literal">IPv4</code> Class D address, or an <code class="literal">IPv6</code> address. The IANA has assigned <code class="literal">IPv4</code> multicast address <code class="literal">224.0.1.1</code> and <code class="literal">IPv6</code> address <code class="literal">FF05::101</code> (site local) to <code class="literal">NTP</code>. Administratively scoped <code class="literal">IPv4</code> multicast addresses can also be used, as described in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc2365">RFC 2365 Administratively Scoped IP Multicast</a></span></em></span>.
					</p></section><section class="section" id="s2_Adding_a_Manycast_Client_Address"><div class="titlepage"><div><div><h3 class="title">19.17.6.&nbsp;Adding a Manycast Client Address</h3></div></div></div><p>
						To add a manycast client address, that is to say, to configure a multicast address to be used for <code class="literal">NTP</code> server discovery, make use of the <code class="literal command">manycastclient</code> command in the <code class="literal">ntp.conf</code> file.
					</p><p>
						The <code class="literal command">manycastclient</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">manycastclient</code> <span class="emphasis"><em>address</em></span></pre><p>
						where <span class="emphasis"><em>address</em></span> is an <code class="literal">IP</code> multicast address from which packets are to be received. The client will send a request to the address and select the best servers from the responses and ignore other servers. <code class="literal">NTP</code> communication then uses unicast associations, as if the discovered <code class="literal">NTP</code> servers were listed in <code class="literal">ntp.conf</code>.
					</p><p>
						This command configures a system to act as an <code class="literal">NTP</code> client. Systems can be both client and server at the same time.
					</p></section><section class="section" id="s2_Adding_a_Broadcastclient_Address"><div class="titlepage"><div><div><h3 class="title">19.17.7.&nbsp;Adding a Broadcast Client Address</h3></div></div></div><p>
						To add a broadcast client address, that is to say, to configure a broadcast address to be monitored for broadcast <code class="literal">NTP</code> packets, make use of the <code class="literal command">broadcastclient</code> command in the <code class="literal">ntp.conf</code> file.
					</p><p>
						The <code class="literal command">broadcastclient</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">broadcastclient</code></pre><p>
						Enables the receiving of broadcast messages. Requires authentication by default. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Authentication_Options_for_NTP" title="19.6. Authentication Options for NTP">Section&nbsp;19.6, “Authentication Options for NTP”</a>.
					</p><p>
						This command configures a system to act as an <code class="literal">NTP</code> client. Systems can be both client and server at the same time.
					</p></section><section class="section" id="s2_Adding_a_manycastserver_Address"><div class="titlepage"><div><div><h3 class="title">19.17.8.&nbsp;Adding a Manycast Server Address</h3></div></div></div><p>
						To add a manycast server address, that is to say, to configure an address to allow the clients to discover the server by multicasting <code class="literal">NTP</code> packets, make use of the <code class="literal command">manycastserver</code> command in the <code class="literal">ntp.conf</code> file.
					</p><p>
						The <code class="literal command">manycastserver</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">manycastserver</code> <span class="emphasis"><em>address</em></span></pre><p>
						Enables the sending of multicast messages. Where <span class="emphasis"><em>address</em></span> is the address to multicast to. This should be used together with authentication to prevent service disruption.
					</p><p>
						This command configures a system to act as an <code class="literal">NTP</code> server. Systems can be both client and server at the same time.
					</p></section><section class="section" id="s2_Adding_a_multicastclient_Address"><div class="titlepage"><div><div><h3 class="title">19.17.9.&nbsp;Adding a Multicast Client Address</h3></div></div></div><p>
						To add a multicast client address, that is to say, to configure a multicast address to be monitored for multicast <code class="literal">NTP</code> packets, make use of the <code class="literal command">multicastclient</code> command in the <code class="literal">ntp.conf</code> file.
					</p><p>
						The <code class="literal command">multicastclient</code> command takes the following form:
					</p><pre class="literallayout"><code class="literal command">multicastclient</code> <span class="emphasis"><em>address</em></span></pre><p>
						Enables the receiving of multicast messages. Where <span class="emphasis"><em>address</em></span> is the address to subscribe to. This should be used together with authentication to prevent service disruption.
					</p><p>
						This command configures a system to act as an <code class="literal">NTP</code> client. Systems can be both client and server at the same time.
					</p></section><section class="section" id="s2_Configuring_the_Burst_Option"><div class="titlepage"><div><div><h3 class="title">19.17.10.&nbsp;Configuring the Burst Option</h3></div></div></div><p>
						Using the <code class="literal command">burst</code> option against a public server is considered abuse. Do not use this option with public <code class="literal">NTP</code> servers. Use it only for applications within your own organization.
					</p><p>
						To increase the average quality of time offset statistics, add the following option to the end of a server command:
					</p><pre class="literallayout"><code class="literal command">burst</code></pre><p>
						At every poll interval, when the server responds, the system will send a burst of up to eight packets instead of the usual one packet. For use with the <code class="literal command">server</code> command to improve the average quality of the time-offset calculations.
					</p></section><section class="section" id="s2_Configuring_the_iburst_Option"><div class="titlepage"><div><div><h3 class="title">19.17.11.&nbsp;Configuring the iburst Option</h3></div></div></div><p>
						To improve the time taken for initial synchronization, add the following option to the end of a server command:
					</p><pre class="literallayout"><code class="literal command">iburst</code></pre><p>
						When the server is unreachable, send a burst of eight packets instead of the usual one packet. The packet spacing is normally 2 s; however, the spacing between the first and second packets can be changed with the <code class="literal command">calldelay</code> command to allow additional time for a modem or ISDN call to complete. For use with the <code class="literal command">server</code> command to reduce the time taken for initial synchronization. This is now a default option in the configuration file.
					</p></section><section class="section" id="s2_Configuring_Symmetric_Authentication_Using_a_Key"><div class="titlepage"><div><div><h3 class="title">19.17.12.&nbsp;Configuring Symmetric Authentication Using a Key</h3></div></div></div><p>
						To configure symmetric authentication using a key, add the following option to the end of a server or peer command:
					</p><pre class="literallayout"><code class="literal command">key</code> <span class="emphasis"><em>number</em></span></pre><p>
						where <span class="emphasis"><em>number</em></span> is in the range <code class="literal">1</code> to <code class="literal">65534</code> inclusive. This option enables the use of a <span class="emphasis"><em>message authentication code</em></span> (<span class="strong strong"><strong>MAC</strong></span>) in packets. This option is for use with the <code class="literal command">peer</code>, <code class="literal command">server</code>, <code class="literal command">broadcast</code>, and <code class="literal command">manycastclient</code> commands.
					</p><p>
						The option can be used in the <code class="literal">/etc/ntp.conf</code> file as follows:
					</p><pre class="literallayout">server 192.168.1.1 key 10
broadcast 192.168.1.255 key 20
manycastclient 239.255.254.254 key 30</pre><p>
						See also <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Authentication_Options_for_NTP" title="19.6. Authentication Options for NTP">Section&nbsp;19.6, “Authentication Options for NTP”</a>.
					</p></section><section class="section" id="s2_Configuring_the_Poll_Interval"><div class="titlepage"><div><div><h3 class="title">19.17.13.&nbsp;Configuring the Poll Interval</h3></div></div></div><p>
						To change the default poll interval, add the following options to the end of a server or peer command:
					</p><pre class="literallayout"><code class="literal command">minpoll</code> <span class="emphasis"><em>value</em></span> and <code class="literal command">maxpoll</code> <span class="emphasis"><em>value</em></span></pre><p>
						Options to change the default poll interval, where the interval in seconds will be calculated by raising 2 to the power of <span class="emphasis"><em>value</em></span>, in other words, the interval is expressed in <span class="emphasis"><em>log2</em></span> seconds. The default <code class="literal option">minpoll</code> value is 6, <span class="emphasis"><em>2<sup>6</sup></em></span> equates to 64 s. The default value for <code class="literal option">maxpoll</code> is 10, which equates to 1024 s. Allowed values are in the range 3 to 17 inclusive, which equates to 8 s to 36.4 h respectively. These options are for use with the <code class="literal command">peer</code> or <code class="literal command">server</code>. Setting a shorter <code class="literal option">maxpoll</code> may improve clock accuracy.
					</p></section><section class="section" id="s2_Configuring_Server_Preference"><div class="titlepage"><div><div><h3 class="title">19.17.14.&nbsp;Configuring Server Preference</h3></div></div></div><p>
						To specify that a particular server should be preferred above others of similar statistical quality, add the following option to the end of a server or peer command:
					</p><pre class="literallayout"><code class="literal command">prefer</code></pre><p>
						Use this server for synchronization in preference to other servers of similar statistical quality. This option is for use with the <code class="literal command">peer</code> or <code class="literal command">server</code> commands.
					</p></section><section class="section" id="s2_Configuring_the_Time-To-Live_for_NTP_Packets"><div class="titlepage"><div><div><h3 class="title">19.17.15.&nbsp;Configuring the Time-to-Live for NTP Packets</h3></div></div></div><p>
						To specify that a particular <span class="emphasis"><em>time-to-live</em></span> (<span class="strong strong"><strong>TTL</strong></span>) value should be used in place of the default, add the following option to the end of a server or peer command:
					</p><pre class="literallayout"><code class="literal command">ttl</code> <span class="emphasis"><em>value</em></span></pre><p>
						Specify the time-to-live value to be used in packets sent by broadcast servers and multicast <code class="literal">NTP</code> servers. Specify the maximum time-to-live value to use for the "expanding ring search" by a manycast client. The default value is <code class="literal">127</code>.
					</p></section><section class="section" id="s2_Configuring_The_Version_of_NTP_to_use"><div class="titlepage"><div><div><h3 class="title">19.17.16.&nbsp;Configuring the NTP Version to Use</h3></div></div></div><p>
						To specify that a particular version of <code class="literal">NTP</code> should be used in place of the default, add the following option to the end of a server or peer command:
					</p><pre class="literallayout"><code class="literal command">version</code> <span class="emphasis"><em>value</em></span></pre><p>
						Specify the version of <code class="literal">NTP</code> set in created <code class="literal">NTP</code> packets. The value can be in the range <code class="literal">1</code> to <code class="literal">4</code>. The default is <code class="literal">4</code>.
					</p></section></section><section class="section" id="s1-Configuring_the_Hardware_Clock_update"><div class="titlepage"><div><div><h2 class="title">19.18.&nbsp;Configuring the Hardware Clock Update</h2></div></div></div><p>
					The system clock can be used to update the hardware clock, also known as the real-time clock (RTC). This section shows three approaches to the task:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Instant one-time update</span></dt><dd><p class="simpara">
								To perform an instant one-time update of the hardware clock, run this command as root:
							</p><pre class="literallayout">~]# hwclock --systohc</pre></dd><dt><span class="term">Update on every boot</span></dt><dd><p class="simpara">
								To make the hardware clock update on every boot after executing the <span class="strong strong"><strong><span class="application application">ntpdate</span></strong></span> synchronization utility, do the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Add the following line to the <code class="literal">/etc/sysconfig/ntpdate</code> file:
									</p><pre class="literallayout">SYNC_HWCLOCK=yes</pre></li><li class="listitem"><p class="simpara">
										Enable the <code class="literal">ntpdate</code> service as root:
									</p><pre class="literallayout">~]# systemctl enable ntpdate.service</pre><p class="simpara">
										Note that the <code class="literal">ntpdate</code> service uses the NTP servers defined in the <code class="literal">/etc/ntp/step-tickers</code> file.
									</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											On virtual machines, the hardware clock will be updated on the next boot of the host machine, not of the virtual machine.
										</p></div></div></li></ol></div></dd><dt><span class="term">Update via NTP</span></dt><dd><p class="simpara">
								You can make the hardware clock update every time the system clock is updated by the <code class="literal">ntpd</code> or <code class="literal">chronyd</code> service:
							</p><p class="simpara">
								Start the <code class="literal">ntpd</code> service as root:
							</p><pre class="literallayout">~]# systemctl start ntpd.service</pre><p class="simpara">
								To make the behavior persistent across boots, make the service start automatically at the boot time:
							</p><pre class="literallayout">~]# systemctl enable ntpd.service</pre><p class="simpara">
								or
							</p><p class="simpara">
								Start the <code class="literal">chronyd</code> service as root:
							</p><pre class="literallayout">~]# systemctl start chronyd.service</pre><p class="simpara">
								To make the behavior persistent across boots, make the service start automatically at the boot time:
							</p><pre class="literallayout">~]# systemctl enable chronyd.service</pre><p class="simpara">
								As a result, every time the system clock is synchronized by <code class="literal">ntpd</code> or <code class="literal">chronyd</code>, the kernel automatically updates the hardware clock in 11 minutes.
							</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									This approach might not always work because the above mentioned 11-minute mode is not always enabled. As a consequence, the hardware clock does not necessarily get updated on the system clock update.
								</p></div></div><p class="simpara">
								To check the synchronization of the software clock with the hardware clock, use the <code class="literal command">ntpdc -c kerninfo</code> or the <code class="literal command">ntptime</code> command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# ntpdc -c kerninfo</pre><p class="simpara">
								The result may look like this:
							</p><pre class="literallayout">pll offset:      0 s
pll frequency:    0.000 ppm
maximum error:    8.0185 s
estimated error:   0 s
<code class="literal command">status: 2001 pll nano</code>
pll time constant:  6
precision:      1e-09 s
frequency tolerance: 500 ppm</pre><p class="simpara">
								or
							</p><pre class="literallayout">~]# ntptime</pre><p class="simpara">
								The result may look like this:
							</p><pre class="literallayout">ntp_gettime() returns code 0 (OK)
 time dcba5798.c3dfe2e0 Mon, May 8 2017 11:34:00.765, (.765135199),
 maximum error 8010000 us, estimated error 0 us, TAI offset 0
ntp_adjtime() returns code 0 (OK)
 modes 0x0 (),
 offset 0.000 us, frequency 0.000 ppm, interval 1 s,
 maximum error 8010000 us, estimated error 0 us,
status 0x2001 (PLL,NANO),
 time constant 6, precision 0.001 us, tolerance 500 ppm,</pre><p class="simpara">
								To recognize whether the hardware clock is synchronized to the system clock, see the <span class="emphasis"><em>status</em></span> line in the output. If the line contains the word <code class="literal">unsync</code> or <code class="literal">UNSYNC</code>, the hardware clock is not synchronized to the system clock.
							</p><p class="simpara">
								The hardware clock is synchronized to the system clock.
							</p><pre class="literallayout">status 0x2001 (PLL,NANO)</pre><p class="simpara">
								The hardware clock is not synchronized to the system clock.
							</p><pre class="literallayout">status 0x41 (PLL,UNSYNC)</pre></dd></dl></div></section><section class="section" id="s1-Configuring_Clock_Sources"><div class="titlepage"><div><div><h2 class="title">19.19.&nbsp;Configuring Clock Sources</h2></div></div></div><p>
					To list the available clock sources on your system, issue the following commands:
				</p><pre class="literallayout">~]$ cd /sys/devices/system/clocksource/clocksource0/
clocksource0]$ cat available_clocksource
kvm-clock tsc hpet acpi_pm
clocksource0]$ cat current_clocksource
kvm-clock</pre><p>
					In the above example, the kernel is using <span class="strong strong"><strong><span class="application application">kvm-clock</span></strong></span>. This was selected at boot time as this is a virtual machine. Note that the available clock source is architecture dependent.
				</p><p>
					To override the default clock source, append the <code class="literal command">clocksource</code> directive to the end of the kernel’s GRUB 2 menu entry. Use the <code class="literal command">grubby</code> tool to make the change. For example, to force the default kernel on a system to use the <code class="literal">tsc</code> clock source, enter a command as follows:
				</p><pre class="literallayout">~]# grubby --args=clocksource=tsc --update-kernel=DEFAULT</pre><p>
					The <code class="literal option">--update-kernel</code> parameter also accepts the keyword <code class="literal">ALL</code>, or a comma separated list of kernel index numbers.
				</p><p>
					See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Working_with_the_GRUB_2_Boot_Loader" title="Chapter 26. Working with GRUB 2">Chapter&nbsp;26, <em>Working with GRUB 2</em></a> for more information on making changes to the GRUB 2 menu.
				</p></section><section class="section" id="s1-ntpd_additional-resources"><div class="titlepage"><div><div><h2 class="title">19.20.&nbsp;Additional Resources</h2></div></div></div><p>
					The following sources of information provide additional resources regarding <code class="literal">NTP</code> and <code class="literal">ntpd</code>.
				</p><section class="section" id="s2-ntpd-docs-inst"><div class="titlepage"><div><div><h3 class="title">19.20.1.&nbsp;Installed Documentation</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">ntpd(8)</code> man page — Describes <code class="literal">ntpd</code> in detail, including the command-line options.
							</li><li class="listitem">
								<code class="literal">ntp.conf(5)</code> man page — Contains information on how to configure associations with servers and peers.
							</li><li class="listitem">
								<code class="literal">ntpq(8)</code> man page — Describes the <code class="literal">NTP</code> query utility for monitoring and querying an <code class="literal">NTP</code> server.
							</li><li class="listitem">
								<code class="literal">ntpdc(8)</code> man page — Describes the <code class="literal">ntpd</code> utility for querying and changing the state of <code class="literal">ntpd</code>.
							</li><li class="listitem">
								<code class="literal">ntp_auth(5)</code> man page — Describes authentication options, commands, and key management for <code class="literal">ntpd</code>.
							</li><li class="listitem">
								<code class="literal">ntp_keygen(8)</code> man page — Describes generating public and private keys for <code class="literal">ntpd</code>.
							</li><li class="listitem">
								<code class="literal">ntp_acc(5)</code> man page — Describes access control options using the <code class="literal command">restrict</code> command.
							</li><li class="listitem">
								<code class="literal">ntp_mon(5)</code> man page — Describes monitoring options for the gathering of statistics.
							</li><li class="listitem">
								<code class="literal">ntp_clock(5)</code> man page — Describes commands for configuring reference clocks.
							</li><li class="listitem">
								<code class="literal">ntp_misc(5)</code> man page — Describes miscellaneous options.
							</li><li class="listitem">
								<code class="literal">ntp_decode(5)</code> man page — Lists the status words, event messages and error codes used for <code class="literal">ntpd</code> reporting and monitoring.
							</li><li class="listitem">
								<code class="literal">ntpstat(8)</code> man page — Describes a utility for reporting the synchronization state of the <code class="literal">NTP</code> daemon running on the local machine.
							</li><li class="listitem">
								<code class="literal">ntptime(8)</code> man page — Describes a utility for reading and setting kernel time variables.
							</li><li class="listitem">
								<code class="literal">tickadj(8)</code> man page — Describes a utility for reading, and optionally setting, the length of the tick.
							</li></ul></div></section><section class="section" id="s2-ntpd_useful-websites"><div class="titlepage"><div><div><h3 class="title">19.20.2.&nbsp;Useful Websites</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="http://doc.ntp.org/">http://doc.ntp.org/</a></span></dt><dd>
									The NTP Documentation Archive
								</dd><dt><span class="term"><a class="link" href="http://www.eecis.udel.edu/~mills/ntp.html">http://www.eecis.udel.edu/~mills/ntp.html</a></span></dt><dd>
									Network Time Synchronization Research Project.
								</dd><dt><span class="term"><a class="link" href="http://www.eecis.udel.edu/~mills/ntp/html/manyopt.html">http://www.eecis.udel.edu/~mills/ntp/html/manyopt.html</a></span></dt><dd>
									Information on Automatic Server Discovery in <code class="literal">NTPv4</code>.
								</dd></dl></div></section></section></section><section class="chapter" id="ch-Configuring_PTP_Using_ptp4l"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;20.&nbsp;Configuring PTP Using ptp4l</h2></div></div></div><section class="section" id="sec-Introduction_to_PTP"><div class="titlepage"><div><div><h2 class="title">20.1.&nbsp;Introduction to PTP</h2></div></div></div><p>
					The <span class="emphasis"><em>Precision Time Protocol</em></span> (<span class="strong strong"><strong>PTP</strong></span>) is a protocol used to synchronize clocks in a network. When used in conjunction with hardware support, <code class="literal">PTP</code> is capable of sub-microsecond accuracy, which is far better than is normally obtainable with <code class="literal">NTP</code>. <code class="literal">PTP</code> support is divided between the kernel and user space. The kernel in Red Hat Enterprise Linux includes support for <code class="literal">PTP</code> clocks, which are provided by network drivers. The actual implementation of the protocol is known as <span class="strong strong"><strong><span class="application application">linuxptp</span></strong></span>, a <code class="literal">PTPv2</code> implementation according to the IEEE standard 1588 for Linux.
				</p><p>
					The <span class="strong strong"><strong><span class="package package">linuxptp</span></strong></span> package includes the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> programs for clock synchronization. The <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> program implements the <code class="literal">PTP</code> boundary clock and ordinary clock. With hardware time stamping, it is used to synchronize the <code class="literal">PTP</code> hardware clock to the master clock, and with software time stamping it synchronizes the system clock to the master clock. The <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> program is needed only with hardware time stamping, for synchronizing the system clock to the <code class="literal">PTP</code> hardware clock on the <span class="emphasis"><em>network interface card</em></span> (<span class="strong strong"><strong>NIC</strong></span>).
				</p><section class="section" id="sec-Understanding_PTP"><div class="titlepage"><div><div><h3 class="title">20.1.1.&nbsp;Understanding PTP</h3></div></div></div><p>
						The clocks synchronized by <code class="literal">PTP</code> are organized in a master-slave hierarchy. The slaves are synchronized to their masters which may be slaves to their own masters. The hierarchy is created and updated automatically by the <span class="emphasis"><em>best master clock</em></span> (<span class="strong strong"><strong>BMC</strong></span>) algorithm, which runs on every clock. When a clock has only one port, it can be <span class="emphasis"><em>master</em></span> or <span class="emphasis"><em>slave</em></span>, such a clock is called an <span class="emphasis"><em>ordinary clock</em></span> (<span class="strong strong"><strong>OC</strong></span>). A clock with multiple ports can be master on one port and slave on another, such a clock is called a <span class="emphasis"><em>boundary</em></span> clock (<span class="strong strong"><strong>BC</strong></span>). The top-level master is called the <span class="emphasis"><em>grandmaster clock</em></span>, which can be synchronized by using a <span class="emphasis"><em>Global Positioning System</em></span> (<span class="strong strong"><strong>GPS</strong></span>) time source. By using a GPS-based time source, disparate networks can be synchronized with a high-degree of accuracy.
					</p><div class="figure" id="exam-Understanding_PTP"><p class="title"><strong>Figure&nbsp;20.1.&nbsp;PTP grandmaster, boundary, and slave Clocks</strong></p><div class="figure-contents"><div class="mediaobject"><a href="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ptp_grandmaster_boundary_and_slaves.png" class="rh_docs--zoom" title="An illustration showing PTP grandmaster"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ptp_grandmaster_boundary_and_slaves.png" alt="An illustration showing PTP grandmaster"></a></div></div></div></section><section class="section" id="sec-Advantages_of_PTP"><div class="titlepage"><div><div><h3 class="title">20.1.2.&nbsp;Advantages of PTP</h3></div></div></div><p>
						One of the main advantages that <code class="literal">PTP</code> has over the <span class="emphasis"><em>Network Time Protocol</em></span> (<span class="strong strong"><strong>NTP</strong></span>) is hardware support present in various <span class="emphasis"><em>network interface controllers</em></span> (<span class="strong strong"><strong>NIC</strong></span>) and network switches. This specialized hardware allows <code class="literal">PTP</code> to account for delays in message transfer, and greatly improves the accuracy of time synchronization. While it is possible to use non-PTP enabled hardware components within the network, this will often cause an increase in jitter or introduce an asymmetry in the delay resulting in synchronization inaccuracies, which add up with multiple non-PTP aware components used in the communication path. To achieve the best possible accuracy, it is recommended that all networking components between <code class="literal">PTP</code> clocks are <code class="literal">PTP</code> hardware enabled. Time synchronization in larger networks where not all of the networking hardware supports <code class="literal">PTP</code> might be better suited for <code class="literal">NTP</code>.
					</p><p>
						With hardware <code class="literal">PTP</code> support, the NIC has its own on-board clock, which is used to time stamp the received and transmitted <code class="literal">PTP</code> messages. It is this on-board clock that is synchronized to the <code class="literal">PTP</code> master, and the computer’s system clock is synchronized to the <code class="literal">PTP</code> hardware clock on the NIC. With software <code class="literal">PTP</code> support, the system clock is used to time stamp the <code class="literal">PTP</code> messages and it is synchronized to the <code class="literal">PTP</code> master directly. Hardware <code class="literal">PTP</code> support provides better accuracy since the NIC can time stamp the <code class="literal">PTP</code> packets at the exact moment they are sent and received while software <code class="literal">PTP</code> support requires additional processing of the <code class="literal">PTP</code> packets by the operating system.
					</p></section></section><section class="section" id="sec-Using_PTP"><div class="titlepage"><div><div><h2 class="title">20.2.&nbsp;Using PTP</h2></div></div></div><p>
					In order to use <code class="literal">PTP</code>, the kernel network driver for the intended interface has to support either software or hardware time stamping capabilities.
				</p><section class="section" id="sec-Checking_for_Driver_and_Hardware_Support"><div class="titlepage"><div><div><h3 class="title">20.2.1.&nbsp;Checking for Driver and Hardware Support</h3></div></div></div><p>
						In addition to hardware time stamping support being present in the driver, the NIC must also be capable of supporting this functionality in the physical hardware. The best way to verify the time stamping capabilities of a particular driver and NIC is to use the <span class="strong strong"><strong><span class="application application">ethtool</span></strong></span> utility to query the interface as follows:
					</p><pre class="literallayout">~]# ethtool -T eth3
Time stamping parameters for eth3:
Capabilities:
    hardware-transmit   (SOF_TIMESTAMPING_TX_HARDWARE)
    software-transmit   (SOF_TIMESTAMPING_TX_SOFTWARE)
    hardware-receive   (SOF_TIMESTAMPING_RX_HARDWARE)
    software-receive   (SOF_TIMESTAMPING_RX_SOFTWARE)
    software-system-clock (SOF_TIMESTAMPING_SOFTWARE)
    hardware-raw-clock  (SOF_TIMESTAMPING_RAW_HARDWARE)
PTP Hardware Clock: 0
Hardware Transmit Timestamp Modes:
    off          (HWTSTAMP_TX_OFF)
    on          (HWTSTAMP_TX_ON)
Hardware Receive Filter Modes:
    none         (HWTSTAMP_FILTER_NONE)
    all          (HWTSTAMP_FILTER_ALL)</pre><p>
						Where <span class="emphasis"><em>eth3</em></span> is the interface you want to check.
					</p><p>
						For software time stamping support, the parameters list should include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">SOF_TIMESTAMPING_SOFTWARE</code>
							</li><li class="listitem">
								<code class="literal">SOF_TIMESTAMPING_TX_SOFTWARE</code>
							</li><li class="listitem">
								<code class="literal">SOF_TIMESTAMPING_RX_SOFTWARE</code>
							</li></ul></div><p>
						For hardware time stamping support, the parameters list should include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">SOF_TIMESTAMPING_RAW_HARDWARE</code>
							</li><li class="listitem">
								<code class="literal">SOF_TIMESTAMPING_TX_HARDWARE</code>
							</li><li class="listitem">
								<code class="literal">SOF_TIMESTAMPING_RX_HARDWARE</code>
							</li></ul></div></section><section class="section" id="sec-Installing_PTP"><div class="titlepage"><div><div><h3 class="title">20.2.2.&nbsp;Installing PTP</h3></div></div></div><p>
						The kernel in Red Hat Enterprise Linux includes support for <code class="literal">PTP</code>. User space support is provided by the tools in the <span class="strong strong"><strong><span class="application application">linuxptp</span></strong></span> package. To install <span class="strong strong"><strong><span class="application application">linuxptp</span></strong></span>, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install linuxptp</pre><p>
						This will install <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span>.
					</p><p>
						Do not run more than one service to set the system clock’s time at the same time. If you intend to serve <code class="literal">PTP</code> time using <code class="literal">NTP</code>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Serving_PTP_Time_with_NTP" title="20.8. Serving PTP Time with NTP">Section&nbsp;20.8, “Serving PTP Time with NTP”</a>.
					</p></section><section class="section" id="sec-Starting_ptp4l"><div class="titlepage"><div><div><h3 class="title">20.2.3.&nbsp;Starting ptp4l</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> program can be started from the command line or it can be started as a service. When running as a service, options are specified in the <code class="literal">/etc/sysconfig/ptp4l</code> file. Options required for use both by the service and on the command line should be specified in the <code class="literal">/etc/ptp4l.conf</code> file. The <code class="literal">/etc/sysconfig/ptp4l</code> file includes the <code class="literal command">-f /etc/ptp4l.conf</code> command line option, which causes the <code class="literal">ptp4l</code> program to read the <code class="literal">/etc/ptp4l.conf</code> file and process the options it contains. The use of the <code class="literal">/etc/ptp4l.conf</code> is explained in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Specifying_a_Configuration_File" title="20.4. Specifying a Configuration File">Section&nbsp;20.4, “Specifying a Configuration File”</a>. More information on the different <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> options and the configuration file settings can be found in the <code class="literal">ptp4l(8)</code> man page.
					</p><h5 id="bh-Starting_ptp4l_as_a_Service">Starting ptp4l as a Service</h5><p>
						To start <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> as a service, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl start ptp4l</pre><p>
						For more information on managing system services in Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p><h5 id="bh-Using_ptp4l_From_The_Command_Line">Using ptp4l From The Command Line</h5><p>
						The <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> program tries to use hardware time stamping by default. To use <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> with hardware time stamping capable drivers and NICs, you must provide the network interface to use with the <code class="literal option">-i</code> option. Enter the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# ptp4l -i eth3 -m</pre><p>
						Where <span class="emphasis"><em>eth3</em></span> is the interface you want to configure. Below is example output from <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> when the <code class="literal">PTP</code> clock on the NIC is synchronized to a master:
					</p><pre class="literallayout">~]# ptp4l -i eth3 -m
selected eth3 as PTP clock
port 1: INITIALIZING to LISTENING on INITIALIZE
port 0: INITIALIZING to LISTENING on INITIALIZE
port 1: new foreign master 00a069.fffe.0b552d-1
selected best master clock 00a069.fffe.0b552d
port 1: LISTENING to UNCALIBRATED on RS_SLAVE
master offset -23947 s0 freq +0 path delay    11350
master offset -28867 s0 freq +0 path delay    11236
master offset -32801 s0 freq +0 path delay    10841
master offset -37203 s1 freq +0 path delay    10583
master offset -7275 s2 freq -30575 path delay  10583
port 1: UNCALIBRATED to SLAVE on MASTER_CLOCK_SELECTED
master offset -4552 s2 freq -30035 path delay  10385</pre><p>
						The master offset value is the measured offset from the master in nanoseconds. The <code class="literal">s0</code>, <code class="literal">s1</code>, <code class="literal">s2</code> strings indicate the different clock servo states: <code class="literal">s0</code> is unlocked, <code class="literal">s1</code> is clock step and <code class="literal">s2</code> is locked. Once the servo is in the locked state (<code class="literal">s2</code>), the clock will not be stepped (only slowly adjusted) unless the <code class="literal option">pi_offset_const</code> option is set to a positive value in the configuration file (described in the <code class="literal">ptp4l(8)</code> man page). The <code class="literal">adj</code> value is the frequency adjustment of the clock in parts per billion (ppb). The path delay value is the estimated delay of the synchronization messages sent from the master in nanoseconds. Port 0 is a Unix domain socket used for local <code class="literal">PTP</code> management. Port 1 is the <code class="literal">eth3</code> interface (based on the example above.) INITIALIZING, LISTENING, UNCALIBRATED and SLAVE are some of possible port states which change on the INITIALIZE, RS_SLAVE, MASTER_CLOCK_SELECTED events. In the last state change message, the port state changed from UNCALIBRATED to SLAVE indicating successful synchronization with a <code class="literal">PTP</code> master clock.
					</p><h5 id="bh-Logging_Messages_From_ptp4l">Logging Messages From ptp4l</h5><p>
						By default, messages are sent to <code class="literal">/var/log/messages</code>. However, specifying the <code class="literal option">-m</code> option enables logging to standard output which can be useful for debugging purposes.
					</p><p>
						To enable software time stamping, the <code class="literal option">-S</code> option needs to be used as follows:
					</p><pre class="literallayout">~]# ptp4l -i eth3 -m -S</pre><section class="section" id="sec-Selecting_a_Delay_Mechanism"><div class="titlepage"><div><div><h4 class="title">20.2.3.1.&nbsp;Selecting a Delay Measurement Mechanism</h4></div></div></div><p>
							There are two different delay measurement mechanisms and they can be selected by means of an option added to the <code class="literal command">ptp4l</code> command as follows:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal option">-P</code></span></dt><dd><p class="simpara">
										The <code class="literal option">-P</code> selects the <span class="emphasis"><em>peer-to-peer</em></span> (<span class="strong strong"><strong>P2P</strong></span>) delay measurement mechanism.
									</p><p class="simpara">
										The <span class="strong strong"><strong>P2P</strong></span> mechanism is preferred as it reacts to changes in the network topology faster, and may be more accurate in measuring the delay, than other mechanisms. The <span class="strong strong"><strong>P2P</strong></span> mechanism can only be used in topologies where each port exchanges <span class="strong strong"><strong>PTP</strong></span> messages with at most one other <span class="strong strong"><strong>P2P</strong></span> port. It must be supported and used by all hardware, including transparent clocks, on the communication path.
									</p></dd><dt><span class="term"><code class="literal option">-E</code></span></dt><dd><p class="simpara">
										The <code class="literal option">-E</code> selects the <span class="emphasis"><em>end-to-end</em></span> (<span class="strong strong"><strong>E2E</strong></span>) delay measurement mechanism. This is the default.
									</p><p class="simpara">
										The <span class="strong strong"><strong>E2E</strong></span> mechanism is also referred to as the delay "request-response" mechanism.
									</p></dd><dt><span class="term"><code class="literal option">-A</code></span></dt><dd><p class="simpara">
										The <code class="literal option">-A</code> enables automatic selection of the delay measurement mechanism.
									</p><p class="simpara">
										The automatic option starts <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> in <span class="strong strong"><strong>E2E</strong></span> mode. It will change to <span class="strong strong"><strong>P2P</strong></span> mode if a peer delay request is received.
									</p></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								All clocks on a single <code class="literal">PTP</code> communication path must use the same mechanism to measure the delay. Warnings will be printed in the following circumstances:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										When a peer delay request is received on a port using the <span class="strong strong"><strong>E2E</strong></span> mechanism.
									</li><li class="listitem">
										When a <span class="strong strong"><strong>E2E</strong></span> delay request is received on a port using the <span class="strong strong"><strong>P2P</strong></span> mechanism.
									</li></ul></div></div></div></section></section></section><section class="section" id="sec-Using_PTP_with_Multiple_Interfaces"><div class="titlepage"><div><div><h2 class="title">20.3.&nbsp;Using PTP with Multiple Interfaces</h2></div></div></div><p>
					When using PTP with multiple interfaces in different networks, it is necessary to change the <span class="emphasis"><em>reverse path forwarding</em></span> mode to loose mode. Red Hat Enterprise Linux 7 defaults to using <span class="emphasis"><em>Strict Reverse Path Forwarding</em></span> following the Strict Reverse Path recommendation from <a class="link" href="http://www.ietf.org/rfc/rfc3704.txt">RFC 3704, Ingress Filtering for Multihomed Networks</a>. See the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/sec-Securing_Network_Access.html#sect-Security_Guide-Server_Security-Reverse_Path_Forwarding">Reverse Path Forwarding</a> section in the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a> for more details.
				</p><p>
					The <code class="literal command">sysctl</code> utility is used to read and write values to tunables in the kernel. Changes to a running system can be made using <code class="literal command">sysctl</code> commands directly on the command line and permanent changes can be made by adding lines to the <code class="literal">/etc/sysctl.conf</code> file.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To change to loose mode filtering globally, enter the following commands as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# sysctl -w net.ipv4.conf.default.rp_filter=2
~]# sysctl -w net.ipv4.conf.all.rp_filter=2</pre></li><li class="listitem"><p class="simpara">
							To change the reverse path filtering mode per network interface, use the <code class="literal command">net.ipv4.<span class="emphasis"><em>interface</em></span>.rp_filter</code> command on all PTP interfaces. For example, for an interface with device name <code class="literal">em1</code>:
						</p><pre class="literallayout">~]# sysctl -w net.ipv4.conf.em1.rp_filter=2</pre></li></ul></div><p>
					To make these settings persistent across reboots, modify the <code class="literal">/etc/sysctl.conf</code> file. You can change the mode for all interfaces, or for a particular interface.
				</p><p>
					To change the mode for all interfaces, open the <code class="literal">/etc/sysctl.conf</code> file with an editor running as the <code class="literal">root</code> user and add a line as follows:
				</p><pre class="literallayout">net.ipv4.conf.all.rp_filter=2</pre><p>
					To change only certain interfaces, add multiple lines in the following format:
				</p><pre class="literallayout">net.ipv4.conf.<span class="emphasis"><em>interface</em></span>.rp_filter=2</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When using the settings for all and particular interfaces as well, maximum value from <code class="literal">conf/{all,interface}/rp_filter</code> is used when doing source validation on each interface.
					</p></div></div><p>
					You can also change the mode by using the <span class="emphasis"><em>default</em></span> setting, which means that it applies only to the newly created interfaces.
				</p><p>
					For more information on using the <span class="emphasis"><em>all</em></span>, <span class="emphasis"><em>default</em></span>, or a specific device settings in the <code class="literal">sysctl</code> parameters, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/1282293">What is the difference between "all", "default" and a specific device in a sysctl parameter?</a>.
				</p><p>
					Note that you might experience issues of two types due to the timing of the <code class="literal">sysctl</code> service run during the boot process:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Drivers are loaded before the <code class="literal">sysctl</code> service runs.
						</p><p class="simpara">
							In this case, affected network interfaces use the mode preset from the kernel, and <code class="literal">sysctl</code> defaults are ignored.
						</p><p class="simpara">
							For solution of this problem, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/1282293">What is the difference between "all", "default" and a specific device in a sysctl parameter?</a>.
						</p></li><li class="listitem"><p class="simpara">
							Drivers are loaded or reloaded after the <code class="literal">sysctl</code> service runs.
						</p><p class="simpara">
							In this case, it is possible that some <code class="literal">sysctl.conf</code> parameters are not used after reboot. These settings may not be available or they may return to defaults.
						</p><p class="simpara">
							For solution of this problem, see the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/solutions/548813">Some sysctl.conf parameters are not used after reboot, manually adjusting the settings works as expected</a>.
						</p></li></ol></div></section><section class="section" id="sec-Specifying_a_Configuration_File"><div class="titlepage"><div><div><h2 class="title">20.4.&nbsp;Specifying a Configuration File</h2></div></div></div><p>
					The command line options and other options, which cannot be set on the command line, can be set in an optional configuration file.
				</p><p>
					No configuration file is read by default, so it needs to be specified at runtime with the <code class="literal option">-f</code> option. For example:
				</p><pre class="literallayout">~]# ptp4l -f /etc/ptp4l.conf</pre><p>
					A configuration file equivalent to the <code class="literal command">-i eth3 -m -S</code> options shown above would look as follows:
				</p><pre class="literallayout">~]# cat /etc/ptp4l.conf
[global]
verbose        1
time_stamping     software
[eth3]</pre></section><section class="section" id="sec-Using_the_PTP_Management_Client"><div class="titlepage"><div><div><h2 class="title">20.5.&nbsp;Using the PTP Management Client</h2></div></div></div><p>
					The <code class="literal">PTP</code> management client, <span class="strong strong"><strong><span class="application application">pmc</span></strong></span>, can be used to obtain additional information from <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> as follows:
				</p><pre class="literallayout">~]# pmc -u -b 0 'GET CURRENT_DATA_SET'
sending: GET CURRENT_DATA_SET
    90e2ba.fffe.20c7f8-0 seq 0 RESPONSE MANAGMENT CURRENT_DATA_SET
        stepsRemoved    1
        offsetFromMaster -142.0
        meanPathDelay   9310.0</pre><pre class="literallayout">~]# pmc -u -b 0 'GET TIME_STATUS_NP'
sending: GET TIME_STATUS_NP
    90e2ba.fffe.20c7f8-0 seq 0 RESPONSE MANAGMENT TIME_STATUS_NP
        master_offset       310
        ingress_time        1361545089345029441
        cumulativeScaledRateOffset  +1.000000000
        scaledLastGmPhaseChange  0
        gmTimeBaseIndicator    0
        lastGmPhaseChange     0x0000'0000000000000000.0000
        gmPresent         true
        gmIdentity         00a069.fffe.0b552d</pre><p>
					Setting the <code class="literal option">-b</code> option to <code class="literal">zero</code> limits the boundary to the locally running <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> instance. A larger boundary value will retrieve the information also from <code class="literal">PTP</code> nodes further from the local clock. The retrievable information includes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">stepsRemoved</code> is the number of communication paths to the grandmaster clock.
						</li><li class="listitem">
							<code class="literal">offsetFromMaster</code> and master_offset is the last measured offset of the clock from the master in nanoseconds.
						</li><li class="listitem">
							<code class="literal">meanPathDelay</code> is the estimated delay of the synchronization messages sent from the master in nanoseconds.
						</li><li class="listitem">
							if <code class="literal">gmPresent</code> is true, the <code class="literal">PTP</code> clock is synchronized to a master, the local clock is not the grandmaster clock.
						</li><li class="listitem">
							<code class="literal">gmIdentity</code> is the grandmaster’s identity.
						</li></ul></div><p>
					For a full list of <span class="strong strong"><strong><span class="application application">pmc</span></strong></span> commands, type the following as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# pmc help</pre><p>
					Additional information is available in the <code class="literal">pmc(8)</code> man page.
				</p></section><section class="section" id="sec-Synchronizing_the_Clocks"><div class="titlepage"><div><div><h2 class="title">20.6.&nbsp;Synchronizing the Clocks</h2></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> program is used to synchronize the system clock to the <code class="literal">PTP</code> hardware clock (<span class="strong strong"><strong>PHC</strong></span>) on the NIC. The <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> service is configured in the <code class="literal">/etc/sysconfig/phc2sys</code> configuration file. The default setting in the <code class="literal">/etc/sysconfig/phc2sys</code> file is as follows:
				</p><pre class="literallayout">OPTIONS="-a -r"</pre><p>
					The <code class="literal option">-a</code> option causes <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> to read the clocks to be synchronized from the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> application. It will follow changes in the <code class="literal">PTP</code> port states, adjusting the synchronization between the NIC hardware clocks accordingly. The system clock is not synchronized, unless the <code class="literal option">-r</code> option is also specified. If you want the system clock to be eligible to become a time source, specify the <code class="literal option">-r</code> option twice.
				</p><p>
					After making changes to <code class="literal">/etc/sysconfig/phc2sys</code>, restart the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> service from the command line by issuing a command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# systemctl restart phc2sys</pre><p>
					Under normal circumstances, use <code class="literal command">systemctl</code> commands to start, stop, and restart the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> service.
				</p><p>
					When you do not want to start <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> as a service, you can start it from the command line. For example, enter the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# phc2sys -a -r</pre><p>
					The <code class="literal option">-a</code> option causes <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> to read the clocks to be synchronized from the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> application. If you want the system clock to be eligible to become a time source, specify the <code class="literal option">-r</code> option twice.
				</p><p>
					Alternately, use the <code class="literal option">-s</code> option to synchronize the system clock to a specific interface’s <code class="literal">PTP</code> hardware clock. For example:
				</p><pre class="literallayout">~]# phc2sys -s eth3 -w</pre><p>
					The <code class="literal option">-w</code> option waits for the running <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> application to synchronize the <code class="literal">PTP</code> clock and then retrieves the <span class="strong strong"><strong>TAI</strong></span> to <span class="strong strong"><strong>UTC</strong></span> offset from <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span>.
				</p><p>
					Normally, <code class="literal">PTP</code> operates in the <span class="emphasis"><em>International Atomic Time</em></span> (<span class="strong strong"><strong>TAI</strong></span>) timescale, while the system clock is kept in <span class="emphasis"><em>Coordinated Universal Time</em></span> (<span class="strong strong"><strong>UTC</strong></span>). The current offset between the TAI and UTC timescales is 36 seconds. The offset changes when leap seconds are inserted or deleted, which typically happens every few years. The <code class="literal option">-O</code> option needs to be used to set this offset manually when the <code class="literal option">-w</code> is not used, as follows:
				</p><pre class="literallayout">~]# phc2sys -s eth3 -O -36</pre><p>
					Once the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> servo is in a locked state, the clock will not be stepped, unless the <code class="literal option">-S</code> option is used. This means that the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> program should be started after the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> program has synchronized the <code class="literal">PTP</code> hardware clock. However, with <code class="literal option">-w</code>, it is not necessary to start <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> after <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> as it will wait for it to synchronize the clock.
				</p><p>
					The <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> program can also be started as a service by running:
				</p><pre class="literallayout">~]# systemctl start phc2sys</pre><p>
					When running as a service, options are specified in the <code class="literal">/etc/sysconfig/phc2sys</code> file. More information on the different <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> options can be found in the <code class="literal">phc2sys(8)</code> man page.
				</p><p>
					Note that the examples in this section assume the command is run on a slave system or slave port.
				</p></section><section class="section" id="sec-Verifying_Time_Synchronization"><div class="titlepage"><div><div><h2 class="title">20.7.&nbsp;Verifying Time Synchronization</h2></div></div></div><p>
					When <code class="literal">PTP</code> time synchronization is working correctly, new messages with offsets and frequency adjustments are printed periodically to the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> outputs if hardware time stamping is used. The output values converge shortly. You can see these messages in the <code class="literal">/var/log/messages</code> file.
				</p><p>
					The following examples of the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> output contain:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							offset (in nanoseconds)
						</li><li class="listitem">
							frequency offset (in parts per billion (ppb))
						</li><li class="listitem">
							path delay (in nanoseconds)
						</li></ul></div><p>
					Example of the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> output:
				</p><pre class="literallayout">ptp4l[352.359]: selected /dev/ptp0 as PTP clock
ptp4l[352.361]: port 1: INITIALIZING to LISTENING on INITIALIZE
ptp4l[352.361]: port 0: INITIALIZING to LISTENING on INITIALIZE
ptp4l[353.210]: port 1: new foreign master 00a069.fffe.0b552d-1
ptp4l[357.214]: selected best master clock 00a069.fffe.0b552d
ptp4l[357.214]: port 1: LISTENING to UNCALIBRATED on RS_SLAVE
ptp4l[359.224]: master offset    3304 s0 freq   +0 path delay   9202
ptp4l[360.224]: master offset    3708 s1 freq -29492 path delay   9202
ptp4l[361.224]: master offset   -3145 s2 freq -32637 path delay   9202
ptp4l[361.224]: port 1: UNCALIBRATED to SLAVE on MASTER_CLOCK_SELECTED
ptp4l[362.223]: master offset    -145 s2 freq -30580 path delay   9202
ptp4l[363.223]: master offset    1043 s2 freq -29436 path delay   8972
ptp4l[364.223]: master offset    266 s2 freq -29900 path delay   9153
ptp4l[365.223]: master offset    430 s2 freq -29656 path delay   9153
ptp4l[366.223]: master offset    615 s2 freq -29342 path delay   9169
ptp4l[367.222]: master offset    -191 s2 freq -29964 path delay   9169
ptp4l[368.223]: master offset    466 s2 freq -29364 path delay   9170
ptp4l[369.235]: master offset     24 s2 freq -29666 path delay   9196
ptp4l[370.235]: master offset    -375 s2 freq -30058 path delay   9238
ptp4l[371.235]: master offset    285 s2 freq -29511 path delay   9199
ptp4l[372.235]: master offset    -78 s2 freq -29788 path delay   9204</pre><p>
					Example of the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> output:
				</p><pre class="literallayout">phc2sys[526.527]: Waiting for ptp4l...
phc2sys[527.528]: Waiting for ptp4l...
phc2sys[528.528]: phc offset   55341 s0 freq   +0 delay  2729
phc2sys[529.528]: phc offset   54658 s1 freq -37690 delay  2725
phc2sys[530.528]: phc offset    888 s2 freq -36802 delay  2756
phc2sys[531.528]: phc offset   1156 s2 freq -36268 delay  2766
phc2sys[532.528]: phc offset    411 s2 freq -36666 delay  2738
phc2sys[533.528]: phc offset    -73 s2 freq -37026 delay  2764
phc2sys[534.528]: phc offset    39 s2 freq -36936 delay  2746
phc2sys[535.529]: phc offset    95 s2 freq -36869 delay  2733
phc2sys[536.529]: phc offset   -359 s2 freq -37294 delay  2738
phc2sys[537.529]: phc offset   -257 s2 freq -37300 delay  2753
phc2sys[538.529]: phc offset    119 s2 freq -37001 delay  2745
phc2sys[539.529]: phc offset    288 s2 freq -36796 delay  2766
phc2sys[540.529]: phc offset   -149 s2 freq -37147 delay  2760
phc2sys[541.529]: phc offset   -352 s2 freq -37395 delay  2771
phc2sys[542.529]: phc offset    166 s2 freq -36982 delay  2748
phc2sys[543.529]: phc offset    50 s2 freq -37048 delay  2756
phc2sys[544.530]: phc offset    -31 s2 freq -37114 delay  2748
phc2sys[545.530]: phc offset   -333 s2 freq -37426 delay  2747
phc2sys[546.530]: phc offset    194 s2 freq -36999 delay  2749</pre><p>
					To reduce the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> output and print only the values, use the <code class="literal option">summary_interval</code> directive. The <code class="literal option">summary_interval</code> directive is specified as 2 to the power of <span class="emphasis"><em>n</em></span> in seconds. For example, to reduce the output to every <code class="literal">1024</code> seconds, add the following line to the <code class="literal">/etc/ptp4l.conf</code> file:
				</p><pre class="literallayout">summary_interval 10</pre><p>
					An example of the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> output, with <code class="literal option">summary_interval</code> set to 6:
				</p><pre class="literallayout">ptp4l: [615.253] selected /dev/ptp0 as PTP clock
ptp4l: [615.255] port 1: INITIALIZING to LISTENING on INITIALIZE
ptp4l: [615.255] port 0: INITIALIZING to LISTENING on INITIALIZE
ptp4l: [615.564] port 1: new foreign master 00a069.fffe.0b552d-1
ptp4l: [619.574] selected best master clock 00a069.fffe.0b552d
ptp4l: [619.574] port 1: LISTENING to UNCALIBRATED on RS_SLAVE
ptp4l: [623.573] port 1: UNCALIBRATED to SLAVE on MASTER_CLOCK_SELECTED
ptp4l: [684.649] rms 669 max 3691 freq -29383 ± 3735 delay 9232 ± 122
ptp4l: [748.724] rms 253 max 588 freq -29787 ± 221 delay 9219 ± 158
ptp4l: [812.793] rms 287 max 673 freq -29802 ± 248 delay 9211 ± 183
ptp4l: [876.853] rms 226 max 534 freq -29795 ± 197 delay 9221 ± 138
ptp4l: [940.925] rms 250 max 562 freq -29801 ± 218 delay 9199 ± 148
ptp4l: [1004.988] rms 226 max 525 freq -29802 ± 196 delay 9228 ± 143
ptp4l: [1069.065] rms 300 max 646 freq -29802 ± 259 delay 9214 ± 176
ptp4l: [1133.125] rms 226 max 505 freq -29792 ± 197 delay 9225 ± 159
ptp4l: [1197.185] rms 244 max 688 freq -29790 ± 211 delay 9201 ± 162</pre><p>
					By default, <code class="literal option">summary_interval</code> is set to 0, so messages are printed once per second, which is the maximum frequency. The messages are logged at the LOG_INFO level. To disable messages, use the <code class="literal option">-l</code> option to set the maximum log level to 5 or lower:
				</p><pre class="literallayout">~]# phc2sys -l 5</pre><p>
					You can use the <code class="literal option">-u</code> option to reduce the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> output:
				</p><pre class="literallayout">~]# phc2sys -u summary-updates</pre><p>
					Where <span class="emphasis"><em>summary-updates</em></span> is the number of clock updates to include in summary statistics. An example follows:
				</p><pre class="literallayout">~]# phc2sys -s eth3 -w -m -u 60
phc2sys[700.948]: rms 1837 max 10123 freq -36474 ± 4752 delay 2752 ± 16
phc2sys[760.954]: rms 194 max 457 freq -37084 ± 174 delay 2753 ± 12
phc2sys[820.963]: rms 211 max 487 freq -37085 ± 185 delay 2750 ± 19
phc2sys[880.968]: rms 183 max 440 freq -37102 ± 164 delay 2734 ± 91
phc2sys[940.973]: rms 244 max 584 freq -37095 ± 216 delay 2748 ± 16
phc2sys[1000.979]: rms 220 max 573 freq -36666 ± 182 delay 2747 ± 43
phc2sys[1060.984]: rms 266 max 675 freq -36759 ± 234 delay 2753 ± 17</pre><p>
					When used with these options, the interval for updating the statistics is set to 60 seconds (<code class="literal option">-u</code>), <code class="literal command">phc2sys</code> waits until <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> is in synchronized state (<code class="literal option">-w</code>), and messages are printed to the standard output (<code class="literal option">-m</code>). For further details about the <code class="literal command">phc2sys</code> options, see the <code class="literal">phc2sys(5)</code> man page.
				</p><p>
					The output includes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							offset root mean square (rms)
						</li><li class="listitem">
							maximum absolute offset (max)
						</li><li class="listitem">
							frequency offset (freq): its mean, and standard deviation
						</li><li class="listitem">
							path delay (delay): its mean, and standard deviation
						</li></ul></div></section><section class="section" id="sec-Serving_PTP_Time_with_NTP"><div class="titlepage"><div><div><h2 class="title">20.8.&nbsp;Serving PTP Time with NTP</h2></div></div></div><p>
					The <code class="literal">ntpd</code> daemon can be configured to distribute the time from the system clock synchronized by <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> or <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> by using the LOCAL reference clock driver. To prevent <code class="literal">ntpd</code> from adjusting the system clock, the <code class="literal">ntp.conf</code> file must not specify any <code class="literal">NTP</code> servers. The following is a minimal example of <code class="literal">ntp.conf</code>:
				</p><pre class="literallayout">~]# cat /etc/ntp.conf
server  127.127.1.0
fudge  127.127.1.0 stratum 0</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When the <code class="literal">DHCP</code> client program, <span class="strong strong"><strong><span class="application application">dhclient</span></strong></span>, receives a list of <code class="literal">NTP</code> servers from the <code class="literal">DHCP</code> server, it adds them to <code class="literal">ntp.conf</code> and restarts the service. To disable that feature, add <code class="literal command">PEERNTP=no</code> to <code class="literal">/etc/sysconfig/network</code>.
					</p></div></div></section><section class="section" id="sec-Serving_NTP_Time_with_PTP"><div class="titlepage"><div><div><h2 class="title">20.9.&nbsp;Serving NTP Time with PTP</h2></div></div></div><p>
					<code class="literal">NTP</code> to <code class="literal">PTP</code> synchronization in the opposite direction is also possible. When <code class="literal">ntpd</code> is used to synchronize the system clock, <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> can be configured with the <code class="literal option">priority1</code> option (or other clock options included in the best master clock algorithm) to be the grandmaster clock and distribute the time from the system clock via <code class="literal">PTP</code>:
				</p><pre class="literallayout">~]# cat /etc/ptp4l.conf
[global]
priority1 127
[eth3]
# ptp4l -f /etc/ptp4l.conf</pre><p>
					With hardware time stamping, <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> needs to be used to synchronize the <code class="literal">PTP</code> hardware clock to the system clock. If running <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> as a service, edit the <code class="literal">/etc/sysconfig/phc2sys</code> configuration file. The default setting in the <code class="literal">/etc/sysconfig/phc2sys</code> file is as follows:
				</p><pre class="literallayout">OPTIONS="-a -r"</pre><p>
					As <code class="literal">root</code>, edit that line as follows:
				</p><pre class="literallayout">~]# vi /etc/sysconfig/phc2sys
OPTIONS="-a -r -r"</pre><p>
					The <code class="literal option">-r</code> option is used twice here to allow synchronization of the <code class="literal">PTP</code> hardware clock on the NIC from the system clock. Restart the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> service for the changes to take effect:
				</p><pre class="literallayout">~]# systemctl restart phc2sys</pre><p>
					To prevent quick changes in the <code class="literal">PTP</code> clock’s frequency, the synchronization to the system clock can be loosened by using smaller <code class="literal option">P</code> (proportional) and <code class="literal option">I</code> (integral) constants for the PI servo:
				</p><pre class="literallayout">~]# phc2sys -a -r -r -P 0.01 -I 0.0001</pre></section><section class="section" id="sec-Synchronize_to_PTP_or_NTP_Time_Using_timemaster"><div class="titlepage"><div><div><h2 class="title">20.10.&nbsp;Synchronize to PTP or NTP Time Using timemaster</h2></div></div></div><p>
					When there are multiple <code class="literal">PTP</code> domains available on the network, or fallback to <code class="literal">NTP</code> is needed, the <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span> program can be used to synchronize the system clock to all available time sources. The <code class="literal">PTP</code> time is provided by <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> and <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> via <span class="emphasis"><em>shared memory driver</em></span> (<span class="strong strong"><strong>SHM</strong></span> reference clocks to <code class="literal">chronyd</code> or <code class="literal">ntpd</code> (depending on the <code class="literal">NTP</code> daemon that has been configured on the system). The <code class="literal">NTP</code> daemon can then compare all time sources, both <code class="literal">PTP</code> and <code class="literal">NTP</code>, and use the best sources to synchronize the system clock.
				</p><p>
					On start, <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span> reads a configuration file that specifies the <code class="literal">NTP</code> and <code class="literal">PTP</code> time sources, checks which network interfaces have their own or share a <code class="literal">PTP</code> hardware clock (PHC), generates configuration files for <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and <code class="literal">chronyd</code> or <code class="literal">ntpd</code>, and starts the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span>, <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span>, and <code class="literal">chronyd</code> or <code class="literal">ntpd</code> processes as needed. It will remove the generated configuration files on exit. It writes configuration files for <code class="literal">chronyd</code>, <code class="literal">ntpd</code>, and <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> to <code class="literal">/var/run/timemaster/</code>.
				</p><section class="section" id="sec-Starting_timemaster_as_a_Service"><div class="titlepage"><div><div><h3 class="title">20.10.1.&nbsp;Starting timemaster as a Service</h3></div></div></div><p>
						To start <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span> as a service, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl start timemaster</pre><p>
						This will read the options in <code class="literal">/etc/timemaster.conf</code>. For more information on managing system services in Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p></section><section class="section" id="sec-Understanding_the_timemaster_Configuration_File"><div class="titlepage"><div><div><h3 class="title">20.10.2.&nbsp;Understanding the timemaster Configuration File</h3></div></div></div><p>
						Red Hat Enterprise Linux provides a default <code class="literal">/etc/timemaster.conf</code> file with a number of sections containing default options. The section headings are enclosed in brackets.
					</p><p>
						To view the default configuration, issue a command as follows:
					</p><pre class="literallayout">~]$ less /etc/timemaster.conf
# Configuration file for timemaster

#[ntp_server ntp-server.local]
#minpoll 4
#maxpoll 4

#[ptp_domain 0]
#interfaces eth0

[timemaster]
ntp_program chronyd

[chrony.conf]
include /etc/chrony.conf

[ntp.conf]
includefile /etc/ntp.conf

[ptp4l.conf]

[chronyd]
path /usr/sbin/chronyd
options -u chrony

[ntpd]
path /usr/sbin/ntpd
options -u ntp:ntp -g

[phc2sys]
path /usr/sbin/phc2sys

[ptp4l]
path /usr/sbin/ptp4l</pre><p>
						Notice the section named as follows:
					</p><pre class="literallayout">[ntp_server <span class="emphasis"><em>address</em></span>]</pre><p>
						This is an example of an <code class="literal">NTP</code> server section, "ntp-server.local" is an example of a host name for an <code class="literal">NTP</code> server on the local LAN. Add more sections as required using a host name or <code class="literal">IP</code> address as part of the section name. Note that the short polling values in that example section are not suitable for a public server, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd" title="Chapter 19. Configuring NTP Using ntpd">Chapter&nbsp;19, <em>Configuring NTP Using ntpd</em></a> for an explanation of suitable <code class="literal option">minpoll</code> and <code class="literal option">maxpoll</code> values.
					</p><p>
						Notice the section named as follows:
					</p><pre class="literallayout">[ptp_domain <span class="emphasis"><em>number</em></span>]</pre><p>
						A "PTP domain" is a group of one or more <code class="literal">PTP</code> clocks that synchronize to each other. They may or may not be synchronized to clocks in another domain. Clocks that are configured with the same domain number make up the domain. This includes a <code class="literal">PTP</code> grandmaster clock. The domain number in each "PTP domain" section needs to correspond to one of the <code class="literal">PTP</code> domains configured on the network.
					</p><p>
						An instance of <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> is started for every interface which has its own <code class="literal">PTP</code> clock and hardware time stamping is enabled automatically. Interfaces that support hardware time stamping have a <code class="literal">PTP</code> clock (PHC) attached, however it is possible for a group of interfaces on a NIC to share a PHC. A separate <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> instance will be started for each group of interfaces sharing the same PHC and for each interface that supports only software time stamping. All <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> instances are configured to run as a slave. If an interface with hardware time stamping is specified in more than one <code class="literal">PTP</code> domain, then only the first <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> instance created will have hardware time stamping enabled.
					</p><p>
						Notice the section named as follows:
					</p><pre class="literallayout">[timemaster]</pre><p>
						The default <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span> configuration includes the system <code class="literal">ntpd</code> and chrony configuration (<code class="literal">/etc/ntp.conf</code> or <code class="literal">/etc/chronyd.conf</code>) in order to include the configuration of access restrictions and authentication keys. That means any <code class="literal">NTP</code> servers specified there will be used with <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span> too.
					</p><p>
						The section headings are as follows:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal option">[ntp_server ntp-server.local]</code> — Specify polling intervals for this server. Create additional sections as required. Include the host name or <code class="literal">IP</code> address in the section heading.
							</li><li class="listitem">
								<code class="literal option">[ptp_domain 0]</code> — Specify interfaces that have <code class="literal">PTP</code> clocks configured for this domain. Create additional sections with, the appropriate domain number, as required.
							</li><li class="listitem">
								<code class="literal option">[timemaster]</code> — Specify the <code class="literal">NTP</code> daemon to be used. Possible values are <code class="literal">chronyd</code> and <code class="literal">ntpd</code>.
							</li><li class="listitem">
								<code class="literal option">[chrony.conf]</code> — Specify any additional settings to be copied to the configuration file generated for <code class="literal">chronyd</code>.
							</li><li class="listitem">
								<code class="literal option">[ntp.conf]</code> — Specify any additional settings to be copied to the configuration file generated for <code class="literal">ntpd</code>.
							</li><li class="listitem">
								<code class="literal option">[ptp4l.conf]</code> — Specify options to be copied to the configuration file generated for <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span>.
							</li><li class="listitem">
								<code class="literal option">[chronyd]</code> — Specify any additional settings to be passed on the command line to <code class="literal">chronyd</code>.
							</li><li class="listitem">
								<code class="literal option">[ntpd]</code> — Specify any additional settings to be passed on the command line to <code class="literal">ntpd</code>.
							</li><li class="listitem">
								<code class="literal option">[phc2sys]</code> — Specify any additional settings to be passed on the command line to <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span>.
							</li><li class="listitem">
								<code class="literal option">[ptp4l]</code> — Specify any additional settings to be passed on the command line to all instances of <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span>.
							</li></ul></div><p>
						The section headings and there contents are explained in detail in the <code class="literal">timemaster(8)</code> manual page.
					</p></section><section class="section" id="sec-Configuring_timemaster_Options"><div class="titlepage"><div><div><h3 class="title">20.10.3.&nbsp;Configuring timemaster Options</h3></div></div></div><div class="orderedlist" id="proc-Editing_the_timemaster_Configuration_File"><p class="title"><strong>Editing the timemaster Configuration File</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To change the default configuration, open the <code class="literal">/etc/timemaster.conf</code> file for editing as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# vi /etc/timemaster.conf</pre></li><li class="listitem">
								For each <code class="literal">NTP</code> server you want to control using <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span>, create <code class="literal">[ntp_server <span class="emphasis"><em>address</em></span>]</code> sections. Note that the short polling values in the example section are not suitable for a public server, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd" title="Chapter 19. Configuring NTP Using ntpd">Chapter&nbsp;19, <em>Configuring NTP Using ntpd</em></a> for an explanation of suitable <code class="literal option">minpoll</code> and <code class="literal option">maxpoll</code> values.
							</li><li class="listitem"><p class="simpara">
								To add interfaces that should be used in a domain, edit the <code class="literal">#[ptp_domain 0]</code> section and add the interfaces. Create additional domains as required. For example:
							</p><pre class="literallayout">[ptp_domain 0]
    interfaces eth0

    [ptp_domain 1]
    interfaces eth1</pre></li><li class="listitem">
								If required to use <code class="literal">ntpd</code> as the <code class="literal">NTP</code> daemon on this system, change the default entry in the <code class="literal">[timemaster]</code> section from <code class="literal">chronyd</code> to <code class="literal">ntpd</code>. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_the_chrony_Suite" title="Chapter 18. Configuring NTP Using the chrony Suite">Chapter&nbsp;18, <em>Configuring NTP Using the chrony Suite</em></a> for information on the differences between ntpd and chronyd.
							</li><li class="listitem">
								If using <code class="literal">chronyd</code> as the <code class="literal">NTP</code> server on this system, add any additional options below the default <code class="literal option">include /etc/chrony.conf</code> entry in the <code class="literal">[chrony.conf]</code> section. Edit the default <code class="literal option">include</code> entry if the path to <code class="literal">/etc/chrony.conf</code> is known to have changed.
							</li><li class="listitem">
								If using <code class="literal">ntpd</code> as the <code class="literal">NTP</code> server on this system, add any additional options below the default <code class="literal option">include /etc/ntp.conf</code> entry in the <code class="literal">[ntp.conf]</code> section. Edit the default <code class="literal option">include</code> entry if the path to <code class="literal">/etc/ntp.conf</code> is known to have changed.
							</li><li class="listitem">
								In the <code class="literal">[ptp4l.conf]</code> section, add any options to be copied to the configuration file generated for <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span>. This chapter documents common options and more information is available in the <code class="literal">ptp4l(8)</code> manual page.
							</li><li class="listitem">
								In the <code class="literal">[chronyd]</code> section, add any command line options to be passed to <code class="literal">chronyd</code> when called by <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span>. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_the_chrony_Suite" title="Chapter 18. Configuring NTP Using the chrony Suite">Chapter&nbsp;18, <em>Configuring NTP Using the chrony Suite</em></a> for information on using <code class="literal">chronyd</code>.
							</li><li class="listitem">
								In the <code class="literal">[ntpd]</code> section, add any command line options to be passed to <code class="literal">ntpd</code> when called by <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span>. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd" title="Chapter 19. Configuring NTP Using ntpd">Chapter&nbsp;19, <em>Configuring NTP Using ntpd</em></a> for information on using <code class="literal">ntpd</code>.
							</li><li class="listitem">
								In the <code class="literal">[phc2sys]</code> section, add any command line options to be passed to <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> when called by <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span>. This chapter documents common options and more information is available in the <code class="literal">phy2sys(8)</code> manual page.
							</li><li class="listitem">
								In the <code class="literal">[ptp4l]</code> section, add any command line options to be passed to <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> when called by <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span>. This chapter documents common options and more information is available in the <code class="literal">ptp4l(8)</code> manual page.
							</li><li class="listitem"><p class="simpara">
								Save the configuration file and restart <span class="strong strong"><strong><span class="application application">timemaster</span></strong></span> by issuing the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# systemctl restart timemaster</pre></li></ol></div></section></section><section class="section" id="sec-Improving_Accuracy"><div class="titlepage"><div><div><h2 class="title">20.11.&nbsp;Improving Accuracy</h2></div></div></div><p>
					Previously, test results indicated that disabling the tickless kernel capability could significantly improve the stability of the system clock, and thus improve the <code class="literal">PTP</code> synchronization accuracy (at the cost of increased power consumption). The kernel tickless mode can be disabled by adding <code class="literal option">nohz=off</code> to the kernel boot option parameters. However, recent improvements applied to <code class="literal">kernel-3.10.0-197.el7</code> have greatly improved the stability of the system clock and the difference in stability of the clock with and without <code class="literal option">nohz=off</code> should be much smaller now for most users.
				</p><p>
					The <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> applications can be configured to use a new adaptive servo. The advantage over the PI servo is that it does not require configuration of the PI constants to perform well. To make use of this for <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span>, add the following line to the <code class="literal">/etc/ptp4l.conf</code> file:
				</p><pre class="literallayout">clock_servo linreg</pre><p>
					After making changes to <code class="literal">/etc/ptp4l.conf</code>, restart the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> service from the command line by issuing the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# systemctl restart ptp4l</pre><p>
					To make use of this for <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span>, add the following line to the <code class="literal">/etc/sysconfig/phc2sys</code> file:
				</p><pre class="literallayout">-E linreg</pre><p>
					After making changes to <code class="literal">/etc/sysconfig/phc2sys</code>, restart the <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> service from the command line by issuing the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# systemctl restart phc2sys</pre></section><section class="section" id="sec-PTP_additional_resources"><div class="titlepage"><div><div><h2 class="title">20.12.&nbsp;Additional Resources</h2></div></div></div><p>
					The following sources of information provide additional resources regarding <code class="literal">PTP</code> and the <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> tools.
				</p><section class="section" id="sec-PTP-docs-inst"><div class="titlepage"><div><div><h3 class="title">20.12.1.&nbsp;Installed Documentation</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">ptp4l(8)</code> man page — Describes <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> options including the format of the configuration file.
							</li><li class="listitem">
								<code class="literal">pmc(8)</code> man page — Describes the <code class="literal">PTP</code> management client and its command options.
							</li><li class="listitem">
								<code class="literal">phc2sys(8)</code> man page — Describes a tool for synchronizing the system clock to a <code class="literal">PTP</code> hardware clock (PHC).
							</li><li class="listitem">
								<code class="literal">timemaster(8)</code> man page — Describes a program that uses <span class="strong strong"><strong><span class="application application">ptp4l</span></strong></span> and <span class="strong strong"><strong><span class="application application">phc2sys</span></strong></span> to synchronize the system clock using <code class="literal">chronyd</code> or <code class="literal">ntpd</code>.
							</li></ul></div></section><section class="section" id="sec-PTP_useful-websites"><div class="titlepage"><div><div><h3 class="title">20.12.2.&nbsp;Useful Websites</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="http://www.nist.gov/el/isd/ieee/ieee1588.cfm">http://www.nist.gov/el/isd/ieee/ieee1588.cfm</a></span></dt><dd>
									The IEEE 1588 Standard.
								</dd></dl></div></section></section></section></div><div class="part" id="part-Monitoring_and_Automation"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;VI.&nbsp;Monitoring and Automation</h1></div></div></div><div class="partintro" id="idm140569350882176"><div><!--Empty--></div><p>
				This part describes various tools that allow system administrators to monitor system performance, automate system tasks, and report bugs.
			</p></div><section class="chapter" id="ch-System_Monitoring_Tools"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;21.&nbsp;System Monitoring Tools</h2></div></div></div><p>
				In order to configure the system, system administrators often need to determine the amount of free memory, how much free disk space is available, how the hard drive is partitioned, or what processes are running.
			</p><section class="section" id="s1-sysinfo-system-processes"><div class="titlepage"><div><div><h2 class="title">21.1.&nbsp;Viewing System Processes</h2></div></div></div><section class="section" id="s2-sysinfo-system-processes-ps"><div class="titlepage"><div><div><h3 class="title">21.1.1.&nbsp;Using the ps Command</h3></div></div></div><p>
						The <code class="literal command">ps</code> command allows you to display information about running processes. It produces a static list, that is, a snapshot of what is running when you execute the command. If you want a constantly updated list of running processes, use the <code class="literal command">top</code> command or the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> application instead.
					</p><p>
						To list all processes that are currently running on the system including processes owned by other users, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">ps</code> <code class="literal option">ax</code></pre><p>
						For each listed process, the <code class="literal command">ps ax</code> command displays the process ID (<code class="literal">PID</code>), the terminal that is associated with it (<code class="literal">TTY</code>), the current status (<code class="literal">STAT</code>), the cumulated CPU time (<code class="literal">TIME</code>), and the name of the executable file (<code class="literal">COMMAND</code>). For example:
					</p><pre class="literallayout">~]$ <code class="literal command">ps ax</code>
PID TTY   STAT  TIME COMMAND
 1 ?    Ss   0:01 /usr/lib/systemd/systemd --switched-root --system --deserialize 23
 2 ?    S   0:00 [kthreadd]
 3 ?    S   0:00 [ksoftirqd/0]
 5 ?    S&gt;   0:00 [kworker/0:0H]
<span class="emphasis"><em>[output truncated]</em></span></pre><p>
						To display the owner alongside each process, use the following command:
					</p><pre class="literallayout"><code class="literal command">ps</code> <code class="literal option">aux</code></pre><p>
						Apart from the information provided by the <code class="literal command">ps ax</code> command, <code class="literal command">ps aux</code> displays the effective user name of the process owner (<code class="literal">USER</code>), the percentage of the CPU (<code class="literal">%CPU</code>) and memory (<code class="literal">%MEM</code>) usage, the virtual memory size in kilobytes (<code class="literal">VSZ</code>), the non-swapped physical memory size in kilobytes (<code class="literal">RSS</code>), and the time or date the process was started. For example:
					</p><pre class="literallayout">~]$ <code class="literal command">ps aux</code>
USER PID %CPU %MEM  VSZ  RSS TTY  STAT START  TIME COMMAND
root  1 0.3 0.3 134776 6840 ?   Ss  09:28  0:01 /usr/lib/systemd/systemd --switched-root --system --d
root  2 0.0 0.0   0   0 ?   S  09:28  0:00 [kthreadd]
root  3 0.0 0.0   0   0 ?   S  09:28  0:00 [ksoftirqd/0]
root  5 0.0 0.0   0   0 ?   S&gt;  09:28  0:00 [kworker/0:0H]
<span class="emphasis"><em>[output truncated]</em></span></pre><p>
						You can also use the <code class="literal command">ps</code> command in a combination with <code class="literal command">grep</code> to see if a particular process is running. For example, to determine if <span class="strong strong"><strong><span class="application application">Emacs</span></strong></span> is running, type:
					</p><pre class="literallayout">~]$ ps ax | grep emacs
12056 pts/3  S+   0:00 emacs
12060 pts/2  S+   0:00 grep --color=auto emacs</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>ps</em></span>(1) manual page.
					</p></section><section class="section" id="s2-sysinfo-system-processes-top"><div class="titlepage"><div><div><h3 class="title">21.1.2.&nbsp;Using the top Command</h3></div></div></div><p>
						The <code class="literal command">top</code> command displays a real-time list of processes that are running on the system. It also displays additional information about the system uptime, current CPU and memory usage, or total number of running processes, and allows you to perform actions such as sorting the list or killing a process.
					</p><p>
						To run the <code class="literal command">top</code> command, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">top</code></pre><p>
						For each listed process, the <code class="literal command">top</code> command displays the process ID (<code class="literal">PID</code>), the effective user name of the process owner (<code class="literal">USER</code>), the priority (<code class="literal">PR</code>), the nice value (<code class="literal">NI</code>), the amount of virtual memory the process uses (<code class="literal">VIRT</code>), the amount of non-swapped physical memory the process uses (<code class="literal">RES</code>), the amount of shared memory the process uses (<code class="literal">SHR</code>), the process status field <code class="literal">S</code>), the percentage of the CPU (<code class="literal">%CPU</code>) and memory (<code class="literal">%MEM</code>) usage, the cumulated CPU time (<code class="literal">TIME+</code>), and the name of the executable file (<code class="literal">COMMAND</code>). For example:
					</p><pre class="literallayout">~]$ top
top - 16:42:12 up 13 min, 2 users, load average: 0.67, 0.31, 0.19
Tasks: 165 total,  2 running, 163 sleeping,  0 stopped,  0 zombie
%Cpu(s): 37.5 us, 3.0 sy, 0.0 ni, 59.5 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st
KiB Mem : 1016800 total,  77368 free,  728936 used,  210496 buff/cache
KiB Swap:  839676 total,  776796 free,  62880 used.  122628 avail Mem

 PID USER   PR NI  VIRT  RES  SHR S %CPU %MEM   TIME+ COMMAND
 3168 sjw    20  0 1454628 143240 15016 S 20.3 14.1  0:22.53 gnome-shell
 4006 sjw    20  0 1367832 298876 27856 S 13.0 29.4  0:15.58 firefox
 1683 root   20  0 242204 50464  4268 S 6.0 5.0  0:07.76 Xorg
 4125 sjw    20  0 555148 19820 12644 S 1.3 1.9  0:00.48 gnome-terminal-
  10 root   20  0    0   0   0 S 0.3 0.0  0:00.39 rcu_sched
 3091 sjw    20  0  37000  1468  904 S 0.3 0.1  0:00.31 dbus-daemon
 3096 sjw    20  0 129688  2164  1492 S 0.3 0.2  0:00.14 at-spi2-registr
 3925 root   20  0    0   0   0 S 0.3 0.0  0:00.05 kworker/0:0
  1 root   20  0 126568  3884  1052 S 0.0 0.4  0:01.61 systemd
  2 root   20  0    0   0   0 S 0.0 0.0  0:00.00 kthreadd
  3 root   20  0    0   0   0 S 0.0 0.0  0:00.00 ksoftirqd/0
  6 root   20  0    0   0   0 S 0.0 0.0  0:00.07 kworker/u2:0
[output truncated]</pre><p>
						<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#interactive-top-command" title="Table 21.1. Interactive top commands">Table&nbsp;21.1, “Interactive top commands”</a> contains useful interactive commands that you can use with <code class="literal command">top</code>. For more information, see the <span class="emphasis"><em>top</em></span>(1) manual page.
					</p><div class="table" id="interactive-top-command"><p class="title"><strong>Table&nbsp;21.1.&nbsp;Interactive top commands</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569350825280" scope="col">Command</th><th align="left" valign="top" id="idm140569350824192" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>Enter</strong></span>, <span class="keycap"><strong>Space</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Immediately refreshes the display.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>h</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Displays a help screen for interactive commands.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>h</strong></span>, <span class="keycap"><strong>?</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Displays a help screen for windows and field groups.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>k</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Kills a process. You are prompted for the process ID and the signal to send to it.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>n</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Changes the number of displayed processes. You are prompted to enter the number.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>u</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Sorts the list by user.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>M</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Sorts the list by memory usage.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>P</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Sorts the list by CPU usage.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569350825280"> <p>
										<span class="keycap"><strong>q</strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569350824192"> <p>
										Terminates the utility and returns to the shell prompt.
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="s2-sysinfo-system-processes-system_monitor"><div class="titlepage"><div><div><h3 class="title">21.1.3.&nbsp;Using the System Monitor Tool</h3></div></div></div><p>
						The <code class="literal">Processes</code> tab of the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool allows you to view, search for, change the priority of, and kill processes from the graphical user interface.
					</p><p>
						To start the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool from the command line, type <code class="literal command">gnome-system-monitor</code> at a shell prompt. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. Alternatively, if using the GNOME desktop, press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">System Monitor</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the <span class="keycap"><strong>Spacebar</strong></span>.
					</p><p>
						Click the <code class="literal">Processes</code> tab to view the list of running processes.
					</p><div class="figure" id="fig-sysinfo-processes"><p class="title"><strong>Figure&nbsp;21.1.&nbsp;System Monitor — Processes</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/system-monitor-processes.png" alt="The Processes tab of the System Monitor application."></div></div></div><p>
						For each listed process, the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool displays its name (<code class="literal">Process Name</code>), current status (<code class="literal">Status</code>), percentage of the CPU usage (<code class="literal">% CPU</code>), nice value (<code class="literal">Nice</code>), process ID (<code class="literal">ID</code>), memory usage (<code class="literal">Memory</code>), the channel the process is waiting in (<code class="literal">Waiting Channel</code>), and additional details about the session (<code class="literal">Session</code>). To sort the information by a specific column in ascending order, click the name of that column. Click the name of the column again to toggle the sort between ascending and descending order.
					</p><p>
						By default, the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool displays a list of processes that are owned by the current user. Selecting various options from the View menu allows you to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								view only active processes,
							</li><li class="listitem">
								view all processes,
							</li><li class="listitem">
								view your processes,
							</li><li class="listitem">
								view process dependencies,
							</li></ul></div><p>
						Additionally, two buttons enable you to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								refresh the list of processes,
							</li><li class="listitem">
								end a process by selecting it from the list and then clicking the <span class="guibutton">End Process</span> button.
							</li></ul></div></section></section><section class="section" id="s1-sysinfo-memory-usage"><div class="titlepage"><div><div><h2 class="title">21.2.&nbsp;Viewing Memory Usage</h2></div></div></div><section class="section" id="s2-sysinfo-memory-usage-free"><div class="titlepage"><div><div><h3 class="title">21.2.1.&nbsp;Using the free Command</h3></div></div></div><p>
						The <code class="literal command">free</code> command allows you to display the amount of free and used memory on the system. To do so, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">free</code></pre><p>
						The <code class="literal command">free</code> command provides information about both the physical memory (<code class="literal">Mem</code>) and swap space (<code class="literal">Swap</code>). It displays the total amount of memory (<code class="literal">total</code>), as well as the amount of memory that is in use (<code class="literal">used</code>), free (<code class="literal">free</code>), shared (<code class="literal">shared</code>), sum of buffers and cached (<code class="literal">buff/cache</code>), and available (<code class="literal">available</code>). For example:
					</p><pre class="literallayout">~]$ <code class="literal command">free</code>
       total    used    free   shared buff/cache  available
Mem:    1016800   727300    84684    3500   204816   124068
Swap:    839676    66920   772756</pre><p>
						By default, <code class="literal command">free</code> displays the values in kilobytes. To display the values in megabytes, supply the <code class="literal option">-m</code> command line option:
					</p><pre class="literallayout"><code class="literal command">free</code> <code class="literal option">-m</code></pre><p>
						For instance:
					</p><pre class="literallayout">~]$ <code class="literal command">free -m</code>
       total    used    free   shared buff/cache  available
Mem:      992     711     81      3     200     120
Swap:      819     65     754</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>free</em></span>(1) manual page.
					</p></section><section class="section" id="s2-sysinfo-memory-usage-system_monitor"><div class="titlepage"><div><div><h3 class="title">21.2.2.&nbsp;Using the System Monitor Tool</h3></div></div></div><p>
						The <code class="literal">Resources</code> tab of the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool allows you to view the amount of free and used memory on the system.
					</p><p>
						To start the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool from the command line, type <code class="literal command">gnome-system-monitor</code> at a shell prompt. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. Alternatively, if using the GNOME desktop, press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">System Monitor</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the <span class="keycap"><strong>Spacebar</strong></span>.
					</p><p>
						Click the <code class="literal">Resources</code> tab to view the system’s memory usage.
					</p><div class="figure" id="fig-sysinfo-memory"><p class="title"><strong>Figure&nbsp;21.2.&nbsp;System Monitor — Resources</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/system-monitor-resources.png" alt="The Resources tab of the System Monitor application."></div></div></div><p>
						In the <code class="literal">Memory and Swap History</code> section, the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool displays a graphical representation of the memory and swap usage history, as well as the total amount of the physical memory (<code class="literal">Memory</code>) and swap space (<code class="literal">Swap</code>) and how much of it is in use.
					</p></section></section><section class="section" id="s1-sysinfo-cpu"><div class="titlepage"><div><div><h2 class="title">21.3.&nbsp;Viewing CPU Usage</h2></div></div></div><section class="section" id="s2-sysinfo-cpu-system_monitor"><div class="titlepage"><div><div><h3 class="title">21.3.1.&nbsp;Using the System Monitor Tool</h3></div></div></div><p>
						The <code class="literal">Resources</code> tab of the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool allows you to view the current CPU usage on the system.
					</p><p>
						To start the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool from the command line, type <code class="literal command">gnome-system-monitor</code> at a shell prompt. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. Alternatively, if using the GNOME desktop, press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">System Monitor</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the <span class="keycap"><strong>Spacebar</strong></span>.
					</p><p>
						Click the <code class="literal">Resources</code> tab to view the system’s CPU usage.
					</p><p>
						In the <code class="literal">CPU History</code> section, the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool displays a graphical representation of the CPU usage history and shows the percentage of how much CPU is currently in use.
					</p></section></section><section class="section" id="s1-sysinfo-filesystems"><div class="titlepage"><div><div><h2 class="title">21.4.&nbsp;Viewing Block Devices and File Systems</h2></div></div></div><section class="section" id="s2-sysinfo-filesystems-lsblk"><div class="titlepage"><div><div><h3 class="title">21.4.1.&nbsp;Using the lsblk Command</h3></div></div></div><p>
						The <code class="literal command">lsblk</code> command allows you to display a list of available block devices. It provides more information and better control on output formatting than the <code class="literal command">blkid</code> command. It reads information from <span class="strong strong"><strong><span class="application application">udev</span></strong></span>, therefore it is usable by non-<code class="literal">root</code> users. To display a list of block devices, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">lsblk</code></pre><p>
						For each listed block device, the <code class="literal command">lsblk</code> command displays the device name (<code class="literal">NAME</code>), major and minor device number (<code class="literal">MAJ:MIN</code>), if the device is removable (<code class="literal">RM</code>), its size (<code class="literal">SIZE</code>), if the device is read-only (<code class="literal">RO</code>), what type it is (<code class="literal">TYPE</code>), and where the device is mounted (<code class="literal">MOUNTPOINT</code>). For example:
					</p><pre class="literallayout">~]$ lsblk
NAME           MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sr0            11:0  1 1024M 0 rom
vda            252:0  0  20G 0 rom
|-vda1          252:1  0  500M 0 part /boot
`-vda2          252:2  0 19.5G 0 part
 |-vg_kvm-lv_root (dm-0) 253:0  0  18G 0 lvm /
 `-vg_kvm-lv_swap (dm-1) 253:1  0  1.5G 0 lvm [SWAP]</pre><p>
						By default, <code class="literal command">lsblk</code> lists block devices in a tree-like format. To display the information as an ordinary list, add the <code class="literal option">-l</code> command line option:
					</p><pre class="literallayout"><code class="literal command">lsblk</code> <code class="literal option">-l</code></pre><p>
						For instance:
					</p><pre class="literallayout">~]$ lsblk -l
NAME         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sr0          11:0  1 1024M 0 rom
vda          252:0  0  20G 0 rom
vda1         252:1  0  500M 0 part /boot
vda2         252:2  0 19.5G 0 part
vg_kvm-lv_root (dm-0) 253:0  0  18G 0 lvm /
vg_kvm-lv_swap (dm-1) 253:1  0  1.5G 0 lvm [SWAP]</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>lsblk</em></span>(8) manual page.
					</p></section><section class="section" id="s2-sysinfo-filesystems-blkid"><div class="titlepage"><div><div><h3 class="title">21.4.2.&nbsp;Using the blkid Command</h3></div></div></div><p>
						The <code class="literal command">blkid</code> command allows you to display low-level information about available block devices. It requires <code class="literal">root</code> privileges, therefore non-<code class="literal">root</code> users should use the <code class="literal command">lsblk</code> command. To do so, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">blkid</code></pre><p>
						For each listed block device, the <code class="literal command">blkid</code> command displays available attributes such as its <span class="emphasis"><em>universally unique identifier</em></span> (<code class="literal">UUID</code>), file system type (<code class="literal">TYPE</code>), or volume label (<code class="literal">LABEL</code>). For example:
					</p><pre class="literallayout">~]# blkid
/dev/vda1: UUID="7fa9c421-0054-4555-b0ca-b470a97a3d84" TYPE="ext4"
/dev/vda2: UUID="7IvYzk-TnnK-oPjf-ipdD-cofz-DXaJ-gPdgBW" TYPE="LVM2_member"
/dev/mapper/vg_kvm-lv_root: UUID="a07b967c-71a0-4925-ab02-aebcad2ae824" TYPE="ext4"
/dev/mapper/vg_kvm-lv_swap: UUID="d7ef54ca-9c41-4de4-ac1b-4193b0c1ddb6" TYPE="swap"</pre><p>
						By default, the <code class="literal command">blkid</code> command lists all available block devices. To display information about a particular device only, specify the device name on the command line:
					</p><pre class="literallayout">blkid <span class="emphasis"><em>device_name</em></span></pre><p>
						For instance, to display information about <code class="literal">/dev/vda1</code>, type as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# blkid /dev/vda1
/dev/vda1: UUID="7fa9c421-0054-4555-b0ca-b470a97a3d84" TYPE="ext4"</pre><p>
						You can also use the above command with the <code class="literal option">-p</code> and <code class="literal option">-o udev</code> command line options to obtain more detailed information. Note that <code class="literal">root</code> privileges are required to run this command:
					</p><pre class="literallayout">blkid -po udev <span class="emphasis"><em>device_name</em></span></pre><p>
						For example:
					</p><pre class="literallayout">~]# blkid -po udev /dev/vda1
ID_FS_UUID=7fa9c421-0054-4555-b0ca-b470a97a3d84
ID_FS_UUID_ENC=7fa9c421-0054-4555-b0ca-b470a97a3d84
ID_FS_VERSION=1.0
ID_FS_TYPE=ext4
ID_FS_USAGE=filesystem</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>blkid</em></span>(8) manual page.
					</p></section><section class="section" id="s2-sysinfo-filesystems-findmnt"><div class="titlepage"><div><div><h3 class="title">21.4.3.&nbsp;Using the findmnt Command</h3></div></div></div><p>
						The <code class="literal command">findmnt</code> command allows you to display a list of currently mounted file systems. To do so, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">findmnt</code></pre><p>
						For each listed file system, the <code class="literal command">findmnt</code> command displays the target mount point (<code class="literal">TARGET</code>), source device (<code class="literal">SOURCE</code>), file system type (<code class="literal">FSTYPE</code>), and relevant mount options (<code class="literal">OPTIONS</code>). For example:
					</p><pre class="literallayout">~]$ findmnt
TARGET              SOURCE       FSTYPE     OPTIONS
/                /dev/mapper/rhel-root
                          xfs       rw,relatime,seclabel,attr2,inode64,noquota
├─/proc             proc        proc      rw,nosuid,nodev,noexec,relatime
│ ├─/proc/sys/fs/binfmt_misc   systemd-1     autofs     rw,relatime,fd=32,pgrp=1,timeout=300,minproto=5,maxproto=5,direct
│ └─/proc/fs/nfsd        sunrpc       nfsd      rw,relatime
├─/sys              sysfs       sysfs      rw,nosuid,nodev,noexec,relatime,seclabel
│ ├─/sys/kernel/security     securityfs     securityfs   rw,nosuid,nodev,noexec,relatime
│ ├─/sys/fs/cgroup        tmpfs       tmpfs      rw,nosuid,nodev,noexec,seclabel,mode=755
[output truncated]</pre><p>
						By default, <code class="literal command">findmnt</code> lists file systems in a tree-like format. To display the information as an ordinary list, add the <code class="literal option">-l</code> command line option:
					</p><pre class="literallayout"><code class="literal command">findmnt</code> <code class="literal option">-l</code></pre><p>
						For instance:
					</p><pre class="literallayout">~]$ findmnt -l
TARGET           SOURCE        FSTYPE     OPTIONS
/proc           proc         proc      rw,nosuid,nodev,noexec,relatime
/sys            sysfs         sysfs      rw,nosuid,nodev,noexec,relatime,seclabel
/dev            devtmpfs       devtmpfs    rw,nosuid,seclabel,size=933372k,nr_inodes=233343,mode=755
/sys/kernel/security    securityfs      securityfs   rw,nosuid,nodev,noexec,relatime
/dev/shm          tmpfs         tmpfs      rw,nosuid,nodev,seclabel
/dev/pts          devpts        devpts     rw,nosuid,noexec,relatime,seclabel,gid=5,mode=620,ptmxmode=000
/run            tmpfs         tmpfs      rw,nosuid,nodev,seclabel,mode=755
/sys/fs/cgroup       tmpfs         tmpfs      rw,nosuid,nodev,noexec,seclabel,mode=755
[output truncated]</pre><p>
						You can also choose to list only file systems of a particular type. To do so, add the <code class="literal option">-t</code> command line option followed by a file system type:
					</p><pre class="literallayout"><code class="literal command">findmnt</code> <code class="literal option">-t</code> <span class="emphasis"><em>type</em></span></pre><p>
						For example, to all list <code class="literal">xfs</code> file systems, type:
					</p><pre class="literallayout">~]$ <code class="literal command">findmnt -t xfs</code>
TARGET SOURCE        FSTYPE OPTIONS
/    /dev/mapper/rhel-root xfs  rw,relatime,seclabel,attr2,inode64,noquota
└─/boot /dev/vda1       xfs  rw,relatime,seclabel,attr2,inode64,noquota</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>findmnt</em></span>(8) manual page.
					</p></section><section class="section" id="s2-sysinfo-filesystems-df"><div class="titlepage"><div><div><h3 class="title">21.4.4.&nbsp;Using the df Command</h3></div></div></div><p>
						The <code class="literal command">df</code> command allows you to display a detailed report on the system’s disk space usage. To do so, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">df</code></pre><p>
						For each listed file system, the <code class="literal command">df</code> command displays its name (<code class="literal">Filesystem</code>), size (<code class="literal">1K-blocks</code> or <code class="literal">Size</code>), how much space is used (<code class="literal">Used</code>), how much space is still available (<code class="literal">Available</code>), the percentage of space usage (<code class="literal">Use%</code>), and where is the file system mounted (<code class="literal">Mounted on</code>). For example:
					</p><pre class="literallayout">~]$ df
Filesystem         1K-blocks   Used Available Use% Mounted on
/dev/mapper/vg_kvm-lv_root 18618236  4357360 13315112 25% /
tmpfs             380376    288  380088  1% /dev/shm
/dev/vda1           495844   77029  393215 17% /boot</pre><p>
						By default, the <code class="literal command">df</code> command shows the partition size in 1 kilobyte blocks and the amount of used and available disk space in kilobytes. To view the information in megabytes and gigabytes, supply the <code class="literal option">-h</code> command line option, which causes <code class="literal command">df</code> to display the values in a human-readable format:
					</p><pre class="literallayout"><code class="literal command">df</code> <code class="literal option">-h</code></pre><p>
						For instance:
					</p><pre class="literallayout">~]$ df -h
Filesystem         Size Used Avail Use% Mounted on
/dev/mapper/vg_kvm-lv_root  18G 4.2G  13G 25% /
tmpfs            372M 288K 372M  1% /dev/shm
/dev/vda1          485M  76M 384M 17% /boot</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>df</em></span>(1) manual page.
					</p></section><section class="section" id="s2-sysinfo-filesystems-du"><div class="titlepage"><div><div><h3 class="title">21.4.5.&nbsp;Using the du Command</h3></div></div></div><p>
						The <code class="literal command">du</code> command allows you to displays the amount of space that is being used by files in a directory. To display the disk usage for each of the subdirectories in the current working directory, run the command with no additional command line options:
					</p><pre class="literallayout"><code class="literal command">du</code></pre><p>
						For example:
					</p><pre class="literallayout">~]$ <code class="literal command">du</code>
14972  ./Downloads
4    ./.mozilla/extensions
4    ./.mozilla/plugins
12   ./.mozilla
15004  .</pre><p>
						By default, the <code class="literal command">du</code> command displays the disk usage in kilobytes. To view the information in megabytes and gigabytes, supply the <code class="literal option">-h</code> command line option, which causes the utility to display the values in a human-readable format:
					</p><pre class="literallayout"><code class="literal command">du</code> <code class="literal option">-h</code></pre><p>
						For instance:
					</p><pre class="literallayout">~]$ <code class="literal command">du -h</code>
15M   ./Downloads
4.0K  ./.mozilla/extensions
4.0K  ./.mozilla/plugins
12K   ./.mozilla
15M   .</pre><p>
						At the end of the list, the <code class="literal command">du</code> command always shows the grand total for the current directory. To display only this information, supply the <code class="literal option">-s</code> command line option:
					</p><pre class="literallayout"><code class="literal command">du</code> <code class="literal option">-sh</code></pre><p>
						For example:
					</p><pre class="literallayout">~]$ <code class="literal command">du -sh</code>
15M   .</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>du</em></span>(1) manual page.
					</p></section><section class="section" id="s2-sysinfo-filesystems-system_monitor"><div class="titlepage"><div><div><h3 class="title">21.4.6.&nbsp;Using the System Monitor Tool</h3></div></div></div><p>
						The <code class="literal">File Systems</code> tab of the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool allows you to view file systems and disk space usage in the graphical user interface.
					</p><p>
						To start the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool from the command line, type <code class="literal command">gnome-system-monitor</code> at a shell prompt. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. Alternatively, if using the GNOME desktop, press the <span class="keycap"><strong>Super</strong></span> key to enter the Activities Overview, type <code class="literal command">System Monitor</code> and then press <span class="keycap"><strong>Enter</strong></span>. The <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool appears. The <span class="keycap"><strong>Super</strong></span> key appears in a variety of guises, depending on the keyboard and other hardware, but often as either the Windows or Command key, and typically to the left of the <span class="keycap"><strong>Spacebar</strong></span>.
					</p><p>
						Click the <code class="literal">File Systems</code> tab to view a list of file systems.
					</p><div class="figure" id="fig-sysinfo-filesystems"><p class="title"><strong>Figure&nbsp;21.3.&nbsp;System Monitor — File Systems</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/system-monitor-file-systems.png" alt="The File Systems tab of the System Monitor application."></div></div></div><p>
						For each listed file system, the <span class="strong strong"><strong><span class="application application">System Monitor</span></strong></span> tool displays the source device (<code class="literal">Device</code>), target mount point (<code class="literal">Directory</code>), and file system type (<code class="literal">Type</code>), as well as its size (<code class="literal">Total</code>), and how much space is available (<code class="literal">Available</code>), and used (<code class="literal">Used</code>).
					</p></section></section><section class="section" id="s1-sysinfo-hardware"><div class="titlepage"><div><div><h2 class="title">21.5.&nbsp;Viewing Hardware Information</h2></div></div></div><section class="section" id="s2-sysinfo-hardware-lspci"><div class="titlepage"><div><div><h3 class="title">21.5.1.&nbsp;Using the lspci Command</h3></div></div></div><p>
						The <code class="literal command">lspci</code> command allows you to display information about PCI buses and devices that are attached to them. To list all PCI devices that are in the system, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">lspci</code></pre><p>
						This displays a simple list of devices, for example:
					</p><pre class="literallayout">~]$ lspci
00:00.0 Host bridge: Intel Corporation 82X38/X48 Express DRAM Controller
00:01.0 PCI bridge: Intel Corporation 82X38/X48 Express Host-Primary PCI Express Bridge
00:1a.0 USB Controller: Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #4 (rev 02)
00:1a.1 USB Controller: Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #5 (rev 02)
00:1a.2 USB Controller: Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #6 (rev 02)
[output truncated]</pre><p>
						You can also use the <code class="literal option">-v</code> command line option to display more verbose output, or <code class="literal option">-vv</code> for very verbose output:
					</p><pre class="literallayout"><code class="literal command">lspci</code> <code class="literal option">-v</code>|<code class="literal option">-vv</code></pre><p>
						For instance, to determine the manufacturer, model, and memory size of a system’s video card, type:
					</p><pre class="literallayout">~]$ <code class="literal command">lspci -v</code>
<span class="emphasis"><em>[output truncated]</em></span>

01:00.0 VGA compatible controller: nVidia Corporation G84 [Quadro FX 370] (rev a1) (prog-if 00 [VGA controller])
    Subsystem: nVidia Corporation Device 0491
    Physical Slot: 2
    Flags: bus master, fast devsel, latency 0, IRQ 16
    Memory at f2000000 (32-bit, non-prefetchable) [size=16M]
    Memory at e0000000 (64-bit, prefetchable) [size=256M]
    Memory at f0000000 (64-bit, non-prefetchable) [size=32M]
    I/O ports at 1100 [size=128]
    Expansion ROM at &lt;unassigned&gt; [disabled]
    Capabilities: &lt;access denied&gt;
    Kernel driver in use: nouveau
    Kernel modules: nouveau, nvidiafb

<span class="emphasis"><em>[output truncated]</em></span></pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>lspci</em></span>(8) manual page.
					</p></section><section class="section" id="s2-sysinfo-hardware-lsusb"><div class="titlepage"><div><div><h3 class="title">21.5.2.&nbsp;Using the lsusb Command</h3></div></div></div><p>
						The <code class="literal command">lsusb</code> command allows you to display information about USB buses and devices that are attached to them. To list all USB devices that are in the system, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">lsusb</code></pre><p>
						This displays a simple list of devices, for example:
					</p><pre class="literallayout">~]$ <code class="literal command">lsusb</code>
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
<span class="emphasis"><em>[output truncated]</em></span>
Bus 001 Device 002: ID 0bda:0151 Realtek Semiconductor Corp. Mass Storage Device (Multicard Reader)
Bus 008 Device 002: ID 03f0:2c24 Hewlett-Packard Logitech M-UAL-96 Mouse
Bus 008 Device 003: ID 04b3:3025 IBM Corp.</pre><p>
						You can also use the <code class="literal option">-v</code> command line option to display more verbose output:
					</p><pre class="literallayout"><code class="literal command">lsusb</code> <code class="literal option">-v</code></pre><p>
						For instance:
					</p><pre class="literallayout">~]$ <code class="literal command">lsusb -v</code>
<span class="emphasis"><em>[output truncated]</em></span>

Bus 008 Device 002: ID 03f0:2c24 Hewlett-Packard Logitech M-UAL-96 Mouse
Device Descriptor:
 bLength        18
 bDescriptorType     1
 bcdUSB        2.00
 bDeviceClass      0 (Defined at Interface level)
 bDeviceSubClass     0
 bDeviceProtocol     0
 bMaxPacketSize0     8
 idVendor      0x03f0 Hewlett-Packard
 idProduct     0x2c24 Logitech M-UAL-96 Mouse
 bcdDevice      31.00
 iManufacturer      1
 iProduct        2
 iSerial         0
 bNumConfigurations   1
 Configuration Descriptor:
  bLength         9
  bDescriptorType     2
<span class="emphasis"><em>[output truncated]</em></span></pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>lsusb</em></span>(8) manual page.
					</p></section><section class="section" id="s2-sysinfo-hardware-lscpu"><div class="titlepage"><div><div><h3 class="title">21.5.3.&nbsp;Using the lscpu Command</h3></div></div></div><p>
						The <code class="literal command">lscpu</code> command allows you to list information about CPUs that are present in the system, including the number of CPUs, their architecture, vendor, family, model, CPU caches, etc. To do so, type the following at a shell prompt:
					</p><pre class="literallayout"><code class="literal command">lscpu</code></pre><p>
						For example:
					</p><pre class="literallayout">~]$ lscpu
Architecture:     x86_64
CPU op-mode(s):    32-bit, 64-bit
Byte Order:      Little Endian
CPU(s):        4
On-line CPU(s) list:  0-3
Thread(s) per core:  1
Core(s) per socket:  4
Socket(s):       1
NUMA node(s):     1
Vendor ID:       GenuineIntel
CPU family:      6
Model:         23
Stepping:       7
CPU MHz:        1998.000
BogoMIPS:       4999.98
Virtualization:    VT-x
L1d cache:       32K
L1i cache:       32K
L2 cache:       3072K
NUMA node0 CPU(s):   0-3</pre><p>
						For a complete list of available command line options, see the <span class="emphasis"><em>lscpu</em></span>(1) manual page.
					</p></section></section><section class="section" id="sec-Checking_for_Hardware_Errors"><div class="titlepage"><div><div><h2 class="title">21.6.&nbsp;Checking for Hardware Errors</h2></div></div></div><p>
					Red Hat Enterprise Linux 7 introduced the new <span class="emphasis"><em>hardware event report mechanism</em></span> (<span class="strong strong"><strong>HERM</strong></span>.) This mechanism gathers system-reported memory errors as well as errors reported by the <span class="emphasis"><em>error detection and correction</em></span> (<span class="strong strong"><strong>EDAC</strong></span>) mechanism for dual in-line memory modules (<span class="strong strong"><strong>DIMM</strong></span>s) and reports them to user space. The user-space daemon <code class="literal">rasdaemon</code>, catches and handles all <span class="emphasis"><em>reliability, availability, and serviceability</em></span> (<span class="strong strong"><strong>RAS</strong></span>) error events that come from the kernel tracing mechanism, and logs them. The functions previously provided by <code class="literal">edac-utils</code> are now replaced by <code class="literal">rasdaemon</code>.
				</p><p>
					To install <code class="literal">rasdaemon</code>, enter the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# yum install rasdaemon</pre><p>
					Start the service as follows:
				</p><pre class="literallayout">~]# systemctl start rasdaemon</pre><p>
					To make the service run at system start, enter the following command:
				</p><pre class="literallayout">~]# systemctl enable rasdaemon</pre><p>
					The <code class="literal">ras-mc-ctl</code> utility provides a means to work with <span class="strong strong"><strong>EDAC</strong></span> drivers. Enter the following command to see a list of command options:
				</p><pre class="literallayout">~]$ <code class="literal command">ras-mc-ctl --help</code>
Usage: ras-mc-ctl [OPTIONS...]
 --quiet      Quiet operation.
 --mainboard    Print mainboard vendor and model for this hardware.
 --status      Print status of EDAC drivers.
<span class="emphasis"><em>output truncated</em></span></pre><p>
					To view a summary of memory controller events, run as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# ras-mc-ctl --summary
Memory controller events summary:
    Corrected on DIMM Label(s): 'CPU_SrcID#0_Ha#0_Chan#0_DIMM#0' location: 0:0:0:-1 errors: 1

No PCIe AER errors.

No Extlog errors.
MCE records summary:
    1 MEMORY CONTROLLER RD_CHANNEL0_ERR Transaction: Memory read error errors
    2 No Error errors</pre><p>
					To view a list of errors reported by the memory controller, run as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# ras-mc-ctl --errors
Memory controller events:
1 3172-02-17 00:47:01 -0500 1 Corrected error(s): memory read error at CPU_SrcID#0_Ha#0_Chan#0_DIMM#0 location: 0:0:0:-1, addr 65928, grain 7, syndrome 0 area:DRAM err_code:0001:0090 socket:0 ha:0 channel_mask:1 rank:0

No PCIe AER errors.

No Extlog errors.

MCE events:
1 3171-11-09 06:20:21 -0500 error: MEMORY CONTROLLER RD_CHANNEL0_ERR Transaction: Memory read error, mcg mcgstatus=0, mci Corrected_error, n_errors=1, mcgcap=0x01000c16, status=0x8c00004000010090, addr=0x1018893000, misc=0x15020a086, walltime=0x57e96780, cpuid=0x00050663, bank=0x00000007
2 3205-06-22 00:13:41 -0400 error: No Error, mcg mcgstatus=0, mci Corrected_error Error_enabled, mcgcap=0x01000c16, status=0x9400000000000000, addr=0x0000abcd, walltime=0x57e967ea, cpuid=0x00050663, bank=0x00000001
3 3205-06-22 00:13:41 -0400 error: No Error, mcg mcgstatus=0, mci Corrected_error Error_enabled, mcgcap=0x01000c16, status=0x9400000000000000, addr=0x00001234, walltime=0x57e967ea, cpu=0x00000001, cpuid=0x00050663, apicid=0x00000002, bank=0x00000002</pre><p>
					These commands are also described in the <code class="literal">ras-mc-ctl(8)</code> manual page.
				</p></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP"><div class="titlepage"><div><div><h2 class="title">21.7.&nbsp;Monitoring Performance with Net-SNMP</h2></div></div></div><p>
					Red Hat Enterprise Linux 7 includes the <span class="strong strong"><strong><span class="application application">Net-SNMP</span></strong></span> software suite, which includes a flexible and extensible <span class="emphasis"><em>simple network management protocol</em></span> (<span class="strong strong"><strong>SNMP</strong></span>) agent. This agent and its associated utilities can be used to provide performance data from a large number of systems to a variety of tools which support polling over the <code class="literal">SNMP</code> protocol.
				</p><p>
					This section provides information on configuring the Net-SNMP agent to securely provide performance data over the network, retrieving the data using the SNMP protocol, and extending the SNMP agent to provide custom performance metrics.
				</p><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Installing"><div class="titlepage"><div><div><h3 class="title">21.7.1.&nbsp;Installing Net-SNMP</h3></div></div></div><p>
						The Net-SNMP software suite is available as a set of RPM packages in the Red Hat Enterprise Linux software distribution. <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-System_Monitoring_Tools-Net-SNMP-Packages" title="Table 21.2. Available Net-SNMP packages">Table&nbsp;21.2, “Available Net-SNMP packages”</a> summarizes each of the packages and their contents.
					</p><div class="table" id="tabl-System_Monitoring_Tools-Net-SNMP-Packages"><p class="title"><strong>Table&nbsp;21.2.&nbsp;Available Net-SNMP packages</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569346779360" scope="col">Package</th><th align="left" valign="top" id="idm140569346778272" scope="col">Provides</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569346779360"> <p>
										<span class="strong strong"><strong><span class="package package">net-snmp</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569346778272"> <p>
										The SNMP Agent Daemon and documentation. This package is required for exporting performance data.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569346779360"> <p>
										<span class="strong strong"><strong><span class="package package">net-snmp-libs</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569346778272"> <p>
										The <code class="literal">netsnmp</code> library and the bundled <span class="emphasis"><em>management information bases</em></span> (<span class="strong strong"><strong>MIB</strong></span>s). This package is required for exporting performance data.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569346779360"> <p>
										<span class="strong strong"><strong><span class="package package">net-snmp-utils</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569346778272"> <p>
										SNMP clients such as <code class="literal command">snmpget</code> and <code class="literal command">snmpwalk</code>. This package is required in order to query a system’s performance data over SNMP.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569346779360"> <p>
										<span class="strong strong"><strong><span class="package package">net-snmp-perl</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569346778272"> <p>
										The <code class="literal command">mib2c</code> utility and the <code class="literal">NetSNMP</code> Perl module. Note that this package is provided by the Optional channel. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Adding_the_Optional_and_Supplementary_Repositories" title="9.5.7. Adding the Optional and Supplementary Repositories">Section&nbsp;9.5.7, “Adding the Optional and Supplementary Repositories”</a> for more information on Red Hat additional channels.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569346779360"> <p>
										<span class="strong strong"><strong><span class="package package">net-snmp-python</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569346778272"> <p>
										An SNMP client library for Python. Note that this package is provided by the Optional channel. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Adding_the_Optional_and_Supplementary_Repositories" title="9.5.7. Adding the Optional and Supplementary Repositories">Section&nbsp;9.5.7, “Adding the Optional and Supplementary Repositories”</a> for more information on Red Hat additional channels.
									</p>
									 </td></tr></tbody></table></div></div><p>
						To install any of these packages, use the <code class="literal command">yum</code> command in the following form:
					</p><pre class="literallayout"><code class="literal command">yum</code> <code class="literal option">install</code> <span class="emphasis"><em>package</em></span>&amp;hellip;</pre><p>
						For example, to install the SNMP Agent Daemon and SNMP clients used in the rest of this section, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install net-snmp net-snmp-libs net-snmp-utils</pre><p>
						For more information on how to install new packages in Red Hat Enterprise Linux, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
					</p></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Running"><div class="titlepage"><div><div><h3 class="title">21.7.2.&nbsp;Running the Net-SNMP Daemon</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="package package">net-snmp</span></strong></span> package contains <code class="literal">snmpd</code>, the SNMP Agent Daemon. This section provides information on how to start, stop, and restart the <code class="literal">snmpd</code> service. For more information on managing system services in Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Running-Starting"><div class="titlepage"><div><div><h4 class="title">21.7.2.1.&nbsp;Starting the Service</h4></div></div></div><p>
							To run the <code class="literal">snmpd</code> service in the current session, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout"><code class="literal command">systemctl start snmpd.service</code></pre><p>
							To configure the service to be automatically started at boot time, use the following command:
						</p><pre class="literallayout"><code class="literal command">systemctl enable snmpd.service</code></pre></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Running-Stopping"><div class="titlepage"><div><div><h4 class="title">21.7.2.2.&nbsp;Stopping the Service</h4></div></div></div><p>
							To stop the running <code class="literal">snmpd</code> service, type the following at a shell prompt as <code class="literal">root</code>:
						</p><pre class="literallayout"><code class="literal command">systemctl stop snmpd.service</code></pre><p>
							To disable starting the service at boot time, use the following command:
						</p><pre class="literallayout"><code class="literal command">systemctl disable snmpd.service</code></pre></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Running-Restarting"><div class="titlepage"><div><div><h4 class="title">21.7.2.3.&nbsp;Restarting the Service</h4></div></div></div><p>
							To restart the running <code class="literal">snmpd</code> service, type the following at a shell prompt:
						</p><pre class="literallayout"><code class="literal command">systemctl restart snmpd.service</code></pre><p>
							This command stops the service and starts it again in quick succession. To only reload the configuration without stopping the service, run the following command instead:
						</p><pre class="literallayout"><code class="literal command">systemctl reload snmpd.service</code></pre><p>
							This causes the running <code class="literal">snmpd</code> service to reload its configuration.
						</p></section></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Configuring"><div class="titlepage"><div><div><h3 class="title">21.7.3.&nbsp;Configuring Net-SNMP</h3></div></div></div><p>
						To change the Net-SNMP Agent Daemon configuration, edit the <code class="literal">/etc/snmp/snmpd.conf</code> configuration file. The default <code class="literal">snmpd.conf</code> file included with Red Hat Enterprise Linux 7 is heavily commented and serves as a good starting point for agent configuration.
					</p><p>
						This section focuses on two common tasks: setting system information and configuring authentication. For more information about available configuration directives, see the <code class="literal">snmpd.conf</code>(5) manual page. Additionally, there is a utility in the <span class="strong strong"><strong><span class="package package">net-snmp</span></strong></span> package named <code class="literal command">snmpconf</code> which can be used to interactively generate a valid agent configuration.
					</p><p>
						Note that the <span class="strong strong"><strong><span class="package package">net-snmp-utils</span></strong></span> package must be installed in order to use the <code class="literal command">snmpwalk</code> utility described in this section.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For any changes to the configuration file to take effect, force the <code class="literal">snmpd</code> service to re-read the configuration by running the following command as <code class="literal">root</code>:
						</p><pre class="literallayout"><code class="literal command">systemctl reload snmpd.service</code></pre></div></div><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Configuring-System_Information"><div class="titlepage"><div><div><h4 class="title">21.7.3.1.&nbsp;Setting System Information</h4></div></div></div><p>
							Net-SNMP provides some rudimentary system information via the <code class="literal">system</code> tree. For example, the following <code class="literal command">snmpwalk</code> command shows the <code class="literal">system</code> tree with a default agent configuration.
						</p><pre class="literallayout">~]# snmpwalk -v2c -c public localhost system
SNMPv2-MIB::sysDescr.0 = STRING: Linux localhost.localdomain 3.10.0-123.el7.x86_64 #1 SMP Mon May 5 11:16:57 EDT 2014 x86_64
SNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (464) 0:00:04.64
SNMPv2-MIB::sysContact.0 = STRING: Root &lt;root@localhost&gt; (configure /etc/snmp/snmp.local.conf)
[output truncated]</pre><p>
							By default, the <code class="literal">sysName</code> object is set to the host name. The <code class="literal">sysLocation</code> and <code class="literal">sysContact</code> objects can be configured in the <code class="literal">/etc/snmp/snmpd.conf</code> file by changing the value of the <code class="literal option">syslocation</code> and <code class="literal option">syscontact</code> directives, for example:
						</p><pre class="literallayout">syslocation Datacenter, Row 4, Rack 3
syscontact UNIX Admin &lt;admin@example.com&gt;</pre><p>
							After making changes to the configuration file, reload the configuration and test it by running the <code class="literal command">snmpwalk</code> command again:
						</p><pre class="literallayout">~]# systemctl reload snmp.service
~]# snmpwalk -v2c -c public localhost system
SNMPv2-MIB::sysDescr.0 = STRING: Linux localhost.localdomain 3.10.0-123.el7.x86_64 #1 SMP Mon May 5 11:16:57 EDT 2014 x86_64
SNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (35424) 0:05:54.24
SNMPv2-MIB::sysContact.0 = STRING: <span class="emphasis"><em>UNIX Admin &lt;<a class="link" href="mailto:admin@example.com">admin@example.com</a>&gt;</em></span>
SNMPv2-MIB::sysName.0 = STRING: localhost.localdomain
SNMPv2-MIB::sysLocation.0 = STRING: <span class="emphasis"><em>Datacenter, Row 4, Rack 3</em></span>
[output truncated]</pre></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Configuring-Authentication"><div class="titlepage"><div><div><h4 class="title">21.7.3.2.&nbsp;Configuring Authentication</h4></div></div></div><p>
							The Net-SNMP Agent Daemon supports all three versions of the SNMP protocol. The first two versions (1 and 2c) provide for simple authentication using a <span class="emphasis"><em>community string</em></span>. This string is a shared secret between the agent and any client utilities. The string is passed in clear text over the network however and is not considered secure. Version 3 of the SNMP protocol supports user authentication and message encryption using a variety of protocols. The Net-SNMP agent also supports tunneling over SSH, and TLS authentication with X.509 certificates.
						</p><h6 id="brid-System_Monitoring_Tools-Net-SNMP-Configuring_Authentication-2c_community">Configuring SNMP Version 2c Community</h6><p>
							To configure an <span class="emphasis"><em>SNMP version 2c community</em></span>, use either the <code class="literal option">rocommunity</code> or <code class="literal option">rwcommunity</code> directive in the <code class="literal">/etc/snmp/snmpd.conf</code> configuration file. The format of the directives is as follows:
						</p><pre class="literallayout"><span class="emphasis"><em>directive</em></span> <span class="emphasis"><em>community</em></span> <span class="emphasis"><em>source</em></span> <span class="emphasis"><em>OID</em></span></pre><p>
							… where <span class="emphasis"><em>community</em></span> is the community string to use, <span class="emphasis"><em>source</em></span> is an IP address or subnet, and <span class="emphasis"><em>OID</em></span> is the SNMP tree to provide access to. For example, the following directive provides read-only access to the <code class="literal">system</code> tree to a client using the community string "redhat" on the local machine:
						</p><pre class="literallayout">rocommunity redhat 127.0.0.1 .1.3.6.1.2.1.1</pre><p>
							To test the configuration, use the <code class="literal command">snmpwalk</code> command with the <code class="literal option">-v</code> and <code class="literal option">-c</code> options.
						</p><pre class="literallayout">~]# snmpwalk -v2c -c redhat localhost system
SNMPv2-MIB::sysDescr.0 = STRING: Linux localhost.localdomain 3.10.0-123.el7.x86_64 #1 SMP Mon May 5 11:16:57 EDT 2014 x86_64
SNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (101376) 0:16:53.76
SNMPv2-MIB::sysContact.0 = STRING: UNIX Admin &lt;admin@example.com&gt;
SNMPv2-MIB::sysName.0 = STRING: localhost.localdomain
SNMPv2-MIB::sysLocation.0 = STRING: Datacenter, Row 4, Rack 3
[output truncated]</pre><h6 id="brid-System_Monitoring_Tools-Net-SNMP-Configuring_Authentication-3_user">Configuring SNMP Version 3 User</h6><p>
							To configure an <span class="emphasis"><em>SNMP version 3 user</em></span>, use the <code class="literal command">net-snmp-create-v3-user</code> command. This command adds entries to the <code class="literal">/var/lib/net-snmp/snmpd.conf</code> and <code class="literal">/etc/snmp/snmpd.conf</code> files which create the user and grant access to the user. Note that the <code class="literal command">net-snmp-create-v3-user</code> command may only be run when the agent is not running. The following example creates the "admin" user with the password "redhatsnmp":
						</p><pre class="literallayout">~]# systemctl stop snmpd.service
~]# net-snmp-create-v3-user
Enter a SNMPv3 user name to create:
admin
Enter authentication pass-phrase:
redhatsnmp
Enter encryption pass-phrase:
 [press return to reuse the authentication pass-phrase]

adding the following line to /var/lib/net-snmp/snmpd.conf:
  createUser admin MD5 "redhatsnmp" DES
adding the following line to /etc/snmp/snmpd.conf:
  rwuser admin
~]# systemctl start snmpd.service</pre><p>
							The <code class="literal option">rwuser</code> directive (or <code class="literal option">rouser</code> when the <code class="literal option">-ro</code> command line option is supplied) that <code class="literal command">net-snmp-create-v3-user</code> adds to <code class="literal">/etc/snmp/snmpd.conf</code> has a similar format to the <code class="literal option">rwcommunity</code> and <code class="literal option">rocommunity</code> directives:
						</p><pre class="literallayout"><span class="emphasis"><em>directive</em></span> <span class="emphasis"><em>user</em></span> <code class="literal option">noauth</code>|<code class="literal option">auth</code>|<code class="literal option">priv</code> <span class="emphasis"><em>OID</em></span></pre><p>
							… where <span class="emphasis"><em>user</em></span> is a user name and <span class="emphasis"><em>OID</em></span> is the SNMP tree to provide access to. By default, the Net-SNMP Agent Daemon allows only authenticated requests (the <code class="literal option">auth</code> option). The <code class="literal option">noauth</code> option allows you to permit unauthenticated requests, and the <code class="literal option">priv</code> option enforces the use of encryption. The <code class="literal option">authpriv</code> option specifies that requests must be authenticated and replies should be encrypted.
						</p><p>
							For example, the following line grants the user "admin" read-write access to the entire tree:
						</p><pre class="literallayout">rwuser admin authpriv .1</pre><p>
							To test the configuration, create a <code class="literal">.snmp/</code> directory in your user’s home directory and a configuration file named <code class="literal">snmp.conf</code> in that directory (<code class="literal">~/.snmp/snmp.conf</code>) with the following lines:
						</p><pre class="literallayout">defVersion 3
defSecurityLevel authPriv
defSecurityName admin
defPassphrase redhatsnmp</pre><p>
							The <code class="literal command">snmpwalk</code> command will now use these authentication settings when querying the agent:
						</p><pre class="literallayout">~]$ snmpwalk -v3 localhost system
SNMPv2-MIB::sysDescr.0 = STRING: Linux localhost.localdomain 3.10.0-123.el7.x86_64 #1 SMP Mon May 5 11:16:57 EDT 2014 x86_64
[output truncated]</pre></section></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Retrieving"><div class="titlepage"><div><div><h3 class="title">21.7.4.&nbsp;Retrieving Performance Data over SNMP</h3></div></div></div><p>
						The Net-SNMP Agent in Red Hat Enterprise Linux provides a wide variety of performance information over the SNMP protocol. In addition, the agent can be queried for a listing of the installed RPM packages on the system, a listing of currently running processes on the system, or the network configuration of the system.
					</p><p>
						This section provides an overview of OIDs related to performance tuning available over SNMP. It assumes that the <span class="strong strong"><strong><span class="package package">net-snmp-utils</span></strong></span> package is installed and that the user is granted access to the SNMP tree as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP-Configuring-Authentication" title="21.7.3.2. Configuring Authentication">Section&nbsp;21.7.3.2, “Configuring Authentication”</a>.
					</p><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Retrieving-Hardware"><div class="titlepage"><div><div><h4 class="title">21.7.4.1.&nbsp;Hardware Configuration</h4></div></div></div><p>
							The <code class="literal">Host Resources MIB</code> included with Net-SNMP presents information about the current hardware and software configuration of a host to a client utility. <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-System_Monitoring_Tools-Net-SNMP-OIDs" title="Table 21.3. Available OIDs">Table&nbsp;21.3, “Available OIDs”</a> summarizes the different OIDs available under that MIB.
						</p><div class="table" id="tabl-System_Monitoring_Tools-Net-SNMP-OIDs"><p class="title"><strong>Table&nbsp;21.3.&nbsp;Available OIDs</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569346627888" scope="col">OID</th><th align="left" valign="top" id="idm140569346626800" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569346627888"> <p>
											<code class="literal">HOST-RESOURCES-MIB::hrSystem</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569346626800"> <p>
											Contains general system information such as uptime, number of users, and number of running processes.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569346627888"> <p>
											<code class="literal">HOST-RESOURCES-MIB::hrStorage</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569346626800"> <p>
											Contains data on memory and file system usage.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569346627888"> <p>
											<code class="literal">HOST-RESOURCES-MIB::hrDevices</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569346626800"> <p>
											Contains a listing of all processors, network devices, and file systems.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569346627888"> <p>
											<code class="literal">HOST-RESOURCES-MIB::hrSWRun</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569346626800"> <p>
											Contains a listing of all running processes.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569346627888"> <p>
											<code class="literal">HOST-RESOURCES-MIB::hrSWRunPerf</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569346626800"> <p>
											Contains memory and CPU statistics on the process table from HOST-RESOURCES-MIB::hrSWRun.
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140569346627888"> <p>
											<code class="literal">HOST-RESOURCES-MIB::hrSWInstalled</code>
										</p>
										 </td><td align="left" valign="top" headers="idm140569346626800"> <p>
											Contains a listing of the RPM database.
										</p>
										 </td></tr></tbody></table></div></div><p>
							There are also a number of SNMP tables available in the Host Resources MIB which can be used to retrieve a summary of the available information. The following example displays <code class="literal">HOST-RESOURCES-MIB::hrFSTable</code>:
						</p><pre class="literallayout">~]$ <code class="literal command">snmptable -Cb localhost HOST-RESOURCES-MIB::hrFSTable</code>
SNMP table: HOST-RESOURCES-MIB::hrFSTable

 Index MountPoint RemoteMountPoint                Type
  Access Bootable StorageIndex LastFullBackupDate LastPartialBackupDate
   1    "/"        "" HOST-RESOURCES-TYPES::hrFSLinuxExt2
 readWrite   true      31   0-1-1,0:0:0.0     0-1-1,0:0:0.0
   5 "/dev/shm"        ""   HOST-RESOURCES-TYPES::hrFSOther
 readWrite  false      35   0-1-1,0:0:0.0     0-1-1,0:0:0.0
   6  "/boot"        "" HOST-RESOURCES-TYPES::hrFSLinuxExt2
 readWrite  false      36   0-1-1,0:0:0.0     0-1-1,0:0:0.0</pre><p>
							For more information about <code class="literal">HOST-RESOURCES-MIB</code>, see the <code class="literal">/usr/share/snmp/mibs/HOST-RESOURCES-MIB.txt</code> file.
						</p></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Retrieving-CPU"><div class="titlepage"><div><div><h4 class="title">21.7.4.2.&nbsp;CPU and Memory Information</h4></div></div></div><p>
							Most system performance data is available in the <code class="literal">UCD SNMP MIB</code>. The <code class="literal">systemStats</code> OID provides a number of counters around processor usage:
						</p><pre class="literallayout">~]$ <code class="literal command">snmpwalk localhost UCD-SNMP-MIB::systemStats</code>
UCD-SNMP-MIB::ssIndex.0 = INTEGER: 1
UCD-SNMP-MIB::ssErrorName.0 = STRING: systemStats
UCD-SNMP-MIB::ssSwapIn.0 = INTEGER: 0 kB
UCD-SNMP-MIB::ssSwapOut.0 = INTEGER: 0 kB
UCD-SNMP-MIB::ssIOSent.0 = INTEGER: 0 blocks/s
UCD-SNMP-MIB::ssIOReceive.0 = INTEGER: 0 blocks/s
UCD-SNMP-MIB::ssSysInterrupts.0 = INTEGER: 29 interrupts/s
UCD-SNMP-MIB::ssSysContext.0 = INTEGER: 18 switches/s
UCD-SNMP-MIB::ssCpuUser.0 = INTEGER: 0
UCD-SNMP-MIB::ssCpuSystem.0 = INTEGER: 0
UCD-SNMP-MIB::ssCpuIdle.0 = INTEGER: 99
UCD-SNMP-MIB::ssCpuRawUser.0 = Counter32: 2278
UCD-SNMP-MIB::ssCpuRawNice.0 = Counter32: 1395
UCD-SNMP-MIB::ssCpuRawSystem.0 = Counter32: 6826
UCD-SNMP-MIB::ssCpuRawIdle.0 = Counter32: 3383736
UCD-SNMP-MIB::ssCpuRawWait.0 = Counter32: 7629
UCD-SNMP-MIB::ssCpuRawKernel.0 = Counter32: 0
UCD-SNMP-MIB::ssCpuRawInterrupt.0 = Counter32: 434
UCD-SNMP-MIB::ssIORawSent.0 = Counter32: 266770
UCD-SNMP-MIB::ssIORawReceived.0 = Counter32: 427302
UCD-SNMP-MIB::ssRawInterrupts.0 = Counter32: 743442
UCD-SNMP-MIB::ssRawContexts.0 = Counter32: 718557
UCD-SNMP-MIB::ssCpuRawSoftIRQ.0 = Counter32: 128
UCD-SNMP-MIB::ssRawSwapIn.0 = Counter32: 0
UCD-SNMP-MIB::ssRawSwapOut.0 = Counter32: 0</pre><p>
							In particular, the <code class="literal">ssCpuRawUser</code>, <code class="literal">ssCpuRawSystem</code>, <code class="literal">ssCpuRawWait</code>, and <code class="literal">ssCpuRawIdle</code> OIDs provide counters which are helpful when determining whether a system is spending most of its processor time in kernel space, user space, or I/O. <code class="literal">ssRawSwapIn</code> and <code class="literal">ssRawSwapOut</code> can be helpful when determining whether a system is suffering from memory exhaustion.
						</p><p>
							More memory information is available under the <code class="literal">UCD-SNMP-MIB::memory</code> OID, which provides similar data to the <code class="literal command">free</code> command:
						</p><pre class="literallayout">~]$ <code class="literal command">snmpwalk localhost UCD-SNMP-MIB::memory</code>
UCD-SNMP-MIB::memIndex.0 = INTEGER: 0
UCD-SNMP-MIB::memErrorName.0 = STRING: swap
UCD-SNMP-MIB::memTotalSwap.0 = INTEGER: 1023992 kB
UCD-SNMP-MIB::memAvailSwap.0 = INTEGER: 1023992 kB
UCD-SNMP-MIB::memTotalReal.0 = INTEGER: 1021588 kB
UCD-SNMP-MIB::memAvailReal.0 = INTEGER: 634260 kB
UCD-SNMP-MIB::memTotalFree.0 = INTEGER: 1658252 kB
UCD-SNMP-MIB::memMinimumSwap.0 = INTEGER: 16000 kB
UCD-SNMP-MIB::memBuffer.0 = INTEGER: 30760 kB
UCD-SNMP-MIB::memCached.0 = INTEGER: 216200 kB
UCD-SNMP-MIB::memSwapError.0 = INTEGER: noError(0)
UCD-SNMP-MIB::memSwapErrorMsg.0 = STRING:</pre><p>
							Load averages are also available in the <code class="literal">UCD SNMP MIB</code>. The SNMP table <code class="literal">UCD-SNMP-MIB::laTable</code> has a listing of the 1, 5, and 15 minute load averages:
						</p><pre class="literallayout">~]$ <code class="literal command">snmptable localhost UCD-SNMP-MIB::laTable</code>
SNMP table: UCD-SNMP-MIB::laTable

 laIndex laNames laLoad laConfig laLoadInt laLoadFloat laErrorFlag laErrMessage
    1 Load-1  0.00  12.00     0  0.000000   noError
    2 Load-5  0.00  12.00     0  0.000000   noError
    3 Load-15  0.00  12.00     0  0.000000   noError</pre></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Retrieving-File_System"><div class="titlepage"><div><div><h4 class="title">21.7.4.3.&nbsp;File System and Disk Information</h4></div></div></div><p>
							The <code class="literal">Host Resources MIB</code> provides information on file system size and usage. Each file system (and also each memory pool) has an entry in the <code class="literal">HOST-RESOURCES-MIB::hrStorageTable</code> table:
						</p><pre class="literallayout">~]$ <code class="literal command">snmptable -Cb localhost HOST-RESOURCES-MIB::hrStorageTable</code>
SNMP table: HOST-RESOURCES-MIB::hrStorageTable

 Index                     Type      Descr
AllocationUnits  Size  Used AllocationFailures
   1      HOST-RESOURCES-TYPES::hrStorageRam Physical memory
1024 Bytes 1021588 388064         ?
   3 HOST-RESOURCES-TYPES::hrStorageVirtualMemory Virtual memory
1024 Bytes 2045580 388064         ?
   6     HOST-RESOURCES-TYPES::hrStorageOther Memory buffers
1024 Bytes 1021588 31048         ?
   7     HOST-RESOURCES-TYPES::hrStorageOther  Cached memory
1024 Bytes 216604 216604         ?
  10 HOST-RESOURCES-TYPES::hrStorageVirtualMemory   Swap space
1024 Bytes 1023992   0         ?
  31   HOST-RESOURCES-TYPES::hrStorageFixedDisk        /
4096 Bytes 2277614 250391         ?
  35   HOST-RESOURCES-TYPES::hrStorageFixedDisk    /dev/shm
4096 Bytes 127698   0         ?
  36   HOST-RESOURCES-TYPES::hrStorageFixedDisk      /boot
1024 Bytes 198337 26694         ?</pre><p>
							The OIDs under <code class="literal">HOST-RESOURCES-MIB::hrStorageSize</code> and <code class="literal">HOST-RESOURCES-MIB::hrStorageUsed</code> can be used to calculate the remaining capacity of each mounted file system.
						</p><p>
							I/O data is available both in <code class="literal">UCD-SNMP-MIB::systemStats</code> (<code class="literal">ssIORawSent.0</code> and <code class="literal">ssIORawRecieved.0</code>) and in <code class="literal">UCD-DISKIO-MIB::diskIOTable</code>. The latter provides much more granular data. Under this table are OIDs for <code class="literal">diskIONReadX</code> and <code class="literal">diskIONWrittenX</code>, which provide counters for the number of bytes read from and written to the block device in question since the system boot:
						</p><pre class="literallayout">~]$ <code class="literal command">snmptable -Cb localhost UCD-DISKIO-MIB::diskIOTable</code>
SNMP table: UCD-DISKIO-MIB::diskIOTable

 Index Device   NRead NWritten Reads Writes LA1 LA5 LA15  NReadX NWrittenX
...
  25  sda 216886272 139109376 16409  4894  ?  ?  ? 216886272 139109376
  26  sda1  2455552   5120  613   2  ?  ?  ?  2455552   5120
  27  sda2  1486848     0  332   0  ?  ?  ?  1486848     0
  28  sda3 212321280 139104256 15312  4871  ?  ?  ? 212321280 139104256</pre></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Retrieving-Network"><div class="titlepage"><div><div><h4 class="title">21.7.4.4.&nbsp;Network Information</h4></div></div></div><p>
							The <code class="literal">Interfaces MIB</code> provides information on network devices. <code class="literal">IF-MIB::ifTable</code> provides an SNMP table with an entry for each interface on the system, the configuration of the interface, and various packet counters for the interface. The following example shows the first few columns of <code class="literal">ifTable</code> on a system with two physical network interfaces:
						</p><pre class="literallayout">~]$ <code class="literal command">snmptable -Cb localhost IF-MIB::ifTable</code>
SNMP table: IF-MIB::ifTable

 Index Descr       Type  Mtu  Speed   PhysAddress AdminStatus
   1  lo softwareLoopback 16436 10000000              up
   2 eth0  ethernetCsmacd 1500    0 52:54:0:c7:69:58     up
   3 eth1  ethernetCsmacd 1500    0 52:54:0:a7:a3:24    down</pre><p>
							Network traffic is available under the OIDs <code class="literal">IF-MIB::ifOutOctets</code> and <code class="literal">IF-MIB::ifInOctets</code>. The following SNMP queries will retrieve network traffic for each of the interfaces on this system:
						</p><pre class="literallayout">~]$ <code class="literal command">snmpwalk localhost IF-MIB::ifDescr</code>
IF-MIB::ifDescr.1 = STRING: lo
IF-MIB::ifDescr.2 = STRING: eth0
IF-MIB::ifDescr.3 = STRING: eth1
~]$ <code class="literal command">snmpwalk localhost IF-MIB::ifOutOctets</code>
IF-MIB::ifOutOctets.1 = Counter32: 10060699
IF-MIB::ifOutOctets.2 = Counter32: 650
IF-MIB::ifOutOctets.3 = Counter32: 0
~]$ <code class="literal command">snmpwalk localhost IF-MIB::ifInOctets</code>
IF-MIB::ifInOctets.1 = Counter32: 10060699
IF-MIB::ifInOctets.2 = Counter32: 78650
IF-MIB::ifInOctets.3 = Counter32: 0</pre></section></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Extending"><div class="titlepage"><div><div><h3 class="title">21.7.5.&nbsp;Extending Net-SNMP</h3></div></div></div><p>
						The Net-SNMP Agent can be extended to provide application metrics in addition to raw system metrics. This allows for capacity planning as well as performance issue troubleshooting. For example, it may be helpful to know that an email system had a 5-minute load average of 15 while being tested, but it is more helpful to know that the email system has a load average of 15 while processing 80,000 messages a second. When application metrics are available via the same interface as the system metrics, this also allows for the visualization of the impact of different load scenarios on system performance (for example, each additional 10,000 messages increases the load average linearly until 100,000).
					</p><p>
						A number of the applications included in Red Hat Enterprise Linux extend the Net-SNMP Agent to provide application metrics over SNMP. There are several ways to extend the agent for custom applications as well. This section describes extending the agent with shell scripts and the Perl plug-ins from the Optional channel. It assumes that the <span class="strong strong"><strong><span class="package package">net-snmp-utils</span></strong></span> and <span class="strong strong"><strong><span class="package package">net-snmp-perl</span></strong></span> packages are installed, and that the user is granted access to the SNMP tree as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP-Configuring-Authentication" title="21.7.3.2. Configuring Authentication">Section&nbsp;21.7.3.2, “Configuring Authentication”</a>.
					</p><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Extending-Shell"><div class="titlepage"><div><div><h4 class="title">21.7.5.1.&nbsp;Extending Net-SNMP with Shell Scripts</h4></div></div></div><p>
							The Net-SNMP Agent provides an extension MIB (<code class="literal">NET-SNMP-EXTEND-MIB</code>) that can be used to query arbitrary shell scripts. To specify the shell script to run, use the <code class="literal option">extend</code> directive in the <code class="literal">/etc/snmp/snmpd.conf</code> file. Once defined, the Agent will provide the exit code and any output of the command over SNMP. The example below demonstrates this mechanism with a script which determines the number of <code class="literal">httpd</code> processes in the process table.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The Net-SNMP Agent also provides a built-in mechanism for checking the process table via the <code class="literal option">proc</code> directive. See the <span class="emphasis"><em>snmpd.conf</em></span>(5) manual page for more information.
							</p></div></div><p>
							The exit code of the following shell script is the number of <code class="literal command">httpd</code> processes running on the system at a given point in time:
						</p><pre class="literallayout">#!/bin/sh

NUMPIDS=<code class="literal">pgrep httpd | wc -l</code>

exit $NUMPIDS</pre><p>
							To make this script available over SNMP, copy the script to a location on the system path, set the executable bit, and add an <code class="literal option">extend</code> directive to the <code class="literal">/etc/snmp/snmpd.conf</code> file. The format of the <code class="literal option">extend</code> directive is the following:
						</p><pre class="literallayout"><code class="literal option">extend</code> <span class="emphasis"><em>name</em></span> <span class="emphasis"><em>prog</em></span> <span class="emphasis"><em>args</em></span></pre><p>
							… where <span class="emphasis"><em>name</em></span> is an identifying string for the extension, <span class="emphasis"><em>prog</em></span> is the program to run, and <span class="emphasis"><em>args</em></span> are the arguments to give the program. For instance, if the above shell script is copied to <code class="literal">/usr/local/bin/check_apache.sh</code>, the following directive will add the script to the SNMP tree:
						</p><pre class="literallayout">extend httpd_pids /bin/sh /usr/local/bin/check_apache.sh</pre><p>
							The script can then be queried at <code class="literal">NET-SNMP-EXTEND-MIB::nsExtendObjects</code>:
						</p><pre class="literallayout">~]$ snmpwalk localhost NET-SNMP-EXTEND-MIB::nsExtendObjects
NET-SNMP-EXTEND-MIB::nsExtendNumEntries.0 = INTEGER: 1
NET-SNMP-EXTEND-MIB::nsExtendCommand."httpd_pids" = STRING: /bin/sh
NET-SNMP-EXTEND-MIB::nsExtendArgs."httpd_pids" = STRING: /usr/local/bin/check_apache.sh
NET-SNMP-EXTEND-MIB::nsExtendInput."httpd_pids" = STRING:
NET-SNMP-EXTEND-MIB::nsExtendCacheTime."httpd_pids" = INTEGER: 5
NET-SNMP-EXTEND-MIB::nsExtendExecType."httpd_pids" = INTEGER: exec(1)
NET-SNMP-EXTEND-MIB::nsExtendRunType."httpd_pids" = INTEGER: run-on-read(1)
NET-SNMP-EXTEND-MIB::nsExtendStorage."httpd_pids" = INTEGER: permanent(4)
NET-SNMP-EXTEND-MIB::nsExtendStatus."httpd_pids" = INTEGER: active(1)
NET-SNMP-EXTEND-MIB::nsExtendOutput1Line."httpd_pids" = STRING:
NET-SNMP-EXTEND-MIB::nsExtendOutputFull."httpd_pids" = STRING:
NET-SNMP-EXTEND-MIB::nsExtendOutNumLines."httpd_pids" = INTEGER: 1
NET-SNMP-EXTEND-MIB::nsExtendResult."httpd_pids" = INTEGER: 8
NET-SNMP-EXTEND-MIB::nsExtendOutLine."httpd_pids".1 = STRING:</pre><p>
							Note that the exit code ("8" in this example) is provided as an INTEGER type and any output is provided as a STRING type. To expose multiple metrics as integers, supply different arguments to the script using the <code class="literal option">extend</code> directive. For example, the following shell script can be used to determine the number of processes matching an arbitrary string, and will also output a text string giving the number of processes:
						</p><pre class="literallayout">#!/bin/sh

PATTERN=$1
NUMPIDS=<code class="literal">pgrep $PATTERN | wc -l</code>

echo "There are $NUMPIDS $PATTERN processes."
exit $NUMPIDS</pre><p>
							The following <code class="literal">/etc/snmp/snmpd.conf</code> directives will give both the number of <code class="literal">httpd</code> PIDs as well as the number of <code class="literal">snmpd</code> PIDs when the above script is copied to <code class="literal">/usr/local/bin/check_proc.sh</code>:
						</p><pre class="literallayout">extend httpd_pids /bin/sh /usr/local/bin/check_proc.sh httpd
extend snmpd_pids /bin/sh /usr/local/bin/check_proc.sh snmpd</pre><p>
							The following example shows the output of an <code class="literal command">snmpwalk</code> of the <code class="literal">nsExtendObjects</code> OID:
						</p><pre class="literallayout">~]$ snmpwalk localhost NET-SNMP-EXTEND-MIB::nsExtendObjects
NET-SNMP-EXTEND-MIB::nsExtendNumEntries.0 = INTEGER: 2
NET-SNMP-EXTEND-MIB::nsExtendCommand."httpd_pids" = STRING: /bin/sh
NET-SNMP-EXTEND-MIB::nsExtendCommand."snmpd_pids" = STRING: /bin/sh
NET-SNMP-EXTEND-MIB::nsExtendArgs."httpd_pids" = STRING: /usr/local/bin/check_proc.sh httpd
NET-SNMP-EXTEND-MIB::nsExtendArgs."snmpd_pids" = STRING: /usr/local/bin/check_proc.sh snmpd
NET-SNMP-EXTEND-MIB::nsExtendInput."httpd_pids" = STRING:
NET-SNMP-EXTEND-MIB::nsExtendInput."snmpd_pids" = STRING:
...
NET-SNMP-EXTEND-MIB::nsExtendResult."httpd_pids" = INTEGER: 8
NET-SNMP-EXTEND-MIB::nsExtendResult."snmpd_pids" = INTEGER: 1
NET-SNMP-EXTEND-MIB::nsExtendOutLine."httpd_pids".1 = STRING: There are 8 httpd processes.
NET-SNMP-EXTEND-MIB::nsExtendOutLine."snmpd_pids".1 = STRING: There are 1 snmpd processes.</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Integer exit codes are limited to a range of 0–255. For values that are likely to exceed 256, either use the standard output of the script (which will be typed as a string) or a different method of extending the agent.
							</p></div></div><p>
							This last example shows a query for the free memory of the system and the number of <code class="literal">httpd</code> processes. This query could be used during a performance test to determine the impact of the number of processes on memory pressure:
						</p><pre class="literallayout">~]$ snmpget localhost \
  'NET-SNMP-EXTEND-MIB::nsExtendResult."httpd_pids"' \
  UCD-SNMP-MIB::memAvailReal.0
NET-SNMP-EXTEND-MIB::nsExtendResult."httpd_pids" = INTEGER: 8
UCD-SNMP-MIB::memAvailReal.0 = INTEGER: 799664 kB</pre></section><section class="section" id="sect-System_Monitoring_Tools-Net-SNMP-Extending-Perl"><div class="titlepage"><div><div><h4 class="title">21.7.5.2.&nbsp;Extending Net-SNMP with Perl</h4></div></div></div><p>
							Executing shell scripts using the <code class="literal option">extend</code> directive is a fairly limited method for exposing custom application metrics over SNMP. The Net-SNMP Agent also provides an embedded Perl interface for exposing custom objects. The <span class="strong strong"><strong><span class="package package">net-snmp-perl</span></strong></span> package in the Optional channel provides the <code class="literal">NetSNMP::agent</code> Perl module that is used to write embedded Perl plug-ins on Red Hat Enterprise Linux.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Before subscribing to the Optional and Supplementary channels see the <a class="link" href="https://access.redhat.com/support/offerings/production/scope_moredetail/">Scope of Coverage Details</a>. If you decide to install packages from these channels, follow the steps documented in the article called <a class="link" href="https://access.redhat.com/solutions/392003">How to access Optional and Supplementary channels, and -devel packages using Red Hat Subscription Manager (RHSM)?</a> on the Red Hat Customer Portal.
							</p></div></div><p>
							The <code class="literal">NetSNMP::agent</code> Perl module provides an <code class="literal">agent</code> object which is used to handle requests for a part of the agent’s OID tree. The <code class="literal">agent</code> object’s constructor has options for running the agent as a sub-agent of <code class="literal">snmpd</code> or a standalone agent. No arguments are necessary to create an embedded agent:
						</p><pre class="literallayout">use NetSNMP::agent (':all');

my $agent = new NetSNMP::agent();</pre><p>
							The <code class="literal">agent</code> object has a <code class="literal">register</code> method which is used to register a callback function with a particular OID. The <code class="literal">register</code> function takes a name, OID, and pointer to the callback function. The following example will register a callback function named <code class="literal">hello_handler</code> with the SNMP Agent which will handle requests under the OID <code class="literal">.1.3.6.1.4.1.8072.9999.9999</code>:
						</p><pre class="literallayout">$agent-&gt;register("hello_world", ".1.3.6.1.4.1.8072.9999.9999",
         \&amp;hello_handler);</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The OID <code class="literal">.1.3.6.1.4.1.8072.9999.9999</code> (<code class="literal">NET-SNMP-MIB::netSnmpPlaypen</code>) is typically used for demonstration purposes only. If your organization does not already have a root OID, you can obtain one by contacting an ISO Name Registration Authority (ANSI in the United States).
							</p></div></div><p>
							The handler function will be called with four parameters, <code class="literal">HANDLER</code>, <code class="literal">REGISTRATION_INFO</code>, <code class="literal">REQUEST_INFO</code>, and <code class="literal">REQUESTS</code>. The <code class="literal">REQUESTS</code> parameter contains a list of requests in the current call and should be iterated over and populated with data. The <code class="literal">request</code> objects in the list have get and set methods which allow for manipulating the <code class="literal">OID</code> and <code class="literal">value</code> of the request. For example, the following call will set the value of a request object to the string "hello world":
						</p><pre class="literallayout">$request-&gt;setValue(ASN_OCTET_STR, "hello world");</pre><p>
							The handler function should respond to two types of SNMP requests: the GET request and the GETNEXT request. The type of request is determined by calling the <code class="literal">getMode</code> method on the <code class="literal">request_info</code> object passed as the third parameter to the handler function. If the request is a GET request, the caller will expect the handler to set the <code class="literal">value</code> of the <code class="literal">request</code> object, depending on the OID of the request. If the request is a GETNEXT request, the caller will also expect the handler to set the OID of the request to the next available OID in the tree. This is illustrated in the following code example:
						</p><pre class="literallayout">my $request;
my $string_value = "hello world";
my $integer_value = "8675309";

for($request = $requests; $request; $request = $request-&gt;next()) {
 my $oid = $request-&gt;getOID();
 if ($request_info-&gt;getMode() == MODE_GET) {
  if ($oid == new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.0")) {
   $request-&gt;setValue(ASN_OCTET_STR, $string_value);
  }
  elsif ($oid == new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.1")) {
   $request-&gt;setValue(ASN_INTEGER, $integer_value);
  }
 } elsif ($request_info-&gt;getMode() == MODE_GETNEXT) {
  if ($oid == new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.0")) {
   $request-&gt;setOID(".1.3.6.1.4.1.8072.9999.9999.1.1");
   $request-&gt;setValue(ASN_INTEGER, $integer_value);
  }
  elsif ($oid &lt; new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.0")) {
   $request-&gt;setOID(".1.3.6.1.4.1.8072.9999.9999.1.0");
   $request-&gt;setValue(ASN_OCTET_STR, $string_value);
  }
 }
}</pre><p>
							When <code class="literal">getMode</code> returns <code class="literal">MODE_GET</code>, the handler analyzes the value of the <code class="literal">getOID</code> call on the <code class="literal">request</code> object. The <code class="literal">value</code> of the <code class="literal">request</code> is set to either <code class="literal">string_value</code> if the OID ends in ".1.0", or set to <code class="literal">integer_value</code> if the OID ends in ".1.1". If the <code class="literal">getMode</code> returns <code class="literal">MODE_GETNEXT</code>, the handler determines whether the OID of the request is ".1.0", and then sets the OID and value for ".1.1". If the request is higher on the tree than ".1.0", the OID and value for ".1.0" is set. This in effect returns the "next" value in the tree so that a program like <code class="literal command">snmpwalk</code> can traverse the tree without prior knowledge of the structure.
						</p><p>
							The type of the variable is set using constants from <code class="literal">NetSNMP::ASN</code>. See the <code class="literal command">perldoc</code> for <code class="literal">NetSNMP::ASN</code> for a full list of available constants.
						</p><p>
							The entire code listing for this example Perl plug-in is as follows:
						</p><pre class="literallayout">#!/usr/bin/perl

use NetSNMP::agent (':all');
use NetSNMP::ASN qw(ASN_OCTET_STR ASN_INTEGER);

sub hello_handler {
 my ($handler, $registration_info, $request_info, $requests) = @_;
 my $request;
 my $string_value = "hello world";
 my $integer_value = "8675309";

 for($request = $requests; $request; $request = $request-&gt;next()) {
  my $oid = $request-&gt;getOID();
  if ($request_info-&gt;getMode() == MODE_GET) {
   if ($oid == new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.0")) {
    $request-&gt;setValue(ASN_OCTET_STR, $string_value);
   }
   elsif ($oid == new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.1")) {
    $request-&gt;setValue(ASN_INTEGER, $integer_value);
   }
  } elsif ($request_info-&gt;getMode() == MODE_GETNEXT) {
   if ($oid == new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.0")) {
    $request-&gt;setOID(".1.3.6.1.4.1.8072.9999.9999.1.1");
    $request-&gt;setValue(ASN_INTEGER, $integer_value);
   }
   elsif ($oid &lt; new NetSNMP::OID(".1.3.6.1.4.1.8072.9999.9999.1.0")) {
    $request-&gt;setOID(".1.3.6.1.4.1.8072.9999.9999.1.0");
    $request-&gt;setValue(ASN_OCTET_STR, $string_value);
   }
  }
 }
}

my $agent = new NetSNMP::agent();
$agent-&gt;register("hello_world", ".1.3.6.1.4.1.8072.9999.9999",
         \&amp;hello_handler);</pre><p>
							To test the plug-in, copy the above program to <code class="literal">/usr/share/snmp/hello_world.pl</code> and add the following line to the <code class="literal">/etc/snmp/snmpd.conf</code> configuration file:
						</p><pre class="literallayout">perl do "/usr/share/snmp/hello_world.pl"</pre><p>
							The SNMP Agent Daemon will need to be restarted to load the new Perl plug-in. Once it has been restarted, an <code class="literal command">snmpwalk</code> should return the new data:
						</p><pre class="literallayout">~]$ <code class="literal command">snmpwalk localhost NET-SNMP-MIB::netSnmpPlaypen</code>
NET-SNMP-MIB::netSnmpPlaypen.1.0 = STRING: "hello world"
NET-SNMP-MIB::netSnmpPlaypen.1.1 = INTEGER: 8675309</pre><p>
							The <code class="literal command">snmpget</code> should also be used to exercise the other mode of the handler:
						</p><pre class="literallayout">~]$ <code class="literal command">snmpget localhost \</code>
  <code class="literal command">NET-SNMP-MIB::netSnmpPlaypen.1.0 \</code>
  <code class="literal command">NET-SNMP-MIB::netSnmpPlaypen.1.1</code>
NET-SNMP-MIB::netSnmpPlaypen.1.0 = STRING: "hello world"
NET-SNMP-MIB::netSnmpPlaypen.1.1 = INTEGER: 8675309</pre></section></section></section><section class="section" id="s1-sysinfo-additional-resources"><div class="titlepage"><div><div><h2 class="title">21.8.&nbsp;Additional Resources</h2></div></div></div><p>
					To learn more about gathering system information, see the following resources.
				</p><section class="section" id="s2-sysinfo-installed-docs"><div class="titlepage"><div><div><h3 class="title">21.8.1.&nbsp;Installed Documentation</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>lscpu</em></span>(1) — The manual page for the <code class="literal command">lscpu</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>lsusb</em></span>(8) — The manual page for the <code class="literal command">lsusb</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>findmnt</em></span>(8) — The manual page for the <code class="literal command">findmnt</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>blkid</em></span>(8) — The manual page for the <code class="literal command">blkid</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>lsblk</em></span>(8) — The manual page for the <code class="literal command">lsblk</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>ps</em></span>(1) — The manual page for the <code class="literal command">ps</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>top</em></span>(1) — The manual page for the <code class="literal command">top</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>free</em></span>(1) — The manual page for the <code class="literal command">free</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>df</em></span>(1) — The manual page for the <code class="literal command">df</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>du</em></span>(1) — The manual page for the <code class="literal command">du</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>lspci</em></span>(8) — The manual page for the <code class="literal command">lspci</code> command.
							</li><li class="listitem">
								<span class="emphasis"><em>snmpd</em></span>(8) — The manual page for the <code class="literal">snmpd</code> service.
							</li><li class="listitem">
								<span class="emphasis"><em>snmpd.conf</em></span>(5) — The manual page for the <code class="literal">/etc/snmp/snmpd.conf</code> file containing full documentation of available configuration directives.
							</li></ul></div></section></section></section><section class="chapter" id="chap-OpenLMI"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;22.&nbsp;OpenLMI</h2></div></div></div><p>
				The <span class="strong strong"><strong><span class="application application">Open Linux Management Infrastructure</span></strong></span>, commonly abbreviated as <span class="strong strong"><strong><span class="application application">OpenLMI</span></strong></span>, is a common infrastructure for the management of Linux systems. It builds on top of existing tools and serves as an abstraction layer in order to hide much of the complexity of the underlying system from system administrators. OpenLMI is distributed with a set of services that can be accessed locally or remotely and provides multiple language bindings, standard APIs, and standard scripting interfaces that can be used to manage and monitor hardware, operating systems, and system services.
			</p><section class="section" id="chap-OpenLMI-About"><div class="titlepage"><div><div><h2 class="title">22.1.&nbsp;About OpenLMI</h2></div></div></div><p>
					OpenLMI is designed to provide a common management interface to production servers running the Red Hat Enterprise Linux system on both physical and virtual machines. It consists of the following three components:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							<span class="emphasis"><em>System management agents</em></span> — these agents are installed on a managed system and implement an object model that is presented to a standard object broker. The initial agents implemented in OpenLMI include storage configuration and network configuration, but later work will address additional elements of system management. The system management agents are commonly referred to as <span class="emphasis"><em>Common Information Model providers</em></span> or <span class="emphasis"><em>CIM providers</em></span>.
						</li><li class="listitem">
							A <span class="emphasis"><em>standard object broker</em></span> — the object broker manages system management agents and provides an interface to them. The standard object broker is also known as a <span class="emphasis"><em>CIM Object Monitor</em></span> or <span class="emphasis"><em>CIMOM</em></span>.
						</li><li class="listitem">
							<span class="emphasis"><em>Client applications and scripts</em></span> — the client applications and scripts call the system management agents through the standard object broker.
						</li></ol></div><p>
					The OpenLMI project complements existing management initiatives by providing a low-level interface that can be used by scripts or system management consoles. Interfaces distributed with OpenLMI include C, C++, Python, Java, and an interactive command line client, and all of them offer the same full access to the capabilities implemented in each agent. This ensures that you always have access to exactly the same capabilities no matter which programming interface you decide to use.
				</p><section class="section" id="sect-OpenLMI-About-Features"><div class="titlepage"><div><div><h3 class="title">22.1.1.&nbsp;Main Features</h3></div></div></div><p>
						The following are key benefits of installing and using OpenLMI on your system:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								OpenLMI provides a standard interface for configuration, management, and monitoring of your local and remote systems.
							</li><li class="listitem">
								It allows you to configure, manage, and monitor production servers running on both physical and virtual machines.
							</li><li class="listitem">
								It is distributed with a collection of CIM providers that allow you to configure, manage, and monitor storage devices and complex networks.
							</li><li class="listitem">
								It allows you to call system management functions from C, C++, Python, and Java programs, and includes LMIShell, which provides a command line interface.
							</li><li class="listitem">
								It is free software based on open industry standards.
							</li></ul></div></section><section class="section" id="sect-OpenLMI-About-Capabilities"><div class="titlepage"><div><div><h3 class="title">22.1.2.&nbsp;Management Capabilities</h3></div></div></div><p>
						Key capabilities of OpenLMI include the management of storage devices, networks, system services, user accounts, hardware and software configuration, power management, and interaction with Active Directory. For a complete list of CIM providers that are distributed with Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-OpenLMI-Providers" title="Table 22.1. Available CIM Providers">Table&nbsp;22.1, “Available CIM Providers”</a>.
					</p><div class="table" id="tabl-OpenLMI-Providers"><p class="title"><strong>Table&nbsp;22.1.&nbsp;Available CIM Providers</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569363408656" scope="col">Package Name</th><th align="left" valign="top" id="idm140569363407568" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-account</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for managing user accounts.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-logicalfile</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for reading files and directories.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-networking</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for network management.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-powermanagement</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for power management.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-service</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for managing system services.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-storage</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for storage management.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-fan</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for controlling computer fans.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-hardware</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for retrieving hardware information.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-realmd</span></strong></span>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for configuring realmd.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569363408656"> <p>
										<span class="strong strong"><strong><span class="package package">openlmi-software</span></strong></span><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ftn.idm140569363358960" class="footnote"><sup class="footnote" id="idm140569363358960">[a]</sup></a>
									</p>
									 </td><td align="left" valign="top" headers="idm140569363407568"> <p>
										A CIM provider for software management.
									</p>
									 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.idm140569363358960" class="footnote"><div class="para"><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#idm140569363358960" class="simpara"><sup class="simpara">[a] </sup></a>
											In Red Hat Enterprise Linux 7, the OpenLMI Software provider is included as a <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview</a>. This provider is fully functional, but has a known performance scaling issue where listing large numbers of software packages may consume excessive amount of memory and time. To work around this issue, adjust package searches to return as few packages as possible.
										</div></div></td></tr></tbody></table></div></div></section></section><section class="section" id="sect-OpenLMI-Install"><div class="titlepage"><div><div><h2 class="title">22.2.&nbsp;Installing OpenLMI</h2></div></div></div><p>
					OpenLMI is distributed as a collection of RPM packages that include the CIMOM, individual CIM providers, and client applications. This allows you distinguish between a managed and client system and install only those components you need.
				</p><section class="section" id="sect-OpenLMI-Install-Managed"><div class="titlepage"><div><div><h3 class="title">22.2.1.&nbsp;Installing OpenLMI on a Managed System</h3></div></div></div><p>
						A <span class="emphasis"><em>managed system</em></span> is the system you intend to monitor and manage by using the OpenLMI client tools. To install OpenLMI on a managed system, complete the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Install the <span class="strong strong"><strong><span class="package package">tog-pegasus</span></strong></span> package by typing the following at a shell prompt as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">yum install tog-pegasus</code></pre><p class="simpara">
								This command installs the OpenPegasus CIMOM and all its dependencies to the system and creates a user account for the <code class="literal">pegasus</code> user.
							</p></li><li class="listitem"><p class="simpara">
								Install required CIM providers by running the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">yum install openlmi-{storage,networking,service,account,powermanagement}</code></pre><p class="simpara">
								This command installs the CIM providers for storage, network, service, account, and power management. For a complete list of CIM providers distributed with Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-OpenLMI-Providers" title="Table 22.1. Available CIM Providers">Table&nbsp;22.1, “Available CIM Providers”</a>.
							</p></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/Pegasus/access.conf</code> configuration file to customize the list of users that are allowed to connect to the OpenPegasus CIMOM. By default, only the <code class="literal">pegasus</code> user is allowed to access the CIMOM both remotely and locally. To activate this user account, run the following command as <code class="literal">root</code> to set the user’s password:
							</p><pre class="literallayout"><code class="literal command">passwd pegasus</code></pre></li><li class="listitem"><p class="simpara">
								Start the OpenPegasus CIMOM by activating the <code class="literal">tog-pegasus.service</code> unit. To activate the <code class="literal">tog-pegasus.service</code> unit in the current session, type the following at a shell prompt as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">systemctl start tog-pegasus.service</code></pre><p class="simpara">
								To configure the <code class="literal">tog-pegasus.service</code> unit to start automatically at boot time, type as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">systemctl enable tog-pegasus.service</code></pre></li><li class="listitem"><p class="simpara">
								If you intend to interact with the managed system from a remote machine, enable TCP communication on port <code class="literal">5989</code> (<code class="literal">wbem-https</code>). To open this port in the current session, run the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">firewall-cmd --add-port 5989/tcp</code></pre><p class="simpara">
								To open port <code class="literal">5989</code> for TCP communication permanently, type as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">firewall-cmd --permanent --add-port 5989/tcp</code></pre></li></ol></div><p>
						You can now connect to the managed system and interact with it by using the OpenLMI client tools as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell" title="22.4. Using LMIShell">Section&nbsp;22.4, “Using LMIShell”</a>. If you intend to perform OpenLMI operations directly on the managed system, also complete the steps described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-Install-Client" title="22.2.2. Installing OpenLMI on a Client System">Section&nbsp;22.2.2, “Installing OpenLMI on a Client System”</a>.
					</p></section><section class="section" id="sect-OpenLMI-Install-Client"><div class="titlepage"><div><div><h3 class="title">22.2.2.&nbsp;Installing OpenLMI on a Client System</h3></div></div></div><p>
						A <span class="emphasis"><em>client system</em></span> is the system from which you intend to interact with the managed system. In a typical scenario, the client system and the managed system are installed on two separate machines, but you can also install the client tools on the managed system and interact with it directly.
					</p><p>
						To install OpenLMI on a client system, complete the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Install the <span class="strong strong"><strong><span class="package package">openlmi-tools</span></strong></span> package by typing the following at a shell prompt as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">yum install openlmi-tools</code></pre><p class="simpara">
								This command installs LMIShell, an interactive client and interpreter for accessing CIM objects provided by OpenPegasus, and all its dependencies to the system.
							</p></li><li class="listitem">
								Configure SSL certificates for OpenPegasus as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Configuring-SSL-Certificates-for-OpenPegasus" title="22.3. Configuring SSL Certificates for OpenPegasus">Section&nbsp;22.3, “Configuring SSL Certificates for OpenPegasus”</a>.
							</li></ol></div><p>
						You can now use the LMIShell client to interact with the managed system as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-OpenLMI-lmishell" title="22.4. Using LMIShell">Section&nbsp;22.4, “Using LMIShell”</a>.
					</p></section></section><section class="section" id="sect-Configuring-SSL-Certificates-for-OpenPegasus"><div class="titlepage"><div><div><h2 class="title">22.3.&nbsp;Configuring SSL Certificates for OpenPegasus</h2></div></div></div><p>
					OpenLMI uses the Web-Based Enterprise Management (WBEM) protocol that functions over an HTTP transport layer. Standard HTTP Basic authentication is performed in this protocol, which means that the user name and password are transmitted alongside the requests.
				</p><p>
					Configuring the OpenPegasus CIMOM to use HTTPS for communication is necessary to ensure secure authentication. A Secure Sockets Layer (SSL) or Transport Layer Security (TLS) certificate is required on the managed system to establish an encrypted channel.
				</p><p>
					There are two ways of managing SSL/TLS certificates on a system:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Self-signed certificates require less infrastructure to use, but are more difficult to deploy to clients and manage securely.
						</li><li class="listitem">
							Authority-signed certificates are easier to deploy to clients once they are set up, but may require a greater initial investment.
						</li></ul></div><p>
					When using an authority-signed certificate, it is necessary to configure a trusted certificate authority on the client systems. The authority can then be used for signing all of the managed systems' CIMOM certificates. Certificates can also be part of a certificate chain, so the certificate used for signing the managed systems' certificates may in turn be signed by another, higher authority (such as Verisign, CAcert, RSA and many others).
				</p><p>
					The default certificate and trust store locations on the file system are listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-OpenLMI-Certificates-Locations" title="Table 22.2. Certificate and Trust Store Locations">Table&nbsp;22.2, “Certificate and Trust Store Locations”</a>.
				</p><div class="table" id="tabl-OpenLMI-Certificates-Locations"><p class="title"><strong>Table&nbsp;22.2.&nbsp;Certificate and Trust Store Locations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569363294224" scope="col">Configuration Option</th><th align="left" valign="top" id="idm140569363293136" scope="col">Location</th><th align="left" valign="top" id="idm140569363292048" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569363294224"> <p>
									<code class="literal option">sslCertificateFilePath</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569363293136"> <p>
									<code class="literal">/etc/Pegasus/server.pem</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569363292048"> <p>
									Public certificate of the CIMOM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569363294224"> <p>
									<code class="literal option">sslKeyFilePath</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569363293136"> <p>
									<code class="literal">/etc/Pegasus/file.pem</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569363292048"> <p>
									Private key known only to the CIMOM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569363294224"> <p>
									<code class="literal option">sslTrustStore</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569363293136"> <p>
									<code class="literal">/etc/Pegasus/client.pem</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140569363292048"> <p>
									The file or directory providing the list of trusted certificate authorities.
								</p>
								 </td></tr></tbody></table></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						If you modify any of the files mentioned in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tabl-OpenLMI-Certificates-Locations" title="Table 22.2. Certificate and Trust Store Locations">Table&nbsp;22.2, “Certificate and Trust Store Locations”</a>, restart the <code class="literal">tog-pegasus</code> service to make sure it recognizes the new certificates. To restart the service, type the following at a shell prompt as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">systemctl restart tog-pegasus.service</code></pre><p>
						For more information on how to manage system services in Red Hat Enterprise Linux 7, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p></div></div><section class="section" id="sect-Configuring-SSL-Certificates-for-Pegasus-Managing-Self-Signed-Certificates"><div class="titlepage"><div><div><h3 class="title">22.3.1.&nbsp;Managing Self-signed Certificates</h3></div></div></div><p>
						A self-signed certificate uses its own private key to sign itself and it is not connected to any chain of trust. On a managed system, if certificates have not been provided by the administrator prior to the first time that the <code class="literal">tog-pegasus</code> service is started, a set of self-signed certificates will be automatically generated using the system’s primary host name as the certificate subject.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The automatically generated self-signed certificates are valid by default for 10 years, but they have no automatic-renewal capability. Any modification to these certificates will require manually creating new certificates following guidelines provided by the <a class="link" href="http://www.openssl.org/">OpenSSL</a> or <a class="link" href="https://developer.mozilla.org/en-US/docs/NSS">Mozilla NSS</a> documentation on the subject.
						</p></div></div><p>
						To configure client systems to trust the self-signed certificate, complete the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Copy the <code class="literal">/etc/Pegasus/server.pem</code> certificate from the managed system to the <code class="literal">/etc/pki/ca-trust/source/anchors/</code> directory on the client system. To do so, type the following at a shell prompt as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">scp root@<span class="emphasis"><em>hostname</em></span>:/etc/Pegasus/server.pem /etc/pki/ca-trust/source/anchors/pegasus-<span class="emphasis"><em>hostname</em></span>.pem</code></pre><p class="simpara">
								Replace <span class="emphasis"><em>hostname</em></span> with the host name of the managed system. Note that this command only works if the <code class="literal">sshd</code> service is running on the managed system and is configured to allow the <code class="literal">root</code> user to log in to the system over the SSH protocol. For more information on how to install and configure the <code class="literal">sshd</code> service and use the <code class="literal command">scp</code> command to transfer files over the SSH protocol, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-OpenSSH" title="Chapter 12. OpenSSH">Chapter&nbsp;12, <em>OpenSSH</em></a>.
							</p></li><li class="listitem"><p class="simpara">
								Verify the integrity of the certificate on the client system by comparing its check sum with the check sum of the original file. To calculate the check sum of the <code class="literal">/etc/Pegasus/server.pem</code> file on the managed system, run the following command as <code class="literal">root</code> on that system:
							</p><pre class="literallayout"><code class="literal command">sha1sum /etc/Pegasus/server.pem</code></pre><p class="simpara">
								To calculate the check sum of the <code class="literal">/etc/pki/ca-trust/source/anchors/pegasus-<span class="emphasis"><em>hostname</em></span>.pem</code> file on the client system, run the following command on this system:
							</p><pre class="literallayout"><code class="literal command">sha1sum /etc/pki/ca-trust/source/anchors/pegasus-<span class="emphasis"><em>hostname</em></span>.pem</code></pre><p class="simpara">
								Replace <span class="emphasis"><em>hostname</em></span> with the host name of the managed system.
							</p></li><li class="listitem"><p class="simpara">
								Update the trust store on the client system by running the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">update-ca-trust extract</code></pre></li></ol></div></section><section class="section" id="sect-Configuring-SSL-Certificates-for-Pegasus-Managing-Authority-Signed-Certificates-With-Identity-Management"><div class="titlepage"><div><div><h3 class="title">22.3.2.&nbsp;Managing Authority-signed Certificates with Identity Management (Recommended)</h3></div></div></div><p>
						The Identity Management feature of Red Hat Enterprise Linux provides a domain controller which simplifies the management of SSL certificates within systems joined to the domain. Among others, the Identity Management server provides an embedded Certificate Authority. See the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Linux_Domain_Identity_Authentication_and_Policy_Guide/">Red Hat Enterprise Linux 7 Linux Domain Identity, Authentication, and Policy Guide</a> or the FreeIPA documentation for information on how to join the client and managed systems to the domain.
					</p><p>
						It is necessary to register the managed system to Identity Management; for client systems the registration is optional.
					</p><p>
						The following steps are required on the managed system:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Install the <span class="strong strong"><strong><span class="package package">ipa-client</span></strong></span> package and register the system to Identity Management as described in the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Linux_Domain_Identity_Authentication_and_Policy_Guide/">Red Hat Enterprise Linux 7 Linux Domain Identity, Authentication, and Policy Guide</a>.
							</li><li class="listitem"><p class="simpara">
								Copy the Identity Management signing certificate to the trusted store by typing the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">cp /etc/ipa/ca.crt /etc/pki/ca-trust/source/anchors/ipa.crt</code></pre></li><li class="listitem"><p class="simpara">
								Update the trust store by running the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">update-ca-trust extract</code></pre></li><li class="listitem"><p class="simpara">
								Register Pegasus as a service in the Identity Management domain by running the following command as a privileged domain user:
							</p><pre class="literallayout"><code class="literal command">ipa service-add CIMOM/<span class="emphasis"><em>hostname</em></span></code></pre><p class="simpara">
								Replace <span class="emphasis"><em>hostname</em></span> with the host name of the managed system.
							</p><p class="simpara">
								This command can be run from any system in the Identity Management domain that has the <span class="strong strong"><strong><span class="package package">ipa-admintools</span></strong></span> package installed. It creates a service entry in Identity Management that can be used to generate signed SSL certificates.
							</p></li><li class="listitem">
								Back up the PEM files located in the <code class="literal">/etc/Pegasus/</code> directory (recommended).
							</li><li class="listitem"><p class="simpara">
								Retrieve the signed certificate by running the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">ipa-getcert request -f /etc/Pegasus/server.pem -k /etc/Pegasus/file.pem -N CN=<span class="emphasis"><em>hostname</em></span> -K CIMOM/<span class="emphasis"><em>hostname</em></span></code></pre><p class="simpara">
								Replace <span class="emphasis"><em>hostname</em></span> with the host name of the managed system.
							</p><p class="simpara">
								The certificate and key files are now kept in proper locations. The <code class="literal">certmonger</code> daemon installed on the managed system by the <code class="literal">ipa-client-install</code> script ensures that the certificate is kept up-to-date and renewed as necessary.
							</p><p class="simpara">
								For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Linux_Domain_Identity_Authentication_and_Policy_Guide/">Red Hat Enterprise Linux 7 Linux Domain Identity, Authentication, and Policy Guide</a>.
							</p></li></ol></div><p>
						To register the client system and update the trust store, follow the steps below.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Install the <span class="strong strong"><strong><span class="package package">ipa-client</span></strong></span> package and register the system to Identity Management as described in the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Linux_Domain_Identity_Authentication_and_Policy_Guide/">Red Hat Enterprise Linux 7 Linux Domain Identity, Authentication, and Policy Guide</a>.
							</li><li class="listitem"><p class="simpara">
								Copy the Identity Management signing certificate to the trusted store by typing the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">cp /etc/ipa/ca.crt /etc/pki/ca-trust/source/anchors/ipa.crt</code></pre></li><li class="listitem"><p class="simpara">
								Update the trust store by running the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">update-ca-trust extract</code></pre></li></ol></div><p>
						If the client system is not meant to be registered in Identity Management, complete the following steps to update the trust store.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Copy the <code class="literal">/etc/ipa/ca.crt</code> file securely from any other system joined to the same Identity Management domain to the trusted store <code class="literal">/etc/pki/ca-trust/source/anchors/</code> directory as <code class="literal">root</code>.
							</li><li class="listitem"><p class="simpara">
								Update the trust store by running the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">update-ca-trust extract</code></pre></li></ol></div></section><section class="section" id="sect-Configuring-SSL-Certificates-for-Pegasus-Managing-Authority-Signed-Certificates-Manually"><div class="titlepage"><div><div><h3 class="title">22.3.3.&nbsp;Managing Authority-signed Certificates Manually</h3></div></div></div><p>
						Managing authority-signed certificates with other mechanisms than Identity Management requires more manual configuration.
					</p><p>
						It is necessary to ensure that all of the clients trust the certificate of the authority that will be signing the managed system certificates:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If a certificate authority is trusted by default, it is not necessary to perform any particular steps to accomplish this.
							</li><li class="listitem"><p class="simpara">
								If the certificate authority is not trusted by default, the certificate has to be imported on the client and managed systems.
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Copy the certificate to the trusted store by typing the following command as <code class="literal">root</code>:
									</p><pre class="literallayout"><code class="literal command">cp /path/to/ca.crt /etc/pki/ca-trust/source/anchors/ca.crt</code></pre></li><li class="listitem"><p class="simpara">
										Update the trust store by running the following command as <code class="literal">root</code>:
									</p><pre class="literallayout"><code class="literal command">update-ca-trust extract</code></pre></li></ol></div></li></ul></div><p>
						On the managed system, complete the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a new SSL configuration file <code class="literal">/etc/Pegasus/ssl.cnf</code> to store information about the certificate. The contents of this file must be similar to the following example:
							</p><pre class="literallayout">[ req ]
distinguished_name   = req_distinguished_name
prompt         = no
[ req_distinguished_name ]
C           = US
ST           = Massachusetts
L           = Westford
O           = Fedora
OU           = Fedora OpenLMI
CN           = <span class="emphasis"><em>hostname</em></span></pre><p class="simpara">
								Replace <span class="emphasis"><em>hostname</em></span> with the fully qualified domain name of the managed system.
							</p></li><li class="listitem"><p class="simpara">
								Generate a private key on the managed system by using the following command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">openssl genrsa -out /etc/Pegasus/file.pem 1024</code></pre></li><li class="listitem"><p class="simpara">
								Generate a certificate signing request (CSR) by running this command as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">openssl req -config /etc/Pegasus/ssl.cnf -new -key /etc/Pegasus/file.pem -out /etc/Pegasus/server.csr</code></pre></li><li class="listitem">
								Send the <code class="literal">/etc/Pegasus/server.csr</code> file to the certificate authority for signing. The detailed procedure of submitting the file depends on the particular certificate authority.
							</li><li class="listitem">
								When the signed certificate is received from the certificate authority, save it as <code class="literal">/etc/Pegasus/server.pem</code>.
							</li><li class="listitem"><p class="simpara">
								Copy the certificate of the trusted authority to the Pegasus trust store to make sure that Pegasus is capable of trusting its own certificate by running as <code class="literal">root</code>:
							</p><pre class="literallayout"><code class="literal command">cp /path/to/ca.crt /etc/Pegasus/client.pem</code></pre></li></ol></div><p>
						After accomplishing all the described steps, the clients that trust the signing authority are able to successfully communicate with the managed server’s CIMOM.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Unlike the Identity Management solution, if the certificate expires and needs to be renewed, all of the described manual steps have to be carried out again. It is recommended to renew the certificates before they expire.
						</p></div></div></section></section><section class="section" id="sect-OpenLMI-lmishell"><div class="titlepage"><div><div><h2 class="title">22.4.&nbsp;Using LMIShell</h2></div></div></div><p>
					<span class="strong strong"><strong><span class="application application">LMIShell</span></strong></span> is an interactive client and non-interactive interpreter that can be used to access CIM objects provided by the OpenPegasus CIMOM. It is based on the Python interpreter, but also implements additional functions and classes for interacting with CIM objects.
				</p><section class="section" id="sect-OpenLMI-lmishell-Use"><div class="titlepage"><div><div><h3 class="title">22.4.1.&nbsp;Starting, Using, and Exiting LMIShell</h3></div></div></div><p>
						Similarly to the Python interpreter, you can use LMIShell either as an interactive client, or as a non-interactive interpreter for LMIShell scripts.
					</p><h5 id="starting_lmishell_in_interactive_mode">Starting LMIShell in Interactive Mode</h5><p>
						To start the LMIShell interpreter in interactive mode, run the <code class="literal command">lmishell</code> command with no additional arguments:
					</p><pre class="literallayout"><code class="literal command">lmishell</code></pre><p>
						By default, when LMIShell attempts to establish a connection with a CIMOM, it validates the server-side certificate against the Certification Authorities trust store. To disable this validation, run the <code class="literal command">lmishell</code> command with the <code class="literal option">--noverify</code> or <code class="literal option">-n</code> command line option:
					</p><pre class="literallayout"><code class="literal command">lmishell --noverify</code></pre><h5 id="using_tab_completion">Using Tab Completion</h5><p>
						When running in interactive mode, the LMIShell interpreter allows you press the <span class="keycap"><strong>Tab</strong></span> key to complete basic programming structures and CIM objects, including namespaces, classes, methods, and object properties.
					</p><h5 id="browsing_history">Browsing History</h5><p>
						By default, LMIShell stores all commands you type at the interactive prompt in the <code class="literal">~/.lmishell_history</code> file. This allows you to browse the command history and re-use already entered lines in interactive mode without the need to type them at the prompt again. To move backward in the command history, press the <span class="keycap"><strong>Up Arrow</strong></span> key or the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>p</strong></span> key combination. To move forward in the command history, press the <span class="keycap"><strong>Down Arrow</strong></span> key or the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>n</strong></span> key combination.
					</p><p>
						LMIShell also supports an incremental reverse search. To look for a particular line in the command history, press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>r</strong></span> and start typing any part of the command. For example:
					</p><pre class="literallayout">&gt; (reverse-i-search)`<code class="literal">connect</code>': c = connect("server.example.com", "pegasus")</pre><p>
						To clear the command history, use the <code class="literal">clear_history()</code> function as follows:
					</p><pre class="literallayout"><code class="literal">clear_history</code>()</pre><p>
						You can configure the number of lines that are stored in the command history by changing the value of the <code class="literal option">history_length</code> option in the <code class="literal">~/.lmishellrc</code> configuration file. In addition, you can change the location of the history file by changing the value of the <code class="literal option">history_file</code> option in this configuration file. For example, to set the location of the history file to <code class="literal">~/.lmishell_history</code> and configure LMIShell to store the maximum of <code class="literal">1000</code> lines in it, add the following lines to the <code class="literal">~/.lmishellrc</code> file:
					</p><pre class="literallayout">history_file = "~/.lmishell_history"
history_length = 1000</pre><h5 id="handling_exceptions">Handling Exceptions</h5><p>
						By default, the LMIShell interpreter handles all exceptions and uses return values. To disable this behavior in order to handle all exceptions in the code, use the <code class="literal">use_exceptions()</code> function as follows:
					</p><pre class="literallayout"><code class="literal">use_exceptions</code>()</pre><p>
						To re-enable the automatic exception handling, use:
					</p><pre class="literallayout"><code class="literal">use_exception</code>(<code class="literal">False</code>)</pre><p>
						You can permanently disable the exception handling by changing the value of the <code class="literal option">use_exceptions</code> option in the <code class="literal">~/.lmishellrc</code> configuration file to <code class="literal">True</code>:
					</p><pre class="literallayout">use_exceptions = True</pre><h5 id="configuring_a_temporary_cache">Configuring a Temporary Cache</h5><p>
						With the default configuration, LMIShell connection objects use a temporary cache for storing CIM class names and CIM classes in order to reduce network communication. To clear this temporary cache, use the <code class="literal">clear_cache()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>object_name</em></span>.<code class="literal">clear_cache</code>()</pre><p>
						Replace <span class="emphasis"><em>object_name</em></span> with the name of a connection object.
					</p><p>
						To disable the temporary cache for a particular connection object, use the <code class="literal">use_cache()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>object_name</em></span>.<code class="literal">use_cache</code>(<code class="literal">False</code>)</pre><p>
						To enable it again, use:
					</p><pre class="literallayout"><span class="emphasis"><em>object_name</em></span>.<code class="literal">use_cache</code>(<code class="literal">True</code>)</pre><p>
						You can permanently disable the temporary cache for connection objects by changing the value of the <code class="literal option">use_cache</code> option in the <code class="literal">~/.lmishellrc</code> configuration file to <code class="literal">False</code>:
					</p><pre class="literallayout">use_cache = False</pre><h5 id="exiting_lmishell">Exiting LMIShell</h5><p>
						To terminate the LMIShell interpreter and return to the shell prompt, press the <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>d</strong></span> key combination or issue the <code class="literal">quit()</code> function as follows:
					</p><pre class="literallayout">&gt; <code class="literal command">quit()</code>
~]$</pre><h5 id="running_an_lmishell_script">Running an LMIShell Script</h5><p>
						To run an LMIShell script, run the <code class="literal command">lmishell</code> command as follows:
					</p><pre class="literallayout">lmishell file_name</pre><p>
						Replace <span class="emphasis"><em>file_name</em></span> with the name of the script. To inspect an LMIShell script after its execution, also specify the <code class="literal option">--interact</code> or <code class="literal option">-i</code> command line option:
					</p><pre class="literallayout">lmishell --interact file_name</pre><p>
						The preferred file extension of LMIShell scripts is <code class="literal">.lmi</code>.
					</p></section><section class="section" id="sect-OpenLMI-lmishell-Connect"><div class="titlepage"><div><div><h3 class="title">22.4.2.&nbsp;Connecting to a CIMOM</h3></div></div></div><p>
						LMIShell allows you to connect to a CIMOM that is running either locally on the same system, or on a remote machine accessible over the network.
					</p><h5 id="connecting_to_a_remote_cimom">Connecting to a Remote CIMOM</h5><p>
						To access CIM objects provided by a remote CIMOM, create a connection object by using the <code class="literal">connect()</code> function as follows:
					</p><pre class="literallayout"><code class="literal">connect</code>(<span class="emphasis"><em>host_name</em></span>, <span class="emphasis"><em>user_name</em></span>, <span class="emphasis"><em>password</em></span>)</pre><p>
						Replace <span class="emphasis"><em>host_name</em></span> with the host name of the managed system, <span class="emphasis"><em>user_name</em></span> with the name of a user that is allowed to connect to the OpenPegasus CIMOM running on that system, and <span class="emphasis"><em>password</em></span> with the user’s password. If the password is omitted, LMIShell prompts the user to enter it. The function returns an <code class="literal">LMIConnection</code> object.
					</p><div class="example" id="exam-OpenLMI-lmishell-Connect-Remote"><p class="title"><strong>Example&nbsp;22.1.&nbsp;Connecting to a Remote CIMOM</strong></p><div class="example-contents"><p>
							To connect to the OpenPegasus CIMOM running on <code class="literal">server.example.com</code> as user <code class="literal">pegasus</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">c = connect("server.example.com", "pegasus")</code>
password:
&gt;</pre></div></div><h5 id="connecting_to_a_local_cimom">Connecting to a Local CIMOM</h5><p>
						LMIShell allows you to connect to a local CIMOM by using a Unix socket. For this type of connection, you must run the LMIShell interpreter as the <code class="literal">root</code> user and the <code class="literal">/var/run/tog-pegasus/cimxml.socket</code> socket must exist.
					</p><p>
						To access CIM objects provided by a local CIMOM, create a connection object by using the <code class="literal">connect()</code> function as follows:
					</p><pre class="literallayout"><code class="literal">connect</code>(<span class="emphasis"><em>host_name</em></span>)</pre><p>
						Replace <span class="emphasis"><em>host_name</em></span> with <code class="literal">localhost</code>, <code class="literal">127.0.0.1</code>, or <code class="literal">::1</code>. The function returns an <code class="literal">LMIConnection</code> object or <code class="literal">None</code>.
					</p><div class="example" id="exam-OpenLMI-lmishell-Connect-Local"><p class="title"><strong>Example&nbsp;22.2.&nbsp;Connecting to a Local CIMOM</strong></p><div class="example-contents"><p>
							To connect to the OpenPegasus CIMOM running on <code class="literal">localhost</code> as the <code class="literal">root</code> user, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">c = connect("localhost")</code>
&gt;</pre></div></div><h5 id="verifying_a_connection_to_a_cimom">Verifying a Connection to a CIMOM</h5><p>
						The <code class="literal">connect()</code> function returns either an <code class="literal">LMIConnection</code> object, or <code class="literal">None</code> if the connection could not be established. In addition, when the <code class="literal">connect()</code> function fails to establish a connection, it prints an error message to standard error output.
					</p><p>
						To verify that a connection to a CIMOM has been established successfully, use the <code class="literal">isinstance()</code> function as follows:
					</p><pre class="literallayout"><code class="literal">isinstance</code>(<span class="emphasis"><em>object_name</em></span>, <code class="literal">LMIConnection</code>)</pre><p>
						Replace <span class="emphasis"><em>object_name</em></span> with the name of the connection object. This function returns <code class="literal">True</code> if <span class="emphasis"><em>object_name</em></span> is an <code class="literal">LMIConnection</code> object, or <code class="literal">False</code> otherwise.
					</p><div class="example" id="exam-OpenLMI-lmishell-Connect-Verify"><p class="title"><strong>Example&nbsp;22.3.&nbsp;Verifying a Connection to a CIMOM</strong></p><div class="example-contents"><p>
							To verify that the <code class="literal">c</code> variable created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Connect-Remote" title="Example 22.1. Connecting to a Remote CIMOM">Example&nbsp;22.1, “Connecting to a Remote CIMOM”</a> contains an <code class="literal">LMIConnection</code> object, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">isinstance(c, LMIConnection)</code>
True
&gt;</pre><p>
							Alternatively, you can verify that <code class="literal">c</code> is not <code class="literal">None</code>:
						</p><pre class="literallayout">&gt; <code class="literal command">c is None</code>
False
&gt;</pre></div></div></section><section class="section" id="sect-OpenLMI-lmishell-Namespaces"><div class="titlepage"><div><div><h3 class="title">22.4.3.&nbsp;Working with Namespaces</h3></div></div></div><p>
						LMIShell namespaces provide a natural means of organizing available classes and serve as a hierarchic access point to other namespaces and classes. The <code class="literal">root</code> namespace is the first entry point of a connection object.
					</p><h5 id="listing_available_namespaces">Listing Available Namespaces</h5><p>
						To list all available namespaces, use the <code class="literal">print_namespaces()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>object_name</em></span>.<code class="literal">print_namespaces</code>()</pre><p>
						Replace <span class="emphasis"><em>object_name</em></span> with the name of the object to inspect. This method prints available namespaces to standard output.
					</p><p>
						To get a list of available namespaces, access the object attribute <code class="literal">namespaces</code>:
					</p><pre class="literallayout"><span class="emphasis"><em>object_name</em></span>.<code class="literal">namespaces</code></pre><p>
						This returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Namespaces-List"><p class="title"><strong>Example&nbsp;22.4.&nbsp;Listing Available Namespaces</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">root</code> namespace object of the <code class="literal">c</code> connection object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Connect-Remote" title="Example 22.1. Connecting to a Remote CIMOM">Example&nbsp;22.1, “Connecting to a Remote CIMOM”</a> and list all available namespaces, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; c.root.print_namespaces()
cimv2
interop
PG_InterOp
PG_Internal
&gt;</pre><p>
							To assign a list of these namespaces to a variable named <code class="literal">root_namespaces</code>, type:
						</p><pre class="literallayout">&gt; root_namespaces = c.root.namespaces
&gt;</pre></div></div><h5 id="accessing_namespace_objects">Accessing Namespace Objects</h5><p>
						To access a particular namespace object, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>object_name</em></span>.<span class="emphasis"><em>namespace_name</em></span></pre><p>
						Replace <span class="emphasis"><em>object_name</em></span> with the name of the object to inspect and <span class="emphasis"><em>namespace_name</em></span> with the name of the namespace to access. This returns an <code class="literal">LMINamespace</code> object.
					</p><div class="example" id="exam-OpenLMI-lmishell-Namespaces-Get"><p class="title"><strong>Example&nbsp;22.5.&nbsp;Accessing Namespace Objects</strong></p><div class="example-contents"><p>
							To access the <code class="literal">cimv2</code> namespace of the <code class="literal">c</code> connection object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Connect-Remote" title="Example 22.1. Connecting to a Remote CIMOM">Example&nbsp;22.1, “Connecting to a Remote CIMOM”</a> and assign it to a variable named <code class="literal">ns</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">ns = c.root.cimv2</code>
&gt;</pre></div></div></section><section class="section" id="sect-OpenLMI-lmishell-Classes"><div class="titlepage"><div><div><h3 class="title">22.4.4.&nbsp;Working with Classes</h3></div></div></div><p>
						LMIShell classes represent classes provided by a CIMOM. You can access and list their properties, methods, instances, instance names, and ValueMap properties, print their documentation strings, and create new instances and instance names.
					</p><h5 id="listing_available_classes">Listing Available Classes</h5><p>
						To list all available classes in a particular namespace, use the <code class="literal">print_classes()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>namespace_object</em></span>.<code class="literal">print_classes()</code></pre><p>
						Replace <span class="emphasis"><em>namespace_object</em></span> with the namespace object to inspect. This method prints available classes to standard output.
					</p><p>
						To get a list of available classes, use the <code class="literal">classes()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>namespace_object</em></span>.<code class="literal">classes</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Classes-List"><p class="title"><strong>Example&nbsp;22.6.&nbsp;Listing Available Classes</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a> and list all available classes, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; ns.print_classes()
CIM_CollectionInSystem
CIM_ConcreteIdentity
CIM_ControlledBy
CIM_DeviceSAPImplementation
CIM_MemberOfStatusCollection
...
&gt;</pre><p>
							To assign a list of these classes to a variable named <code class="literal">cimv2_classes</code>, type:
						</p><pre class="literallayout">&gt; cimv2_classes = ns.classes()
&gt;</pre></div></div><h5 id="accessing_class_objects">Accessing Class Objects</h5><p>
						To access a particular class object that is provided by the CIMOM, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>namespace_object</em></span>.<span class="emphasis"><em>class_name</em></span></pre><p>
						Replace <span class="emphasis"><em>namespace_object</em></span> with the name of the namespace object to inspect and <span class="emphasis"><em>class_name</em></span> with the name of the class to access.
					</p><div class="example" id="exam-OpenLMI-lmishell-Classes-Get"><p class="title"><strong>Example&nbsp;22.7.&nbsp;Accessing Class Objects</strong></p><div class="example-contents"><p>
							To access the <code class="literal">LMI_IPNetworkConnection</code> class of the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a> and assign it to a variable named <code class="literal">cls</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; cls = ns.LMI_IPNetworkConnection
&gt;</pre></div></div><h5 id="examining_class_objects">Examining Class Objects</h5><p>
						All class objects store information about their name and the namespace they belong to, as well as detailed class documentation. To get the name of a particular class object, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">classname</code></pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object to inspect. This returns a string representation of the object name.
					</p><p>
						To get information about the namespace a class object belongs to, use:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">namespace</code></pre><p>
						This returns a string representation of the namespace.
					</p><p>
						To display detailed class documentation, use the <code class="literal">doc()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">doc</code>()</pre><div class="example" id="exam-OpenLMI-lmishell-Classes-Examine"><p class="title"><strong>Example&nbsp;22.8.&nbsp;Examining Class Objects</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">cls</code> class object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-Get" title="Example 22.7. Accessing Class Objects">Example&nbsp;22.7, “Accessing Class Objects”</a> and display its name and corresponding namespace, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; cls.classname
'LMI_IPNetworkConnection'
&gt; cls.namespace
'root/cimv2'
&gt;</pre><p>
							To access class documentation, type:
						</p><pre class="literallayout">&gt; cls.doc()
Class: LMI_IPNetworkConnection
  SuperClass: CIM_IPNetworkConnection
  [qualifier] string UMLPackagePath: 'CIM::Network::IP'

  [qualifier] string Version: '0.1.0'
...</pre></div></div><h5 id="listing_available_methods">Listing Available Methods</h5><p>
						To list all available methods of a particular class object, use the <code class="literal">print_methods()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">print_methods</code>()</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object to inspect. This method prints available methods to standard output.
					</p><p>
						To get a list of available methods, use the <code class="literal">methods()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">methods()</code></pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Classes-Methods-List"><p class="title"><strong>Example&nbsp;22.9.&nbsp;Listing Available Methods</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">cls</code> class object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-Get" title="Example 22.7. Accessing Class Objects">Example&nbsp;22.7, “Accessing Class Objects”</a> and list all available methods, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; cls.print_methods()
RequestStateChange
&gt;</pre><p>
							To assign a list of these methods to a variable named <code class="literal">service_methods</code>, type:
						</p><pre class="literallayout">&gt; service_methods = cls.methods()
&gt;</pre></div></div><h5 id="listing_available_properties">Listing Available Properties</h5><p>
						To list all available properties of a particular class object, use the <code class="literal">print_properties()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">print_properties</code>()</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object to inspect. This method prints available properties to standard output.
					</p><p>
						To get a list of available properties, use the <code class="literal">properties()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">properties</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Classes-Properties-List"><p class="title"><strong>Example&nbsp;22.10.&nbsp;Listing Available Properties</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">cls</code> class object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-Get" title="Example 22.7. Accessing Class Objects">Example&nbsp;22.7, “Accessing Class Objects”</a> and list all available properties, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; cls.print_properties()
RequestedState
HealthState
StatusDescriptions
TransitioningToState
Generation
...
&gt;</pre><p>
							To assign a list of these classes to a variable named <code class="literal">service_properties</code>, type:
						</p><pre class="literallayout">&gt; service_properties = cls.properties()
&gt;</pre></div></div><h5 id="listing_and_viewing_valuemap_properties">Listing and Viewing ValueMap Properties</h5><p>
						CIM classes may contain <span class="emphasis"><em>ValueMap properties</em></span> in their Managed Object Format (<span class="strong strong"><strong>MOF</strong></span>) definition. ValueMap properties contain constant values, which may be useful when calling methods or checking returned values.
					</p><p>
						To list all available ValueMap properties of a particular class object, use the <code class="literal">print_valuemap_properties()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">print_valuemap_properties</code>()</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object to inspect. This method prints available ValueMap properties to standard output:
					</p><p>
						To get a list of available ValueMap properties, use the <code class="literal">valuemap_properties()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">valuemap_properties</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Classes-ValueMap-List"><p class="title"><strong>Example&nbsp;22.11.&nbsp;Listing ValueMap Properties</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">cls</code> class object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-Get" title="Example 22.7. Accessing Class Objects">Example&nbsp;22.7, “Accessing Class Objects”</a> and list all available ValueMap properties, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; cls.print_valuemap_properties()
RequestedState
HealthState
TransitioningToState
DetailedStatus
OperationalStatus
...
&gt;</pre><p>
							To assign a list of these ValueMap properties to a variable named <code class="literal">service_valuemap_properties</code>, type:
						</p><pre class="literallayout">&gt; service_valuemap_properties = cls.valuemap_properties()
&gt;</pre></div></div><p>
						To access a particular ValueMap property, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<span class="emphasis"><em>valuemap_property</em></span><code class="literal">Values</code></pre><p>
						Replace <span class="emphasis"><em>valuemap_property</em></span> with the name of the ValueMap property to access.
					</p><p>
						To list all available constant values, use the <code class="literal">print_values()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<span class="emphasis"><em>valuemap_property</em></span><code class="literal">Values</code>.<code class="literal">print_values</code>()</pre><p>
						This method prints available named constant values to standard output. You can also get a list of available constant values by using the <code class="literal">values()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<span class="emphasis"><em>valuemap_property</em></span><code class="literal">Values</code>.<code class="literal">values</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Classes-ValueMap-Get"><p class="title"><strong>Example&nbsp;22.12.&nbsp;Accessing ValueMap Properties</strong></p><div class="example-contents"><p>
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-ValueMap-List" title="Example 22.11. Listing ValueMap Properties">Example&nbsp;22.11, “Listing ValueMap Properties”</a> mentions a ValueMap property named <code class="literal">RequestedState</code>. To inspect this property and list available constant values, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; cls.RequestedStateValues.print_values()
Reset
NoChange
NotApplicable
Quiesce
Unknown
...
&gt;</pre><p>
							To assign a list of these constant values to a variable named <code class="literal">requested_state_values</code>, type:
						</p><pre class="literallayout">&gt; requested_state_values = cls.RequestedStateValues.values()
&gt;</pre></div></div><p>
						To access a particular constant value, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<span class="emphasis"><em>valuemap_property</em></span><code class="literal">Values</code>.<span class="emphasis"><em>constant_value_name</em></span></pre><p>
						Replace <span class="emphasis"><em>constant_value_name</em></span> with the name of the constant value. Alternatively, you can use the <code class="literal">value()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<span class="emphasis"><em>valuemap_property</em></span><code class="literal">Values</code>.<code class="literal">value</code>("<span class="emphasis"><em>constant_value_name</em></span>")</pre><p>
						To determine the name of a particular constant value, use the <code class="literal">value_name()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<span class="emphasis"><em>valuemap_property</em></span><code class="literal">Values</code>.<code class="literal">value_name</code>("<span class="emphasis"><em>constant_value</em></span>")</pre><p>
						This method returns a string.
					</p><div class="example" id="exam-OpenLMI-lmishell-Classes-ValueMap-Name"><p class="title"><strong>Example&nbsp;22.13.&nbsp;Accessing Constant Values</strong></p><div class="example-contents"><p>
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-ValueMap-Get" title="Example 22.12. Accessing ValueMap Properties">Example&nbsp;22.12, “Accessing ValueMap Properties”</a> shows that the <code class="literal">RequestedState</code> property provides a constant value named <code class="literal">Reset</code>. To access this named constant value, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">cls.RequestedStateValues.Reset</code>
11
&gt; <code class="literal command">cls.RequestedStateValues.value("Reset")</code>
11
&gt;</pre><p>
							To determine the name of this constant value, type:
						</p><pre class="literallayout">&gt; cls.RequestedStateValues.value_name(11)
u'Reset'
&gt;</pre></div></div><h5 id="fetching_a_cimclass_object">Fetching a CIMClass Object</h5><p>
						Many class methods do not require access to a <code class="literal">CIMClass</code> object, which is why LMIShell only fetches this object from the CIMOM when a called method actually needs it. To fetch the <code class="literal">CIMClass</code> object manually, use the <code class="literal">fetch()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">fetch</code>()</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object. Note that methods that require access to a <code class="literal">CIMClass</code> object fetch it automatically.
					</p></section><section class="section" id="sect-OpenLMI-lmishell-Instances"><div class="titlepage"><div><div><h3 class="title">22.4.5.&nbsp;Working with Instances</h3></div></div></div><p>
						LMIShell instances represent instances provided by a CIMOM. You can get and set their properties, list and call their methods, print their documentation strings, get a list of associated or association objects, push modified objects to the CIMOM, and delete individual instances from the CIMOM.
					</p><h5 id="accessing_instances">Accessing Instances</h5><p>
						To get a list of all available instances of a particular class object, use the <code class="literal">instances()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">instances</code>()</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object to inspect. This method returns a list of <code class="literal">LMIInstance</code> objects.
					</p><p>
						To access the first instance of a class object, use the <code class="literal">first_instance()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">first_instance</code>()</pre><p>
						This method returns an <code class="literal">LMIInstance</code> object.
					</p><p>
						In addition to listing all instances or returning the first one, both <code class="literal">instances()</code> and <code class="literal">first_instance()</code> support an optional argument to allow you to filter the results:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">instances</code>(<span class="emphasis"><em>criteria</em></span>)</pre><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">first_instance</code>(<span class="emphasis"><em>criteria</em></span>)</pre><p>
						Replace <span class="emphasis"><em>criteria</em></span> with a dictionary consisting of key-value pairs, where keys represent instance properties and values represent required values of these properties.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Get"><p class="title"><strong>Example&nbsp;22.14.&nbsp;Accessing Instances</strong></p><div class="example-contents"><p>
							To find the first instance of the <code class="literal">cls</code> class object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-Get" title="Example 22.7. Accessing Class Objects">Example&nbsp;22.7, “Accessing Class Objects”</a> that has the <code class="literal">ElementName</code> property equal to <code class="literal">eth0</code> and assign it to a variable named <code class="literal">device</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device = cls.first_instance({"ElementName": "eth0"})
&gt;</pre></div></div><h5 id="examining_instances">Examining Instances</h5><p>
						All instance objects store information about their class name and the namespace they belong to, as well as detailed documentation about their properties and values. In addition, instance objects allow you to retrieve a unique identification object.
					</p><p>
						To get the class name of a particular instance object, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">classname</code></pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. This returns a string representation of the class name.
					</p><p>
						To get information about the namespace an instance object belongs to, use:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">namespace</code></pre><p>
						This returns a string representation of the namespace.
					</p><p>
						To retrieve a unique identification object for an instance object, use:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">path</code></pre><p>
						This returns an <code class="literal">LMIInstanceName</code> object.
					</p><p>
						Finally, to display detailed documentation, use the <code class="literal">doc()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">doc</code>()</pre><div class="example" id="exam-OpenLMI-lmishell-Instances-Examine"><p class="title"><strong>Example&nbsp;22.15.&nbsp;Examining Instances</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">device</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Get" title="Example 22.14. Accessing Instances">Example&nbsp;22.14, “Accessing Instances”</a> and display its class name and the corresponding namespace, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device.classname
u'LMI_IPNetworkConnection'
&gt; device.namespace
'root/cimv2'
&gt;</pre><p>
							To access instance object documentation, type:
						</p><pre class="literallayout">&gt; device.doc()
Instance of LMI_IPNetworkConnection
  [property] uint16 RequestedState = '12'

  [property] uint16 HealthState

  [property array] string [] StatusDescriptions
...</pre></div></div><h5 id="creating_new_instances">Creating New Instances</h5><p>
						Certain CIM providers allow you to create new instances of specific classes objects. To create a new instance of a class object, use the <code class="literal">create_instance()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">create_instance</code>(<span class="emphasis"><em>properties</em></span>)</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object and <span class="emphasis"><em>properties</em></span> with a dictionary that consists of key-value pairs, where keys represent instance properties and values represent property values. This method returns an <code class="literal">LMIInstance</code> object.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Create"><p class="title"><strong>Example&nbsp;22.16.&nbsp;Creating New Instances</strong></p><div class="example-contents"><p>
							The <code class="literal">LMI_Group</code> class represents system groups and the <code class="literal">LMI_Account</code> class represents user accounts on the managed system. To use the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a>, create instances of these two classes for the system group named <code class="literal">pegasus</code> and the user named <code class="literal">lmishell-user</code>, and assign them to variables named <code class="literal">group</code> and <code class="literal">user</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; group = ns.LMI_Group.first_instance({"Name" : "pegasus"})
&gt; user = ns.LMI_Account.first_instance({"Name" : "lmishell-user"})
&gt;</pre><p>
							To get an instance of the <code class="literal">LMI_Identity</code> class for the <code class="literal">lmishell-user</code> user, type:
						</p><pre class="literallayout">&gt; identity = user.first_associator(ResultClass="LMI_Identity")
&gt;</pre><p>
							The <code class="literal">LMI_MemberOfGroup</code> class represents system group membership. To use the <code class="literal">LMI_MemberOfGroup</code> class to add the <code class="literal">lmishell-user</code> to the <code class="literal">pegasus</code> group, create a new instance of this class as follows:
						</p><pre class="literallayout">&gt; ns.LMI_MemberOfGroup.create_instance({
...   "Member" : identity.path,
...   "Collection" : group.path})
LMIInstance(classname="LMI_MemberOfGroup", ...)
&gt;</pre></div></div><h5 id="deleting_individual_instances">Deleting Individual Instances</h5><p>
						To delete a particular instance from the CIMOM, use the <code class="literal">delete()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">delete</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to delete. This method returns a boolean. Note that after deleting an instance, its properties and methods become inaccessible.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Delete"><p class="title"><strong>Example&nbsp;22.17.&nbsp;Deleting Individual Instances</strong></p><div class="example-contents"><p>
							The <code class="literal">LMI_Account</code> class represents user accounts on the managed system. To use the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a>, create an instance of the <code class="literal">LMI_Account</code> class for the user named <code class="literal">lmishell-user</code>, and assign it to a variable named <code class="literal">user</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; user = ns.LMI_Account.first_instance({"Name" : "lmishell-user"})
&gt;</pre><p>
							To delete this instance and remove the <code class="literal">lmishell-user</code> from the system, type:
						</p><pre class="literallayout">&gt; <code class="literal command">user.delete()</code>
True
&gt;</pre></div></div><h5 id="listing_and_accessing_available_properties">Listing and Accessing Available Properties</h5><p>
						To list all available properties of a particular instance object, use the <code class="literal">print_properties()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">print_properties</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. This method prints available properties to standard output.
					</p><p>
						To get a list of available properties, use the <code class="literal">properties()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">properties</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Properties-List"><p class="title"><strong>Example&nbsp;22.18.&nbsp;Listing Available Properties</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">device</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Get" title="Example 22.14. Accessing Instances">Example&nbsp;22.14, “Accessing Instances”</a> and list all available properties, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device.print_properties()
RequestedState
HealthState
StatusDescriptions
TransitioningToState
Generation
...
&gt;</pre><p>
							To assign a list of these properties to a variable named <code class="literal">device_properties</code>, type:
						</p><pre class="literallayout">&gt; device_properties = device.properties()
&gt;</pre></div></div><p>
						To get the current value of a particular property, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>property_name</em></span></pre><p>
						Replace <span class="emphasis"><em>property_name</em></span> with the name of the property to access.
					</p><p>
						To modify the value of a particular property, assign a value to it as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>property_name</em></span> = <span class="emphasis"><em>value</em></span></pre><p>
						Replace <span class="emphasis"><em>value</em></span> with the new value of the property. Note that in order to propagate the change to the CIMOM, you must also execute the <code class="literal">push()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">push</code>()</pre><p>
						This method returns a three-item tuple consisting of a return value, return value parameters, and an error string.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Properties-Get"><p class="title"><strong>Example&nbsp;22.19.&nbsp;Accessing Individual Properties</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">device</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Get" title="Example 22.14. Accessing Instances">Example&nbsp;22.14, “Accessing Instances”</a> and display the value of the property named <code class="literal">SystemName</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">device.SystemName</code>
u'server.example.com'
&gt;</pre></div></div><h5 id="listing_and_using_available_methods">Listing and Using Available Methods</h5><p>
						To list all available methods of a particular instance object, use the <code class="literal">print_methods()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">print_methods</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. This method prints available methods to standard output.
					</p><p>
						To get a list of available methods, use the <code class="literal">method()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">methods</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Methods-List"><p class="title"><strong>Example&nbsp;22.20.&nbsp;Listing Available Methods</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">device</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Get" title="Example 22.14. Accessing Instances">Example&nbsp;22.14, “Accessing Instances”</a> and list all available methods, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device.print_methods()
RequestStateChange
&gt;</pre><p>
							To assign a list of these methods to a variable named <code class="literal">network_device_methods</code>, type:
						</p><pre class="literallayout">&gt; network_device_methods = device.methods()
&gt;</pre></div></div><p>
						To call a particular method, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>(
  <span class="emphasis"><em>parameter</em></span>=<span class="emphasis"><em>value</em></span>,
  ...)</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to use, <span class="emphasis"><em>method_name</em></span> with the name of the method to call, <span class="emphasis"><em>parameter</em></span> with the name of the parameter to set, and <span class="emphasis"><em>value</em></span> with the value of this parameter. Methods return a three-item tuple consisting of a return value, return value parameters, and an error string.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							<code class="literal">LMIInstance</code> objects do <span class="emphasis"><em>not</em></span> automatically refresh their contents (properties, methods, qualifiers, and so on). To do so, use the <code class="literal">refresh()</code> method as described below.
						</p></div></div><div class="example" id="exam-OpenLMI-lmishell-Instances-Methods-Use"><p class="title"><strong>Example&nbsp;22.21.&nbsp;Using Methods</strong></p><div class="example-contents"><p>
							The <code class="literal">PG_ComputerSystem</code> class represents the system. To create an instance of this class by using the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a> and assign it to a variable named <code class="literal">sys</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; sys = ns.PG_ComputerSystem.first_instance()
&gt;</pre><p>
							The <code class="literal">LMI_AccountManagementService</code> class implements methods that allow you to manage users and groups in the system. To create an instance of this class and assign it to a variable named <code class="literal">acc</code>, type:
						</p><pre class="literallayout">&gt; acc = ns.LMI_AccountManagementService.first_instance()
&gt;</pre><p>
							To create a new user named <code class="literal">lmishell-user</code> in the system, use the <code class="literal">CreateAccount()</code> method as follows:
						</p><pre class="literallayout">&gt; acc.CreateAccount(Name="lmishell-user", System=sys)
LMIReturnValue(rval=0, rparams=NocaseDict({u'Account': LMIInstanceName(classname="LMI_Account"...), u'Identities': [LMIInstanceName(classname="LMI_Identity"...), LMIInstanceName(classname="LMI_Identity"...)]}), errorstr='')</pre></div></div><p>
						LMIShell support synchronous method calls: when you use a synchronous method, LMIShell waits for the corresponding Job object to change its state to "finished" and then returns the return parameters of this job. LMIShell is able to perform a synchronous method call if the given method returns an object of one of the following classes:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">LMI_StorageJob</code>
							</li><li class="listitem">
								<code class="literal">LMI_SoftwareInstallationJob</code>
							</li><li class="listitem">
								<code class="literal">LMI_NetworkJob</code>
							</li></ul></div><p>
						LMIShell first tries to use indications as the waiting method. If it fails, it uses a polling method instead.
					</p><p>
						To perform a synchronous method call, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">Sync</code><span class="emphasis"><em>method_name</em></span>(
  <span class="emphasis"><em>parameter</em></span>=<span class="emphasis"><em>value</em></span>,
  ...)</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to use, <span class="emphasis"><em>method_name</em></span> with the name of the method to call, <span class="emphasis"><em>parameter</em></span> with the name of the parameter to set, and <span class="emphasis"><em>value</em></span> with the value of this parameter. All synchronous methods have the <code class="literal">Sync</code> prefix in their name and return a three-item tuple consisting of the job’s return value, job’s return value parameters, and job’s error string.
					</p><p>
						You can also force LMIShell to use only polling method. To do so, specify the <code class="literal">PreferPolling</code> parameter as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">Sync</code><span class="emphasis"><em>method_name</em></span>(
  <code class="literal">PreferPolling</code>=<code class="literal">True</code>
  <span class="emphasis"><em>parameter</em></span>=<span class="emphasis"><em>value</em></span>,
  ...)</pre><h5 id="listing_and_viewing_valuemap_parameters">Listing and Viewing ValueMap Parameters</h5><p>
						CIM methods may contain <span class="emphasis"><em>ValueMap parameters</em></span> in their Managed Object Format (<span class="strong strong"><strong>MOF</strong></span>) definition. ValueMap parameters contain constant values.
					</p><p>
						To list all available ValueMap parameters of a particular method, use the <code class="literal">print_valuemap_parameters()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<code class="literal">print_valuemap_parameters</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object and <span class="emphasis"><em>method_name</em></span> with the name of the method to inspect. This method prints available ValueMap parameters to standard output.
					</p><p>
						To get a list of available ValueMap parameters, use the <code class="literal">valuemap_parameters()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<code class="literal">valuemap_parameters</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Methods-ValueMap-List"><p class="title"><strong>Example&nbsp;22.22.&nbsp;Listing ValueMap Parameters</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">acc</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Methods-Use" title="Example 22.21. Using Methods">Example&nbsp;22.21, “Using Methods”</a> and list all available ValueMap parameters of the <code class="literal">CreateAccount()</code> method, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; acc.CreateAccount.print_valuemap_parameters()
CreateAccount
&gt;</pre><p>
							To assign a list of these ValueMap parameters to a variable named <code class="literal">create_account_parameters</code>, type:
						</p><pre class="literallayout">&gt; create_account_parameters = acc.CreateAccount.valuemap_parameters()
&gt;</pre></div></div><p>
						To access a particular ValueMap parameter, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<span class="emphasis"><em>valuemap_parameter</em></span><code class="literal">Values</code></pre><p>
						Replace <span class="emphasis"><em>valuemap_parameter</em></span> with the name of the ValueMap parameter to access.
					</p><p>
						To list all available constant values, use the <code class="literal">print_values()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<span class="emphasis"><em>valuemap_parameter</em></span><code class="literal">Values</code>.<code class="literal">print_values</code>()</pre><p>
						This method prints available named constant values to standard output. You can also get a list of available constant values by using the <code class="literal">values()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<span class="emphasis"><em>valuemap_parameter</em></span><code class="literal">Values</code>.<code class="literal">values</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Methods-ValueMap-Get"><p class="title"><strong>Example&nbsp;22.23.&nbsp;Accessing ValueMap Parameters</strong></p><div class="example-contents"><p>
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Methods-ValueMap-List" title="Example 22.22. Listing ValueMap Parameters">Example&nbsp;22.22, “Listing ValueMap Parameters”</a> mentions a ValueMap parameter named <code class="literal">CreateAccount</code>. To inspect this parameter and list available constant values, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; acc.CreateAccount.CreateAccountValues.print_values()
Operationunsupported
Failed
Unabletosetpasswordusercreated
Unabletocreatehomedirectoryusercreatedandpasswordset
Operationcompletedsuccessfully
&gt;</pre><p>
							To assign a list of these constant values to a variable named <code class="literal">create_account_values</code>, type:
						</p><pre class="literallayout">&gt; create_account_values = acc.CreateAccount.CreateAccountValues.values()
&gt;</pre></div></div><p>
						To access a particular constant value, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<span class="emphasis"><em>valuemap_parameter</em></span><code class="literal">Values</code>.<span class="emphasis"><em>constant_value_name</em></span></pre><p>
						Replace <span class="emphasis"><em>constant_value_name</em></span> with the name of the constant value. Alternatively, you can use the <code class="literal">value()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<span class="emphasis"><em>valuemap_parameter</em></span><code class="literal">Values</code>.<code class="literal">value</code>("<span class="emphasis"><em>constant_value_name</em></span>")</pre><p>
						To determine the name of a particular constant value, use the <code class="literal">value_name()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<span class="emphasis"><em>method_name</em></span>.<span class="emphasis"><em>valuemap_parameter</em></span><code class="literal">Values</code>.<code class="literal">value_name</code>("<span class="emphasis"><em>constant_value</em></span>")</pre><p>
						This method returns a string.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Methods-ValueMap-Name"><p class="title"><strong>Example&nbsp;22.24.&nbsp;Accessing Constant Values</strong></p><div class="example-contents"><p>
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Methods-ValueMap-Get" title="Example 22.23. Accessing ValueMap Parameters">Example&nbsp;22.23, “Accessing ValueMap Parameters”</a> shows that the <code class="literal">CreateAccount</code> ValueMap parameter provides a constant value named <code class="literal">Failed</code>. To access this named constant value, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">acc.CreateAccount.CreateAccountValues.Failed</code>
2
&gt; <code class="literal command">acc.CreateAccount.CreateAccountValues.value("Failed")</code>
2
&gt;</pre><p>
							To determine the name of this constant value, type:
						</p><pre class="literallayout">&gt; acc.CreateAccount.CreateAccountValues.value_name(2)
u'Failed'
&gt;</pre></div></div><h5 id="refreshing_instance_objects">Refreshing Instance Objects</h5><p>
						Local objects used by LMIShell, which represent CIM objects at CIMOM side, can get outdated, if such objects change while working with LMIShell’s ones. To update the properties and methods of a particular instance object, use the <code class="literal">refresh()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">refresh</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the object to refresh. This method returns a three-item tuple consisting of a return value, return value parameter, and an error string.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-Refresh"><p class="title"><strong>Example&nbsp;22.25.&nbsp;Refreshing Instance Objects</strong></p><div class="example-contents"><p>
							To update the properties and methods of the <code class="literal">device</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Get" title="Example 22.14. Accessing Instances">Example&nbsp;22.14, “Accessing Instances”</a>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; <code class="literal command">device.refresh()</code>
LMIReturnValue(rval=True, rparams=NocaseDict({}), errorstr='')
&gt;</pre></div></div><h5 id="displaying_mof_representation">Displaying MOF Representation</h5><p>
						To display the Managed Object Format (<span class="strong strong"><strong>MOF</strong></span>) representation of an instance object, use the <code class="literal">tomof()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">tomof</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. This method prints the MOF representation of the object to standard output.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instances-MOF"><p class="title"><strong>Example&nbsp;22.26.&nbsp;Displaying MOF Representation</strong></p><div class="example-contents"><p>
							To display the MOF representation of the <code class="literal">device</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instances-Get" title="Example 22.14. Accessing Instances">Example&nbsp;22.14, “Accessing Instances”</a>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device.tomof()
instance of LMI_IPNetworkConnection {
    RequestedState = 12;
    HealthState = NULL;
    StatusDescriptions = NULL;
    TransitioningToState = 12;
...</pre></div></div></section><section class="section" id="sect-OpenLMI-lmishell-Instance_Names"><div class="titlepage"><div><div><h3 class="title">22.4.6.&nbsp;Working with Instance Names</h3></div></div></div><p>
						LMIShell instance names are objects that hold a set of primary keys and their values. This type of an object exactly identifies an instance.
					</p><h5 id="accessing_instance_names">Accessing Instance Names</h5><p>
						<code class="literal">CIMInstance</code> objects are identified by <code class="literal">CIMInstanceName</code> objects. To get a list of all available instance name objects, use the <code class="literal">instance_names()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">instance_names</code>()</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object to inspect. This method returns a list of <code class="literal">LMIInstanceName</code> objects.
					</p><p>
						To access the first instance name object of a class object, use the <code class="literal">first_instance_name()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">first_instance_name</code>()</pre><p>
						This method returns an <code class="literal">LMIInstanceName</code> object.
					</p><p>
						In addition to listing all instance name objects or returning the first one, both <code class="literal">instance_names()</code> and <code class="literal">first_instance_name()</code> support an optional argument to allow you to filter the results:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">instance_names</code>(<span class="emphasis"><em>criteria</em></span>)</pre><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">first_instance_name</code>(<span class="emphasis"><em>criteria</em></span>)</pre><p>
						Replace <span class="emphasis"><em>criteria</em></span> with a dictionary consisting of key-value pairs, where keys represent key properties and values represent required values of these key properties.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instance_Names-Get"><p class="title"><strong>Example&nbsp;22.27.&nbsp;Accessing Instance Names</strong></p><div class="example-contents"><p>
							To find the first instance name of the <code class="literal">cls</code> class object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Classes-Get" title="Example 22.7. Accessing Class Objects">Example&nbsp;22.7, “Accessing Class Objects”</a> that has the <code class="literal">Name</code> key property equal to <code class="literal">eth0</code> and assign it to a variable named <code class="literal">device_name</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device_name = cls.first_instance_name({"Name": "eth0"})
&gt;</pre></div></div><h5 id="examining_instance_names">Examining Instance Names</h5><p>
						All instance name objects store information about their class name and the namespace they belong to.
					</p><p>
						To get the class name of a particular instance name object, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_name_object</em></span>.<code class="literal">classname</code></pre><p>
						Replace <span class="emphasis"><em>instance_name_object</em></span> with the name of the instance name object to inspect. This returns a string representation of the class name.
					</p><p>
						To get information about the namespace an instance name object belongs to, use:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_name_object</em></span>.<code class="literal">namespace</code></pre><p>
						This returns a string representation of the namespace.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instance_Names-Examine"><p class="title"><strong>Example&nbsp;22.28.&nbsp;Examining Instance Names</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">device_name</code> instance name object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instance_Names-Get" title="Example 22.27. Accessing Instance Names">Example&nbsp;22.27, “Accessing Instance Names”</a> and display its class name and the corresponding namespace, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device_name.classname
u'LMI_IPNetworkConnection'
&gt; device_name.namespace
'root/cimv2'
&gt;</pre></div></div><h5 id="creating_new_instance_names">Creating New Instance Names</h5><p>
						LMIShell allows you to create a new wrapped <code class="literal">CIMInstanceName</code> object if you know all primary keys of a remote object. This instance name object can then be used to retrieve the whole instance object.
					</p><p>
						To create a new instance name of a class object, use the <code class="literal">new_instance_name()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>class_object</em></span>.<code class="literal">new_instance_name</code>(<span class="emphasis"><em>key_properties</em></span>)</pre><p>
						Replace <span class="emphasis"><em>class_object</em></span> with the name of the class object and <span class="emphasis"><em>key_properties</em></span> with a dictionary that consists of key-value pairs, where keys represent key properties and values represent key property values. This method returns an <code class="literal">LMIInstanceName</code> object.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instance_Names-Create"><p class="title"><strong>Example&nbsp;22.29.&nbsp;Creating New Instance Names</strong></p><div class="example-contents"><p>
							The <code class="literal">LMI_Account</code> class represents user accounts on the managed system. To use the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a> and create a new instance name of the <code class="literal">LMI_Account</code> class representing the <code class="literal">lmishell-user</code> user on the managed system, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; instance_name = ns.LMI_Account.new_instance_name({
...   "CreationClassName" : "LMI_Account",
...   "Name" : "lmishell-user",
...   "SystemCreationClassName" : "PG_ComputerSystem",
...   "SystemName" : "server"})
&gt;</pre></div></div><h5 id="listing_and_accessing_key_properties">Listing and Accessing Key Properties</h5><p>
						To list all available key properties of a particular instance name object, use the <code class="literal">print_key_properties()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_name_object</em></span>.<code class="literal">print_key_properties</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_name_object</em></span> with the name of the instance name object to inspect. This method prints available key properties to standard output.
					</p><p>
						To get a list of available key properties, use the <code class="literal">key_properties()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_name_object</em></span>.<code class="literal">key_properties</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instance_Names-Properties-List"><p class="title"><strong>Example&nbsp;22.30.&nbsp;Listing Available Key Properties</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">device_name</code> instance name object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instance_Names-Get" title="Example 22.27. Accessing Instance Names">Example&nbsp;22.27, “Accessing Instance Names”</a> and list all available key properties, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device_name.print_key_properties()
CreationClassName
SystemName
Name
SystemCreationClassName
&gt;</pre><p>
							To assign a list of these key properties to a variable named <code class="literal">device_name_properties</code>, type:
						</p><pre class="literallayout">&gt; device_name_properties = device_name.key_properties()
&gt;</pre></div></div><p>
						To get the current value of a particular key property, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_name_object</em></span>.<span class="emphasis"><em>key_property_name</em></span></pre><p>
						Replace <span class="emphasis"><em>key_property_name</em></span> with the name of the key property to access.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instance_Names-Properties-Get"><p class="title"><strong>Example&nbsp;22.31.&nbsp;Accessing Individual Key Properties</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">device_name</code> instance name object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instance_Names-Get" title="Example 22.27. Accessing Instance Names">Example&nbsp;22.27, “Accessing Instance Names”</a> and display the value of the key property named <code class="literal">SystemName</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device_name.SystemName
u'server.example.com'
&gt;</pre></div></div><h5 id="converting_instance_names_to_instances">Converting Instance Names to Instances</h5><p>
						Each instance name can be converted to an instance. To do so, use the <code class="literal">to_instance()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_name_object</em></span>.<code class="literal">to_instance</code>()</pre><p>
						Replace <span class="emphasis"><em>instance_name_object</em></span> with the name of the instance name object to convert. This method returns an <code class="literal">LMIInstance</code> object.
					</p><div class="example" id="exam-OpenLMI-lmishell-Instance_Names-Convert"><p class="title"><strong>Example&nbsp;22.32.&nbsp;Converting Instance Names to Instances</strong></p><div class="example-contents"><p>
							To convert the <code class="literal">device_name</code> instance name object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Instance_Names-Get" title="Example 22.27. Accessing Instance Names">Example&nbsp;22.27, “Accessing Instance Names”</a> to an instance object and assign it to a variable named <code class="literal">device</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; device = device_name.to_instance()
&gt;</pre></div></div></section><section class="section" id="sect-OpenLMI-lmishell-Associated_Objects"><div class="titlepage"><div><div><h3 class="title">22.4.7.&nbsp;Working with Associated Objects</h3></div></div></div><p>
						The Common Information Model defines an association relationship between managed objects.
					</p><h5 id="accessing_associated_instances">Accessing Associated Instances</h5><p>
						To get a list of all objects associated with a particular instance object, use the <code class="literal">associators()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">associators</code>(
  AssocClass=<span class="emphasis"><em>class_name</em></span>,
  ResultClass=<span class="emphasis"><em>class_name</em></span>,
  ResultRole=<span class="emphasis"><em>role</em></span>,
  IncludeQualifiers=<span class="emphasis"><em>include_qualifiers</em></span>,
  IncludeClassOrigin=<span class="emphasis"><em>include_class_origin</em></span>,
  PropertyList=<span class="emphasis"><em>property_list</em></span>)</pre><p>
						To access the first object associated with a particular instance object, use the <code class="literal">first_associator()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">first_associator</code>(
  AssocClass=<span class="emphasis"><em>class_name</em></span>,
  ResultClass=<span class="emphasis"><em>class_name</em></span>,
  ResultRole=<span class="emphasis"><em>role</em></span>,
  IncludeQualifiers=<span class="emphasis"><em>include_qualifiers</em></span>,
  IncludeClassOrigin=<span class="emphasis"><em>include_class_origin</em></span>,
  PropertyList=<span class="emphasis"><em>property_list</em></span>)</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. You can filter the results by specifying the following parameters:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal option">AssocClass</code> — Each returned object must be associated with the source object through an instance of this class or one of its subclasses. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal option">ResultClass</code> — Each returned object must be either an instance of this class or one of its subclasses, or it must be this class or one of its subclasses. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal option">Role</code> — Each returned object must be associated with the source object through an association in which the source object plays the specified role. The name of the property in the association class that refers to the source object must match the value of this parameter. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal option">ResultRole</code> — Each returned object must be associated with the source object through an association in which the returned object plays the specified role. The name of the property in the association class that refers to the returned object must match the value of this parameter. The default value is <code class="literal">None</code>.
							</li></ul></div><p>
						The remaining parameters refer to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal option">IncludeQualifiers</code> — A boolean indicating whether all qualifiers of each object (including qualifiers on the object and on any returned properties) should be included as QUALIFIER elements in the response. The default value is <code class="literal">False</code>.
							</li><li class="listitem">
								<code class="literal option">IncludeClassOrigin</code> — A boolean indicating whether the CLASSORIGIN attribute should be present on all appropriate elements in each returned object. The default value is <code class="literal">False</code>.
							</li><li class="listitem">
								<code class="literal option">PropertyList</code> — The members of this list define one or more property names. Returned objects will not include elements for any properties missing from this list. If <code class="literal option">PropertyList</code> is an empty list, no properties are included in returned objects. If it is <code class="literal">None</code>, no additional filtering is defined. The default value is <code class="literal">None</code>.
							</li></ul></div><div class="example" id="exam-OpenLMI-lmishell-Associated_Objects-Instances"><p class="title"><strong>Example&nbsp;22.33.&nbsp;Accessing Associated Instances</strong></p><div class="example-contents"><p>
							The <code class="literal">LMI_StorageExtent</code> class represents block devices available in the system. To use the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a>, create an instance of the <code class="literal">LMI_StorageExtent</code> class for the block device named <code class="literal">/dev/vda</code>, and assign it to a variable named <code class="literal">vda</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; vda = ns.LMI_StorageExtent.first_instance({
...   "DeviceID" : "/dev/vda"})
&gt;</pre><p>
							To get a list of all disk partitions on this block device and assign it to a variable named <code class="literal">vda_partitions</code>, use the <code class="literal">associators()</code> method as follows:
						</p><pre class="literallayout">&gt; vda_partitions = vda.associators(ResultClass="LMI_DiskPartition")
&gt;</pre></div></div><h5 id="accessing_associated_instance_names">Accessing Associated Instance Names</h5><p>
						To get a list of all associated instance names of a particular instance object, use the <code class="literal">associator_names()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">associator_names</code>(
  AssocClass=<span class="emphasis"><em>class_name</em></span>,
  ResultClass=<span class="emphasis"><em>class_name</em></span>,
  Role=<span class="emphasis"><em>role</em></span>,
  ResultRole=<span class="emphasis"><em>role</em></span>)</pre><p>
						To access the first associated instance name of a particular instance object, use the <code class="literal">first_associator_name()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">first_associator_name</code>(
  AssocClass=<span class="emphasis"><em>class_object</em></span>,
  ResultClass=<span class="emphasis"><em>class_object</em></span>,
  Role=<span class="emphasis"><em>role</em></span>,
  ResultRole=<span class="emphasis"><em>role</em></span>)</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. You can filter the results by specifying the following parameters:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">AssocClass</code> — Each returned name identifies an object that must be associated with the source object through an instance of this class or one of its subclasses. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal">ResultClass</code> — Each returned name identifies an object that must be either an instance of this class or one of its subclasses, or it must be this class or one of its subclasses. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal">Role</code> — Each returned name identifies an object that must be associated with the source object through an association in which the source object plays the specified role. The name of the property in the association class that refers to the source object must match the value of this parameter. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal">ResultRole</code> — Each returned name identifies an object that must be associated with the source object through an association in which the returned named object plays the specified role. The name of the property in the association class that refers to the returned object must match the value of this parameter. The default value is <code class="literal">None</code>.
							</li></ul></div><div class="example" id="exam-OpenLMI-lmishell-Associated_Objects-Instance_Names"><p class="title"><strong>Example&nbsp;22.34.&nbsp;Accessing Associated Instance Names</strong></p><div class="example-contents"><p>
							To use the <code class="literal">vda</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Associated_Objects-Instances" title="Example 22.33. Accessing Associated Instances">Example&nbsp;22.33, “Accessing Associated Instances”</a>, get a list of its associated instance names, and assign it to a variable named <code class="literal">vda_partitions</code>, type:
						</p><pre class="literallayout">&gt; vda_partitions = vda.associator_names(ResultClass="LMI_DiskPartition")
&gt;</pre></div></div></section><section class="section" id="sect-OpenLMI-lmishell-Association_Objects"><div class="titlepage"><div><div><h3 class="title">22.4.8.&nbsp;Working with Association Objects</h3></div></div></div><p>
						The Common Information Model defines an association relationship between managed objects. Association objects define the relationship between two other objects.
					</p><h5 id="accessing_association_instances">Accessing Association Instances</h5><p>
						To get a list of association objects that refer to a particular target object, use the <code class="literal">references()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">references</code>(
  ResultClass=<span class="emphasis"><em>class_name</em></span>,
  Role=<span class="emphasis"><em>role</em></span>,
  IncludeQualifiers=<span class="emphasis"><em>include_qualifiers</em></span>,
  IncludeClassOrigin=<span class="emphasis"><em>include_class_origin</em></span>,
  PropertyList=<span class="emphasis"><em>property_list</em></span>)</pre><p>
						To access the first association object that refers to a particular target object, use the <code class="literal">first_reference()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">first_reference</code>(
...   ResultClass=<span class="emphasis"><em>class_name</em></span>,
...   Role=<span class="emphasis"><em>role</em></span>,
...   IncludeQualifiers=<span class="emphasis"><em>include_qualifiers</em></span>,
...   IncludeClassOrigin=<span class="emphasis"><em>include_class_origin</em></span>,
...   PropertyList=<span class="emphasis"><em>property_list</em></span>)
&gt;</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. You can filter the results by specifying the following parameters:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">ResultClass</code> — Each returned object must be either an instance of this class or one of its subclasses, or it must be this class or one of its subclasses. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal">Role</code> — Each returned object must refer to the target object through a property with a name that matches the value of this parameter. The default value is <code class="literal">None</code>.
							</li></ul></div><p>
						The remaining parameters refer to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">IncludeQualifiers</code> — A boolean indicating whether each object (including qualifiers on the object and on any returned properties) should be included as a QUALIFIER element in the response. The default value is <code class="literal">False</code>.
							</li><li class="listitem">
								<code class="literal">IncludeClassOrigin</code> — A boolean indicating whether the CLASSORIGIN attribute should be present on all appropriate elements in each returned object. The default value is <code class="literal">False</code>.
							</li><li class="listitem">
								<code class="literal">PropertyList</code> — The members of this list define one or more property names. Returned objects will not include elements for any properties missing from this list. If <code class="literal option">PropertyList</code> is an empty list, no properties are included in returned objects. If it is <code class="literal">None</code>, no additional filtering is defined. The default value is <code class="literal">None</code>.
							</li></ul></div><div class="example" id="exam-OpenLMI-lmishell-Association_Objects-Instances"><p class="title"><strong>Example&nbsp;22.35.&nbsp;Accessing Association Instances</strong></p><div class="example-contents"><p>
							The <code class="literal">LMI_LANEndpoint</code> class represents a communication endpoint associated with a certain network interface device. To use the <code class="literal">ns</code> namespace object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Namespaces-Get" title="Example 22.5. Accessing Namespace Objects">Example&nbsp;22.5, “Accessing Namespace Objects”</a>, create an instance of the <code class="literal">LMI_LANEndpoint</code> class for the network interface device named eth0, and assign it to a variable named <code class="literal">lan_endpoint</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; lan_endpoint = ns.LMI_LANEndpoint.first_instance({
...   "Name" : "eth0"})
&gt;</pre><p>
							To access the first association object that refers to an <code class="literal">LMI_BindsToLANEndpoint</code> object and assign it to a variable named <code class="literal">bind</code>, type:
						</p><pre class="literallayout">&gt; bind = lan_endpoint.first_reference(
...   ResultClass="LMI_BindsToLANEndpoint")
&gt;</pre><p>
							You can now use the <code class="literal">Dependent</code> property to access the dependent <code class="literal">LMI_IPProtocolEndpoint</code> class that represents the IP address of the corresponding network interface device:
						</p><pre class="literallayout">&gt; ip = bind.Dependent.to_instance()
&gt; print ip.IPv4Address
192.168.122.1
&gt;</pre></div></div><h5 id="accessing_association_instance_names">Accessing Association Instance Names</h5><p>
						To get a list of association instance names of a particular instance object, use the <code class="literal">reference_names()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">reference_names</code>(
  ResultClass=<span class="emphasis"><em>class_name</em></span>,
  Role=<span class="emphasis"><em>role</em></span>)</pre><p>
						To access the first association instance name of a particular instance object, use the <code class="literal">first_reference_name()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>instance_object</em></span>.<code class="literal">first_reference_name</code>(
  ResultClass=<span class="emphasis"><em>class_name</em></span>,
  Role=<span class="emphasis"><em>role</em></span>)</pre><p>
						Replace <span class="emphasis"><em>instance_object</em></span> with the name of the instance object to inspect. You can filter the results by specifying the following parameters:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">ResultClass</code> — Each returned object name identifies either an instance of this class or one of its subclasses, or this class or one of its subclasses. The default value is <code class="literal">None</code>.
							</li><li class="listitem">
								<code class="literal">Role</code> — Each returned object identifies an object that refers to the target instance through a property with a name that matches the value of this parameter. The default value is <code class="literal">None</code>.
							</li></ul></div><div class="example" id="exam-OpenLMI-lmishell-Association_Objects-Instance_Names"><p class="title"><strong>Example&nbsp;22.36.&nbsp;Accessing Association Instance Names</strong></p><div class="example-contents"><p>
							To use the <code class="literal">lan_endpoint</code> instance object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Association_Objects-Instances" title="Example 22.35. Accessing Association Instances">Example&nbsp;22.35, “Accessing Association Instances”</a>, access the first association instance name that refers to an <code class="literal">LMI_BindsToLANEndpoint</code> object, and assign it to a variable named <code class="literal">bind</code>, type:
						</p><pre class="literallayout">&gt; bind = lan_endpoint.first_reference_name(
...   ResultClass="LMI_BindsToLANEndpoint")</pre><p>
							You can now use the <code class="literal">Dependent</code> property to access the dependent <code class="literal">LMI_IPProtocolEndpoint</code> class that represents the IP address of the corresponding network interface device:
						</p><pre class="literallayout">&gt; ip = bind.Dependent.to_instance()
&gt; print ip.IPv4Address
192.168.122.1
&gt;</pre></div></div></section><section class="section" id="sect-OpenLMI-lmishell-Indications"><div class="titlepage"><div><div><h3 class="title">22.4.9.&nbsp;Working with Indications</h3></div></div></div><p>
						Indication is a reaction to a specific event that occurs in response to a particular change in data. LMIShell can subscribe to an indication in order to receive such event responses.
					</p><h5 id="subscribing_to_indications">Subscribing to Indications</h5><p>
						To subscribe to an indication, use the <code class="literal">subscribe_indication()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>connection_object</em></span>.<code class="literal">subscribe_indication</code>(
  QueryLanguage=<code class="literal">"WQL"</code>,
  Query=<code class="literal">'SELECT * FROM CIM_InstModification'</code>,
  Name=<code class="literal">"cpu"</code>,
  CreationNamespace=<code class="literal">"root/interop"</code>,
  SubscriptionCreationClassName=<code class="literal">"CIM_IndicationSubscription"</code>,
  FilterCreationClassName=<code class="literal">"CIM_IndicationFilter"</code>,
  FilterSystemCreationClassName=<code class="literal">"CIM_ComputerSystem"</code>,
  FilterSourceNamespace=<code class="literal">"root/cimv2"</code>,
  HandlerCreationClassName=<code class="literal">"CIM_IndicationHandlerCIMXML"</code>,
  HandlerSystemCreationClassName=<code class="literal">"CIM_ComputerSystem"</code>,
  Destination=<code class="literal">"http://host_name:5988"</code>)</pre><p>
						Alternatively, you can use a shorter version of the method call as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>connection_object</em></span>.<code class="literal">subscribe_indication</code>(
  Query=<code class="literal">'SELECT * FROM CIM_InstModification'</code>,
  Name=<code class="literal">"cpu"</code>,
  Destination=<code class="literal">"http://host_name:5988"</code>)</pre><p>
						Replace <span class="emphasis"><em>connection_object</em></span> with a connection object and <span class="emphasis"><em>host_name</em></span> with the host name of the system you want to deliver the indications to.
					</p><p>
						By default, all subscriptions created by the LMIShell interpreter are automatically deleted when the interpreter terminates. To change this behavior, pass the <code class="literal option">Permanent=True</code> keyword parameter to the <code class="literal">subscribe_indication()</code> method call. This will prevent LMIShell from deleting the subscription.
					</p><div class="example" id="exam-OpenLMI-lmishell-Indications-Subscribe"><p class="title"><strong>Example&nbsp;22.37.&nbsp;Subscribing to Indications</strong></p><div class="example-contents"><p>
							To use the <code class="literal">c</code> connection object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Connect-Remote" title="Example 22.1. Connecting to a Remote CIMOM">Example&nbsp;22.1, “Connecting to a Remote CIMOM”</a> and subscribe to an indication named <code class="literal">cpu</code>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; c.subscribe_indication(
...   QueryLanguage="WQL",
...   Query='SELECT * FROM CIM_InstModification',
...   Name="cpu",
...   CreationNamespace="root/interop",
...   SubscriptionCreationClassName="CIM_IndicationSubscription",
...   FilterCreationClassName="CIM_IndicationFilter",
...   FilterSystemCreationClassName="CIM_ComputerSystem",
...   FilterSourceNamespace="root/cimv2",
...   HandlerCreationClassName="CIM_IndicationHandlerCIMXML",
...   HandlerSystemCreationClassName="CIM_ComputerSystem",
...   Destination="http://server.example.com:5988")
LMIReturnValue(rval=True, rparams=NocaseDict({}), errorstr='')
&gt;</pre></div></div><h5 id="listing_subscribed_indications">Listing Subscribed Indications</h5><p>
						To list all the subscribed indications, use the <code class="literal">print_subscribed_indications()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>connection_object</em></span>.<code class="literal">print_subscribed_indications</code>()</pre><p>
						Replace <span class="emphasis"><em>connection_object</em></span> with the name of the connection object to inspect. This method prints subscribed indications to standard output.
					</p><p>
						To get a list of subscribed indications, use the <code class="literal">subscribed_indications()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>connection_object</em></span>.<code class="literal">subscribed_indications</code>()</pre><p>
						This method returns a list of strings.
					</p><div class="example" id="exam-OpenLMI-lmishell-Indications-List"><p class="title"><strong>Example&nbsp;22.38.&nbsp;Listing Subscribed Indications</strong></p><div class="example-contents"><p>
							To inspect the <code class="literal">c</code> connection object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Connect-Remote" title="Example 22.1. Connecting to a Remote CIMOM">Example&nbsp;22.1, “Connecting to a Remote CIMOM”</a> and list all subscribed indications, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; c.print_subscribed_indications()
&gt;</pre><p>
							To assign a list of these indications to a variable named <code class="literal">indications</code>, type:
						</p><pre class="literallayout">&gt; indications = c.subscribed_indications()
&gt;</pre></div></div><h5 id="unsubscribing_from_indications">Unsubscribing from Indications</h5><p>
						By default, all subscriptions created by the LMIShell interpreter are automatically deleted when the interpreter terminates. To delete an individual subscription sooner, use the <code class="literal">unsubscribe_indication()</code> method as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>connection_object</em></span>.<code class="literal">unsubscribe_indication</code>(<span class="emphasis"><em>indication_name</em></span>)</pre><p>
						Replace <span class="emphasis"><em>connection_object</em></span> with the name of the connection object and <span class="emphasis"><em>indication_name</em></span> with the name of the indication to delete.
					</p><p>
						To delete all subscriptions, use the <code class="literal">unsubscribe_all_indications()</code> method:
					</p><pre class="literallayout"><span class="emphasis"><em>connection_object</em></span>.<code class="literal">unsubscribe_all_indications</code>()</pre><div class="example" id="exam-OpenLMI-lmishell-Indications-Unsubscribe"><p class="title"><strong>Example&nbsp;22.39.&nbsp;Unsubscribing from Indications</strong></p><div class="example-contents"><p>
							To use the <code class="literal">c</code> connection object created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Connect-Remote" title="Example 22.1. Connecting to a Remote CIMOM">Example&nbsp;22.1, “Connecting to a Remote CIMOM”</a> and unsubscribe from the indication created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Indications-Subscribe" title="Example 22.37. Subscribing to Indications">Example&nbsp;22.37, “Subscribing to Indications”</a>, type the following at the interactive prompt:
						</p><pre class="literallayout">&gt; c.unsubscribe_indication('cpu')
LMIReturnValue(rval=True, rparams=NocaseDict({}), errorstr='')
&gt;</pre></div></div><h5 id="implementing_an_indication_handler">Implementing an Indication Handler</h5><p>
						The <code class="literal">subscribe_indication()</code> method allows you to specify the host name of the system you want to deliver the indications to. The following example shows how to implement an indication handler:
					</p><pre class="literallayout">&gt; def handler(ind, arg1, arg2, <span class="strong strong"><strong>kwargs): ... exported_objects = ind.exported_objects() ... do_something_with(exported_objects) &gt; listener = LmiIndicationListener("0.0.0.0", listening_port) &gt; listener.add_handler("indication-name-XXXXXXXX", handler, arg1, arg2, </strong></span>kwargs)
&gt; listener.start()
&gt;</pre><p>
						The first argument of the handler is an <code class="literal">LmiIndication</code> object, which contains a list of methods and objects exported by the indication. Other parameters are user specific: those arguments need to be specified when adding a handler to the listener.
					</p><p>
						In the example above, the <code class="literal">add_handler()</code> method call uses a special string with eight "X" characters. These characters are replaced with a random string that is generated by listeners in order to avoid a possible handler name collision. To use the random string, start the indication listener first and then subscribe to an indication so that the <code class="literal option">Destination</code> property of the handler object contains the following value: <code class="literal"><span class="emphasis"><em>schema</em></span>://<span class="emphasis"><em>host_name</em></span>/<span class="emphasis"><em>random_string</em></span></code>.
					</p><div class="example" id="exam-OpenLMI-lmishell-Indications-Handle"><p class="title"><strong>Example&nbsp;22.40.&nbsp;Implementing an Indication Handler</strong></p><div class="example-contents"><p>
							The following script illustrates how to write a handler that monitors a managed system located at <code class="literal">192.168.122.1</code> and calls the <code class="literal">indication_callback()</code> function whenever a new user account is created:
						</p><pre class="literallayout">#!/usr/bin/lmishell

import sys
from time import sleep
from lmi.shell.LMIUtil import LMIPassByRef
from lmi.shell.LMIIndicationListener import LMIIndicationListener

# These are passed by reference to indication_callback
var1 = LMIPassByRef("some_value")
var2 = LMIPassByRef("some_other_value")

def indication_callback(ind, var1, var2):
  # Do something with ind, var1 and var2
  print ind.exported_objects()
  print var1.value
  print var2.value

c = connect("hostname", "username", "password")

listener = LMIIndicationListener("0.0.0.0", 65500)
unique_name = listener.add_handler(
  "demo-XXXXXXXX",   # Creates a unique name for me
  indication_callback, # Callback to be called
  var1,        # Variable passed by ref
  var2         # Variable passed by ref
)

listener.start()

print c.subscribe_indication(
  Name=unique_name,
  Query="SELECT * FROM LMI_AccountInstanceCreationIndication WHERE SOURCEINSTANCE ISA LMI_Account",
  Destination="192.168.122.1:65500"
)

try:
  while True:
    sleep(60)
except KeyboardInterrupt:
  sys.exit(0)</pre></div></div></section><section class="section" id="sect-OpenLMI-lmishell-Examples"><div class="titlepage"><div><div><h3 class="title">22.4.10.&nbsp;Example Usage</h3></div></div></div><p>
						This section provides a number of examples for various CIM providers distributed with the OpenLMI packages. All examples in this section use the following two variable definitions:
					</p><pre class="literallayout">c = connect("host_name", "user_name", "password")
ns = c.root.cimv2</pre><p>
						Replace <span class="emphasis"><em>host_name</em></span> with the host name of the managed system, <span class="emphasis"><em>user_name</em></span> with the name of user that is allowed to connect to OpenPegasus CIMOM running on that system, and <span class="emphasis"><em>password</em></span> with the user’s password.
					</p><h5 id="brid-OpenLMI-lmishell-Examples-Service">Using the OpenLMI Service Provider</h5><p>
						The <span class="strong strong"><strong><span class="package package">openlmi-service</span></strong></span> package installs a CIM provider for managing system services. The examples below illustrate how to use this CIM provider to list available system services and how to start, stop, enable, and disable them.
					</p><div class="example" id="exam-OpenLMI-lmishell-Examples-Service-List"><p class="title"><strong>Example&nbsp;22.41.&nbsp;Listing Available Services</strong></p><div class="example-contents"><p>
							To list all available services on the managed machine along with information regarding whether the service has been started (<code class="literal">TRUE</code>) or stopped (<code class="literal">FALSE</code>) and the status string, use the following code snippet:
						</p><pre class="literallayout">for service in ns.LMI_Service.instances():
  print "%s:\t%s" % (service.Name, service.Status)</pre><p>
							To list only the services that are enabled by default, use this code snippet:
						</p><pre class="literallayout">cls = ns.LMI_Service
for service in cls.instances():
  if service.EnabledDefault == cls.EnabledDefaultValues.Enabled:
    print service.Name</pre><p>
							Note that the value of the <code class="literal">EnabledDefault</code> property is equal to <code class="literal">2</code> for enabled services and <code class="literal">3</code> for disabled services.
						</p><p>
							To display information about the <code class="literal">cups</code> service, use the following:
						</p><pre class="literallayout">cups = ns.LMI_Service.first_instance({"Name": "cups.service"})
cups.doc()</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Service-Start"><p class="title"><strong>Example&nbsp;22.42.&nbsp;Starting and Stopping Services</strong></p><div class="example-contents"><p>
							To start and stop the <code class="literal">cups</code> service and to see its current status, use the following code snippet:
						</p><pre class="literallayout">cups = ns.LMI_Service.first_instance({"Name": "cups.service"})
cups.StartService()
print cups.Status
cups.StopService()
print cups.Status</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Service-Enable"><p class="title"><strong>Example&nbsp;22.43.&nbsp;Enabling and Disabling Services</strong></p><div class="example-contents"><p>
							To enable and disable the <code class="literal">cups</code> service and to display its <code class="literal">EnabledDefault</code> property, use the following code snippet:
						</p><pre class="literallayout">cups = ns.LMI_Service.first_instance({"Name": "cups.service"})
cups.TurnServiceOff()
print cups.EnabledDefault
cups.TurnServiceOn()
print cups.EnabledDefault</pre></div></div><h5 id="brid-OpenLMI-lmishell-Examples-Networking">Using the OpenLMI Networking Provider</h5><p>
						The <span class="strong strong"><strong><span class="package package">openlmi-networking</span></strong></span> package installs a CIM provider for networking. The examples below illustrate how to use this CIM provider to list IP addresses associated with a certain port number, create a new connection, configure a static IP address, and activate a connection.
					</p><div class="example" id="exam-OpenLMI-lmishell-Examples-Networking-List"><p class="title"><strong>Example&nbsp;22.44.&nbsp;Listing IP Addresses Associated with a Given Port Number</strong></p><div class="example-contents"><p>
							To list all IP addresses associated with the eth0 network interface, use the following code snippet:
						</p><pre class="literallayout">device = ns.LMI_IPNetworkConnection.first_instance({'ElementName': 'eth0'})
for endpoint in device.associators(AssocClass="LMI_NetworkSAPSAPDependency", ResultClass="LMI_IPProtocolEndpoint"):
  if endpoint.ProtocolIFType == ns.LMI_IPProtocolEndpoint.ProtocolIFTypeValues.IPv4:
    print "IPv4: %s/%s" % (endpoint.IPv4Address, endpoint.SubnetMask)
  elif endpoint.ProtocolIFType == ns.LMI_IPProtocolEndpoint.ProtocolIFTypeValues.IPv6:
    print "IPv6: %s/%d" % (endpoint.IPv6Address, endpoint.IPv6SubnetPrefixLength)</pre><p>
							This code snippet uses the <code class="literal">LMI_IPProtocolEndpoint</code> class associated with a given <code class="literal">LMI_IPNetworkConnection</code> class.
						</p><p>
							To display the default gateway, use this code snippet:
						</p><pre class="literallayout">for rsap in device.associators(AssocClass="LMI_NetworkRemoteAccessAvailableToElement", ResultClass="LMI_NetworkRemoteServiceAccessPoint"):
  if rsap.AccessContext == ns.LMI_NetworkRemoteServiceAccessPoint.AccessContextValues.DefaultGateway:
    print "Default Gateway: %s" % rsap.AccessInfo</pre><p>
							The default gateway is represented by an <code class="literal">LMI_NetworkRemoteServiceAccessPoint</code> instance with the <code class="literal">AccessContext</code> property equal to <code class="literal">DefaultGateway</code>.
						</p><p>
							To get a list of DNS servers, the object model needs to be traversed as follows:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Get the <code class="literal">LMI_IPProtocolEndpoint</code> instances associated with a given <code class="literal">LMI_IPNetworkConnection</code> using <code class="literal">LMI_NetworkSAPSAPDependency</code>.
								</li><li class="listitem">
									Use the same association for the <code class="literal">LMI_DNSProtocolEndpoint</code> instances.
								</li></ol></div><p>
							The <code class="literal">LMI_NetworkRemoteServiceAccessPoint</code> instances with the <code class="literal">AccessContext</code> property equal to the DNS Server associated through <code class="literal">LMI_NetworkRemoteAccessAvailableToElement</code> have the DNS server address in the <code class="literal">AccessInfo</code> property.
						</p><p>
							There can be more possible paths to get to the <code class="literal">RemoteServiceAccessPath</code> and entries can be duplicated. The following code snippet uses the <code class="literal">set()</code> function to remove duplicate entries from the list of DNS servers:
						</p><pre class="literallayout">dnsservers = set()
for ipendpoint in device.associators(AssocClass="LMI_NetworkSAPSAPDependency", ResultClass="LMI_IPProtocolEndpoint"):
  for dnsedpoint in ipendpoint.associators(AssocClass="LMI_NetworkSAPSAPDependency", ResultClass="LMI_DNSProtocolEndpoint"):
    for rsap in dnsedpoint.associators(AssocClass="LMI_NetworkRemoteAccessAvailableToElement", ResultClass="LMI_NetworkRemoteServiceAccessPoint"):
      if rsap.AccessContext == ns.LMI_NetworkRemoteServiceAccessPoint.AccessContextValues.DNSServer:
        dnsservers.add(rsap.AccessInfo)
print "DNS:", ", ".join(dnsservers)</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Networking-Create"><p class="title"><strong>Example&nbsp;22.45.&nbsp;Creating a New Connection and Configuring a Static IP Address</strong></p><div class="example-contents"><p>
							To create a new setting with a static IPv4 and stateless IPv6 configuration for network interface eth0, use the following code snippet:
						</p><pre class="literallayout">capability = ns.LMI_IPNetworkConnectionCapabilities.first_instance({ 'ElementName': 'eth0' })
result = capability.LMI_CreateIPSetting(Caption='eth0 Static',
    IPv4Type=capability.LMI_CreateIPSetting.IPv4TypeValues.Static,
    IPv6Type=capability.LMI_CreateIPSetting.IPv6TypeValues.Stateless)
setting = result.rparams["SettingData"].to_instance()
for settingData in setting.associators(AssocClass="LMI_OrderedIPAssignmentComponent"):
  if setting.ProtocolIFType == ns.LMI_IPAssignmentSettingData.ProtocolIFTypeValues.IPv4:
    # Set static IPv4 address
    settingData.IPAddresses = ["192.168.1.100"]
    settingData.SubnetMasks = ["255.255.0.0"]
    settingData.GatewayAddresses = ["192.168.1.1"]
    settingData.push()</pre><p>
							This code snippet creates a new setting by calling the <code class="literal">LMI_CreateIPSetting()</code> method on the instance of <code class="literal">LMI_IPNetworkConnectionCapabilities</code>, which is associated with <code class="literal">LMI_IPNetworkConnection</code> through <code class="literal">LMI_IPNetworkConnectionElementCapabilities</code>. It also uses the <code class="literal">push()</code> method to modify the setting.
						</p></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Networking-Activate"><p class="title"><strong>Example&nbsp;22.46.&nbsp;Activating a Connection</strong></p><div class="example-contents"><p>
							To apply a setting to the network interface, call the <code class="literal">ApplySettingToIPNetworkConnection()</code> method of the <code class="literal">LMI_IPConfigurationService</code> class. This method is asynchronous and returns a job. The following code snippets illustrates how to call this method synchronously:
						</p><pre class="literallayout">setting = ns.LMI_IPAssignmentSettingData.first_instance({ "Caption": "eth0 Static" })
port = ns.LMI_IPNetworkConnection.first_instance({ 'ElementName': 'ens8' })
service = ns.LMI_IPConfigurationService.first_instance()
service.SyncApplySettingToIPNetworkConnection(SettingData=setting, IPNetworkConnection=port, Mode=32768)</pre><p>
							The <code class="literal">Mode</code> parameter affects how the setting is applied. The most commonly used values of this parameter are as follows:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">1</code> — apply the setting now and make it auto-activated.
								</li><li class="listitem">
									<code class="literal">2</code> — make the setting auto-activated and do not apply it now.
								</li><li class="listitem">
									<code class="literal">4</code> — disconnect and disable auto-activation.
								</li><li class="listitem">
									<code class="literal">5</code> — do not change the setting state, only disable auto-activation.
								</li><li class="listitem">
									<code class="literal">32768</code> — apply the setting.
								</li><li class="listitem">
									<code class="literal">32769</code> — disconnect.
								</li></ul></div></div></div><h5 id="brid-OpenLMI-lmishell-Examples-Storage">Using the OpenLMI Storage Provider</h5><p>
						The <span class="strong strong"><strong><span class="package package">openlmi-storage</span></strong></span> package installs a CIM provider for storage management. The examples below illustrate how to use this CIM provider to create a volume group, create a logical volume, build a file system, mount a file system, and list block devices known to the system.
					</p><p>
						In addition to the <code class="literal">c</code> and <code class="literal">ns</code> variables, these examples use the following variable definitions:
					</p><pre class="literallayout">MEGABYTE = 1024*1024
storage_service = ns.LMI_StorageConfigurationService.first_instance()
filesystem_service = ns.LMI_FileSystemConfigurationService.first_instance()</pre><div class="example" id="exam-OpenLMI-lmishell-Examples-Storage-Volume_Group"><p class="title"><strong>Example&nbsp;22.47.&nbsp;Creating a Volume Group</strong></p><div class="example-contents"><p>
							To create a new volume group located in <code class="literal">/dev/myGroup/</code> that has three members and the default extent size of 4 MB, use the following code snippet:
						</p><pre class="literallayout"># Find the devices to add to the volume group
# (filtering the CIM_StorageExtent.instances()
# call would be faster, but this is easier to read):
sda1 = ns.CIM_StorageExtent.first_instance({"Name": "/dev/sda1"})
sdb1 = ns.CIM_StorageExtent.first_instance({"Name": "/dev/sdb1"})
sdc1 = ns.CIM_StorageExtent.first_instance({"Name": "/dev/sdc1"})

# Create a new volume group:
(ret, outparams, err) = storage_service.SyncCreateOrModifyVG(
    ElementName="myGroup",
    InExtents=[sda1, sdb1, sdc1])
vg = outparams['Pool'].to_instance()
print "VG", vg.PoolID, \
    "with extent size", vg.ExtentSize, \
    "and", vg.RemainingExtents, "free extents created."</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Storage-Logical_Volume"><p class="title"><strong>Example&nbsp;22.48.&nbsp;Creating a Logical Volume</strong></p><div class="example-contents"><p>
							To create two logical volumes with the size of 100 MB, use this code snippet:
						</p><pre class="literallayout"># Find the volume group:
vg = ns.LMI_VGStoragePool.first_instance({"Name": "/dev/mapper/myGroup"})

# Create the first logical volume:
(ret, outparams, err) = storage_service.SyncCreateOrModifyLV(
    ElementName="Vol1",
    InPool=vg,
    Size=100 * MEGABYTE)
lv = outparams['TheElement'].to_instance()
print "LV", lv.DeviceID, \
    "with", lv.BlockSize * lv.NumberOfBlocks,\
    "bytes created."

# Create the second logical volume:
(ret, outparams, err) = storage_service.SyncCreateOrModifyLV(
    ElementName="Vol2",
    InPool=vg,
    Size=100 * MEGABYTE)
lv = outparams['TheElement'].to_instance()
print "LV", lv.DeviceID, \
    "with", lv.BlockSize * lv.NumberOfBlocks, \
    "bytes created."</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Storage-File_System"><p class="title"><strong>Example&nbsp;22.49.&nbsp;Creating a File System</strong></p><div class="example-contents"><p>
							To create an <code class="literal">ext3</code> file system on logical volume <code class="literal">lv</code> from <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Examples-Storage-Logical_Volume" title="Example 22.48. Creating a Logical Volume">Example&nbsp;22.48, “Creating a Logical Volume”</a>, use the following code snippet:
						</p><pre class="literallayout">(ret, outparams, err) = filesystem_service.SyncLMI_CreateFileSystem(
    FileSystemType=filesystem_service.LMI_CreateFileSystem.FileSystemTypeValues.EXT3,
    InExtents=[lv])</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Storage-Mount"><p class="title"><strong>Example&nbsp;22.50.&nbsp;Mounting a File System</strong></p><div class="example-contents"><p>
							To mount the file system created in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#exam-OpenLMI-lmishell-Examples-Storage-File_System" title="Example 22.49. Creating a File System">Example&nbsp;22.49, “Creating a File System”</a>, use the following code snippet:
						</p><pre class="literallayout"># Find the file system on the logical volume:
fs = lv.first_associator(ResultClass="LMI_LocalFileSystem")

mount_service = ns.LMI_MountConfigurationService.first_instance()
(rc, out, err) = mount_service.SyncCreateMount(
   FileSystemType='ext3',
   Mode=32768, # just mount
   FileSystem=fs,
   MountPoint='/mnt/test',
   FileSystemSpec=lv.Name)</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Storage-List"><p class="title"><strong>Example&nbsp;22.51.&nbsp;Listing Block Devices</strong></p><div class="example-contents"><p>
							To list all block devices known to the system, use the following code snippet:
						</p><pre class="literallayout">devices = ns.CIM_StorageExtent.instances()
for device in devices:
  if lmi_isinstance(device, ns.CIM_Memory):
    # Memory and CPU caches are StorageExtents too, do not print them
    continue
  print device.classname,
  print device.DeviceID,
  print device.Name,
  print device.BlockSize*device.NumberOfBlocks</pre></div></div><h5 id="brid-OpenLMI-lmishell-Examples-Hardware">Using the OpenLMI Hardware Provider</h5><p>
						The <span class="strong strong"><strong><span class="package package">openlmi-hardware</span></strong></span> package installs a CIM provider for monitoring hardware. The examples below illustrate how to use this CIM provider to retrieve information about CPU, memory modules, PCI devices, and the manufacturer and model of the machine.
					</p><div class="example" id="exam-OpenLMI-lmishell-Examples-Hardware-CPU_Information"><p class="title"><strong>Example&nbsp;22.52.&nbsp;Viewing CPU Information</strong></p><div class="example-contents"><p>
							To display basic CPU information such as the CPU name, the number of processor cores, and the number of hardware threads, use the following code snippet:
						</p><pre class="literallayout">cpu = ns.LMI_Processor.first_instance()
cpu_cap = cpu.associators(ResultClass="LMI_ProcessorCapabilities")[0]
print cpu.Name
print cpu_cap.NumberOfProcessorCores
print cpu_cap.NumberOfHardwareThreads</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Hardware-Memory_Information"><p class="title"><strong>Example&nbsp;22.53.&nbsp;Viewing Memory Information</strong></p><div class="example-contents"><p>
							To display basic information about memory modules such as their individual sizes, use the following code snippet:
						</p><pre class="literallayout">mem = ns.LMI_Memory.first_instance()
for i in mem.associators(ResultClass="LMI_PhysicalMemory"):
  print i.Name</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Hardware-Chassis_Information"><p class="title"><strong>Example&nbsp;22.54.&nbsp;Viewing Chassis Information</strong></p><div class="example-contents"><p>
							To display basic information about the machine such as its manufacturer or its model, use the following code snippet:
						</p><pre class="literallayout">chassis = ns.LMI_Chassis.first_instance()
print chassis.Manufacturer
print chassis.Model</pre></div></div><div class="example" id="exam-OpenLMI-lmishell-Examples-Hardware-PCI_Devices"><p class="title"><strong>Example&nbsp;22.55.&nbsp;Listing PCI Devices</strong></p><div class="example-contents"><p>
							To list all PCI devices known to the system, use the following code snippet:
						</p><pre class="literallayout">for pci in ns.LMI_PCIDevice.instances():
  print pci.Name</pre></div></div></section></section><section class="section" id="sect-OpenLMI-Scripts"><div class="titlepage"><div><div><h2 class="title">22.5.&nbsp;Using OpenLMI Scripts</h2></div></div></div><p>
					The LMIShell interpreter is built on top of Python modules that can be used to develop custom management tools. The OpenLMI Scripts project provides a number of Python libraries for interfacing with OpenLMI providers. In addition, it is distributed with <code class="literal command">lmi</code>, an extensible utility that can be used to interact with these libraries from the command line.
				</p><p>
					To install OpenLMI Scripts on your system, type the following at a shell prompt:
				</p><pre class="literallayout">easy_install --user openlmi-scripts</pre><p>
					This command installs the Python modules and the <code class="literal command">lmi</code> utility in the <code class="literal">~/.local/</code> directory. To extend the functionality of the <code class="literal command">lmi</code> utility, install additional OpenLMI modules by using the following command:
				</p><pre class="literallayout">easy_install --user package_name</pre><p>
					For a complete list of available modules, see the <a class="link" href="https://pypi.python.org/pypi?%3Aaction=search&amp;term=openlmi-scripts&amp;submit=search">Python website</a>. For more information about OpenLMI Scripts, see the <a class="link" href="http://pythonhosted.org/openlmi-tools/">official OpenLMI Scripts documentation</a>.
				</p></section><section class="section" id="sect-OpenLMI-Resources"><div class="titlepage"><div><div><h2 class="title">22.6.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information about OpenLMI and system management in general, see the resources listed below.
				</p><h4 id="brid-OpenLMI-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>lmishell</strong></span>(1) — The manual page for the <code class="literal command">lmishell</code> client and interpreter provides detailed information about its execution and usage.
						</li></ul></div><h4 id="brid-OpenLMI-Resources-Online">Online Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">Red Hat Enterprise Linux 7 Networking Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Networking Guide</span></em></span> for Red Hat Enterprise Linux 7 documents relevant information regarding the configuration and administration of network interfaces and network services on the system.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Storage_Administration_Guide/">Red Hat Enterprise Linux 7 Storage Administration Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Storage Administration Guide</span></em></span> for Red Hat Enterprise Linux 7 provides instructions on how to manage storage devices and file systems on the system.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Power_Management_Guide/">Red Hat Enterprise Linux 7 Power Management Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Power Management Guide</span></em></span> for Red Hat Enterprise Linux 7 explains how to manage power consumption of the system effectively. It discusses different techniques that lower power consumption for both servers and laptops, and explains how each technique affects the overall performance of the system.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Linux_Domain_Identity_Authentication_and_Policy_Guide/">Red Hat Enterprise Linux 7 Linux Domain Identity, Authentication, and Policy Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Linux Domain Identity, Authentication, and Policy Guide</span></em></span> for Red Hat Enterprise Linux 7 covers all aspects of installing, configuring, and managing IPA domains, including both servers and clients. The guide is intended for IT and systems administrators.
						</li><li class="listitem">
							<a class="link" href="http://www.freeipa.org/page/Documentation">FreeIPA Documentation</a> — The <span class="emphasis"><em><span class="citetitle citetitle">FreeIPA Documentation</span></em></span> serves as the primary user documentation for using the FreeIPA Identity Management project.
						</li><li class="listitem">
							<a class="link" href="http://www.openssl.org/">OpenSSL Home Page</a> — The <span class="emphasis"><em><span class="citetitle citetitle">OpenSSL</span></em></span> home page provides an overview of the OpenSSL project.
						</li><li class="listitem">
							<a class="link" href="https://developer.mozilla.org/en-US/docs/NSS">Mozilla NSS Documentation</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Mozilla NSS Documentation</span></em></span> serves as the primary user documentation for using the Mozilla NSS project.
						</li></ul></div><h4 id="brid-OpenLMI-Resources-Also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Managing_Users_and_Groups" title="Chapter 4. Managing Users and Groups">Chapter&nbsp;4, <em>Managing Users and Groups</em></a> documents how to manage system users and groups in the graphical user interface and on the command line.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-yum" title="Chapter 9. Yum">Chapter&nbsp;9, <em>Yum</em></a> describes how to use the <span class="strong strong"><strong><span class="application application">Yum</span></strong></span> package manager to search, install, update, and uninstall packages on the command line.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a> provides an introduction to <code class="literal">systemd</code> and documents how to use the <code class="literal command">systemctl</code> command to manage system services, configure systemd targets, and execute power management commands.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-OpenSSH" title="Chapter 12. OpenSSH">Chapter&nbsp;12, <em>OpenSSH</em></a> describes how to configure an SSH server and how to use the <code class="literal command">ssh</code>, <code class="literal command">scp</code>, and <code class="literal command">sftp</code> client utilities to access it.
						</li></ul></div></section></section><section class="chapter" id="ch-Viewing_and_Managing_Log_Files"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;23.&nbsp;Viewing and Managing Log Files</h2></div></div></div><p>
				<span class="emphasis"><em>Log files</em></span> are files that contain messages about the system, including the kernel, services, and applications running on it. There are different log files for different information. For example, there is a default system log file, a log file just for security messages, and a log file for cron tasks.
			</p><p>
				Log files can be very useful when trying to troubleshoot a problem with the system such as trying to load a kernel driver or when looking for unauthorized login attempts to the system. This chapter discusses where to find log files, how to view log files, and what to look for in log files.
			</p><p>
				Some log files are controlled by a daemon called <code class="literal">rsyslogd</code>. The <code class="literal">rsyslogd</code> daemon is an enhanced replacement for <span class="strong strong"><strong><span class="application application">sysklogd</span></strong></span>, and provides extended filtering, encryption protected relaying of messages, various configuration options, input and output modules, support for transportation via the <code class="literal">TCP</code> or <code class="literal">UDP</code> protocols. Note that <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> is compatible with <span class="strong strong"><strong><span class="application application">sysklogd</span></strong></span>.
			</p><p>
				Log files can also be managed by the <code class="literal">journald</code> daemon – a component of <code class="literal">systemd</code>. The <code class="literal">journald</code> daemon captures Syslog messages, kernel log messages, initial RAM disk and early boot messages as well as messages written to standard output and standard error output of all services, indexes them and makes this available to the user. The native journal file format, which is a structured and indexed binary file, improves searching and provides faster operation, and it also stores meta data information like time stamps or user IDs. Log files produced by <code class="literal">journald</code> are by default not persistent, log files are stored only in memory or a small ring-buffer in the <code class="literal">/run/log/journal/</code> directory. The amount of logged data depends on free memory, when you reach the capacity limit, the oldest entries are deleted. However, this setting can be altered – see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Enabling_Persistent_Storage" title="23.10.5. Enabling Persistent Storage">Section&nbsp;23.10.5, “Enabling Persistent Storage”</a>. For more information on Journal see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Using_the_Journal" title="23.10. Using the Journal">Section&nbsp;23.10, “Using the Journal”</a>.
			</p><p>
				By default, these two logging tools coexist on your system. The <code class="literal">journald</code> daemon is the primary tool for troubleshooting. It also provides additional data necessary for creating structured log messages. Data acquired by <code class="literal">journald</code> is forwarded into the <code class="literal">/run/systemd/journal/syslog</code> socket that may be used by <code class="literal">rsyslogd</code> to process the data further. However, <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> does the actual integration by default via the <code class="literal">imjournal</code> input module, thus avoiding the aforementioned socket. You can also transfer data in the opposite direction, from <code class="literal">rsyslogd</code> to <code class="literal">journald</code> with use of <code class="literal">omjournal</code> module. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-interaction_of_rsyslog_and_journal" title="23.7. Interaction of Rsyslog and Journal">Section&nbsp;23.7, “Interaction of Rsyslog and Journal”</a> for further information. The integration enables maintaining text-based logs in a consistent format to ensure compatibility with possible applications or configurations dependent on <code class="literal">rsyslogd</code>. Also, you can maintain rsyslog messages in a structured format (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-structured_logging_with_rsyslog" title="23.8. Structured Logging with Rsyslog">Section&nbsp;23.8, “Structured Logging with Rsyslog”</a>).
			</p><section class="section" id="s1-logfiles-locating"><div class="titlepage"><div><div><h2 class="title">23.1.&nbsp;Locating Log Files</h2></div></div></div><p>
					A list of log files maintained by <code class="literal">rsyslogd</code> can be found in the <code class="literal">/etc/rsyslog.conf</code> configuration file. Most log files are located in the <code class="literal">/var/log/</code> directory. Some applications such as <code class="literal command">httpd</code> and <code class="literal command">samba</code> have a directory within <code class="literal">/var/log/</code> for their log files.
				</p><p>
					You may notice multiple files in the <code class="literal">/var/log/</code> directory with numbers after them (for example, <code class="literal">cron-20100906</code>). These numbers represent a time stamp that has been added to a rotated log file. Log files are rotated so their file sizes do not become too large. The <code class="literal">logrotate</code> package contains a cron task that automatically rotates log files according to the <code class="literal">/etc/logrotate.conf</code> configuration file and the configuration files in the <code class="literal">/etc/logrotate.d/</code> directory.
				</p></section><section class="section" id="s1-basic_configuration_of_rsyslog"><div class="titlepage"><div><div><h2 class="title">23.2.&nbsp;Basic Configuration of Rsyslog</h2></div></div></div><p>
					The main configuration file for <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> is <code class="literal">/etc/rsyslog.conf</code>. Here, you can specify <span class="emphasis"><em>global directives</em></span>, <span class="emphasis"><em>modules</em></span>, and <span class="emphasis"><em>rules</em></span> that consist of <span class="emphasis"><em>filter</em></span> and <span class="emphasis"><em>action</em></span> parts. Also, you can add comments in the form of text following a hash sign (<code class="literal">#</code>).
				</p><section class="section" id="s2-Filters"><div class="titlepage"><div><div><h3 class="title">23.2.1.&nbsp;Filters</h3></div></div></div><p>
						A rule is specified by a <span class="emphasis"><em>filter</em></span> part, which selects a subset of syslog messages, and an <span class="emphasis"><em>action</em></span> part, which specifies what to do with the selected messages. To define a rule in your <code class="literal">/etc/rsyslog.conf</code> configuration file, define both, a filter and an action, on one line and separate them with one or more spaces or tabs.
					</p><p>
						<span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> offers various ways to filter syslog messages according to selected properties. The available filtering methods can be divided into <span class="emphasis"><em>Facility/Priority-based</em></span>, <span class="emphasis"><em>Property-based</em></span>, and <span class="emphasis"><em>Expression-based</em></span> filters.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Facility/Priority-based filters</span></dt><dd><p class="simpara">
									The most used and well-known way to filter syslog messages is to use the facility/priority-based filters which filter syslog messages based on two conditions: <span class="emphasis"><em>facility</em></span> and <span class="emphasis"><em>priority</em></span> separated by a dot. To create a selector, use the following syntax:
								</p><pre class="literallayout"><span class="emphasis"><em>FACILITY</em></span>.<span class="emphasis"><em>PRIORITY</em></span></pre><p class="simpara">
									where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="emphasis"><em>FACILITY</em></span> specifies the subsystem that produces a specific syslog message. For example, the <code class="literal command">mail</code> subsystem handles all mail-related syslog messages. <span class="emphasis"><em>FACILITY</em></span> can be represented by one of the following keywords (or by a numerical code): <code class="literal command">kern</code> (0), <code class="literal command">user</code> (1), <code class="literal command">mail</code> (2), <code class="literal command">daemon</code> (3), <code class="literal command">auth</code> (4), <code class="literal command">syslog</code> (5), <code class="literal command">lpr</code> (6), <code class="literal command">news</code> (7), <code class="literal command">cron</code> (8), <code class="literal command">authpriv</code> (9), <code class="literal command">ftp</code> (10), and <code class="literal command">local0</code> through <code class="literal command">local7</code> (16 - 23).
										</li><li class="listitem"><p class="simpara">
											<span class="emphasis"><em>PRIORITY</em></span> specifies a priority of a syslog message. <span class="emphasis"><em>PRIORITY</em></span> can be represented by one of the following keywords (or by a number): <code class="literal command">debug</code> (7), <code class="literal command">info</code> (6), <code class="literal command">notice</code> (5), <code class="literal command">warning</code> (4), <code class="literal command">err</code> (3), <code class="literal command">crit</code> (2), <code class="literal command">alert</code> (1), and <code class="literal command">emerg</code> (0).
										</p><p class="simpara">
											The aforementioned syntax selects syslog messages with the defined or <span class="emphasis"><em>higher</em></span> priority. By preceding any priority keyword with an equal sign (<code class="literal">=</code>), you specify that only syslog messages with the specified priority will be selected. All other priorities will be ignored. Conversely, preceding a priority keyword with an exclamation mark (<code class="literal">!</code>) selects all syslog messages except those with the defined priority.
										</p><p class="simpara">
											In addition to the keywords specified above, you may also use an asterisk (<code class="literal">*</code>) to define all facilities or priorities (depending on where you place the asterisk, before or after the comma). Specifying the priority keyword <code class="literal">none</code> serves for facilities with no given priorities. Both facility and priority conditions are case-insensitive.
										</p><p class="simpara">
											To define multiple facilities and priorities, separate them with a comma (<code class="literal">,</code>). To define multiple selectors on one line, separate them with a semi-colon (<code class="literal">;</code>). Note that each selector in the selector field is capable of overwriting the preceding ones, which can exclude some priorities from the pattern.
										</p><div class="example" id="ex-facility_priority-based_filters"><p class="title"><strong>Example&nbsp;23.1.&nbsp;Facility/Priority-based Filters</strong></p><div class="example-contents"><p>
												The following are a few examples of simple facility/priority-based filters that can be specified in <code class="literal">/etc/rsyslog.conf</code>. To select all kernel syslog messages with any priority, add the following text into the configuration file:
											</p><pre class="literallayout">kern.*</pre><p>
												To select all mail syslog messages with priority <code class="literal command">crit</code> and higher, use this form:
											</p><pre class="literallayout">mail.crit</pre><p>
												To select all cron syslog messages except those with the <code class="literal command">info</code> or <code class="literal command">debug</code> priority, set the configuration in the following form:
											</p><pre class="literallayout">cron.!info,!debug</pre></div></div></li></ul></div></dd><dt><span class="term">Property-based filters</span></dt><dd><p class="simpara">
									Property-based filters let you filter syslog messages by any property, such as <code class="literal">timegenerated</code> or <code class="literal">syslogtag</code>. For more information on properties, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-properties" title="Properties">the section called “Properties”</a>. You can compare each of the specified properties to a particular value using one of the compare-operations listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-compare-operations" title="Table 23.1. Property-based compare-operations">Table&nbsp;23.1, “Property-based compare-operations”</a>. Both property names and compare operations are case-sensitive.
								</p><p class="simpara">
									Property-based filter must start with a colon (<code class="literal">:</code>). To define the filter, use the following syntax:
								</p><pre class="literallayout">:<span class="emphasis"><em>PROPERTY</em></span>, [!]<span class="emphasis"><em>COMPARE_OPERATION</em></span>, "<span class="emphasis"><em>STRING</em></span>"</pre><p class="simpara">
									where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The <span class="emphasis"><em>PROPERTY</em></span> attribute specifies the desired property.
										</li><li class="listitem">
											The optional exclamation point (<code class="literal">!</code>) negates the output of the compare-operation. Other Boolean operators are currently not supported in property-based filters.
										</li><li class="listitem">
											The <span class="emphasis"><em>COMPARE_OPERATION</em></span> attribute specifies one of the compare-operations listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#table-compare-operations" title="Table 23.1. Property-based compare-operations">Table&nbsp;23.1, “Property-based compare-operations”</a>.
										</li><li class="listitem"><p class="simpara">
											The <span class="emphasis"><em>STRING</em></span> attribute specifies the value that the text provided by the property is compared to. This value must be enclosed in quotation marks. To escape certain character inside the string (for example a quotation mark (<code class="literal">"</code>)), use the backslash character (<code class="literal">\</code>).
										</p><div class="table" id="table-compare-operations"><p class="title"><strong>Table&nbsp;23.1.&nbsp;Property-based compare-operations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140569362034160" scope="col">Compare-operation</th><th style="text-align: left; vertical-align: top; " id="idm140569362033072" scope="col">Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140569362034160"> <p>
															<code class="literal">contains</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569362033072"> <p>
															Checks whether the provided string matches any part of the text provided by the property.
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569362034160"> <p>
															<code class="literal">isequal</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569362033072"> <p>
															Compares the provided string against all of the text provided by the property. These two values must be exactly equal to match.
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569362034160"> <p>
															<code class="literal">startswith</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569362033072"> <p>
															Checks whether the provided string is found exactly at the beginning of the text provided by the property.
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569362034160"> <p>
															<code class="literal">regex</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569362033072"> <p>
															Compares the provided POSIX BRE (Basic Regular Expression) against the text provided by the property.
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569362034160"> <p>
															<code class="literal">ereregex</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569362033072"> <p>
															Compares the provided POSIX ERE (Extended Regular Expression) regular expression against the text provided by the property.
														</p>
														 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140569362034160"> <p>
															<code class="literal">isempty</code>
														</p>
														 </td><td style="text-align: left; vertical-align: top; " headers="idm140569362033072"> <p>
															Checks if the property is empty. The value is discarded. This is especially useful when working with normalized data, where some fields may be populated based on normalization result.
														</p>
														 </td></tr></tbody></table></div></div><div class="example" id="ex-property-based_filters"><p class="title"><strong>Example&nbsp;23.2.&nbsp;Property-based Filters</strong></p><div class="example-contents"><p>
												The following are a few examples of property-based filters that can be specified in <code class="literal">/etc/rsyslog.conf</code>. To select syslog messages which contain the string <code class="literal">error</code> in their message text, use:
											</p><pre class="literallayout">:msg, contains, "error"</pre><p>
												The following filter selects syslog messages received from the host name <code class="literal">host1</code>:
											</p><pre class="literallayout">:hostname, isequal, "host1"</pre><p>
												To select syslog messages which do not contain any mention of the words <code class="literal">fatal</code> and <code class="literal">error</code> with any or no text between them (for example, <code class="literal">fatal lib error</code>), type:
											</p><pre class="literallayout">:msg, !regex, "fatal .* error"</pre></div></div></li></ul></div></dd><dt><span class="term">Expression-based filters</span></dt><dd><p class="simpara">
									Expression-based filters select syslog messages according to defined arithmetic, Boolean or string operations. Expression-based filters use <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>'s own scripting language called <span class="emphasis"><em>RainerScript</em></span> to build complex filters.
								</p><p class="simpara">
									The basic syntax of expression-based filter looks as follows:
								</p><pre class="literallayout">if <span class="emphasis"><em>EXPRESSION</em></span> then <span class="emphasis"><em>ACTION</em></span> else <span class="emphasis"><em>ACTION</em></span></pre><p class="simpara">
									where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											The <span class="emphasis"><em>EXPRESSION</em></span> attribute represents an expression to be evaluated, for example: <code class="literal">$msg startswith 'DEVNAME'</code> or <code class="literal">$syslogfacility-text == 'local0'</code>. You can specify more than one expression in a single filter by using <code class="literal">and</code> and <code class="literal">or</code> operators.
										</p><p class="simpara">
											Note that <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> supports case-insensitive comparisons in expression-based filters. You can use <code class="literal">contains_i</code> or <code class="literal">startswith_i</code> compare-operations within the <span class="emphasis"><em>EXPRESSION</em></span> attribute, for example:
										</p><p class="simpara">
											<code class="literal">if $hostname startswith_i "&lt;HOST_NAME&gt;" then ACTION</code>.
										</p></li><li class="listitem">
											The <span class="emphasis"><em>ACTION</em></span> attribute represents an action to be performed if the expression returns the value <code class="literal">true</code>. This can be a single action, or an arbitrary complex script enclosed in curly braces.
										</li><li class="listitem"><p class="simpara">
											Expression-based filters are indicated by the keyword <span class="emphasis"><em>if</em></span> at the start of a new line. The <span class="emphasis"><em>then</em></span> keyword separates the <span class="emphasis"><em>EXPRESSION</em></span> from the <span class="emphasis"><em>ACTION</em></span>. Optionally, you can employ the <span class="emphasis"><em>else</em></span> keyword to specify what action is to be performed in case the condition is not met.
										</p><p class="simpara">
											With expression-based filters, you can nest the conditions by using a script enclosed in curly braces as in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-expression-based_filters" title="Example 23.3. Expression-based Filters">Example&nbsp;23.3, “Expression-based Filters”</a>. The script allows you to use <span class="emphasis"><em>facility/priority-based</em></span> filters inside the expression. On the other hand, <span class="emphasis"><em>property-based</em></span> filters are not recommended here. RainerScript supports regular expressions with specialized functions <code class="literal">re_match()</code> and <code class="literal">re_extract()</code>.
										</p><div class="example" id="ex-expression-based_filters"><p class="title"><strong>Example&nbsp;23.3.&nbsp;Expression-based Filters</strong></p><div class="example-contents"><p>
												The following expression contains two nested conditions. The log files created by a program called <span class="emphasis"><em>prog1</em></span> are split into two files based on the presence of the "test" string in the message.
											</p><pre class="literallayout">if $programname == 'prog1' then {
  action(type="omfile" file="/var/log/prog1.log")
  if $msg contains 'test' then
   action(type="omfile" file="/var/log/prog1test.log")
  else
   action(type="omfile" file="/var/log/prog1notest.log")
}</pre></div></div></li></ul></div></dd></dl></div><p>
						See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Log_Files-Resources-Online" title="Online Documentation">the section called “Online Documentation”</a> for more examples of various expression-based filters. RainerScript is the basis for <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>'s new configuration format, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-using_the_new_configuration_format" title="23.3. Using the New Configuration Format">Section&nbsp;23.3, “Using the New Configuration Format”</a>
					</p></section><section class="section" id="s2-Actions"><div class="titlepage"><div><div><h3 class="title">23.2.2.&nbsp;Actions</h3></div></div></div><p>
						Actions specify what is to be done with the messages filtered out by an already defined selector. The following are some of the actions you can define in your rule:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Saving syslog messages to log files</span></dt><dd><p class="simpara">
									The majority of actions specify to which log file a syslog message is saved. This is done by specifying a file path after your already-defined selector:
								</p><pre class="literallayout"><span class="emphasis"><em>FILTER</em></span> <span class="emphasis"><em>PATH</em></span></pre><p class="simpara">
									where <span class="emphasis"><em>FILTER</em></span> stands for user-specified selector and <span class="emphasis"><em>PATH</em></span> is a path of a target file.
								</p><p class="simpara">
									For instance, the following rule is comprised of a selector that selects all <span class="strong strong"><strong><span class="application application">cron</span></strong></span> syslog messages and an action that saves them into the <code class="literal">/var/log/cron.log</code> log file:
								</p><pre class="literallayout">cron.* /var/log/cron.log</pre><p class="simpara">
									By default, the log file is synchronized every time a syslog message is generated. Use a dash mark (<code class="literal">-</code>) as a prefix of the file path you specified to omit syncing:
								</p><pre class="literallayout"><span class="emphasis"><em>FILTER</em></span> -<span class="emphasis"><em>PATH</em></span></pre><p class="simpara">
									Note that you might lose information if the system terminates right after a write attempt. However, this setting can improve performance, especially if you run programs that produce very verbose log messages.
								</p><p class="simpara">
									Your specified file path can be either <span class="emphasis"><em>static</em></span> or <span class="emphasis"><em>dynamic</em></span>. Static files are represented by a fixed file path as shown in the example above. Dynamic file paths can differ according to the received message. Dynamic file paths are represented by a template and a question mark (<code class="literal">?</code>) prefix:
								</p><pre class="literallayout"><span class="emphasis"><em>FILTER</em></span> ?<span class="emphasis"><em>DynamicFile</em></span></pre><p class="simpara">
									where <span class="emphasis"><em>DynamicFile</em></span> is a name of a predefined template that modifies output paths. You can use the dash prefix (<code class="literal">-</code>) to disable syncing, also you can use multiple templates separated by a colon (<code class="literal">;</code>). For more information on templates, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-generating-dynamic-fnames" title="Generating Dynamic File Names">the section called “Generating Dynamic File Names”</a>.
								</p><p class="simpara">
									If the file you specified is an existing <span class="strong strong"><strong><span class="application application">terminal</span></strong></span> or <code class="literal">/dev/console</code> device, syslog messages are sent to standard output (using special <span class="strong strong"><strong><span class="application application">terminal</span></strong></span>-handling) or your console (using special <code class="literal">/dev/console</code>-handling) when using the X Window System, respectively.
								</p></dd><dt><span class="term">Sending syslog messages over the network</span></dt><dd><p class="simpara">
									<span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> allows you to send and receive syslog messages over the network. This feature allows you to administer syslog messages of multiple hosts on one machine. To forward syslog messages to a remote machine, use the following syntax:
								</p><pre class="literallayout">@(<code class="literal command">z<span class="emphasis"><em>NUMBER</em></span></code>)<span class="emphasis"><em>HOST</em></span>:<span class="emphasis"><em>PORT</em></span></pre><p class="simpara">
									where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The at sign (<code class="literal">@</code>) indicates that the syslog messages are forwarded to a host using the <code class="literal">UDP</code> protocol. To use the <code class="literal">TCP</code> protocol, use two at signs with no space between them (<code class="literal">@@</code>).
										</li><li class="listitem">
											The optional <code class="literal command">z<span class="emphasis"><em>NUMBER</em></span></code> setting enables <span class="strong strong"><strong><span class="application application">zlib</span></strong></span> compression for syslog messages. The <span class="emphasis"><em>NUMBER</em></span> attribute specifies the level of compression (from 1 – lowest to 9 – maximum). Compression gain is automatically checked by <code class="literal">rsyslogd</code>, messages are compressed only if there is any compression gain and messages below 60 bytes are never compressed.
										</li><li class="listitem">
											The <span class="emphasis"><em>HOST</em></span> attribute specifies the host which receives the selected syslog messages.
										</li><li class="listitem"><p class="simpara">
											The <span class="emphasis"><em>PORT</em></span> attribute specifies the host machine’s port.
										</p><p class="simpara">
											When specifying an <code class="literal">IPv6</code> address as the host, enclose the address in square brackets (<code class="literal">[</code>, <code class="literal">]</code>).
										</p><div class="example" id="ex-logging_over_the_network"><p class="title"><strong>Example&nbsp;23.4.&nbsp;Sending syslog Messages over the Network</strong></p><div class="example-contents"><p>
												The following are some examples of actions that forward syslog messages over the network (note that all actions are preceded with a selector that selects all messages with any priority). To forward messages to <code class="literal">192.168.0.1</code> via the <code class="literal">UDP</code> protocol, type:
											</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> @192.168.0.1</pre><p>
												To forward messages to "example.com" using port 6514 and the <code class="literal">TCP</code> protocol, use:
											</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> @@example.com:6514</pre><p>
												The following compresses messages with <span class="strong strong"><strong><span class="application application">zlib</span></strong></span> (level 9 compression) and forwards them to <code class="literal">2001:db8::1</code> using the <code class="literal">UDP</code> protocol
											</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> @(z9)[2001:db8::1]</pre></div></div></li></ul></div></dd><dt><span class="term">Output channels</span></dt><dd><p class="simpara">
									Output channels are primarily used to specify the maximum size a log file can grow to. This is very useful for log file rotation (for more information see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-log_rotation" title="23.2.5. Log Rotation">Section&nbsp;23.2.5, “Log Rotation”</a>). An output channel is basically a collection of information about the output action. Output channels are defined by the <code class="literal">$outchannel</code> directive. To define an output channel in <code class="literal">/etc/rsyslog.conf</code>, use the following syntax:
								</p><pre class="literallayout">$outchannel <span class="emphasis"><em>NAME</em></span>, <span class="emphasis"><em>FILE_NAME</em></span>, <span class="emphasis"><em>MAX_SIZE</em></span>, <span class="emphasis"><em>ACTION</em></span></pre><p class="simpara">
									where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The <span class="emphasis"><em>NAME</em></span> attribute specifies the name of the output channel.
										</li><li class="listitem">
											The <span class="emphasis"><em>FILE_NAME</em></span> attribute specifies the name of the output file. Output channels can write only into files, not pipes, terminal, or other kind of output.
										</li><li class="listitem">
											The <span class="emphasis"><em>MAX_SIZE</em></span> attribute represents the maximum size the specified file (in <span class="emphasis"><em>FILE_NAME</em></span>) can grow to. This value is specified in <span class="emphasis"><em>bytes</em></span>.
										</li><li class="listitem"><p class="simpara">
											The <span class="emphasis"><em>ACTION</em></span> attribute specifies the action that is taken when the maximum size, defined in <span class="emphasis"><em>MAX_SIZE</em></span>, is hit.
										</p><p class="simpara">
											To use the defined output channel as an action inside a rule, type:
										</p><pre class="literallayout"><span class="emphasis"><em>FILTER</em></span> :omfile:$<span class="emphasis"><em>NAME</em></span></pre><div class="example" id="example-log-rotation"><p class="title"><strong>Example&nbsp;23.5.&nbsp;Output channel log rotation</strong></p><div class="example-contents"><p>
												The following output shows a simple log rotation through the use of an output channel. First, the output channel is defined via the <code class="literal">$outchannel</code> directive:
											</p><pre class="literallayout"> $outchannel log_rotation, /var/log/test_log.log, 104857600, /home/joe/log_rotation_script</pre><p>
												and then it is used in a rule that selects every syslog message with any priority and executes the previously-defined output channel on the acquired syslog messages:
											</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> :omfile:$log_rotation</pre><p>
												Once the limit (in the example 100 MB) is hit, the <code class="literal">/home/joe/log_rotation_script</code> is executed. This script can contain anything from moving the file into a different folder, editing specific content out of it, or simply removing it.
											</p></div></div></li></ul></div></dd><dt><span class="term">Sending syslog messages to specific users</span></dt><dd>
									<span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> can send syslog messages to specific users by specifying a user name of the user you want to send the messages to (as in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-multiple_actions" title="Example 23.7. Specifying Multiple Actions">Example&nbsp;23.7, “Specifying Multiple Actions”</a>). To specify more than one user, separate each user name with a comma (<code class="literal">,</code>). To send messages to every user that is currently logged on, use an asterisk (<code class="literal">*</code>).
								</dd><dt><span class="term">Executing a program</span></dt><dd><p class="simpara">
									<span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> lets you execute a program for selected syslog messages and uses the <code class="literal">system()</code> call to execute the program in shell. To specify a program to be executed, prefix it with a caret character (<code class="literal">^</code>). Consequently, specify a template that formats the received message and passes it to the specified executable as a one line parameter (for more information on templates, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Templates" title="23.2.3. Templates">Section&nbsp;23.2.3, “Templates”</a>).
								</p><pre class="literallayout"><span class="emphasis"><em>FILTER</em></span> ^<span class="emphasis"><em>EXECUTABLE</em></span>; <span class="emphasis"><em>TEMPLATE</em></span></pre><p class="simpara">
									Here an output of the <span class="emphasis"><em>FILTER</em></span> condition is processed by a program represented by <span class="emphasis"><em>EXECUTABLE</em></span>. This program can be any valid executable. Replace <span class="emphasis"><em>TEMPLATE</em></span> with the name of the formatting template.
								</p><div class="example" id="ex-esecuting_a_program"><p class="title"><strong>Example&nbsp;23.6.&nbsp;Executing a Program</strong></p><div class="example-contents"><p>
										In the following example, any syslog message with any priority is selected, formatted with the <code class="literal">template</code> template and passed as a parameter to the <span class="strong strong"><strong><span class="application application">test-program</span></strong></span> program, which is then executed with the provided parameter:
									</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> ^test-program;template</pre></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										When accepting messages from any host, and using the shell execute action, you may be vulnerable to command injection. An attacker may try to inject and execute commands in the program you specified to be executed in your action. To avoid any possible security threats, thoroughly consider the use of the shell execute action.
									</p></div></div></dd><dt><span class="term">Storing syslog messages in a database</span></dt><dd><p class="simpara">
									Selected syslog messages can be directly written into a database table using the <span class="emphasis"><em>database writer</em></span> action. The database writer uses the following syntax:
								</p><pre class="literallayout">:<span class="emphasis"><em>PLUGIN</em></span>:<span class="emphasis"><em>DB_HOST</em></span>,<span class="emphasis"><em>DB_NAME</em></span>,<span class="emphasis"><em>DB_USER</em></span>,<span class="emphasis"><em>DB_PASSWORD</em></span>;<span class="emphasis"><em>TEMPLATE</em></span></pre><p class="simpara">
									where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The <span class="emphasis"><em>PLUGIN</em></span> calls the specified plug-in that handles the database writing (for example, the <code class="literal">ommysql</code> plug-in).
										</li><li class="listitem">
											The <span class="emphasis"><em>DB_HOST</em></span> attribute specifies the database host name.
										</li><li class="listitem">
											The <span class="emphasis"><em>DB_NAME</em></span> attribute specifies the name of the database.
										</li><li class="listitem">
											The <span class="emphasis"><em>DB_USER</em></span> attribute specifies the database user.
										</li><li class="listitem">
											The <span class="emphasis"><em>DB_PASSWORD</em></span> attribute specifies the password used with the aforementioned database user.
										</li><li class="listitem"><p class="simpara">
											The <span class="emphasis"><em>TEMPLATE</em></span> attribute specifies an optional use of a template that modifies the syslog message. For more information on templates, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Templates" title="23.2.3. Templates">Section&nbsp;23.2.3, “Templates”</a>.
										</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
												Currently, <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> provides support for <code class="literal">MySQL</code> and <code class="literal">PostgreSQL</code> databases only. In order to use the <code class="literal">MySQL</code> and <code class="literal">PostgreSQL</code> database writer functionality, install the <span class="strong strong"><strong><span class="package package">rsyslog-mysql</span></strong></span> and <span class="strong strong"><strong><span class="package package">rsyslog-pgsql</span></strong></span> packages, respectively. Also, make sure you load the appropriate modules in your <code class="literal">/etc/rsyslog.conf</code> configuration file:
											</p><pre class="literallayout">module(load=”ommysql”)  # Output module for MySQL support
module(load=”ompgsql”)  # Output module for PostgreSQL support</pre><p>
												For more information on <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> modules, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-using_rsyslog_modules" title="23.6. Using Rsyslog Modules">Section&nbsp;23.6, “Using Rsyslog Modules”</a>.
											</p><p>
												Alternatively, you may use a generic database interface provided by the <code class="literal">omlibdb</code> module (supports: Firebird/Interbase, MS SQL, Sybase, SQLLite, Ingres, Oracle, mSQL).
											</p></div></div></li></ul></div></dd><dt><span class="term">Discarding syslog messages</span></dt><dd><p class="simpara">
									To discard your selected messages, use <code class="literal">stop</code>.
								</p><p class="simpara">
									The discard action is mostly used to filter out messages before carrying on any further processing. It can be effective if you want to omit some repeating messages that would otherwise fill the log files. The results of discard action depend on where in the configuration file it is specified, for the best results place these actions on top of the actions list. Please note that once a message has been discarded there is no way to retrieve it in later configuration file lines.
								</p><p class="simpara">
									For instance, the following rule discards all messages that matches the <code class="literal">local5.*</code> filter:
								</p><pre class="literallayout">local5.* stop</pre><p class="simpara">
									In the following example, any cron syslog messages are discarded:
								</p><pre class="literallayout">cron.* stop</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										With versions prior to rsyslog 7, the tilde character (<code class="literal">~</code>) was used instead of <code class="literal">stop</code> to discard syslog messages.
									</p></div></div></dd></dl></div><h5 id="specifying_multiple_actions">Specifying Multiple Actions</h5><p>
						For each selector, you are allowed to specify multiple actions. To specify multiple actions for one selector, write each action on a separate line and precede it with an ampersand (&amp;) character:
					</p><pre class="literallayout"><span class="emphasis"><em>FILTER</em></span> <span class="emphasis"><em>ACTION</em></span>
&amp; <span class="emphasis"><em>ACTION</em></span>
&amp; <span class="emphasis"><em>ACTION</em></span></pre><p>
						Specifying multiple actions improves the overall performance of the desired outcome since the specified selector has to be evaluated only once.
					</p><div class="example" id="ex-multiple_actions"><p class="title"><strong>Example&nbsp;23.7.&nbsp;Specifying Multiple Actions</strong></p><div class="example-contents"><p>
							In the following example, all kernel syslog messages with the critical priority (<code class="literal">crit</code>) are sent to user <code class="literal">user1</code>, processed by the template <code class="literal">temp</code> and passed on to the <code class="literal">test-program</code> executable, and forwarded to <code class="literal">192.168.0.1</code> via the <code class="literal">UDP</code> protocol.
						</p><pre class="literallayout">kern.=crit user1
&amp; ^test-program;temp
&amp; @192.168.0.1</pre></div></div><p>
						Any action can be followed by a template that formats the message. To specify a template, suffix an action with a semicolon (<code class="literal">;</code>) and specify the name of the template. For more information on templates, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Templates" title="23.2.3. Templates">Section&nbsp;23.2.3, “Templates”</a>.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							A template must be defined before it is used in an action, otherwise it is ignored. In other words, template definitions should always precede rule definitions in <code class="literal">/etc/rsyslog.conf</code>.
						</p></div></div></section><section class="section" id="s2-Templates"><div class="titlepage"><div><div><h3 class="title">23.2.3.&nbsp;Templates</h3></div></div></div><p>
						Any output that is generated by <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> can be modified and formatted according to your needs with the use of <span class="emphasis"><em>templates</em></span>. To create a template use the following syntax in <code class="literal">/etc/rsyslog.conf</code>:
					</p><pre class="literallayout">template(name=”TEMPLATE_NAME” type=”string” string="text %PROPERTY% more text" [option.OPTION="on"])</pre><p>
						where:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">template()</code> is the directive introducing block defining a template.
							</li><li class="listitem">
								The <code class="literal">TEMPLATE_NAME</code> mandatory argument is used to refer to the template. Note that <code class="literal">TEMPLATE_NAME</code> should be unique.
							</li><li class="listitem">
								The <code class="literal">type</code> mandatory argument can acquire one of these values: “list”, “subtree”, “string” or “plugin”.
							</li><li class="listitem">
								The <code class="literal">string</code> argument is the actual template text. Within this text, special characters, such as \n for newline or \r for carriage return, can be used. Other characters, such as % or ", have to be escaped if you want to use those characters literally. Within this text, special characters, such as <code class="literal">\n</code> for new line or <code class="literal">\r</code> for carriage return, can be used. Other characters, such as <code class="literal">%</code> or <code class="literal">"</code>, have to be escaped if you want to use those characters literally.
							</li><li class="listitem">
								The text specified between two percent signs (<code class="literal">%</code>) specifies a <span class="emphasis"><em>property</em></span> that allows you to access specific contents of a syslog message. For more information on properties, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-properties" title="Properties">the section called “Properties”</a>.
							</li><li class="listitem"><p class="simpara">
								The <code class="literal">OPTION</code> attribute specifies any options that modify the template functionality. The currently supported template options are <code class="literal">sql</code> and <code class="literal">stdsql</code>, which are used for formatting the text as an SQL query, or json which formats text to be suitable for JSON processing, and <code class="literal">casesensitive</code> which sets case sensitiveness of property names.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Note that the database writer checks whether the <code class="literal">sql</code> or <code class="literal">stdsql</code> options are specified in the template. If they are not, the database writer does not perform any action. This is to prevent any possible security threats, such as SQL injection.
								</p><p>
									See section <span class="emphasis"><em><span class="citetitle citetitle">Storing syslog messages in a database</span></em></span> in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Actions" title="23.2.2. Actions">Section&nbsp;23.2.2, “Actions”</a> for more information.
								</p></div></div></li></ul></div><h5 id="brid-generating-dynamic-fnames">Generating Dynamic File Names</h5><p>
						Templates can be used to generate dynamic file names. By specifying a property as a part of the file path, a new file will be created for each unique property, which is a convenient way to classify syslog messages.
					</p><p>
						For example, use the <code class="literal">timegenerated</code> property, which extracts a time stamp from the message, to generate a unique file name for each syslog message:
					</p><pre class="literallayout">  template(name=”DynamicFile” type=”list”) {
  constant(value=”/var/log/test_logs/”)
  property(name=”timegenerated”)
  constant(value”-test.log”)
}</pre><p>
						Keep in mind that the <code class="literal">$template</code> directive only specifies the template. You must use it inside a rule for it to take effect. In <code class="literal">/etc/rsyslog.conf</code>, use the question mark (<code class="literal">?</code>) in an action definition to mark the dynamic file name template:
					</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> ?DynamicFile</pre><h5 id="brid-properties">Properties</h5><p>
						Properties defined inside a template (between two percent signs (<code class="literal">%</code>)) enable access various contents of a syslog message through the use of a <span class="emphasis"><em>property replacer</em></span>. To define a property inside a template (between the two quotation marks (<code class="literal">“…”</code>)), use the following syntax:
					</p><pre class="literallayout">%<span class="emphasis"><em>PROPERTY_NAME</em></span>:<span class="emphasis"><em>FROM_CHAR</em></span>:<span class="emphasis"><em>TO_CHAR</em></span>:<span class="emphasis"><em>OPTION</em></span>%</pre><p>
						where:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <span class="emphasis"><em>PROPERTY_NAME</em></span> attribute specifies the name of a property. A list of all available properties and their detailed description can be found in the <code class="literal">rsyslog.conf(5)</code> manual page under the section <span class="emphasis"><em>Available Properties</em></span>.
							</li><li class="listitem">
								<span class="emphasis"><em>FROM_CHAR</em></span> and <span class="emphasis"><em>TO_CHAR</em></span> attributes denote a range of characters that the specified property will act upon. Alternatively, regular expressions can be used to specify a range of characters. To do so, set the letter <code class="literal">R</code> as the <span class="emphasis"><em>FROM_CHAR</em></span> attribute and specify your desired regular expression as the <span class="emphasis"><em>TO_CHAR</em></span> attribute.
							</li><li class="listitem">
								The <span class="emphasis"><em>OPTION</em></span> attribute specifies any property options, such as the <code class="literal option">lowercase</code> option to convert the input to lowercase. A list of all available property options and their detailed description can be found in the <code class="literal">rsyslog.conf(5)</code> manual page under the section <span class="emphasis"><em>Property Options</em></span>.
							</li></ul></div><p>
						The following are some examples of simple properties:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The following property obtains the whole message text of a syslog message:
							</p><pre class="literallayout">%msg%</pre></li><li class="listitem"><p class="simpara">
								The following property obtains the first two characters of the message text of a syslog message:
							</p><pre class="literallayout">%msg:1:2%</pre></li><li class="listitem"><p class="simpara">
								The following property obtains the whole message text of a syslog message and drops its last line feed character:
							</p><pre class="literallayout">%msg:::drop-last-lf%</pre></li><li class="listitem"><p class="simpara">
								The following property obtains the first 10 characters of the time stamp that is generated when the syslog message is received and formats it according to the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc3999">RFC 3999</a></span></em></span> date standard.
							</p><pre class="literallayout">%timegenerated:1:10:date-rfc3339%</pre></li></ul></div><h5 id="brid-template-examples">Template Examples</h5><p>
						This section presents a few examples of <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> templates.
					</p><p>
						<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#example-temp1" title="Example 23.8. A verbose syslog message template">Example&nbsp;23.8, “A verbose syslog message template”</a> shows a template that formats a syslog message so that it outputs the message’s severity, facility, the time stamp of when the message was received, the host name, the message tag, the message text, and ends with a new line.
					</p><div class="example" id="example-temp1"><p class="title"><strong>Example&nbsp;23.8.&nbsp;A verbose syslog message template</strong></p><div class="example-contents"><pre class="literallayout">  template(name=”verbose” type=”list”) {
  property(name="syslogseverity”)
  property(name="syslogfacility”)
  property(name="timegenerated”)
  property(name="HOSTNAME”)
  property(name="syslogtag”)
  property(name="msg”)
  constant(value=”\n")
}</pre></div></div><p>
						<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#example-temp2" title="Example 23.9. A wall message template">Example&nbsp;23.9, “A wall message template”</a> shows a template that resembles a traditional wall message (a message that is send to every user that is logged in and has their <code class="literal">mesg(1)</code> permission set to <code class="literal">yes</code>). This template outputs the message text, along with a host name, message tag and a time stamp, on a new line (using <code class="literal">\r</code> and <code class="literal">\n</code>) and rings the bell (using <code class="literal">\7</code>).
					</p><div class="example" id="example-temp2"><p class="title"><strong>Example&nbsp;23.9.&nbsp;A wall message template</strong></p><div class="example-contents"><pre class="literallayout">  template(name=”wallmsg” type=”list”) {
  constant(value="\r\n\7Message from syslogd@”)
  property(name="HOSTNAME”)
  constant(value=” at ")
  property(name="timegenerated”)
  constant(value=" ...\r\n ”)
  property(name="syslogtag”)
  constant(value=” “)
  property(name="msg”)
  constant(value=”\r\n”)
}</pre></div></div><p>
						<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#example-temp3" title="Example 23.10. A database formatted message template">Example&nbsp;23.10, “A database formatted message template”</a> shows a template that formats a syslog message so that it can be used as a database query. Notice the use of the <code class="literal">sql</code> option at the end of the template specified as the template option. It tells the database writer to format the message as an MySQL <code class="literal">SQL</code> query.
					</p><div class="example" id="example-temp3"><p class="title"><strong>Example&nbsp;23.10.&nbsp;A database formatted message template</strong></p><div class="example-contents"><pre class="literallayout">template(name="dbFormat" type="list" option.sql="on") {
constant(value="insert into SystemEvents (Message, Facility, FromHost, Priority, DeviceReportedTime, ReceivedAt, InfoUnitID, SysLogTag)")
constant(value=" values ('")
property(name="msg")
constant(value="', ")
property(name="syslogfacility")
constant(value=", '")
property(name="hostname")
constant(value="', ")
property(name="syslogpriority")
constant(value=", '")
property(name="timereported" dateFormat="mysql")
constant(value="', '")
property(name="timegenerated" dateFormat="mysql")
constant(value="', ")
property(name="iut")
constant(value=", '")
property(name="syslogtag")
constant(value="')")
}</pre></div></div><p>
						<span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> also contains a set of predefined templates identified by the <code class="literal">RSYSLOG_</code> prefix. These are reserved for the syslog’s use and it is advisable to not create a template using this prefix to avoid conflicts. The following list shows these predefined templates along with their definitions.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">RSYSLOG_DebugFormat</code></span></dt><dd><p class="simpara">
									A special format used for troubleshooting property problems.
								</p><pre class="literallayout">template(name=”RSYSLOG_DebugFormat” type=”string” string="Debug line with all properties:\nFROMHOST: '%FROMHOST%', fromhost-ip: '%fromhost-ip%', HOSTNAME: '%HOSTNAME%', PRI: %PRI%,\nsyslogtag '%syslogtag%', programname: '%programname%', APP-NAME: '%APP-NAME%', PROCID: '%PROCID%', MSGID: '%MSGID%',\nTIMESTAMP: '%TIMESTAMP%', STRUCTURED-DATA: '%STRUCTURED-DATA%',\nmsg: '%msg%'\nescaped msg: '%msg:::drop-cc%'\nrawmsg: '%rawmsg%'\n\n")</pre></dd><dt><span class="term"><code class="literal">RSYSLOG_SyslogProtocol23Format</code></span></dt><dd><p class="simpara">
									The format specified in IETF’s internet-draft ietf-syslog-protocol-23, which is assumed to become the new syslog standard RFC.
								</p><pre class="literallayout">template(name=”RSYSLOG_SyslogProtocol23Format” type=”string” string="%PRI%1 %TIMESTAMP:::date-rfc3339% %HOSTNAME% %APP-NAME% %PROCID% %MSGID% %STRUCTURED-DATA% %msg%\n ")</pre></dd><dt><span class="term"><code class="literal">RSYSLOG_FileFormat</code></span></dt><dd><p class="simpara">
									A modern-style logfile format similar to TraditionalFileFormat, but with high-precision time stamps and time zone information.
								</p><pre class="literallayout">template(name="RSYSLOG_FileFormat" type="list") {
property(name="timestamp" dateFormat="rfc3339")
constant(value=" ")
property(name="hostname")
constant(value=" ")
property(name="syslogtag")
property(name="msg" spifno1stsp="on" )
property(name="msg" droplastlf="on" )
constant(value="\n")
}</pre></dd><dt><span class="term"><code class="literal">RSYSLOG_TraditionalFileFormat</code></span></dt><dd><p class="simpara">
									The older default log file format with low-precision time stamps.
								</p><pre class="literallayout">template(name="RSYSLOG_TraditionalFileFormat" type="list") {
property(name="timestamp")
constant(value=" ")
property(name="hostname")
constant(value=" ")
property(name="syslogtag")
property(name="msg" spifno1stsp="on" )
property(name="msg" droplastlf="on" )
constant(value="\n")
}</pre></dd><dt><span class="term"><code class="literal">RSYSLOG_ForwardFormat</code></span></dt><dd><p class="simpara">
									A forwarding format with high-precision time stamps and time zone information.
								</p><pre class="literallayout">template(name="ForwardFormat" type="list") {
constant(value="&lt;")
property(name="pri")
constant(value="&gt;")
property(name="timestamp" dateFormat="rfc3339")
constant(value=" ")
property(name="hostname")
constant(value=" ")
property(name="syslogtag" position.from="1" position.to="32")
property(name="msg" spifno1stsp="on" )
property(name="msg")
}</pre></dd><dt><span class="term"><code class="literal">RSYSLOG_TraditionalForwardFormat</code></span></dt><dd><p class="simpara">
									The traditional forwarding format with low-precision time stamps.
								</p><pre class="literallayout">template(name="TraditionalForwardFormat" type="list") {
constant(value="&lt;")
property(name="pri")
constant(value="&gt;")
property(name="timestamp")
constant(value=" ")
property(name="hostname")
constant(value=" ")
property(name="syslogtag" position.from="1" position.to="32")
property(name="msg" spifno1stsp="on" )
property(name="msg")
}</pre></dd></dl></div></section><section class="section" id="s2-global_directives"><div class="titlepage"><div><div><h3 class="title">23.2.4.&nbsp;Global Directives</h3></div></div></div><p>
						Global directives are configuration options that apply to the <code class="literal">rsyslogd</code> daemon. They usually specify a value for a specific predefined variable that affects the behavior of the <code class="literal">rsyslogd</code> daemon or a rule that follows. All of the global directives are enclosed in a <code class="literal">global</code> configuration block. The following is an example of a global directive that specifies overriding local host name for log messages:
					</p><pre class="literallayout">global(localHostname=”machineXY”)</pre><p>
						The default size defined for this directive (10,000 messages) can be overridden by specifying a different value (as shown in the example above).
					</p><p>
						You can define multiple directives in your <code class="literal">/etc/rsyslog.conf</code> configuration file. A directive affects the behavior of all configuration options until another occurrence of that same directive is detected. Global directives can be used to configure actions, queues and for debugging. A comprehensive list of all available configuration directives can be found in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Log_Files-Resources-Online" title="Online Documentation">the section called “Online Documentation”</a>. Currently, a new configuration format has been developed that replaces the $-based syntax (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-using_the_new_configuration_format" title="23.3. Using the New Configuration Format">Section&nbsp;23.3, “Using the New Configuration Format”</a>). However, classic global directives remain supported as a legacy format.
					</p></section><section class="section" id="s2-log_rotation"><div class="titlepage"><div><div><h3 class="title">23.2.5.&nbsp;Log Rotation</h3></div></div></div><p>
						The following is a sample <code class="literal">/etc/logrotate.conf</code> configuration file:
					</p><pre class="literallayout"># rotate log files weekly
weekly
# keep 4 weeks worth of backlogs
rotate 4
# uncomment this if you want your log files compressed
compress</pre><p>
						All of the lines in the sample configuration file define global options that apply to every log file. In our example, log files are rotated weekly, rotated log files are kept for four weeks, and all rotated log files are compressed by <span class="strong strong"><strong><span class="application application">gzip</span></strong></span> into the <code class="literal">.gz</code> format. Any lines that begin with a hash sign (#) are comments and are not processed.
					</p><p>
						You may define configuration options for a specific log file and place it under the global options. However, it is advisable to create a separate configuration file for any specific log file in the <code class="literal">/etc/logrotate.d/</code> directory and define any configuration options there.
					</p><p>
						The following is an example of a configuration file placed in the <code class="literal">/etc/logrotate.d/</code> directory:
					</p><pre class="literallayout">/var/log/messages {
  rotate 5
  weekly
  postrotate
  /usr/bin/killall -HUP syslogd
  endscript
}</pre><p>
						The configuration options in this file are specific for the <code class="literal">/var/log/messages</code> log file only. The settings specified here override the global settings where possible. Thus the rotated <code class="literal">/var/log/messages</code> log file will be kept for five weeks instead of four weeks as was defined in the global options.
					</p><p>
						The following is a list of some of the directives you can specify in your <span class="strong strong"><strong><span class="application application">logrotate</span></strong></span> configuration file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">weekly</code> — Specifies the rotation of log files to be done weekly. Similar directives include:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">daily</code>
									</li><li class="listitem">
										<code class="literal">monthly</code>
									</li><li class="listitem">
										<code class="literal">yearly</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal">compress</code> — Enables compression of rotated log files. Similar directives include:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">nocompress</code>
									</li><li class="listitem">
										<code class="literal">compresscmd</code> — Specifies the command to be used for compressing.
									</li><li class="listitem">
										<code class="literal">uncompresscmd</code>
									</li><li class="listitem">
										<code class="literal">compressext</code> — Specifies what extension is to be used for compressing.
									</li><li class="listitem">
										<code class="literal">compressoptions</code> — Specifies any options to be passed to the compression program used.
									</li><li class="listitem">
										<code class="literal">delaycompress</code> — Postpones the compression of log files to the next rotation of log files.
									</li></ul></div></li><li class="listitem">
								<code class="literal">rotate <span class="emphasis"><em>INTEGER</em></span></code> — Specifies the number of rotations a log file undergoes before it is removed or mailed to a specific address. If the value 0 is specified, old log files are removed instead of rotated.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">mail <span class="emphasis"><em>ADDRESS</em></span></code> — This option enables mailing of log files that have been rotated as many times as is defined by the <code class="literal">rotate</code> directive to the specified address. Similar directives include:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">nomail</code>
									</li><li class="listitem">
										<code class="literal">mailfirst</code> — Specifies that the just-rotated log files are to be mailed, instead of the about-to-expire log files.
									</li><li class="listitem">
										<code class="literal">maillast</code> — Specifies that the about-to-expire log files are to be mailed, instead of the just-rotated log files. This is the default option when <code class="literal">mail</code> is enabled.
									</li></ul></div></li></ul></div><p>
						For the full list of directives and various configuration options, see the <code class="literal">logrotate(5)</code> manual page.
					</p></section><section class="section" id="sec-Increasing_the_limit_of_open_files"><div class="titlepage"><div><div><h3 class="title">23.2.6.&nbsp;Increasing the Limit of Open Files</h3></div></div></div><p>
						Under certain circumstances the <code class="literal">rsyslog</code> exceeds the limit for a maximum number of open files. Consequently, the <code class="literal">rsyslog</code> cannot open new files.
					</p><p>
						To increase the limit of open files in the <code class="literal">rsyslog</code>:
					</p><p>
						Create the <code class="literal">/etc/systemd/system/rsylog.service.d/increase_nofile_limit.conf</code> file with the following content:
					</p><pre class="literallayout">[Service]
LimitNOFILE=16384</pre></section></section><section class="section" id="sec-using_the_new_configuration_format"><div class="titlepage"><div><div><h2 class="title">23.3.&nbsp;Using the New Configuration Format</h2></div></div></div><p>
					In <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> version 7, installed by default for Red Hat Enterprise Linux 7 in the <span class="strong strong"><strong><span class="package package">rsyslog</span></strong></span> package, a new configuration syntax is introduced. This new configuration format aims to be more powerful, more intuitive, and to prevent common mistakes by not permitting certain invalid constructs. The syntax enhancement is enabled by the new configuration processor that relies on RainerScript. The legacy format is still fully supported and it is used by default in the <code class="literal">/etc/rsyslog.conf</code> configuration file.
				</p><p>
					RainerScript is a scripting language designed for processing network events and configuring event processors such as <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>. RainerScript was first used to define expression-based filters, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-expression-based_filters" title="Example 23.3. Expression-based Filters">Example&nbsp;23.3, “Expression-based Filters”</a>. The version of RainerScript in rsyslog version 7 implements the <code class="literal">input()</code> and <code class="literal">ruleset()</code> statements, which permit the <code class="literal">/etc/rsyslog.conf</code> configuration file to be written in the new syntax. The new syntax differs mainly in that it is much more structured; parameters are passed as arguments to statements, such as input, action, template, and module load. The scope of options is limited by blocks. This enhances readability and reduces the number of bugs caused by misconfiguration. There is also a significant performance gain. Some functionality is exposed in both syntaxes, some only in the new one.
				</p><p>
					Compare the configuration written with legacy-style parameters:
				</p><pre class="literallayout">$InputFileName /tmp/inputfile
$InputFileTag tag1:
$InputFileStateFile inputfile-state
$InputRunFileMonitor</pre><p>
					and the same configuration with the use of the new format statement:
				</p><pre class="literallayout">input(type="imfile" file="/tmp/inputfile" tag="tag1:" statefile="inputfile-state")</pre><p>
					This significantly reduces the number of parameters used in configuration, improves readability, and also provides higher execution speed. For more information on RainerScript statements and parameters see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Log_Files-Resources-Online" title="Online Documentation">the section called “Online Documentation”</a>.
				</p><section class="section" id="sec-Rulesets"><div class="titlepage"><div><div><h3 class="title">23.3.1.&nbsp;Rulesets</h3></div></div></div><p>
						Leaving special directives aside, <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> handles messages as defined by <span class="emphasis"><em>rules</em></span> that consist of a filter condition and an action to be performed if the condition is true. With a traditionally written <code class="literal">/etc/rsyslog.conf</code> file, all rules are evaluated in order of appearance for every input message. This process starts with the first rule and continues until all rules have been processed or until the message is discarded by one of the rules.
					</p><p>
						However, rules can be grouped into sequences called <span class="emphasis"><em>rulesets</em></span>. With rulesets, you can limit the effect of certain rules only to selected inputs or enhance the performance of <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> by defining a distinct set of actions bound to a specific input. In other words, filter conditions that will be inevitably evaluated as false for certain types of messages can be skipped. The legacy ruleset definition in <code class="literal">/etc/rsyslog.conf</code> can look as follows:
					</p><pre class="literallayout">$RuleSet <span class="emphasis"><em>rulesetname</em></span>
<span class="emphasis"><em>rule</em></span>
<span class="emphasis"><em>rule2</em></span></pre><p>
						The rule ends when another rule is defined, or the default ruleset is called as follows:
					</p><pre class="literallayout">$RuleSet RSYSLOG_DefaultRuleset</pre><p>
						With the new configuration format in rsyslog 7, the <code class="literal">input()</code> and <code class="literal">ruleset()</code> statements are reserved for this operation. The new format ruleset definition in <code class="literal">/etc/rsyslog.conf</code> can look as follows:
					</p><pre class="literallayout">ruleset(name="<span class="emphasis"><em>rulesetname</em></span>") {
   <span class="emphasis"><em>rule</em></span>
   <span class="emphasis"><em>rule2</em></span>
   call <span class="emphasis"><em>rulesetname2</em></span>
   &amp;hellip;
}</pre><p>
						Replace <span class="emphasis"><em>rulesetname</em></span> with an identifier for your ruleset. The ruleset name cannot start with <code class="literal">RSYSLOG_</code> since this namespace is reserved for use by <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>. <code class="literal">RSYSLOG_DefaultRuleset</code> then defines the default set of rules to be performed if the message has no other ruleset assigned. With <span class="emphasis"><em>rule</em></span> and <span class="emphasis"><em>rule2</em></span> you can define rules in filter-action format mentioned above. With the <code class="literal">call</code> parameter, you can nest rulesets by calling them from inside other ruleset blocks.
					</p><p>
						After creating a ruleset, you need to specify what input it will apply to:
					</p><pre class="literallayout">input(type="<span class="emphasis"><em>input_type</em></span>" port="<span class="emphasis"><em>port_num</em></span>" ruleset="<span class="emphasis"><em>rulesetname</em></span>");</pre><p>
						Here you can identify an input message by <span class="emphasis"><em>input_type</em></span>, which is an input module that gathered the message, or by <span class="emphasis"><em>port_num</em></span> – the port number. Other parameters such as <span class="emphasis"><em>file</em></span> or <span class="emphasis"><em>tag</em></span> can be specified for <code class="literal">input()</code>. Replace <span class="emphasis"><em>rulesetname</em></span> with a name of the ruleset to be evaluated against the message. In case an input message is not explicitly bound to a ruleset, the default ruleset is triggered.
					</p><p>
						You can also use the legacy format to define rulesets, for more information see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Log_Files-Resources-Online" title="Online Documentation">the section called “Online Documentation”</a>.
					</p><div class="example" id="ex-using_rulesets"><p class="title"><strong>Example&nbsp;23.11.&nbsp;Using rulesets</strong></p><div class="example-contents"><p>
							The following rulesets ensure different handling of remote messages coming from different ports. Add the following into <code class="literal">/etc/rsyslog.conf</code>:
						</p><pre class="literallayout">ruleset(name="remote-6514") {
  action(type="omfile" file="/var/log/remote-6514")
}

ruleset(name="remote-601") {
  cron.* action(type="omfile" file="/var/log/remote-601-cron")
  mail.* action(type="omfile" file="/var/log/remote-601-mail")
}

input(type="imtcp" port="6514" ruleset="remote-6514");
input(type="imtcp" port="601" ruleset="remote-601");</pre><p>
							Rulesets shown in the above example define log destinations for the remote input from two ports, in case of port <code class="literal">601</code>, messages are sorted according to the facility. Then, the TCP input is enabled and bound to rulesets. Note that you must load the required modules (imtcp) for this configuration to work.
						</p></div></div></section><section class="section" id="s2-compatibility_with_sysklogd"><div class="titlepage"><div><div><h3 class="title">23.3.2.&nbsp;Compatibility with sysklogd</h3></div></div></div><p>
						The compatibility mode specified via the <code class="literal option">-c</code> option exists in <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> version 5 but not in version 7. Also, the sysklogd-style command-line options are deprecated and configuring <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> through these command-line options should be avoided. However, you can use several templates and directives to configure <code class="literal">rsyslogd</code> to emulate sysklogd-like behavior.
					</p><p>
						For more information on various <code class="literal">rsyslogd</code> options, see the <code class="literal">rsyslogd(8)</code>manual page.
					</p></section></section><section class="section" id="s1-working_with_queues_in_rsyslog"><div class="titlepage"><div><div><h2 class="title">23.4.&nbsp;Working with Queues in Rsyslog</h2></div></div></div><p>
					Queues are used to pass content, mostly syslog messages, between components of <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>. With queues, rsyslog is capable of processing multiple messages simultaneously and to apply several actions to a single message at once. The data flow inside <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> can be illustrated as follows:
				</p><div class="figure" id="fig-message_flow_in_rsyslog"><p class="title"><strong>Figure&nbsp;23.1.&nbsp;Message Flow in Rsyslog</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rsyslog_message_flow.png" alt="Message Flow in Rsyslog"></div></div></div><p>
					Whenever <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> receives a message, it passes this message to the preprocessor and then places it into the <span class="emphasis"><em>main message queue</em></span>. Messages wait there to be dequeued and passed to the <span class="emphasis"><em>rule processor</em></span>.
				</p><p>
					The <span class="emphasis"><em>rule processor</em></span> is a parsing and filtering engine. Here, the rules defined in <code class="literal">/etc/rsyslog.conf</code> are applied. Based on these rules, the rule processor evaluates which actions are to be performed. Each action has its own action queue. Messages are passed through this queue to the respective action processor which creates the final output. Note that at this point, several actions can run simultaneously on one message. For this purpose, a message is duplicated and passed to multiple action processors.
				</p><p>
					Only one queue per action is possible. Depending on configuration, the messages can be sent right to the action processor without action queuing. This is the behavior of <span class="emphasis"><em>direct queues</em></span> (see below). In case the output action fails, the action processor notifies the action queue, which then takes an unprocessed element back and after some time interval, the action is attempted again.
				</p><p>
					To sum up, there are two positions where queues stand in <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>: either in front of the rule processor as a single <span class="emphasis"><em>main message queue</em></span> or in front of various types of output actions as <span class="emphasis"><em>action queues</em></span>. Queues provide two main advantages that both lead to increased performance of message processing:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							they serve as buffers that <span class="emphasis"><em>decouple</em></span> producers and consumers in the structure of <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>
						</li><li class="listitem">
							they allow for <span class="emphasis"><em>parallelization</em></span> of actions performed on messages
						</li></ul></div><p>
					Apart from this, queues can be configured with several directives to provide optimal performance for your system. These configuration options are covered in the following sections.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						If an output plug-in is unable to deliver a message, it is stored in the preceding message queue. If the queue fills, the inputs block until it is no longer full. This will prevent new messages from being logged via the blocked queue. In the absence of separate action queues this can have severe consequences, such as preventing <code class="literal">SSH</code> logging, which in turn can prevent <code class="literal">SSH</code> access. Therefore it is advised to use dedicated action queues for outputs which are forwarded over a network or to a database.
					</p></div></div><section class="section" id="s2-defining_queues"><div class="titlepage"><div><div><h3 class="title">23.4.1.&nbsp;Defining Queues</h3></div></div></div><p>
						Based on where the messages are stored, there are several types of queues: <span class="emphasis"><em>direct</em></span>, <span class="emphasis"><em>in-memory</em></span>, <span class="emphasis"><em>disk</em></span>, and <span class="emphasis"><em>disk-assisted in-memory</em></span> queues that are most widely used. You can choose one of these types for the main message queue and also for action queues. Add the following into <code class="literal">/etc/rsyslog.conf</code>:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.type=<span class="emphasis"><em>”queue_type”</em></span>)</pre><p>
						By adding this you can apply the setting for:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								main message queue: replace <span class="emphasis"><em>object</em></span> with <code class="literal">main_queue</code>
							</li><li class="listitem">
								an action queue: replace <span class="emphasis"><em>object</em></span> with <code class="literal">action</code>
							</li><li class="listitem">
								ruleset: replace <span class="emphasis"><em>object</em></span> with <code class="literal">ruleset</code>
							</li></ul></div><p>
						Replace <span class="emphasis"><em>queue_type</em></span> with one of <code class="literal">direct</code>, <code class="literal">linkedlist</code> or <code class="literal">fixedarray</code> (which are in-memory queues), or <code class="literal">disk</code>.
					</p><p>
						The default setting for a main message queue is the FixedArray queue with a limit of 10,000 messages. Action queues are by default set as Direct queues.
					</p><h5 id="br-direct_queues">Direct Queues</h5><p>
						For many simple operations, such as when writing output to a local file, building a queue in front of an action is not needed. To avoid queuing, use:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.type=<span class="emphasis"><em>”Direct”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>object</em></span> with <code class="literal option">main_queue</code>, <code class="literal option">action</code> or <code class="literal option">ruleset</code> to use this option to the main message queue, an action queue or for the ruleset respectively. With direct queue, messages are passed directly and immediately from the producer to the consumer.
					</p><h5 id="br-disk_queues">Disk Queues</h5><p>
						Disk queues store messages strictly on a hard drive, which makes them highly reliable but also the slowest of all possible queuing modes. This mode can be used to prevent the loss of highly important log data. However, disk queues are not recommended in most use cases. To set a disk queue, type the following into <code class="literal">/etc/rsyslog.conf</code>:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.type=<span class="emphasis"><em>”Disk”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>object</em></span> with <code class="literal option">main_queue</code>, <code class="literal option">action</code> or <code class="literal option">ruleset</code> to use this option to the main message queue, an action queue or for the ruleset respectively. The default size of a queue can be modified with the following configuration directive:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.size=<span class="emphasis"><em>”size”</em></span>)</pre><p>
						where <span class="emphasis"><em>size</em></span> represents the specified size of disk queue part. The defined size limit is not restrictive, <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> always writes one complete queue entry, even if it violates the size limit. Each part of a disk queue matches with an individual file. The naming directive for these files looks as follows:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.filename=<span class="emphasis"><em>”name”</em></span>)</pre><p>
						This sets a <span class="emphasis"><em>name</em></span> prefix for the file followed by a 7-digit number starting at one and incremented for each file.
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.maxfilesize=<span class="emphasis"><em>”size”</em></span>)</pre><p>
						Disk queues are written in parts, with a default size 1 MB. Specify <span class="emphasis"><em>size</em></span> to use a different value.
					</p><h5 id="br-in-memory_queues">In-memory Queues</h5><p>
						With in-memory queue, the enqueued messages are held in memory which makes the process very fast. The queued data is lost if the computer is power cycled or shut down. However, you can use the <code class="literal option">action (queue.saveonshutdown=”on”)</code> setting to save the data before shutdown. There are two types of in-memory queues:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>FixedArray</em></span> queue — the default mode for the main message queue, with a limit of 10,000 elements. This type of queue uses a fixed, pre-allocated array that holds pointers to queue elements. Due to these pointers, even if the queue is empty a certain amount of memory is consumed. However, FixedArray offers the best run time performance and is optimal when you expect a relatively low number of queued messages and high performance.
							</li><li class="listitem">
								<span class="emphasis"><em>LinkedList</em></span> queue — here, all structures are dynamically allocated in a linked list, thus the memory is allocated only when needed. LinkedList queues handle occasional message bursts very well.
							</li></ul></div><p>
						In general, use LinkedList queues when in doubt. Compared to FixedArray, it consumes less memory and lowers the processing overhead.
					</p><p>
						Use the following syntax to configure in-memory queues:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.type=<span class="emphasis"><em>”LinkedList”</em></span>)</pre><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.type=<span class="emphasis"><em>”FixedArray”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>object</em></span> with <code class="literal option">main_queue</code>, <code class="literal option">action</code> or <code class="literal option">ruleset</code> to use this option to the main message queue, an action queue or for the ruleset respectively.
					</p><h5 id="br-disk-assisted_in-memory_queues">Disk-Assisted In-memory Queues</h5><p>
						Both disk and in-memory queues have their advantages and <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> lets you combine them in <span class="emphasis"><em>disk-assisted in-memory queues</em></span>. To do so, configure a normal in-memory queue and then add the <code class="literal option">queue.filename=”file_name”</code> directive to its block to define a file name for disk assistance. This queue then becomes <span class="emphasis"><em>disk-assisted</em></span>, which means it couples an in-memory queue with a disk queue to work in tandem.
					</p><p>
						The disk queue is activated if the in-memory queue is full or needs to persist after shutdown. With a disk-assisted queue, you can set both disk-specific and in-memory specific configuration parameters. This type of queue is probably the most commonly used, it is especially useful for potentially long-running and unreliable actions.
					</p><p>
						To specify the functioning of a disk-assisted in-memory queue, use the so-called watermarks:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.highwatermark=<span class="emphasis"><em>”number”</em></span>)</pre><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.lowwatermark=<span class="emphasis"><em>”number”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>object</em></span> with <code class="literal option">main_queue</code>, <code class="literal option">action</code> or <code class="literal option">ruleset</code> to use this option to the main message queue, an action queue or for the ruleset respectively. Replace <span class="emphasis"><em>number</em></span> with a number of enqueued messages. When an in-memory queue reaches the number defined by the high watermark, it starts writing messages to disk and continues until the in-memory queue size drops to the number defined with the low watermark. Correctly set watermarks minimize unnecessary disk writes, but also leave memory space for message bursts since writing to disk files is rather lengthy. Therefore, the high watermark must be lower than the whole queue capacity set with <span class="emphasis"><em>queue.size</em></span>. The difference between the high watermark and the overall queue size is a spare memory buffer reserved for message bursts. On the other hand, setting the high watermark too low will turn on disk assistance unnecessarily often.
					</p><div class="example" id="ex-net_forwarding_with_queue"><p class="title"><strong>Example&nbsp;23.12.&nbsp;Reliable Forwarding of Log Messages to a Server</strong></p><div class="example-contents"><p>
							Rsyslog is often used to maintain a centralized logging system, where log messages are forwarded to a server over the network. To avoid message loss when the server is not available, it is advisable to configure an action queue for the forwarding action. This way, messages that failed to be sent are stored locally until the server is reachable again. Note that such queues are not configurable for connections using the <code class="literal">UDP</code> protocol.
						</p><div id="proc-net_forwarding_with_queue" class="formalpara"><p class="title"><strong>Forwarding To a Single Server</strong></p><p>
								Suppose the task is to forward log messages from the system to a server with host name <span class="emphasis"><em>example.com</em></span>, and to configure an action queue to buffer the messages in case of a server outage. To do so, perform the following steps:
							</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Use the following configuration in <code class="literal">/etc/rsyslog.conf</code> or create a file with the following content in the <code class="literal">/etc/rsyslog.d/</code> directory:
								</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> action(type=”omfwd”
queue.type=”LinkedList”
queue.filename=”example_fwd”
action.resumeRetryCount="-1"
queue.saveonshutdown="on"
Target="example.com" Port="6514" Protocol="tcp")</pre><p class="simpara">
									Where:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal option">queue.type</code> enables a LinkedList in-memory queue,
										</li><li class="listitem">
											<code class="literal option">queue.filename</code> defines a disk storage, in this case the backup files are created in the <code class="literal">/var/lib/rsyslog/</code> directory with the <span class="emphasis"><em>example_fwd</em></span> prefix,
										</li><li class="listitem">
											the <code class="literal option">action.resumeRetryCount= “-1”</code> setting prevents rsyslog from dropping messages when retrying to connect if server is not responding,
										</li><li class="listitem">
											enabled <code class="literal option">queue.saveonshutdown</code> saves in-memory data if rsyslog shuts down,
										</li><li class="listitem"><p class="simpara">
											the last line forwards all received messages to the logging server using reliable TCP delivery, port specification is optional.
										</p><p class="simpara">
											With the above configuration, rsyslog keeps messages in memory if the remote server is not reachable. A file on disk is created only if rsyslog runs out of the configured memory queue space or needs to shut down, which benefits the system performance.
										</p></li></ul></div></li></ol></div><div id="proc-net_forwarding_two_servers" class="formalpara"><p class="title"><strong>Forwarding To Multiple Servers</strong></p><p>
								The process of forwarding log messages to multiple servers is similar to the previous procedure:
							</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Each destination server requires a separate forwarding rule, action queue specification, and backup file on disk. For example, use the following configuration in <code class="literal">/etc/rsyslog.conf</code> or create a file with the following content in the <code class="literal">/etc/rsyslog.d/</code> directory:
								</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> action(type=”omfwd”
    queue.type=”LinkedList”
    queue.filename=”example_fwd1”
    action.resumeRetryCount="-1"
    queue.saveonshutdown="on"
    Target="example1.com" Protocol="tcp")
<span class="strong strong"><strong>.</strong></span> action(type=”omfwd”
    queue.type=”LinkedList”
    queue.filename=”example_fwd2”
    action.resumeRetryCount="-1"
    queue.saveonshutdown="on"
    Target="example2.com" Protocol="tcp")</pre></li></ol></div></div></div></section><section class="section" id="sec-Creating_a_New_Directory_for_rsyslog_Log_Files"><div class="titlepage"><div><div><h3 class="title">23.4.2.&nbsp;Creating a New Directory for rsyslog Log Files</h3></div></div></div><p>
						Rsyslog runs as the <code class="literal">syslogd</code> daemon and is managed by SELinux. Therefore all files to which rsyslog is required to write to, must have the appropriate SELinux file context.
					</p><div class="orderedlist" id="proc-Creating_a_New_Logging_Directory"><p class="title"><strong>Creating a New Working Directory</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								If required to use a different directory to store working files, create a directory as follows:
							</p><pre class="literallayout">~]# mkdir <code class="literal">/rsyslog</code></pre></li><li class="listitem"><p class="simpara">
								Install utilities to manage SELinux policy:
							</p><pre class="literallayout">~]# yum install policycoreutils-python</pre></li><li class="listitem"><p class="simpara">
								Set the SELinux directory context type to be the same as the <code class="literal">/var/lib/rsyslog/</code> directory:
							</p><pre class="literallayout">~]# semanage fcontext -a -t syslogd_var_lib_t /rsyslog</pre></li><li class="listitem"><p class="simpara">
								Apply the SELinux context:
							</p><pre class="literallayout">~]# restorecon -R -v /rsyslog
restorecon reset /rsyslog context unconfined_u:object_r:default_t:s0-&gt;unconfined_u:object_r:syslogd_var_lib_t:s0</pre></li><li class="listitem"><p class="simpara">
								If required, check the SELinux context as follows:
							</p><pre class="literallayout">~]# ls -Zd /rsyslog
drwxr-xr-x. root root system_u:object_r:syslogd_var_lib_t:s0  /rsyslog</pre></li><li class="listitem"><p class="simpara">
								Create subdirectories as required. For example:
							</p><pre class="literallayout">~]# mkdir <code class="literal">/rsyslog/work/</code></pre><p class="simpara">
								The subdirectories will be created with the same SELinux context as the parent directory.
							</p></li><li class="listitem"><p class="simpara">
								Add the following line in <code class="literal">/etc/rsyslog.conf</code> immediately before it is required to take effect:
							</p><pre class="literallayout">global(workDirectory=”/rsyslog/work”)</pre><p class="simpara">
								This setting will remain in effect until the next <code class="literal command">WorkDirectory</code> directive is encountered while parsing the configuration files.
							</p></li></ol></div></section><section class="section" id="s2-managing_queues"><div class="titlepage"><div><div><h3 class="title">23.4.3.&nbsp;Managing Queues</h3></div></div></div><p>
						All types of queues can be further configured to match your requirements. You can use several directives to modify both action queues and the main message queue. Currently, there are more than 20 queue parameters available, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Log_Files-Resources-Online" title="Online Documentation">the section called “Online Documentation”</a>. Some of these settings are used commonly, others, such as worker thread management, provide closer control over the queue behavior and are reserved for advanced users. With advanced settings, you can optimize <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>'s performance, schedule queuing, or modify the behavior of a queue on system shutdown.
					</p><h5 id="br-limiting_queue_size">Limiting Queue Size</h5><p>
						You can limit the number of messages that queue can contain with the following setting:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.highwatermark=<span class="emphasis"><em>”number”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>object</em></span> with <code class="literal option">main_queue</code>, <code class="literal option">action</code> or <code class="literal option">ruleset</code> to use this option to the main message queue, an action queue or for the ruleset respectively. Replace <span class="emphasis"><em>number</em></span> with a number of enqueued messages. You can set the queue size only as the number of messages, not as their actual memory size. The default queue size is 10,000 messages for the main message queue and ruleset queues, and 1000 for action queues.
					</p><p>
						Disk assisted queues are unlimited by default and cannot be restricted with this directive, but you can reserve them physical disk space in bytes with the following settings:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.maxdiskspace=<span class="emphasis"><em>”number”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>object</em></span> with <code class="literal option">main_queue</code>, <code class="literal option">action</code> or <code class="literal option">ruleset</code>. When the size limit specified by number is hit, messages are discarded until sufficient amount of space is freed by dequeued messages.
					</p><h5 id="br-discarding_messages">Discarding Messages</h5><p>
						When a queue reaches a certain number of messages, you can discard less important messages in order to save space in the queue for entries of higher priority. The threshold that launches the discarding process can be set with the so-called <span class="emphasis"><em>discard mark</em></span>:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.discardmark=<span class="emphasis"><em>”number”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>object</em></span> with <code class="literal option">MainMsg</code> or with <code class="literal option">Action</code> to use this option to the main message queue or for an action queue respectively. Here, <span class="emphasis"><em>number</em></span> stands for a number of messages that have to be in the queue to start the discarding process. To define which messages to discard, use:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.discardseverity=<span class="emphasis"><em>”number”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>number</em></span> with one of the following numbers for respective priorities: <code class="literal command">7</code> (debug), <code class="literal command">6</code> (info), <code class="literal command">5</code> (notice), <code class="literal command">4</code> (warning), <code class="literal command">3</code> (err), <code class="literal command">2</code> (crit), <code class="literal command">1</code> (alert), or <code class="literal command">0</code> (emerg). With this setting, both newly incoming and already queued messages with lower than defined priority are erased from the queue immediately after the discard mark is reached.
					</p><h5 id="br-using_timeframes">Using Timeframes</h5><p>
						You can configure <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> to process queues during a specific time period. With this option you can, for example, transfer some processing into off-peak hours. To define a time frame, use the following syntax:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.dequeuetimebegin=<span class="emphasis"><em>”hour”</em></span>)</pre><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.dequeuetimeend=<span class="emphasis"><em>”hour”</em></span>)</pre><p>
						With <span class="emphasis"><em>hour</em></span> you can specify hours that bound your time frame. Use the 24-hour format without minutes.
					</p><h5 id="br-configuring_worker_threads">Configuring Worker Threads</h5><p>
						A <span class="emphasis"><em>worker thread</em></span> performs a specified action on the enqueued message. For example, in the main message queue, a worker task is to apply filter logic to each incoming message and enqueue them to the relevant action queues. When a message arrives, a worker thread is started automatically. When the number of messages reaches a certain number, another worker thread is turned on. To specify this number, use:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.workerthreadminimummessages=<span class="emphasis"><em>”number”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>number</em></span> with a number of messages that will trigger a supplemental worker thread. For example, with <span class="emphasis"><em>number</em></span> set to 100, a new worker thread is started when more than 100 messages arrive. When more than 200 messages arrive, the third worker thread starts and so on. However, too many working threads running in parallel becomes ineffective, so you can limit the maximum number of them by using:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.workerthreads=<span class="emphasis"><em>”number”</em></span>)</pre><p>
						where <span class="emphasis"><em>number</em></span> stands for a maximum number of working threads that can run in parallel. For the main message queue, the default limit is 1 thread. Once a working thread has been started, it keeps running until an inactivity timeout appears. To set the length of timeout, type:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.timeoutworkerthreadshutdown=<span class="emphasis"><em>”time”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>time</em></span> with the duration set in milliseconds. Specifies time without new messages after which the worker thread will be closed. Default setting is one minute.
					</p><h5 id="br-batch_dequeuing">Batch Dequeuing</h5><p>
						To increase performance, you can configure <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> to dequeue multiple messages at once. To set the upper limit for such dequeueing, use:
					</p><pre class="literallayout">$<span class="emphasis"><em>object</em></span>(queue.DequeueBatchSize= <span class="emphasis"><em>”number”</em></span>)</pre><p>
						Replace <span class="emphasis"><em>number</em></span> with the maximum number of messages that can be dequeued at once. Note that a higher setting combined with a higher number of permitted working threads results in greater memory consumption.
					</p><h5 id="br-terminating_queues">Terminating Queues</h5><p>
						When terminating a queue that still contains messages, you can try to minimize the data loss by specifying a time interval for worker threads to finish the queue processing:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.timeoutshutdown=<span class="emphasis"><em>”time”</em></span>)</pre><p>
						Specify <span class="emphasis"><em>time</em></span> in milliseconds. If after that period there are still some enqueued messages, workers finish the current data element and then terminate. Unprocessed messages are therefore lost. Another time interval can be set for workers to finish the final element:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.timeoutactioncompletion=<span class="emphasis"><em>”time”</em></span>)</pre><p>
						In case this timeout expires, any remaining workers are shut down. To save data at shutdown, use:
					</p><pre class="literallayout"><span class="emphasis"><em>object</em></span>(queue.saveonshutdown=<span class="emphasis"><em>”on”</em></span>)</pre><p>
						If set, all queue elements are saved to disk before <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> terminates.
					</p></section><section class="section" id="sec-Using_the_New_Syntax_for_rsyslog_queues"><div class="titlepage"><div><div><h3 class="title">23.4.4.&nbsp;Using the New Syntax for rsyslog queues</h3></div></div></div><p>
						In the new syntax available in rsyslog 7, queues are defined inside the <code class="literal">action()</code> object that can be used both separately or inside a ruleset in <code class="literal">/etc/rsyslog.conf</code>. The format of an action queue is as follows:
					</p><pre class="literallayout">action(type="<span class="emphasis"><em>action_type</em></span> "queue.size="<span class="emphasis"><em>queue_size</em></span>" queue.type="<span class="emphasis"><em>queue_type</em></span>" queue.filename="<span class="emphasis"><em>file_name</em></span>"</pre><p>
						Replace <span class="emphasis"><em>action_type</em></span> with the name of the module that is to perform the action and replace <span class="emphasis"><em>queue_size</em></span> with a maximum number of messages the queue can contain. For <span class="emphasis"><em>queue_type</em></span>, choose <code class="literal">disk</code> or select from one of the in-memory queues: <code class="literal">direct</code>, <code class="literal">linkedlist</code> or <code class="literal">fixedarray</code>. For <span class="emphasis"><em>file_name</em></span> specify only a file name, not a path. Note that if creating a new directory to hold log files, the SELinux context must be set. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Creating_a_New_Directory_for_rsyslog_Log_Files" title="23.4.2. Creating a New Directory for rsyslog Log Files">Section&nbsp;23.4.2, “Creating a New Directory for rsyslog Log Files”</a> for an example.
					</p><div class="example" id="ex-defining_an_action_queue"><p class="title"><strong>Example&nbsp;23.13.&nbsp;Defining an Action Queue</strong></p><div class="example-contents"><p>
							To configure the output action with an asynchronous linked-list based action queue which can hold a maximum of 10,000 messages, enter a command as follows:
						</p><pre class="literallayout">action(type="omfile" queue.size="10000" queue.type="linkedlist" queue.filename="logfile")</pre></div></div><p>
						The rsyslog 7 syntax for a direct action queues is as follows:
					</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> action(type="omfile" file="/var/lib/rsyslog/<span class="emphasis"><em>log_file</em></span>
   )</pre><p>
						The rsyslog 7 syntax for an action queue with multiple parameters can be written as follows:
					</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> action(type="omfile"
       queue.filename="<span class="emphasis"><em>log_file</em></span>"
       queue.type="linkedlist"
       queue.size="10000"
   )</pre><p>
						The default work directory, or the last work directory to be set, will be used. If required to use a different work directory, add a line as follows before the action queue:
					</p><pre class="literallayout">global(workDirectory="<span class="emphasis"><em>/directory</em></span>")</pre><div class="example" id="exam-Forwarding_To_a_Single_Server_Using_the_New_Syntax"><p class="title"><strong>Example&nbsp;23.14.&nbsp;Forwarding To a Single Server Using the New Syntax</strong></p><div class="example-contents"><p>
							The following example is based on the procedure <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#proc-net_forwarding_with_queue" title="Forwarding To a Single Server">Forwarding To a Single Server</a> in order to show the difference between the traditional sysntax and the rsyslog 7 syntax. The <code class="literal">omfwd</code> plug-in is used to provide forwarding over <code class="literal">UDP</code> or <code class="literal">TCP</code>. The default is <code class="literal">UDP</code>. As the plug-in is built in it does not have to be loaded.
						</p><p>
							Use the following configuration in <code class="literal">/etc/rsyslog.conf</code> or create a file with the following content in the <code class="literal">/etc/rsyslog.d/</code> directory:
						</p><pre class="literallayout"><span class="strong strong"><strong>.</strong></span> action(type="omfwd"
   queue.type="linkedlist"
   queue.filename="example_fwd"
   action.resumeRetryCount="-1"
   queue.saveOnShutdown="on"
   target="example.com" port="6514" protocol="tcp"
   )</pre><p>
							Where:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">queue.type="linkedlist"</code> enables a LinkedList in-memory queue,
								</li><li class="listitem">
									<code class="literal option">queue.filename</code> defines a disk storage. The backup files are created with the <span class="emphasis"><em>example_fwd</em></span> prefix, in the working directory specified by the preceding global <code class="literal command">workDirectory</code> directive,
								</li><li class="listitem">
									the <code class="literal option">action.resumeRetryCount -1</code> setting prevents rsyslog from dropping messages when retrying to connect if server is not responding,
								</li><li class="listitem">
									enabled <code class="literal option">queue.saveOnShutdown="on"</code> saves in-memory data if rsyslog shuts down,
								</li><li class="listitem">
									the last line forwards all received messages to the logging server, port specification is optional.
								</li></ul></div></div></div></section></section><section class="section" id="s1-configuring_rsyslog_on_a_logging_server"><div class="titlepage"><div><div><h2 class="title">23.5.&nbsp;Configuring rsyslog on a Logging Server</h2></div></div></div><p>
					The <code class="literal">rsyslog</code> service provides facilities both for running a logging server and for configuring individual systems to send their log files to the logging server. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-net_forwarding_with_queue" title="Example 23.12. Reliable Forwarding of Log Messages to a Server">Example&nbsp;23.12, “Reliable Forwarding of Log Messages to a Server”</a> for information on client <code class="literal">rsyslog</code> configuration.
				</p><p>
					The <code class="literal">rsyslog</code> service must be installed on the system that you intend to use as a logging server and all systems that will be configured to send logs to it. Rsyslog is installed by default in Red Hat Enterprise Linux 7. If required, to ensure that it is, enter the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# yum install rsyslog</pre><p>
					The default protocol and port for syslog traffic is <code class="literal">UDP</code> and <code class="literal">514</code>, as listed in the <code class="literal">/etc/services</code> file. However, <code class="literal">rsyslog</code> defaults to using <code class="literal">TCP</code> on port <code class="literal">514</code>. In the configuration file, <code class="literal">/etc/rsyslog.conf</code>, <code class="literal">TCP</code> is indicated by <code class="literal">@@</code>.
				</p><p>
					Other ports are sometimes used in examples, however SELinux is only configured to allow sending and receiving on the following ports by default:
				</p><pre class="literallayout">~]# semanage port -l | grep syslog
syslog_tls_port_t       tcp   6514, 10514
syslog_tls_port_t       udp   6514, 10514
syslogd_port_t         tcp   601, 20514
syslogd_port_t         udp   514, 601, 20514</pre><p>
					The <code class="literal command">semanage</code> utility is provided as part of the <span class="strong strong"><strong><span class="package package">policycoreutils-python</span></strong></span> package. If required, install the package as follows:
				</p><pre class="literallayout">~]# yum install policycoreutils-python</pre><p>
					In addition, by default the SELinux type for <code class="literal">rsyslog</code>, <code class="literal">rsyslogd_t</code>, is configured to permit sending and receiving to the remote shell (<code class="literal">rsh</code>) port with SELinux type <code class="literal">rsh_port_t</code>, which defaults to <code class="literal">TCP</code> on port <code class="literal">514</code>. Therefore it is not necessary to use <code class="literal command">semanage</code> to explicitly permit <code class="literal">TCP</code> on port <code class="literal">514</code>. For example, to check what SELinux is set to permit on port <code class="literal">514</code>, enter a command as follows:
				</p><pre class="literallayout">~]# semanage port -l | grep 514
<span class="emphasis"><em>output omitted</em></span>
rsh_port_t           tcp   514
syslogd_port_t         tcp   6514, 601
syslogd_port_t         udp   514, 6514, 601</pre><p>
					For more information on SELinux, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/SELinux_Users_and_Administrators_Guide/index.html">Red Hat Enterprise Linux 7 SELinux User’s and Administrator’s Guide</a></span></em></span>.
				</p><p>
					Perform the steps in the following procedures on the system that you intend to use as your logging server. All steps in these procedure must be made as the <code class="literal">root</code> user.
				</p><div id="proc-Configure_SELinux_to_Permit_rsyslog_Traffic_on_a_Port" class="formalpara"><p class="title"><strong>Configure SELinux to Permit rsyslog Traffic on a Port</strong></p><p>
						If required to use a new port for <code class="literal">rsyslog</code> traffic, follow this procedure on the logging server and the clients. For example, to send and receive <code class="literal">TCP</code> traffic on port <code class="literal">10514</code>, proceed with the following sequence of commands:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">semanage port</code> command with the following parameters:
						</p><pre class="literallayout">~]# semanage port -a -t syslogd_port_t -p tcp 10514</pre></li><li class="listitem"><p class="simpara">
							Review the SELinux ports by entering the following command:
						</p><pre class="literallayout">~]# semanage port -l | grep syslog</pre></li><li class="listitem"><p class="simpara">
							If the new port was already configured in <code class="literal">/etc/rsyslog.conf</code>, restart <code class="literal">rsyslog</code> now for the change to take effect:
						</p><pre class="literallayout">~]# service rsyslog restart</pre></li><li class="listitem"><p class="simpara">
							Verify which ports <code class="literal">rsyslog</code> is now listening to:
						</p><pre class="literallayout">~]# netstat -tnlp | grep rsyslog
tcp    0   0 0.0.0.0:<span class="emphasis"><em>10514</em></span>      0.0.0.0:*  LISTEN   2528/rsyslogd
tcp    0   0 :::10514        :::*    LISTEN   2528/rsyslogd</pre></li></ol></div><p>
					See the <code class="literal">semanage-port(8)</code> manual page for more information on the <code class="literal command">semanage port</code> command.
				</p><div id="proc-Configuring_firewalld" class="formalpara"><p class="title"><strong>Configuring firewalld</strong></p><p>
						Configure <code class="literal">firewalld</code> to allow incoming <code class="literal">rsyslog</code> traffic. For example, to allow <code class="literal">TCP</code> traffic on port <code class="literal">10514</code>, proceed as follows:
					</p></div><pre class="literallayout">~]# firewall-cmd --zone=zone --add-port=10514/tcp
success</pre><p>
					+ Where <span class="emphasis"><em>zone</em></span> is the zone of the interface to use. Note that these changes will not persist after the next system start. To make permanent changes to the firewall, repeat the commands adding the <code class="literal option">--permanent</code> option. For more information on opening and closing ports in <code class="literal">firewalld</code>, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/">Red Hat Enterprise Linux 7 Security Guide</a>.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To verify the above settings, use a command as follows:
						</p><pre class="literallayout">~]# firewall-cmd --list-all
public (default, active)
 interfaces: eth0
 sources:
 services: dhcpv6-client ssh
 <span class="emphasis"><em>ports: 10514/tcp</em></span>
 masquerade: no
 forward-ports:
 icmp-blocks:
 rich rules:</pre></li></ol></div><div class="orderedlist" id="proc-Configuring_rsyslog_to_Receive_and_Sort_Remote_Log_Messages"><p class="title"><strong>Configuring rsyslog to Receive and Sort Remote Log Messages</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open the <code class="literal">/etc/rsyslog.conf</code> file in a text editor and proceed as follows:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Add these lines below the modules section but above the <code class="literal">Provides UDP syslog reception</code> section:
								</p><pre class="literallayout"># Define templates before the rules that use them

<span class="marked marked"># Per-Host Templates for Remote Systems </span>#
$template TmplAuthpriv, "/var/log/remote/auth/%HOSTNAME%/%PROGRAMNAME:::secpath-replace%.log"
$template TmplMsg, "/var/log/remote/msg/%HOSTNAME%/%PROGRAMNAME:::secpath-replace%.log"</pre></li><li class="listitem"><p class="simpara">
									Replace the default <code class="literal">Provides TCP syslog reception</code> section with the following:
								</p><pre class="literallayout"># Provides TCP syslog reception
$ModLoad imtcp
# Adding this ruleset to process remote messages
$RuleSet remote1
authpriv.*  ?TmplAuthpriv
*.info;mail.none;authpriv.none;cron.none  ?TmplMsg
$RuleSet RSYSLOG_DefaultRuleset  #End the rule set by switching back to the default rule set
$InputTCPServerBindRuleset remote1 #Define a new input and bind it to the "remote1" rule set
$InputTCPServerRun 10514</pre><p class="simpara">
									Save the changes to the <code class="literal">/etc/rsyslog.conf</code> file.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							The <code class="literal">rsyslog</code> service must be running on both the logging server and the systems attempting to log to it.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Use the <code class="literal command">systemctl</code> command to start the <code class="literal">rsyslog</code> service.
								</p><pre class="literallayout">~]# <code class="literal">systemctl start rsyslog</code></pre></li><li class="listitem"><p class="simpara">
									To ensure the <code class="literal">rsyslog</code> service starts automatically in future, enter the following command as root:
								</p><pre class="literallayout">~]# <code class="literal">systemctl enable rsyslog</code></pre></li></ol></div></li></ol></div><p>
					Your log server is now configured to receive and store log files from the other systems in your environment.
				</p><section class="section" id="sec-Using_The_New_Template_Syntax_on_a_Logging_Server"><div class="titlepage"><div><div><h3 class="title">23.5.1.&nbsp;Using The New Template Syntax on a Logging Server</h3></div></div></div><p>
						Rsyslog 7 has a number of different templates styles. The string template most closely resembles the legacy format. Reproducing the templates from the example above using the string format would look as follows:
					</p><pre class="literallayout">template(name="TmplAuthpriv" type="string"
     string="/var/log/remote/auth/%HOSTNAME%/%PROGRAMNAME:::secpath-replace%.log"
    )

template(name="TmplMsg" type="string"
     string="/var/log/remote/msg/%HOSTNAME%/%PROGRAMNAME:::secpath-replace%.log"
    )</pre><p>
						These templates can also be written in the list format as follows:
					</p><pre class="literallayout">template(name="TmplAuthpriv" type="list") {
  constant(value="/var/log/remote/auth/")
  property(name="hostname")
  constant(value="/")
  property(name="programname" SecurePath="replace")
  constant(value=".log")
  }

template(name="TmplMsg" type="list") {
  constant(value="/var/log/remote/msg/")
  property(name="hostname")
  constant(value="/")
  property(name="programname" SecurePath="replace")
  constant(value=".log")
  }</pre><p>
						This template text format might be easier to read for those new to rsyslog and therefore can be easier to adapt as requirements change.
					</p><p>
						To complete the change to the new syntax, we need to reproduce the module load command, add a rule set, and then bind the rule set to the protocol, port, and ruleset:
					</p><pre class="literallayout">module(load="imtcp")

ruleset(name="remote1"){
   authpriv.*  action(type="omfile" DynaFile="TmplAuthpriv")
   *.info;mail.none;authpriv.none;cron.none action(type="omfile" DynaFile="TmplMsg")
}

input(type="imtcp" port="10514" ruleset="remote1")</pre></section></section><section class="section" id="s1-using_rsyslog_modules"><div class="titlepage"><div><div><h2 class="title">23.6.&nbsp;Using Rsyslog Modules</h2></div></div></div><p>
					Due to its modular design, <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> offers a variety of <span class="emphasis"><em>modules</em></span> which provide additional functionality. Note that modules can be written by third parties. Most modules provide additional inputs (see <span class="emphasis"><em>Input Modules</em></span> below) or outputs (see <span class="emphasis"><em>Output Modules</em></span> below). Other modules provide special functionality specific to each module. The modules may provide additional configuration directives that become available after a module is loaded. To load a module, use the following syntax:
				</p><pre class="literallayout">module(load=”<span class="emphasis"><em>MODULE</em></span>”)</pre><p>
					where <span class="emphasis"><em>MODULE</em></span> represents your desired module. For example, if you want to load the Text File Input Module (<code class="literal command">imfile</code>) that enables <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> to convert any standard text files into syslog messages, specify the following line in the <code class="literal">/etc/rsyslog.conf</code> configuration file:
				</p><pre class="literallayout">module(load=”imfile”)</pre><p>
					<span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> offers a number of modules which are split into the following main categories:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Input Modules — Input modules gather messages from various sources. The name of an input module always starts with the <code class="literal">im</code> prefix, such as <code class="literal command">imfile</code> and <code class="literal command">imjournal</code>.
						</li><li class="listitem">
							Output Modules — Output modules provide a facility to issue message to various targets such as sending across a network, storing in a database, or encrypting. The name of an output module always starts with the <code class="literal">om</code> prefix, such as <code class="literal command">omsnmp</code>, <code class="literal command">omrelp</code>, and so on.
						</li><li class="listitem">
							Parser Modules — These modules are useful in creating custom parsing rules or to parse malformed messages. With moderate knowledge of the C programming language, you can create your own message parser. The name of a parser module always starts with the <code class="literal">pm</code> prefix, such as <code class="literal command">pmrfc5424</code>, <code class="literal command">pmrfc3164</code>, and so on.
						</li><li class="listitem">
							Message Modification Modules — Message modification modules change content of syslog messages. Names of these modules start with the <code class="literal">mm</code> prefix. Message Modification Modules such as <code class="literal command">mmanon</code>, <code class="literal command">mmnormalize</code>, or <code class="literal command">mmjsonparse</code> are used for anonymization or normalization of messages.
						</li><li class="listitem">
							String Generator Modules — String generator modules generate strings based on the message content and strongly cooperate with the template feature provided by <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>. For more information on templates, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Templates" title="23.2.3. Templates">Section&nbsp;23.2.3, “Templates”</a>. The name of a string generator module always starts with the <code class="literal">sm</code> prefix, such as <code class="literal command">smfile</code> or <code class="literal command">smtradfile</code>.
						</li><li class="listitem">
							Library Modules — Library modules provide functionality for other loadable modules. These modules are loaded automatically by <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> when needed and cannot be configured by the user.
						</li></ul></div><p>
					A comprehensive list of all available modules and their detailed description can be found at <a class="link" href="http://www.rsyslog.com/doc/rsyslog_conf_modules.html/">http://www.rsyslog.com/doc/rsyslog_conf_modules.html</a>.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Note that when <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> loads any modules, it provides them with access to some of its functions and data. This poses a possible security threat. To minimize security risks, use trustworthy modules only.
					</p></div></div><section class="section" id="s2-importing_text_files"><div class="titlepage"><div><div><h3 class="title">23.6.1.&nbsp;Importing Text Files</h3></div></div></div><p>
						The Text File Input Module, abbreviated as <code class="literal command">imfile</code>, enables <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> to convert any text file into a stream of syslog messages. You can use <code class="literal command">imfile</code> to import log messages from applications that create their own text file logs. To load <code class="literal command">imfile</code>, add the following into <code class="literal">/etc/rsyslog.conf</code>:
					</p><pre class="literallayout">    module(load=”imfile”
    				PollingInterval=”int”)</pre><p>
						It is sufficient to load <code class="literal command">imfile</code> once, even when importing multiple files. The <span class="emphasis"><em>PollingInterval</em></span> module argument specifies how often <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> checks for changes in connected text files. The default interval is 10 seconds, to change it, replace <span class="emphasis"><em>int</em></span> with a time interval specified in seconds.
					</p><p>
						To identify the text files to import, use the following syntax in <code class="literal">/etc/rsyslog.conf</code>:
					</p><pre class="literallayout"># File 1
input(type="imfile"
   File="path_to_file"
   Tag="tag:"
   Severity="severity"
   Facility="facility")

# File 2
input(type="imfile"
   File="path_to_file2")
...</pre><p>
						Settings required to specify an input text file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								replace <span class="emphasis"><em>path_to_file</em></span> with a path to the text file.
							</li><li class="listitem">
								replace <span class="emphasis"><em>tag:</em></span> with a tag name for this message.
							</li></ul></div><p>
						Apart from the required directives, there are several other settings that can be applied on the text input. Set the severity of imported messages by replacing <span class="emphasis"><em>severity</em></span> with an appropriate keyword. Replace <span class="emphasis"><em>facility</em></span> with a keyword to define the subsystem that produced the message. The keywords for severity and facility are the same as those used in facility/priority-based filters, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-Filters" title="23.2.1. Filters">Section&nbsp;23.2.1, “Filters”</a>.
					</p><div class="example" id="ex-importing_text_files"><p class="title"><strong>Example&nbsp;23.15.&nbsp;Importing Text Files</strong></p><div class="example-contents"><p>
							The Apache HTTP server creates log files in text format. To apply the processing capabilities of <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> to apache error messages, first use the <code class="literal command">imfile</code> module to import the messages. Add the following into <code class="literal">/etc/rsyslog.conf</code>:
						</p><pre class="literallayout">module(load=”imfile”)
input(type="imfile"
   File="/var/log/httpd/error_log"
   Tag="apache-error:")</pre></div></div></section><section class="section" id="s2-exporting_messages_to_a_database"><div class="titlepage"><div><div><h3 class="title">23.6.2.&nbsp;Exporting Messages to a Database</h3></div></div></div><p>
						Processing of log data can be faster and more convenient when performed in a database rather than with text files. Based on the type of DBMS used, choose from various output modules such as <code class="literal command">ommysql</code>, <code class="literal command">ompgsql</code>, <code class="literal command">omoracle</code>, or <code class="literal command">ommongodb</code>. As an alternative, use the generic <code class="literal command">omlibdbi</code> output module that relies on the <code class="literal">libdbi</code> library. The <code class="literal command">omlibdbi</code> module supports database systems Firebird/Interbase, MS SQL, Sybase, SQLite, Ingres, Oracle, mSQL, MySQL, and PostgreSQL.
					</p><div class="example" id="ex-exporting_rsyslog_messages_to_a_database"><p class="title"><strong>Example&nbsp;23.16.&nbsp;Exporting Rsyslog Messages to a Database</strong></p><div class="example-contents"><p>
							To store the rsyslog messages in a MySQL database, add the following into <code class="literal">/etc/rsyslog.conf</code>:
						</p><pre class="literallayout">module(load=”ommysql”)

<span class="strong strong"><strong>.</strong></span> action(type”ommysql”
server=”database-server”
db=”database-name”
uid=”database-userid”
pwd=”database-password”
serverport=”1234”)</pre><p>
							First, the output module is loaded, then the communication port is specified. Additional information, such as name of the server and the database, and authentication data, is specified on the last line of the above example.
						</p></div></div></section><section class="section" id="s2-enabling_encrypted_transport"><div class="titlepage"><div><div><h3 class="title">23.6.3.&nbsp;Enabling Encrypted Transport</h3></div></div></div><p>
						Confidentiality and integrity in network transmissions can be provided by either the <span class="emphasis"><em>TLS</em></span> or <span class="emphasis"><em>GSSAPI</em></span> encryption protocol.
					</p><p>
						<span class="emphasis"><em>Transport Layer Security</em></span> (TLS) is a cryptographic protocol designed to provide communication security over the network. When using TLS, <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> messages are encrypted before sending, and mutual authentication exists between the sender and receiver. For configuring TLS, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#br-using_TLS" title="Configuring Encrypted Message Transfer with TLS">the section called “Configuring Encrypted Message Transfer with TLS”</a>.
					</p><p>
						<span class="emphasis"><em>Generic Security Service API</em></span> (GSSAPI) is an application programming interface for programs to access security services. To use it in connection with <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> you must have a functioning <span class="strong strong"><strong><span class="application application">Kerberos</span></strong></span> environment. For configuring GSSAPI, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-using_GSSAPI" title="Configuring Encrypted Message Transfer with GSSAPI">the section called “Configuring Encrypted Message Transfer with GSSAPI”</a>.
					</p><h5 id="br-using_TLS">Configuring Encrypted Message Transfer with TLS</h5><p>
						To use encrypted transport through TLS, you need to configure both the server and the client.
					</p><div class="orderedlist" id="proc-configuring_encrypted_message_transfer_with_tls"><ol class="orderedlist" type="1"><li class="listitem">
								Create public key, private key and certificate file, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-mod_ssl-genkey" title="14.1.11. Generating a New Key and Certificate">Section&nbsp;14.1.11, “Generating a New Key and Certificate”</a>.
							</li><li class="listitem"><p class="simpara">
								On the <span class="emphasis"><em>server</em></span> side, configure the following in the <code class="literal">/etc/rsyslog.conf</code> configuration file:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Set the gtls netstream driver as the default driver:
									</p><pre class="literallayout">global(defaultnetstreamdriver="gtls")</pre></li><li class="listitem"><p class="simpara">
										Provide paths to certificate files:
									</p><pre class="literallayout">global(defaultnetstreamdrivercafile="path_ca.pem"
defaultnetstreamdrivercertfile="path_cert.pem"
defaultnetstreamdriverkeyfile="path_key.pem")</pre><p class="simpara">
										You can merge all global directives into single block if you prefer a less cluttered configuration file.
									</p><p class="simpara">
										Replace:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<span class="emphasis"><em>path_ca.pem</em></span> with a path to your public key
											</li><li class="listitem">
												<span class="emphasis"><em>path_cert.pem</em></span> with a path to the certificate file
											</li><li class="listitem">
												<span class="emphasis"><em>path_key.pem</em></span> with a path to the private key
											</li></ul></div></li><li class="listitem"><p class="simpara">
										Load the imtcp moduleand set driver options:
									</p><pre class="literallayout">module(load=”imtcp”
StreamDriver.Mode=“number”
StreamDriver.AuthMode=”anon”)</pre></li><li class="listitem"><p class="simpara">
										Start a server:
									</p><pre class="literallayout">input(type="imtcp" port="port″)</pre><p class="simpara">
										Replace:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<span class="emphasis"><em>number</em></span> to specify the driver mode. To enable TCP-only mode, use <code class="literal">1</code>
											</li><li class="listitem"><p class="simpara">
												<span class="emphasis"><em>port</em></span> with the port number at which to start a listener, for example <code class="literal">10514</code>
											</p><p class="simpara">
												The <code class="literal">anon</code> setting means that the client is not authenticated.
											</p></li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
								On the <span class="emphasis"><em>client</em></span> side, configure the following in the <code class="literal">/etc/rsyslog.conf</code> configuration file:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Load the public key:
									</p><pre class="literallayout">global(defaultnetstreamdrivercafile="path_ca.pem")</pre><p class="simpara">
										Replace <span class="emphasis"><em>path_ca.pem</em></span> with a path to the public key.
									</p></li><li class="listitem"><p class="simpara">
										Set the gtls netstream driver as the default driver:
									</p><pre class="literallayout"> global(defaultnetstreamdriver="gtls")</pre></li><li class="listitem"><p class="simpara">
										Configure the driver and specify what action will be performed:
									</p><pre class="literallayout">module(load=”imtcp”
  streamdrivermode=”number”
  streamdriverauthmode=”anon”)
input(type=”imtcp”
  address=”server.net”
  port=”port”)</pre><p class="simpara">
										Replace <span class="emphasis"><em>number</em></span>, <span class="emphasis"><em>anon</em></span>, and <span class="emphasis"><em>port</em></span> with the same values as on the server.
									</p><p class="simpara">
										On the last line in the above listing, an example action forwards messages from the server to the specified TCP port.
									</p></li></ol></div></li></ol></div><h5 id="s3-using_GSSAPI">Configuring Encrypted Message Transfer with GSSAPI</h5><p>
						In <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>, interaction with GSSAPI is provided by the <span class="emphasis"><em>imgssapi</em></span> module. To turn on the GSSAPI transfer mode:
					</p><div class="orderedlist" id="proc-using_GSSAPI"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Put the following configuration in <code class="literal">/etc/rsyslog.conf</code>:
							</p><pre class="literallayout">$ModLoad imgssapi</pre><p class="simpara">
								This directive loads the imgssapi module.
							</p></li><li class="listitem"><p class="simpara">
								Specify the input as follows:
							</p><pre class="literallayout">$InputGSSServerServiceName <span class="emphasis"><em>name</em></span>
$InputGSSServerPermitPlainTCP <code class="literal">on</code>
$InputGSSServerMaxSessions <span class="emphasis"><em>number</em></span>
$InputGSSServerRun <span class="emphasis"><em>port</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Replace <span class="emphasis"><em>name</em></span> with the name of the GSS server.
									</li><li class="listitem">
										Replace <span class="emphasis"><em>number</em></span> to set the maximum number of sessions supported. This number is not limited by default.
									</li><li class="listitem"><p class="simpara">
										Replace <span class="emphasis"><em>port</em></span> with a selected port on which you want to start a GSS server.
									</p><p class="simpara">
										The <code class="literal">$InputGSSServerPermitPlainTCP on</code> setting permits the server to receive also plain TCP messages on the same port. This is off by default.
									</p></li></ul></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">imgssapi</code> module is initialized as soon as the configuration file reader encounters the $InputGSSServerRun directive in the <code class="literal">/etc/rsyslog.conf</code> configuration file. The supplementary options configured after $InputGSSServerRun are therefore ignored. For configuration to take effect, all imgssapi configuration options must be placed before $InputGSSServerRun.
						</p></div></div><div class="example" id="ex-using_GSSAPI"><p class="title"><strong>Example&nbsp;23.17.&nbsp;Using GSSAPI</strong></p><div class="example-contents"><p>
							The following configuration enables a GSS server on the port 1514 that also permits to receive plain tcp syslog messages on the same port.
						</p><pre class="literallayout">$ModLoad imgssapi
$InputGSSServerPermitPlainTCP on
$InputGSSServerRun 1514</pre></div></div></section><section class="section" id="s2-using_RELP"><div class="titlepage"><div><div><h3 class="title">23.6.4.&nbsp;Using RELP</h3></div></div></div><p>
						<span class="emphasis"><em>Reliable Event Logging Protocol</em></span> (RELP) is a networking protocol for data logging in computer networks. It is designed to provide reliable delivery of event messages, which makes it useful in environments where message loss is not acceptable.
					</p><h5 id="configuring_relp">Configuring RELP</h5><p>
						To configure RELP, you need to configure both the server and the client using the <code class="literal">/etc/rsyslog.conf</code> file.
					</p><div class="orderedlist" id="proc-using_RELP"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To configure the client:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Load the required modules:
									</p><pre class="literallayout">module(load="imuxsock")
module(load="omrelp")
module(load="imtcp")</pre></li><li class="listitem"><p class="simpara">
										Configure the TCP input as follows:
									</p><pre class="literallayout">input(type="imtcp" port="<span class="emphasis"><em>port</em></span>″)</pre><p class="simpara">
										Replace <span class="emphasis"><em>port</em></span> to start a listener at the required port.
									</p></li><li class="listitem"><p class="simpara">
										Configure the transport settings:
									</p><pre class="literallayout">action(type="omrelp" target="<span class="emphasis"><em>target_IP</em></span>″ port="<span class="emphasis"><em>target_port</em></span>″)</pre><p class="simpara">
										Replace <span class="emphasis"><em>target_IP</em></span> and <span class="emphasis"><em>target_port</em></span> with the IP address and port that identify the target server.
									</p></li></ol></div></li><li class="listitem"><p class="simpara">
								To configure the server:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Configure loading the module:
									</p><pre class="literallayout">module(load="imuxsock")
module(load="imrelp" ruleset="relp")</pre></li><li class="listitem"><p class="simpara">
										Configure the TCP input similarly to the client configuration:
									</p><pre class="literallayout">input(type="imrelp" port="<span class="emphasis"><em>target_port</em></span>″)</pre><p class="simpara">
										Replace <span class="emphasis"><em>target_port</em></span> with the same value as on the clients.
									</p></li><li class="listitem"><p class="simpara">
										Configure the rules and choose an action to be performed. In the following example, <span class="emphasis"><em>log_path</em></span> specifies the path for storing messages:
									</p><pre class="literallayout">ruleset (name="relp") {
action(type="omfile" file="<span class="emphasis"><em>log_path</em></span>")
}</pre></li></ol></div></li></ol></div><h5 id="configuring_relp_with_tls">Configuring RELP with TLS</h5><p>
						To configure RELP with TLS, you need to configure authentication. Then, you need to configure both the server and the client using the <code class="literal">/etc/rsyslog.conf</code> file.
					</p><div class="orderedlist" id="proc-using_RELP_with_TLS"><ol class="orderedlist" type="1"><li class="listitem">
								Create public key, private key and certificate file. For instructions, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s3-apache-mod_ssl-genkey" title="14.1.11. Generating a New Key and Certificate">Section&nbsp;14.1.11, “Generating a New Key and Certificate”</a>.
							</li><li class="listitem"><p class="simpara">
								To configure the client:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Load the required modules:
									</p><pre class="literallayout">module(load="imuxsock")
module(load="omrelp")
module(load="imtcp")</pre></li><li class="listitem"><p class="simpara">
										Configure the TCP input as follows:
									</p><pre class="literallayout">input(type="imtcp" port="<span class="emphasis"><em>port</em></span>″)</pre><p class="simpara">
										Replace <span class="emphasis"><em>port</em></span> to start a listener at the required port.
									</p></li><li class="listitem"><p class="simpara">
										Configure the transport settings:
									</p><pre class="literallayout">action(type="omrelp" target="<span class="emphasis"><em>target_IP</em></span>″ port="<span class="emphasis"><em>target_port</em></span>″ tls="on"
tls.caCert="<span class="emphasis"><em>path_ca.pem</em></span>"
tls.myCert="<span class="emphasis"><em>path_cert.pem</em></span>"
tls.myPrivKey="<span class="emphasis"><em>path_key.pem</em></span>"
tls.authmode="<span class="emphasis"><em>mode</em></span>"
tls.permittedpeer=["<span class="emphasis"><em>peer_name</em></span>"]
)</pre><p class="simpara">
										Replace:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<span class="emphasis"><em>target_IP</em></span> and <span class="emphasis"><em>target_port</em></span> with the IP address and port that identify the target server.
											</li><li class="listitem">
												<span class="emphasis"><em>path_ca.pem</em></span>, <span class="emphasis"><em>path_cert.pem</em></span>, and <span class="emphasis"><em>path_key.pem</em></span> with paths to the certification files
											</li><li class="listitem">
												<span class="emphasis"><em>mode</em></span> with the authentication mode for the transaction. Use either <span class="emphasis"><em>"name"</em></span> or <span class="emphasis"><em>"fingerprint"</em></span>
											</li><li class="listitem"><p class="simpara">
												<span class="emphasis"><em>peer_name</em></span> with a certificate fingerprint of the permitted peer. If you specify this, <code class="literal">tls.permittedpeer</code> restricts connection to the selected group of peers.
											</p><p class="simpara">
												The <span class="emphasis"><em>tls="on"</em></span> setting enables the TLS protocol.
											</p></li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
								To configure the server:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Configure loading the module:
									</p><pre class="literallayout">module(load="imuxsock")
module(load="imrelp" ruleset="relp")</pre></li><li class="listitem"><p class="simpara">
										Configure the TCP input similarly to the client configuration:
									</p><pre class="literallayout">input(type="imrelp" port="<span class="emphasis"><em>target_port</em></span>″ tls="on"
tls.caCert="<span class="emphasis"><em>path_ca.pem</em></span>"
tls.myCert="<span class="emphasis"><em>path_cert.pem</em></span>"
tls.myPrivKey="<span class="emphasis"><em>path_key.pem</em></span>"
tls.authmode="<span class="emphasis"><em>name</em></span>"
tls.permittedpeer=["<span class="emphasis"><em>peer_name</em></span>","<span class="emphasis"><em>peer_name1</em></span>","<span class="emphasis"><em>peer_name2</em></span>"]
)</pre><p class="simpara">
										Replace the highlighted values with the same as on the client.
									</p></li><li class="listitem"><p class="simpara">
										Configure the rules and choose an action to be performed. In the following example, <span class="emphasis"><em>log_path</em></span> specifies the path for storing messages:
									</p><pre class="literallayout">ruleset (name="relp") {
action(type="omfile" file="<span class="emphasis"><em>log_path</em></span>")
}</pre></li></ol></div></li></ol></div></section></section><section class="section" id="s1-interaction_of_rsyslog_and_journal"><div class="titlepage"><div><div><h2 class="title">23.7.&nbsp;Interaction of Rsyslog and Journal</h2></div></div></div><p>
					As mentioned above, <span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span> and <span class="strong strong"><strong><span class="application application">Journal</span></strong></span>, the two logging applications present on your system, have several distinctive features that make them suitable for specific use cases. In many situations it is useful to combine their capabilities, for example to create structured messages and store them in a file database (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-structured_logging_with_rsyslog" title="23.8. Structured Logging with Rsyslog">Section&nbsp;23.8, “Structured Logging with Rsyslog”</a>). A communication interface needed for this cooperation is provided by input and output modules on the side of <span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span> and by the <span class="strong strong"><strong><span class="application application">Journal</span></strong></span>'s communication socket.
				</p><p>
					By default, <code class="literal">rsyslogd</code> uses the <code class="literal">imjournal</code> module as a default input mode for journal files. With this module, you import not only the messages but also the structured data provided by <code class="literal">journald</code>. Also, older data can be imported from <code class="literal">journald</code> (unless forbidden with the <code class="literal option">IgnorePreviousMessages</code> option). See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-importing_data_from_journal" title="23.8.1. Importing Data from Journal">Section&nbsp;23.8.1, “Importing Data from Journal”</a> for basic configuration of <code class="literal">imjournal</code>.
				</p><p>
					As an alternative, configure <code class="literal">rsyslogd</code> to read from the socket provided by <code class="literal">journal</code> as an output for syslog-based applications. The path to the socket is <code class="literal">/run/systemd/journal/syslog</code>. Use this option when you want to maintain plain rsyslog messages. Compared to <code class="literal">imjournal</code> the socket input currently offers more features, such as ruleset binding or filtering. To import <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> data trough the socket, use the following configuration in <code class="literal">/etc/rsyslog.conf</code>:
				</p><pre class="literallayout">module(load="imuxsock"
    SysSock.Use="on"
    SysSock.Name="/run/systemd/journal/syslog")</pre><p>
					You can also output messages from <span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span> to <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> with the <code class="literal">omjournal</code> module. Configure the output in <code class="literal">/etc/rsyslog.conf</code> as follows:
				</p><pre class="literallayout">module(load="omjournal")
action(type="omjournal")</pre><p>
					For instance, the following configuration forwards all received messages on tcp port 10514 to the Journal:
				</p><pre class="literallayout">module(load="imtcp")
module(load="omjournal")

ruleset(name="remote") {
	action(type="omjournal")
}

input(type="imtcp" port="10514" ruleset="remote")</pre></section><section class="section" id="s1-structured_logging_with_rsyslog"><div class="titlepage"><div><div><h2 class="title">23.8.&nbsp;Structured Logging with Rsyslog</h2></div></div></div><p>
					On systems that produce large amounts of log data, it can be convenient to maintain log messages in a <span class="emphasis"><em>structured format</em></span>. With structured messages, it is easier to search for particular information, to produce statistics and to cope with changes and inconsistencies in message structure. <span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span> uses the <span class="emphasis"><em>JSON</em></span> (JavaScript Object Notation) format to provide structure for log messages.
				</p><p>
					Compare the following unstructured log message:
				</p><pre class="literallayout">Oct 25 10:20:37 localhost anacron[1395]: Jobs will be executed sequentially</pre><p>
					with a structured one:
				</p><pre class="literallayout">{"timestamp":"2013-10-25T10:20:37", "host":"localhost", "program":"anacron", "pid":"1395", "msg":"Jobs will be executed sequentially"}</pre><p>
					Searching structured data with use of key-value pairs is faster and more precise than searching text files with regular expressions. The structure also lets you to search for the same entry in messages produced by various applications. Also, JSON files can be stored in a document database such as MongoDB, which provides additional performance and analysis capabilities. On the other hand, a structured message requires more disk space than the unstructured one.
				</p><p>
					In <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>, log messages with meta data are pulled from <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> with use of the <code class="literal">imjournal</code> module. With the <code class="literal">mmjsonparse</code> module, you can parse data imported from <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> and from other sources and process them further, for example as a database output. For parsing to be successful, <code class="literal">mmjsonparse</code> requires input messages to be structured in a way that is defined by the <span class="emphasis"><em>Lumberjack</em></span> project.
				</p><p>
					The <span class="emphasis"><em>Lumberjack</em></span> project aims to add structured logging to <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> in a backward-compatible way. To identify a structured message, <span class="emphasis"><em>Lumberjack</em></span> specifies the <span class="emphasis"><em>@cee:</em></span> string that prepends the actual JSON structure. Also, <span class="emphasis"><em>Lumberjack</em></span> defines the list of standard field names that should be used for entities in the JSON string. For more information on <span class="emphasis"><em>Lumberjack</em></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Log_Files-Resources-Online" title="Online Documentation">the section called “Online Documentation”</a>.
				</p><p>
					The following is an example of a lumberjack-formatted message:
				</p><pre class="literallayout">      @cee: {"pid":17055, "uid":1000, "gid":1000, "appname":"logger", "msg":"Message text."}</pre><p>
					To build this structure inside <span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span>, a template is used, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s2-filtering_structured_messages" title="23.8.2. Filtering Structured Messages">Section&nbsp;23.8.2, “Filtering Structured Messages”</a>. Applications and servers can employ the <code class="literal">libumberlog</code> library to generate messages in the lumberjack-compliant form. For more information on <code class="literal">libumberlog</code>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-Log_Files-Resources-Online" title="Online Documentation">the section called “Online Documentation”</a>.
				</p><section class="section" id="s2-importing_data_from_journal"><div class="titlepage"><div><div><h3 class="title">23.8.1.&nbsp;Importing Data from Journal</h3></div></div></div><p>
						The <code class="literal command">imjournal</code> module is <span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span>'s input module to natively read the journal files (see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-interaction_of_rsyslog_and_journal" title="23.7. Interaction of Rsyslog and Journal">Section&nbsp;23.7, “Interaction of Rsyslog and Journal”</a>). Journal messages are then logged in text format as other rsyslog messages. However, with further processing, it is possible to translate meta data provided by <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> into a structured message.
					</p><p>
						To import data from <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> to <span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span>, use the following configuration in <code class="literal">/etc/rsyslog.conf</code>:
					</p><pre class="literallayout">module(load=”imjournal”
  PersistStateInterval=”number_of_messages”
  StateFile=”path”
  ratelimit.interval=”seconds”
  ratelimit.burst=”burst_number”
  IgnorePreviousMessages=”off/on”)</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								With <span class="emphasis"><em>number_of_messages</em></span>, you can specify how often the journal data must be saved. This will happen each time the specified number of messages is reached.
							</li><li class="listitem">
								Replace <span class="emphasis"><em>path</em></span> with a path to the state file. This file tracks the journal entry that was the last one processed.
							</li><li class="listitem">
								With <span class="emphasis"><em>seconds</em></span>, you set the length of the rate limit interval. The number of messages processed during this interval cannot exceed the value specified in <span class="emphasis"><em>burst_number</em></span>. The default setting is 20,000 messages per 600 seconds. Rsyslog discards messages that come after the maximum burst within the time frame specified.
							</li><li class="listitem">
								With <code class="literal option">IgnorePreviousMessages</code> you can ignore messages that are currently in Journal and import only new messages, which is used when there is no state file specified. The default setting is <code class="literal">off</code>. Please note that if this setting is off and there is no state file, all messages in the Journal are processed, even if they were already processed in a previous rsyslog session.
							</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can use <code class="literal">imjournal</code> simultaneously with <code class="literal">imuxsock</code> module that is the traditional system log input. However, to avoid message duplication, you must prevent <code class="literal">imuxsock</code> from reading the Journal’s system socket. To do so, use the <code class="literal option">SysSock.Use</code> directive:
						</p><pre class="literallayout">module(load”imjournal”)
module(load”imuxsock”
  SysSock.Use=”off”
  Socket="/run/systemd/journal/syslog")</pre></div></div><p>
						You can translate all data and meta data stored by <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> into structured messages. Some of these meta data entries are listed in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-verbose_journalctl_output" title="Example 23.19. Verbose journalctl Output">Example&nbsp;23.19, “Verbose journalctl Output”</a>, for a complete list of journal fields see the <code class="literal">systemd.journal-fields(7)</code> manual page. For example, it is possible to focus on <span class="emphasis"><em>kernel journal fields</em></span>, that are used by messages originating in the kernel.
					</p></section><section class="section" id="s2-filtering_structured_messages"><div class="titlepage"><div><div><h3 class="title">23.8.2.&nbsp;Filtering Structured Messages</h3></div></div></div><p>
						To create a lumberjack-formatted message that is required by <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>'s parsing module, use the following template:
					</p><pre class="literallayout">template(name="CEETemplate" type="string" string="%TIMESTAMP% %HOSTNAME% %syslogtag% @cee: %$!all-json%\n")</pre><p>
						This template prepends the <code class="literal">@cee:</code> string to the JSON string and can be applied, for example, when creating an output file with <code class="literal">omfile</code> module. To access JSON field names, use the <span class="emphasis"><em>$!</em></span> prefix. For example, the following filter condition searches for messages with specific <span class="emphasis"><em>hostname</em></span> and <span class="emphasis"><em>UID</em></span>:
					</p><pre class="literallayout">($!hostname == "<span class="emphasis"><em>hostname</em></span>" &amp;&amp; $!UID== "<span class="emphasis"><em>UID</em></span>")</pre></section><section class="section" id="s2-parsing_JSON"><div class="titlepage"><div><div><h3 class="title">23.8.3.&nbsp;Parsing JSON</h3></div></div></div><p>
						The <code class="literal">mmjsonparse</code> module is used for parsing structured messages.
					</p><p>
						These messages can come from <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> or from other input sources, and must be formatted in a way defined by the <span class="emphasis"><em>Lumberjack</em></span> project. These messages are identified by the presence of the <span class="emphasis"><em>@cee:</em></span> string. Then, <code class="literal">mmjsonparse</code> checks if the JSON structure is valid and then the message is parsed.
					</p><p>
						To parse lumberjack-formatted JSON messages with <code class="literal">mmjsonparse</code>, use the following configuration in the <code class="literal">/etc/rsyslog.conf</code>:
					</p><pre class="literallayout">module(load”mmjsonparse”)

<span class="strong strong"><strong>.</strong></span> :mmjsonparse:</pre><p>
						In this example, the <code class="literal">mmjsonparse</code> module is loaded on the first line, then all messages are forwarded to it. Currently, there are no configuration parameters available for <code class="literal">mmjsonparse</code>.
					</p></section><section class="section" id="s2-storing_messages_in_the_mongodb"><div class="titlepage"><div><div><h3 class="title">23.8.4.&nbsp;Storing Messages in the MongoDB</h3></div></div></div><p>
						<span class="strong strong"><strong><span class="application application">Rsyslog</span></strong></span> supports storing JSON logs in the MongoDB document database through the <span class="emphasis"><em>ommongodb</em></span> output module.
					</p><p>
						To forward log messages into MongoDB, use the following syntax in the <code class="literal">/etc/rsyslog.conf</code> (configuration parameters for <span class="emphasis"><em>ommongodb</em></span> are available only in the new configuration format; see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-using_the_new_configuration_format" title="23.3. Using the New Configuration Format">Section&nbsp;23.3, “Using the New Configuration Format”</a>):
					</p><pre class="literallayout">module(load”ommongodb”)

<span class="strong strong"><strong>.</strong></span> action(type="ommongodb" server="DB_server" serverport="port" db="DB_name" collection="collection_name" uid="UID" pwd="password")</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Replace <span class="emphasis"><em>DB_server</em></span> with the name or address of the MongoDB server. Specify <span class="emphasis"><em>port</em></span> to select a non-standard port from the MongoDB server. The default <span class="emphasis"><em>port</em></span> value is <code class="literal">0</code> and usually there is no need to change this parameter.
							</li><li class="listitem">
								With <span class="emphasis"><em>DB_name</em></span>, you identify to which database on the MongoDB server you want to direct the output. Replace <span class="emphasis"><em>collection_name</em></span> with the name of a collection in this database. In MongoDB, collection is a group of documents, the equivalent of an RDBMS table.
							</li><li class="listitem">
								You can set your login details by replacing <span class="emphasis"><em>UID</em></span> and <span class="emphasis"><em>password</em></span>.
							</li></ul></div><p>
						You can shape the form of the final database output with use of templates. By default, <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> uses a template based on standard <span class="strong strong"><strong><span class="application application">lumberjack</span></strong></span> field names.
					</p></section></section><section class="section" id="s1-debugging_rsyslog"><div class="titlepage"><div><div><h2 class="title">23.9.&nbsp;Debugging Rsyslog</h2></div></div></div><p>
					To run <code class="literal">rsyslogd</code> in debugging mode, use the following command:
				</p><pre class="literallayout"><code class="literal">rsyslogd</code> <code class="literal option">-dn</code></pre><p>
					With this command, <code class="literal">rsyslogd</code> produces debugging information and prints it to the standard output. The <code class="literal option">-n</code> stands for "no fork". You can modify debugging with environmental variables, for example, you can store the debug output in a log file. Before starting <code class="literal">rsyslogd</code>, type the following on the command line:
				</p><pre class="literallayout">export RSYSLOG_DEBUGLOG="<span class="emphasis"><em>path</em></span>"
export RSYSLOG_DEBUG="Debug"</pre><p>
					Replace <span class="emphasis"><em>path</em></span> with a desired location for the file where the debugging information will be logged. For a complete list of options available for the RSYSLOG_DEBUG variable, see the related section in the <code class="literal">rsyslogd(8)</code> manual page.
				</p><p>
					To check if syntax used in the <code class="literal">/etc/rsyslog.conf</code> file is valid use:
				</p><pre class="literallayout"><code class="literal">rsyslogd</code> <code class="literal option">-N</code> <code class="literal">1</code></pre><p>
					Where <code class="literal">1</code> represents level of verbosity of the output message. This is a forward compatibility option because currently, only one level is provided. However, you must add this argument to run the validation.
				</p></section><section class="section" id="s1-Using_the_Journal"><div class="titlepage"><div><div><h2 class="title">23.10.&nbsp;Using the Journal</h2></div></div></div><p>
					The Journal is a component of <span class="strong strong"><strong><span class="application application">systemd</span></strong></span> that is responsible for viewing and management of log files. It can be used in parallel, or in place of a traditional syslog daemon, such as <code class="literal">rsyslogd</code>. The Journal was developed to address problems connected with traditional logging. It is closely integrated with the rest of the system, supports various logging technologies and access management for the log files.
				</p><p>
					Logging data is collected, stored, and processed by the Journal’s <code class="literal">journald</code> service. It creates and maintains binary files called <span class="emphasis"><em>journals</em></span> based on logging information that is received from the kernel, from user processes, from standard output, and standard error output of system services or via its native API. These journals are structured and indexed, which provides relatively fast seek times. Journal entries can carry a unique identifier. The <code class="literal">journald</code> service collects numerous meta data fields for each log message. The actual journal files are secured, and therefore cannot be manually edited.
				</p><section class="section" id="s2-Viewing_Log_Files"><div class="titlepage"><div><div><h3 class="title">23.10.1.&nbsp;Viewing Log Files</h3></div></div></div><p>
						To access the journal logs, use the <span class="strong strong"><strong><span class="application application">journalctl</span></strong></span> tool. For a basic view of the logs type as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">journalctl</code></pre><p>
						An output of this command is a list of all log files generated on the system including messages generated by system components and by users. The structure of this output is similar to one used in <code class="literal">/var/log/messages/</code> but with certain improvements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								the priority of entries is marked visually. Lines of error priority and higher are highlighted with red color and a bold font is used for lines with notice and warning priority
							</li><li class="listitem">
								the time stamps are converted for the local time zone of your system
							</li><li class="listitem">
								all logged data is shown, including rotated logs
							</li><li class="listitem">
								the beginning of a boot is tagged with a special line
							</li></ul></div><div class="example" id="ex-Example_Output_of_journalctl"><p class="title"><strong>Example&nbsp;23.18.&nbsp;Example Output of journalctl</strong></p><div class="example-contents"><p>
							The following is an example output provided by the <span class="strong strong"><strong><span class="application application">journalctl</span></strong></span> tool. When called without parameters, the listed entries begin with a time stamp, then the host name and application that performed the operation is mentioned followed by the actual message. This example shows the first three entries in the journal log:
						</p><pre class="literallayout"># journalctl
-- Logs begin at Thu 2013-08-01 15:42:12 CEST, end at Thu 2013-08-01 15:48:48 CEST. --
Aug 01 15:42:12 localhost systemd-journal[54]: Allowing runtime journal files to grow to 49.7M.
Aug 01 15:42:12 localhost kernel: Initializing cgroup subsys cpuset
Aug 01 15:42:12 localhost kernel: Initializing cgroup subsys cpu

[...]</pre></div></div><p>
						In many cases, only the latest entries in the journal log are relevant. The simplest way to reduce <code class="literal command">journalctl</code> output is to use the <code class="literal option">-n</code> option that lists only the specified number of most recent log entries:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-n</code> <span class="emphasis"><em>Number</em></span></pre><p>
						Replace <span class="emphasis"><em>Number</em></span> with the number of lines to be shown. When no number is specified, <code class="literal command">journalctl</code> displays the ten most recent entries.
					</p><p>
						The <code class="literal command">journalctl</code> command allows controlling the form of the output with the following syntax:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-o</code> <span class="emphasis"><em>form</em></span></pre><p>
						Replace <span class="emphasis"><em>form</em></span> with a keyword specifying a desired form of output. There are several options, such as <code class="literal option">verbose</code>, which returns full-structured entry items with all fields, <code class="literal option">export</code>, which creates a binary stream suitable for backups and network transfer, and <code class="literal option">json</code>, which formats entries as JSON data structures. For the full list of keywords, see the <code class="literal">journalctl(1)</code> manual page.
					</p><div class="example" id="ex-verbose_journalctl_output"><p class="title"><strong>Example&nbsp;23.19.&nbsp;Verbose journalctl Output</strong></p><div class="example-contents"><p>
							To view full meta data about all entries, type:
						</p><pre class="literallayout"># journalctl -o verbose
[...]

Fri 2013-08-02 14:41:22 CEST [s=e1021ca1b81e4fc688fad6a3ea21d35b;i=55c;b=78c81449c920439da57da7bd5c56a770;m=27cc
    _BOOT_ID=78c81449c920439da57da7bd5c56a770
    PRIORITY=5
    SYSLOG_FACILITY=3
    _TRANSPORT=syslog
    _MACHINE_ID=69d27b356a94476da859461d3a3bc6fd
    _HOSTNAME=localhost.localdomain
    _PID=562
    _COMM=dbus-daemon
    _EXE=/usr/bin/dbus-daemon
    _CMDLINE=/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation
    _SYSTEMD_CGROUP=/system/dbus.service
    _SYSTEMD_UNIT=dbus.service
    SYSLOG_IDENTIFIER=dbus
    SYSLOG_PID=562
    _UID=81
    _GID=81
    _SELINUX_CONTEXT=system_u:system_r:system_dbusd_t:s0-s0:c0.c1023
    MESSAGE=[system] Successfully activated service 'net.reactivated.Fprint'
    _SOURCE_REALTIME_TIMESTAMP=1375447282839181

[...]</pre><p>
							This example lists fields that identify a single log entry. These meta data can be used for message filtering as shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#advanced_filtering" title="Advanced Filtering">the section called “Advanced Filtering”</a>. For a complete description of all possible fields see the <code class="literal">systemd.journal-fields(7)</code> manual page.
						</p></div></div></section><section class="section" id="s2-Access_Control"><div class="titlepage"><div><div><h3 class="title">23.10.2.&nbsp;Access Control</h3></div></div></div><p>
						By default, <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> users without <code class="literal">root</code> privileges can only see log files generated by them. The system administrator can add selected users to the <span class="emphasis"><em>adm</em></span> group, which grants them access to complete log files. To do so, type as <code class="literal">root</code>:
					</p><pre class="literallayout"><code class="literal command">usermod</code> <code class="literal option">-a</code> <code class="literal option">-G</code> <span class="emphasis"><em>adm</em></span> <span class="emphasis"><em>username</em></span></pre><p>
						Here, replace <span class="emphasis"><em>username</em></span> with a name of the user to be added to the <span class="emphasis"><em>adm</em></span> group. This user then receives the same output of the <code class="literal command">journalctl</code> command as the root user. Note that access control only works when persistent storage is enabled for <span class="strong strong"><strong><span class="application application">Journal</span></strong></span>.
					</p></section><section class="section" id="s2-Using_The_Live_View"><div class="titlepage"><div><div><h3 class="title">23.10.3.&nbsp;Using The Live View</h3></div></div></div><p>
						When called without parameters, <code class="literal command">journalctl</code> shows the full list of entries, starting with the oldest entry collected. With the live view, you can supervise the log messages in real time as new entries are continuously printed as they appear. To start <span class="strong strong"><strong><span class="application application">journalctl</span></strong></span> in live view mode, type:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-f</code></pre><p>
						This command returns a list of the ten most current log lines. The <span class="strong strong"><strong><span class="application application">journalctl</span></strong></span> utility then stays running and waits for new changes to show them immediately.
					</p></section><section class="section" id="s2-Filtering_Messages"><div class="titlepage"><div><div><h3 class="title">23.10.4.&nbsp;Filtering Messages</h3></div></div></div><p>
						The output of the <code class="literal command">journalctl</code> command executed without parameters is often extensive, therefore you can use various filtering methods to extract information to meet your needs.
					</p><h5 id="filtering_by_priority">Filtering by Priority</h5><p>
						Log messages are often used to track erroneous behavior on the system. To view only entries with a selected or higher priority, use the following syntax:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-p</code> <span class="emphasis"><em>priority</em></span></pre><p>
						Here, replace <span class="emphasis"><em>priority</em></span> with one of the following keywords (or with a number): <code class="literal command">debug</code> (7), <code class="literal command">info</code> (6), <code class="literal command">notice</code> (5), <code class="literal command">warning</code> (4), <code class="literal command">err</code> (3), <code class="literal command">crit</code> (2), <code class="literal command">alert</code> (1), and <code class="literal command">emerg</code> (0).
					</p><div class="example" id="ex-filtering_by_priority"><p class="title"><strong>Example&nbsp;23.20.&nbsp;Filtering by Priority</strong></p><div class="example-contents"><p>
							To view only entries with <span class="emphasis"><em>error</em></span> or higher priority, use:
						</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-p err</code></pre></div></div><h5 id="filtering_by_time">Filtering by Time</h5><p>
						To view log entries only from the current boot, type:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-b</code></pre><p>
						If you reboot your system just occasionally, the <code class="literal option">-b</code> will not significantly reduce the output of <code class="literal command">journalctl</code>. In such cases, time-based filtering is more helpful:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">--since</code>=<span class="emphasis"><em>value</em></span> <code class="literal option">--until</code>=<span class="emphasis"><em>value</em></span></pre><p>
						With <code class="literal option">--since</code> and <code class="literal option">--until</code>, you can view only log messages created within a specified time range. You can pass <span class="emphasis"><em>values</em></span> to these options in form of date or time or both as shown in the following example.
					</p><div class="example" id="ex-filtering_by_time_and_priority"><p class="title"><strong>Example&nbsp;23.21.&nbsp;Filtering by Time and Priority</strong></p><div class="example-contents"><p>
							Filtering options can be combined to reduce the set of results according to specific requests. For example, to view the <span class="emphasis"><em>warning</em></span> or higher priority messages from a certain point in time, type:
						</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-p warning</code> <code class="literal option">--since="2013-3-16 23:59:59"</code></pre></div></div><h5 id="advanced_filtering">Advanced Filtering</h5><p>
						<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-verbose_journalctl_output" title="Example 23.19. Verbose journalctl Output">Example&nbsp;23.19, “Verbose journalctl Output”</a> lists a set of fields that specify a log entry and can all be used for filtering. For a complete description of meta data that <code class="literal">systemd</code> can store, see the <code class="literal">systemd.journal-fields(7)</code> manual page. This meta data is collected for each log message, without user intervention. Values are usually text-based, but can take binary and large values; fields can have multiple values assigned though it is not very common.
					</p><p>
						To view a list of unique values that occur in a specified field, use the following syntax:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-F</code> <span class="emphasis"><em>fieldname</em></span></pre><p>
						Replace <span class="emphasis"><em>fieldname</em></span> with a name of a field you are interested in.
					</p><p>
						To show only log entries that fit a specific condition, use the following syntax:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <span class="emphasis"><em>fieldname</em></span>=<span class="emphasis"><em>value</em></span></pre><p>
						Replace <span class="emphasis"><em>fieldname</em></span> with a name of a field and <span class="emphasis"><em>value</em></span> with a specific value contained in that field. As a result, only lines that match this condition are returned.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							As the number of meta data fields stored by <code class="literal">systemd</code> is quite large, it is easy to forget the exact name of the field of interest. When unsure, type:
						</p><pre class="literallayout"><code class="literal command">journalctl</code></pre><p>
							and press the <span class="keycap"><strong>Tab</strong></span> key two times. This shows a list of available field names. <span class="keycap"><strong>Tab</strong></span> completion based on context works on field names, so you can type a distinctive set of letters from a field name and then press <span class="keycap"><strong>Tab</strong></span> to complete the name automatically. Similarly, you can list unique values from a field. Type:
						</p><pre class="literallayout"><code class="literal command">journalctl</code> <span class="emphasis"><em>fieldname</em></span>=</pre><p>
							and press <span class="keycap"><strong>Tab</strong></span> two times. This serves as an alternative to <code class="literal command">journalctl</code> <code class="literal option">-F</code> <span class="emphasis"><em>fieldname</em></span>.
						</p></div></div><p>
						You can specify multiple values for one field:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <span class="emphasis"><em>fieldname</em></span>=<span class="emphasis"><em>value1</em></span> <span class="emphasis"><em>fieldname</em></span>=<span class="emphasis"><em>value2</em></span> ...</pre><p>
						Specifying two matches for the same field results in a logical <code class="literal">OR</code> combination of the matches. Entries matching <span class="emphasis"><em>value1</em></span> or <span class="emphasis"><em>value2</em></span> are displayed.
					</p><p>
						Also, you can specify multiple field-value pairs to further reduce the output set:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <span class="emphasis"><em>fieldname1</em></span>=<span class="emphasis"><em>value</em></span> <span class="emphasis"><em>fieldname2</em></span>=<span class="emphasis"><em>value</em></span> ...</pre><p>
						If two matches for different field names are specified, they will be combined with a logical <code class="literal">AND</code>. Entries have to match both conditions to be shown.
					</p><p>
						With use of the <span class="emphasis"><em>+</em></span> symbol, you can set a logical <code class="literal">OR</code> combination of matches for multiple fields:
					</p><pre class="literallayout">journalctl <span class="emphasis"><em>fieldname1</em></span>=<span class="emphasis"><em>value</em></span> + <span class="emphasis"><em>fieldname2</em></span>=<span class="emphasis"><em>value</em></span> ...</pre><p>
						This command returns entries that match at least one of the conditions, not only those that match both of them.
					</p><div class="example" id="ex-advanced_filtering"><p class="title"><strong>Example&nbsp;23.22.&nbsp;Advanced filtering</strong></p><div class="example-contents"><p>
							To display entries created by <code class="literal">avahi-daemon.service</code> or <code class="literal">crond.service</code> under user with UID 70, use the following command:
						</p><pre class="literallayout">journalctl <code class="literal">_UID=70</code> <code class="literal">_SYSTEMD_UNIT=avahi-daemon.service</code> <code class="literal">_SYSTEMD_UNIT=crond.service</code></pre><p>
							Since there are two values set for the <code class="literal">_SYSTEMD_UNIT</code> field, both results will be displayed, but only when matching the <code class="literal">_UID=70</code> condition. This can be expressed simply as: (UID=70 and (avahi or cron)).
						</p></div></div><p>
						You can apply the aforementioned filtering also in the live-view mode to keep track of the latest changes in the selected group of log entries:
					</p><pre class="literallayout"><code class="literal command">journalctl</code> <code class="literal option">-f</code> <span class="emphasis"><em>fieldname</em></span>=<span class="emphasis"><em>value</em></span> ...</pre></section><section class="section" id="s2-Enabling_Persistent_Storage"><div class="titlepage"><div><div><h3 class="title">23.10.5.&nbsp;Enabling Persistent Storage</h3></div></div></div><p>
						By default, <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> stores log files only in memory or a small ring-buffer in the <code class="literal">/run/log/journal/</code> directory. This is sufficient to show recent log history with <code class="literal command">journalctl</code>. This directory is volatile, log data is not saved permanently. With the default configuration, syslog reads the journal logs and stores them in the <code class="literal">/var/log/</code> directory. With persistent logging enabled, journal files are stored in <code class="literal">/var/log/journal</code> which means they persist after reboot. Journal can then replace <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> for some users (but see the chapter introduction).
					</p><p>
						Enabled persistent storage has the following advantages
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Richer data is recorded for troubleshooting in a longer period of time
							</li><li class="listitem">
								For immediate troubleshooting, richer data is available after a reboot
							</li><li class="listitem">
								Server console currently reads data from journal, not log files
							</li></ul></div><p>
						Persistent storage has also certain disadvantages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Even with persistent storage the amount of data stored depends on free memory, there is no guarantee to cover a specific time span
							</li><li class="listitem">
								More disk space is needed for logs
							</li></ul></div><p>
						To enable persistent storage for Journal, create the journal directory manually as shown in the following example. As <code class="literal">root</code> type:
					</p><pre class="literallayout"><code class="literal command">mkdir</code> <code class="literal option">-p</code> <code class="literal">/var/log/journal/</code></pre><p>
						Then, restart <code class="literal">journald</code> to apply the change:
					</p><pre class="literallayout"><code class="literal command">systemctl</code> <code class="literal option">restart</code> <code class="literal">systemd-journald</code></pre></section></section><section class="section" id="s1-managing_log_files_in_a_graphical_environment"><div class="titlepage"><div><div><h2 class="title">23.11.&nbsp;Managing Log Files in a Graphical Environment</h2></div></div></div><p>
					As an alternative to the aforementioned command-line utilities, Red Hat Enterprise Linux 7 provides an accessible GUI for managing log messages.
				</p><section class="section" id="s2-logfiles-viewing"><div class="titlepage"><div><div><h3 class="title">23.11.1.&nbsp;Viewing Log Files</h3></div></div></div><p>
						Most log files are stored in plain text format. You can view them with any text editor such as <code class="literal command">Vi</code> or <span class="strong strong"><strong><span class="application application">Emacs</span></strong></span>. Some log files are readable by all users on the system; however, root privileges are required to read most log files.
					</p><p>
						To view system log files in an interactive, real-time application, use the <span class="strong strong"><strong><span class="application application">System Log</span></strong></span>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							In order to use the <span class="strong strong"><strong><span class="application application">System Log</span></strong></span>, first ensure the <span class="strong strong"><strong><span class="package package">gnome-system-log</span></strong></span> package is installed on your system by running, as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# yum install gnome-system-log</pre><p>
							For more information on installing packages with Yum, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a>.
						</p></div></div><p>
						After you have installed the <span class="strong strong"><strong><span class="package package">gnome-system-log</span></strong></span> package, open the <span class="strong strong"><strong><span class="application application">System Log</span></strong></span> by clicking <span class="guimenu">Applications</span> → <span class="guisubmenu"><code class="literal">System Tools</code></span> → <span class="guimenuitem"><code class="literal">System Log</code></span>, or type the following command at a shell prompt:
					</p><pre class="literallayout">~]$ <code class="literal command">gnome-system-log</code></pre><p>
						The application only displays log files that exist; thus, the list might differ from the one shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-redhat-logviewer" title="Figure 23.2. System Log">Figure&nbsp;23.2, “System Log”</a>.
					</p><div class="figure" id="fig-redhat-logviewer"><p class="title"><strong>Figure&nbsp;23.2.&nbsp;System Log</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/redhat-logviewer.png" alt="System Log"></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">System Log</span></strong></span> application lets you filter any existing log file. Click on the button marked with the gear symbol to view the menu, select menu:[<code class="literal">Filters</code> &gt; &gt; <code class="literal">Manage Filters</code>] to define or edit the desired filter.
					</p><div class="figure" id="fig-redhat-filters"><p class="title"><strong>Figure&nbsp;23.3.&nbsp;System Log - Filters</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/redhat-filters.png" alt="System Log - Filters"></div></div></div><p>
						Adding or editing a filter lets you define its parameters as is shown in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-redhat-filter-sample" title="Figure 23.4. System Log - defining a filter">Figure&nbsp;23.4, “System Log - defining a filter”</a>.
					</p><div class="figure" id="fig-redhat-filter-sample"><p class="title"><strong>Figure&nbsp;23.4.&nbsp;System Log - defining a filter</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/redhat-filter-sample.png" alt="System Log - Defining a Filter"></div></div></div><p>
						When defining a filter, the following parameters can be edited:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Name</code> — Specifies the name of the filter.
							</li><li class="listitem">
								<code class="literal">Regular Expression</code> — Specifies the regular expression that will be applied to the log file and will attempt to match any possible strings of text in it.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Effect</code>
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">Highlight</code> — If checked, the found results will be highlighted with the selected color. You may select whether to highlight the background or the foreground of the text.
									</li><li class="listitem">
										<code class="literal">Hide</code> — If checked, the found results will be hidden from the log file you are viewing.
									</li></ul></div></li></ul></div><p>
						When you have at least one filter defined, it can be selected from the <code class="literal">Filters</code> menu and it will automatically search for the strings you have defined in the filter and highlight or hide every successful match in the log file you are currently viewing.
					</p><div class="figure" id="fig-redhat-filter-enable"><p class="title"><strong>Figure&nbsp;23.5.&nbsp;System Log - enabling a filter</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/redhat-filter-enable.png" alt="System Log - Enabling a Filter"></div></div></div><p>
						When you select the <code class="literal">Show matches only</code> option, only the matched strings will be shown in the log file you are currently viewing.
					</p></section><section class="section" id="s2-logfiles-adding"><div class="titlepage"><div><div><h3 class="title">23.11.2.&nbsp;Adding a Log File</h3></div></div></div><p>
						To add a log file you want to view in the list, select <span class="guimenu">File</span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu"><code class="literal">Open</code></span> → <span class="guimenuitem"><!--Empty--></span>. This will display the <code class="literal">Open Log</code> window where you can select the directory and file name of the log file you want to view. <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-redhat-logviewer-add" title="Figure 23.6. System Log - adding a log file">Figure&nbsp;23.6, “System Log - adding a log file”</a> illustrates the Open Log window.
					</p><div class="figure" id="fig-redhat-logviewer-add"><p class="title"><strong>Figure&nbsp;23.6.&nbsp;System Log - adding a log file</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/redhat-logviewer-add.png" alt="System Log - Adding a Log File"></div></div></div><p>
						Click on the <span class="guibutton">Open</span> button to open the file. The file is immediately added to the viewing list where you can select it and view its contents.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <span class="strong strong"><strong><span class="application application">System Log</span></strong></span> also allows you to open log files zipped in the <code class="literal">.gz</code> format.
						</p></div></div></section><section class="section" id="s2-logfiles-examining"><div class="titlepage"><div><div><h3 class="title">23.11.3.&nbsp;Monitoring Log Files</h3></div></div></div><p>
						<span class="strong strong"><strong><span class="application application">System Log</span></strong></span> monitors all opened logs by default. If a new line is added to a monitored log file, the log name appears in bold in the log list. If the log file is selected or displayed, the new lines appear in bold at the bottom of the log file. <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#fig-redhat-logviewer-monitoring" title="Figure 23.7. System Log - new log alert">Figure&nbsp;23.7, “System Log - new log alert”</a> illustrates a new alert in the <code class="literal">cron</code> log file and in the <code class="literal">messages</code> log file. Clicking on the <code class="literal">messages</code> log file displays the logs in the file with the new lines in bold.
					</p><div class="figure" id="fig-redhat-logviewer-monitoring"><p class="title"><strong>Figure&nbsp;23.7.&nbsp;System Log - new log alert</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/redhat-logviewer-monitoring.png" alt="System Log - New Log Alert"></div></div></div></section></section><section class="section" id="s1-log-files-additional-resources"><div class="titlepage"><div><div><h2 class="title">23.12.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on how to configure the <code class="literal">rsyslog</code> daemon and how to locate, view, and monitor log files, see the resources listed below.
				</p><h4 id="brid-Log_Files-Resources-Installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">rsyslogd</code>(8) — The manual page for the <code class="literal">rsyslogd</code> daemon documents its usage.
						</li><li class="listitem">
							<code class="literal">rsyslog.conf</code>(5) — The manual page named <code class="literal">rsyslog.conf</code> documents available configuration options.
						</li><li class="listitem">
							<code class="literal">logrotate</code>(8) — The manual page for the <span class="strong strong"><strong><span class="application application">logrotate</span></strong></span> utility explains in greater detail how to configure and use it.
						</li><li class="listitem">
							<code class="literal">journalctl</code>(1) — The manual page for the <code class="literal command">journalctl</code> daemon documents its usage.
						</li><li class="listitem">
							<code class="literal">journald.conf</code>(5) — This manual page documents available configuration options.
						</li><li class="listitem">
							<code class="literal">systemd.journal-fields</code>(7) — This manual page lists special <span class="strong strong"><strong><span class="application application">Journal</span></strong></span> fields.
						</li></ul></div><h4 id="brid-Log_Files-Installable_Documentation">Installable Documentation</h4><p>
					<code class="literal">/usr/share/doc/rsyslog<span class="emphasis"><em>version</em></span>/html/index.html</code> — This file, which is provided by the <span class="strong strong"><strong><span class="package package">rsyslog-doc</span></strong></span> package from the Optional channel, contains information on <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span>. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Adding_the_Optional_and_Supplementary_Repositories" title="9.5.7. Adding the Optional and Supplementary Repositories">Section&nbsp;9.5.7, “Adding the Optional and Supplementary Repositories”</a> for more information on Red Hat additional channels. Before accessing the documentation, you must run the following command as <code class="literal">root</code>:
				</p><pre class="literallayout">~]# yum install rsyslog-doc</pre><h4 id="brid-Log_Files-Resources-Online">Online Documentation</h4><p>
					The <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> home page offers additional documentation, configuration examples, and video tutorials. Make sure to consult the documents relevant to the version you are using:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="http://www.rsyslog.com/doc/rainerscript.html"><span class="emphasis"><em>RainerScript</em></span> documentation on the rsyslog Home Page</a> — Commented summary of data types, expressions, and functions available in <span class="emphasis"><em>RainerScript</em></span>.
						</li><li class="listitem">
							<a class="link" href="http://www.rsyslog.com/doc/v7-stable/">rsyslog version 7 documentation on the rsyslog home page</a> — Version 7 of <span class="strong strong"><strong><span class="application application">rsyslog</span></strong></span> is available for Red Hat Enterprise Linux 7 in the <span class="strong strong"><strong><span class="package package">rsyslog</span></strong></span> package.
						</li><li class="listitem">
							<a class="link" href="http://www.rsyslog.com/doc/queues.html">Description of <span class="emphasis"><em>queues</em></span> on the rsyslog Home Page</a> — General information on various types of message queues and their usage.
						</li></ul></div><h4 id="brid-Log_Files-Resources-See">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Gaining_Privileges" title="Chapter 6. Gaining Privileges">Chapter&nbsp;6, <em>Gaining Privileges</em></a> documents how to gain administrative privileges by using the <code class="literal command">su</code> and <code class="literal command">sudo</code> commands.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a> provides more information on systemd and documents how to use the <code class="literal command">systemctl</code> command to manage system services.
						</li></ul></div></section></section><section class="chapter" id="ch-Automating_System_Tasks"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;24.&nbsp;Automating System Tasks</h2></div></div></div><p>
				You can configure Red Hat Enterprise Linux to automatically run tasks, also known as <span class="emphasis"><em>jobs</em></span>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						regularly at specified time using <span class="strong strong"><strong><span class="application application">cron</span></strong></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Scheduling_a_Recurring_Job_Using_Cron" title="24.1. Scheduling a Recurring Job Using Cron">Section&nbsp;24.1, “Scheduling a Recurring Job Using Cron”</a>
					</li><li class="listitem">
						asynchronously at certain days using <span class="strong strong"><strong><span class="application application">anacron</span></strong></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-Scheduling_a_Recurring_Asynchronous_Job_Using_Anacron" title="24.2. Scheduling a Recurring Asynchronous Job Using Anacron">Section&nbsp;24.2, “Scheduling a Recurring Asynchronous Job Using Anacron”</a>
					</li><li class="listitem">
						once at a specific time using <span class="strong strong"><strong><span class="application application">at</span></strong></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Job_to_Run_at_a_Specific_Time_Using_at" title="24.3. Scheduling a Job to Run at a Specific Time Using at">Section&nbsp;24.3, “Scheduling a Job to Run at a Specific Time Using at”</a>
					</li><li class="listitem">
						once when system load average drops to a specified value using <span class="strong strong"><strong><span class="application application">batch</span></strong></span>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Job_to_Run_on_System_Load_Drop_Using_batch" title="24.4. Scheduling a Job to Run on System Load Drop Using batch">Section&nbsp;24.4, “Scheduling a Job to Run on System Load Drop Using batch”</a>
					</li><li class="listitem">
						once on the next boot, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#s1-one-time_script_on_next_boot_using_systemd_unit_file" title="24.5. Scheduling a Job to Run on Next Boot Using a systemd Unit File">Section&nbsp;24.5, “Scheduling a Job to Run on Next Boot Using a systemd Unit File”</a>
					</li></ul></div><p>
				This chapter describes how to perform these tasks.
			</p><section class="section" id="s1-Scheduling_a_Recurring_Job_Using_Cron"><div class="titlepage"><div><div><h2 class="title">24.1.&nbsp;Scheduling a Recurring Job Using Cron</h2></div></div></div><p>
					<code class="literal">Cron</code> is a service that enables you to schedule running a task, often called a job, at regular times. A <code class="literal">cron</code> job is only executed <span class="emphasis"><em>if the system is running</em></span> on the scheduled time. For scheduling jobs that can postpone their execution to when the system boots up, so a job is not "lost" if the system is not running, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Job_to_Run_at_a_Specific_Time_Using_at" title="24.3. Scheduling a Job to Run at a Specific Time Using at">Section&nbsp;24.3, “Scheduling a Job to Run at a Specific Time Using at”</a>.
				</p><p>
					Users specify <span class="strong strong"><strong><span class="application application">cron</span></strong></span> jobs in cron table files, also called <code class="literal">crontab</code> files. These files are then read by the <code class="literal">crond</code> service, which executes the jobs.
				</p><section class="section" id="sect-Prerequisites_for_Cron_Jobs"><div class="titlepage"><div><div><h3 class="title">24.1.1.&nbsp;Prerequisites for Cron Jobs</h3></div></div></div><p>
						Before scheduling a <code class="literal">cron</code> job:
					</p><div class="orderedlist" id="proc-configuring_cron"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Install the <span class="strong strong"><strong><span class="package package">cronie</span></strong></span> package:
							</p><pre class="literallayout">~]# yum install cronie</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal">crond</code> service is enabled - made to start automatically at boot time - upon installation. If you disabled the service, enable it:
							</p><pre class="literallayout">~]# systemctl enable crond.service</pre></li><li class="listitem"><p class="simpara">
								Start the <code class="literal">crond</code> service for the current session:
							</p><pre class="literallayout">~]# systemctl start crond.service</pre></li><li class="listitem"><p class="simpara">
								<span class="emphasis"><em>(optional)</em></span> Configure <span class="strong strong"><strong><span class="application application">cron</span></strong></span>. For example, you can change:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										shell to be used when executing jobs
									</li><li class="listitem">
										the <code class="literal">PATH</code> environment variable
									</li><li class="listitem"><p class="simpara">
										mail addressee if a job sends emails.
									</p><p class="simpara">
										See the <span class="strong strong"><strong>crontab</strong></span>(5) manual page for information on configuring <code class="literal">cron</code>.
									</p></li></ul></div></li></ol></div></section><section class="section" id="sect-Scheduling_a_Cron_Job"><div class="titlepage"><div><div><h3 class="title">24.1.2.&nbsp;Scheduling a Cron Job</h3></div></div></div><h5 id="br-Scheduling_a_Job_as_root_User">Scheduling a Job as root User</h5><p>
						The <code class="literal">root</code> user uses the cron table in <code class="literal">/etc/crontab</code>, or, preferably, creates a cron table file in <code class="literal">/etc/cron.d/</code>. Use this procedure to schedule a job as <code class="literal">root</code>:
					</p><div class="orderedlist" id="proc-Scheduling_a_cron_Job_as_root_User"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Choose:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										in which minutes of an hour to execute the job. For example, use <code class="literal">0,10,20,30,40,50</code> or <code class="literal">0/10</code> to specify every 10 minutes of an hour.
									</li><li class="listitem">
										in which hours of a day to execute the job. For example, use <code class="literal">17-20</code> to specify time from 17:00 to 20:59.
									</li><li class="listitem">
										in which days of a month to execute the job. For example, use <code class="literal">15</code> to specify 15th day of a month.
									</li><li class="listitem">
										in which months of a year to execute the job. For example, use <code class="literal">Jun,Jul,Aug</code> or <code class="literal">6,7,8</code> to specify the summer months of the year.
									</li><li class="listitem"><p class="simpara">
										in which days of the week to execute the job. For example, use <code class="literal">*</code> for the job to execute independently of the day of week.
									</p><p class="simpara">
										Combine the chosen values into the time specification. The above example values result into this specification:
									</p><p class="simpara">
										<code class="literal">0,10,20,30,40,50 17-20 15 Jun,Jul,Aug *</code>
									</p></li></ul></div></li><li class="listitem">
								Specify the user. The job will execute as if run by this user. For example, use <code class="literal">root</code>.
							</li><li class="listitem">
								Specify the command to execute. For example, use <code class="literal">/usr/local/bin/my-script.sh</code>
							</li><li class="listitem"><p class="simpara">
								Put the above specifications into a single line:
							</p><pre class="literallayout">0,10,20,30,40,50 17-20 15 Jun,Jul,Aug * root /usr/local/bin/my-script.sh</pre></li><li class="listitem">
								Add the resulting line to <code class="literal">/etc/crontab</code>, or, preferably, create a cron table file in <code class="literal">/etc/cron.d/</code> and add the line there.
							</li></ol></div><p>
						The job will now run as scheduled.
					</p><p>
						For full reference on how to specify a job, see the <span class="strong strong"><strong>crontab</strong></span>(5) manual page. For basic information, see the beginning of the <code class="literal">/etc/crontab</code> file:
					</p><pre class="literallayout">SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root

# For details see man 4 crontabs

# Example of job definition:
# .---------------- minute (0 - 59)
# | .------------- hour (0 - 23)
# | | .---------- day of month (1 - 31)
# | | | .------- month (1 - 12) OR jan,feb,mar,apr ...
# | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
# | | | | |
# * * * * * user-name command to be executed</pre><h5 id="br-Scheduling_a_Job_as_Non-root_User">Scheduling a Job as Non-root User</h5><p>
						Non-root users can use the <span class="strong strong"><strong><span class="application application">crontab</span></strong></span> utility to configure <span class="strong strong"><strong><span class="application application">cron</span></strong></span> jobs. The jobs will run as if executed by that user.
					</p><p>
						To create a <span class="strong strong"><strong><span class="application application">cron</span></strong></span> job as a specific user:
					</p><div class="orderedlist" id="proc-Scheduling_a_cron_Job_as_non-root_User"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								From the user’s shell, run:
							</p><pre class="literallayout">[bob@localhost ~]$ <code class="literal command">crontab -e</code></pre><p class="simpara">
								This will start editing of the user’s own <code class="literal">crontab</code> file using the editor specified by the <code class="literal">VISUAL</code> or <code class="literal">EDITOR</code> environment variable.
							</p></li><li class="listitem"><p class="simpara">
								Specify the job in the same way as in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#proc-Scheduling_a_cron_Job_as_root_User">???TITLE???</a>, but leave out the field with user name. For example, instead of adding
							</p><pre class="literallayout">0,10,20,30,40,50 17-20 15 Jun,Jul,Aug * bob /home/bob/bin/script.sh</pre><p class="simpara">
								add:
							</p><pre class="literallayout">0,10,20,30,40,50 17-20 15 Jun,Jul,Aug * /home/bob/bin/script.sh</pre></li><li class="listitem">
								Save the file and exit the editor.
							</li><li class="listitem"><p class="simpara">
								<span class="emphasis"><em>(optional)</em></span> To verify the new job, list the contents of the current user’s crontab file by running:
							</p><pre class="literallayout">[bob@localhost ~]$ <code class="literal command">crontab -l</code>
@daily /home/bob/bin/script.sh</pre></li></ol></div><h5 id="br-Scheduling_Hourly_Daily_Weekly_and_Monthly_Jobs">Scheduling Hourly, Daily, Weekly, and Monthly Jobs</h5><p>
						To schedule an hourly, daily, weekly, or monthly job:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Put the actions you want your job to execute into a shell script.
							</li><li class="listitem"><p class="simpara">
								Put the shell script into one of the following directories:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">/etc/cron.hourly/</code>
									</li><li class="listitem">
										<code class="literal">/etc/cron.daily/</code>
									</li><li class="listitem">
										<code class="literal">/etc/cron.weekly/</code>
									</li><li class="listitem">
										<code class="literal">/etc/cron.monthly/</code>
									</li></ul></div></li></ol></div><p>
						From now, your script will be executed - the <code class="literal">crond</code> service automatically executes any scripts present in <code class="literal">/etc/cron.hourly</code>, <code class="literal">/etc/cron.daily</code>, <code class="literal">/etc/cron.weekly</code>, and <code class="literal">/etc/cron.monthly</code> directories at their corresponding times.
					</p></section></section><section class="section" id="s1-Scheduling_a_Recurring_Asynchronous_Job_Using_Anacron"><div class="titlepage"><div><div><h2 class="title">24.2.&nbsp;Scheduling a Recurring Asynchronous Job Using Anacron</h2></div></div></div><p>
					<code class="literal">Anacron</code>, like <code class="literal">cron</code>, is a service that enables you to schedule running a task, often called a job, at regular times. However, <code class="literal">anacron</code> differs from <code class="literal">cron</code> in two ways:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							If the system is not running at the scheduled time, an <code class="literal">anacron</code> job is postponed until the system is running;
						</li><li class="listitem">
							An <code class="literal">anacron</code> job can run once per day at most.
						</li></ul></div><p>
					Users specify <span class="strong strong"><strong><span class="application application">anacron</span></strong></span> jobs in anacron table files, also called <code class="literal">anacrontab</code> files. These files are then read by the <code class="literal">crond</code> service, which executes the jobs.
				</p><section class="section" id="sect-Prerequisites_for_Anacron_Jobs"><div class="titlepage"><div><div><h3 class="title">24.2.1.&nbsp;Prerequisites for Anacrob Jobs</h3></div></div></div><p>
						Before scheduling an <code class="literal">anacron</code> job:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Verify that you have the <span class="strong strong"><strong><span class="package package">cronie-anacron</span></strong></span> package installed:
							</p><pre class="literallayout">~]# rpm -q cronie-anacron</pre><p class="simpara">
								The <span class="strong strong"><strong><span class="package package">cronie-anacron</span></strong></span> is likely to be installed already, because it is a sub-package of the <span class="strong strong"><strong><span class="package package">cronie</span></strong></span> package. If it is not installed, use this command:
							</p><pre class="literallayout">~]# yum install cronie-anacron</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal">crond</code> service is enabled - made to start automatically at boot time - upon installation. If you disabled the service, enable it:
							</p><pre class="literallayout">~]# systemctl enable crond.service</pre></li><li class="listitem"><p class="simpara">
								Start the <code class="literal">crond</code> service for the current session:
							</p><pre class="literallayout">~]# systemctl start crond.service</pre></li><li class="listitem"><p class="simpara">
								<span class="emphasis"><em>(optional)</em></span> Configure <span class="strong strong"><strong><span class="application application">anacron</span></strong></span>. For example, you can change:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										shell to be used when executing jobs
									</li><li class="listitem">
										the <code class="literal">PATH</code> environment variable
									</li><li class="listitem"><p class="simpara">
										mail addressee if a job sends emails.
									</p><p class="simpara">
										See the <span class="strong strong"><strong>anacrontab</strong></span>(5) manual page for information on configuring <code class="literal">anacron</code>.
									</p></li></ul></div></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							By default, the anacron configuration includes a condition that prevents it from running if the computer is not plugged in. This setting ensures that the battery is not drained by running anacron jobs.
						</p><p>
							If you want to allow anacron to run even if the computer runs on battery power, open the <code class="literal">/etc/cron.hourly/0anacron</code> file and comment out the following part:
						</p><pre class="literallayout"># Do not run jobs when on battery power
online=1
for psupply in AC ADP0 ; do
  sysfile="/sys/class/power_supply/$psupply/online"

  if [ -f $sysfile ] ; then
    if [ `cat $sysfile 2&gt;/dev/null`x = 1x ]; then
      online=1
      break
    else
      online=0
    fi
  fi
done</pre></div></div></section><section class="section" id="sect-Scheduling_an_Anacron_Job"><div class="titlepage"><div><div><h3 class="title">24.2.2.&nbsp;Scheduling an Anacron Job</h3></div></div></div><h5 id="br-Scheduling_an_anacron_Job_as_root_User">Scheduling an anacron Job as root User</h5><p>
						The <code class="literal">root</code> user uses the anacron table in <code class="literal">/etc/anacrontab</code>. Use the following procedure to schedule a job as <code class="literal">root</code>.
					</p><div class="orderedlist" id="proc-Scheduling_an_anacron_Job_as_root_User"><p class="title"><strong>Scheduling an anacron Job as <code class="literal">root</code> User</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Choose:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Frequency of executing the job. For example, use <code class="literal">1</code> to specify every day or <code class="literal">3</code> to specify once in 3 days.
									</li><li class="listitem">
										The delay of executing the job. For example, use <code class="literal">0</code> to specify no delay or <code class="literal">60</code> to specify 1 hour of delay.
									</li><li class="listitem">
										The job identifier, which will be used for logging. For example, use <code class="literal">my.anacron.job</code> to log the job with the <code class="literal">my.anacron.job</code> string.
									</li><li class="listitem"><p class="simpara">
										The command to execute. For example, use <code class="literal">/usr/local/bin/my-script.sh</code>
									</p><p class="simpara">
										Combine the chosen values into the job specification. Here is an example specification:
									</p><pre class="literallayout">3 60 cron.daily /usr/local/bin/my-script.sh</pre></li></ul></div></li><li class="listitem">
								Add the resulting line to <code class="literal">/etc/anacrontab</code>.
							</li></ol></div><p>
						The job will now run as scheduled.
					</p><p>
						For simple job examples, see the <code class="literal">/etc/anacrontab</code> file. For full reference on how to specify a job, see the <span class="strong strong"><strong>anacrontab</strong></span>(5) manual page.
					</p><h5 id="scheduling_hourly_daily_weekly_and_monthly_jobs">Scheduling Hourly, Daily, Weekly, and Monthly Jobs</h5><p>
						You can schedule daily, weekly, and monthly jobs with <span class="strong strong"><strong><span class="application application">anacron</span></strong></span>. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#br-Scheduling_Hourly_Daily_Weekly_and_Monthly_Jobs" title="Scheduling Hourly, Daily, Weekly, and Monthly Jobs">the section called “Scheduling Hourly, Daily, Weekly, and Monthly Jobs”</a>.
					</p></section></section><section class="section" id="sect-Scheduling_a_Job_to_Run_at_a_Specific_Time_Using_at"><div class="titlepage"><div><div><h2 class="title">24.3.&nbsp;Scheduling a Job to Run at a Specific Time Using at</h2></div></div></div><p>
					To schedule a one-time task, also called a job, to run once at a specific time, use the <code class="literal">at</code> utility.
				</p><p>
					Users specify <code class="literal">at</code> jobs using the <span class="strong strong"><strong><span class="application application">at</span></strong></span> utility. The jobs are then executed by the <code class="literal">atd</code> service.
				</p><section class="section" id="sect-Prerequisites_for_At_Jobs"><div class="titlepage"><div><div><h3 class="title">24.3.1.&nbsp;Prerequisites for At Jobs</h3></div></div></div><p>
						Before scheduling an <code class="literal">at</code> job:
					</p><div class="orderedlist" id="proc-Prerequisites_for_At_Jobs"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Install the <span class="strong strong"><strong><span class="package package">at</span></strong></span> package:
							</p><pre class="literallayout">~]# yum install at</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal">atd</code> service is enabled - made to start automatically at boot time - upon installation. If you disabled the service, enable it:
							</p><pre class="literallayout">~]# systemctl enable atd.service</pre></li><li class="listitem"><p class="simpara">
								Start the <code class="literal">atd</code> service for the current session:
							</p><pre class="literallayout">~]# systemctl start atd.service</pre></li></ol></div></section><section class="section" id="sect-Scheduling_an_At_Job"><div class="titlepage"><div><div><h3 class="title">24.3.2.&nbsp;Scheduling an At Job</h3></div></div></div><div class="orderedlist" id="proc-Scheduling_an_At_Job"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								A job is always run by some user. Log in as the desired user and run:
							</p><pre class="literallayout">~]# at time</pre><p class="simpara">
								Replace <span class="emphasis"><em>time</em></span> with the time specification.
							</p><p class="simpara">
								For details on specifying time, see the <span class="strong strong"><strong>at</strong></span>(1) manual page and the <code class="literal">/usr/share/doc/at/timespec</code> file.
							</p><div class="example" id="ex-Specifying_At_Time"><p class="title"><strong>Example&nbsp;24.1.&nbsp;Specifying Time for At</strong></p><div class="example-contents"><p>
									To execute the job at 15:00, run:
								</p><pre class="literallayout">~]# at 15:00</pre><p>
									If the specified time has passed, the job is executed at the same time the next day.
								</p><p>
									To execute the job on August 20 2017, run:
								</p><pre class="literallayout">~]# at August 20 2017</pre><p>
									or
								</p><pre class="literallayout">~]# at 082017</pre><p>
									To execute the job 5 days from now, run:
								</p><pre class="literallayout">~]# now + 5 days</pre></div></div></li><li class="listitem"><p class="simpara">
								At the displayed <code class="literal">at&gt;</code> prompt, enter the command to execute and press Enter:
							</p><pre class="literallayout">~]# at 15:00
at&gt; sh /usr/local/bin/my-script.sh
at&gt;</pre><p class="simpara">
								Repeat this step for every command you want to execute.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The <code class="literal">at&gt;</code> prompt shows which shell it will use:
								</p><pre class="literallayout">warning: commands will be executed using /bin/sh</pre><p>
									The <span class="strong strong"><strong><span class="application application">at</span></strong></span> utility uses the shell set in user’s SHELL environment variable, or the user’s login shell, or <code class="literal">/bin/sh</code>, whichever is found first.
								</p></div></div></li><li class="listitem">
								Press Ctrl+D on an empty line to finish specifying the job.
							</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If the set of commands or the script tries to display information to standard output, the output is emailed to the user.
						</p></div></div><h5 id="br-Viewing_Pending_Jobs">Viewing Pending Jobs</h5><p>
						To view the list of pending jobs, use the <code class="literal command">atq</code> command:
					</p><pre class="literallayout">~]# atq
26   Thu Feb 23 15:00:00 2017 a root
28   Thu Feb 24 17:30:00 2017 a root</pre><p>
						Each job is listed on a separate line in the following format:
					</p><pre class="literallayout"><span class="emphasis"><em>job_number scheduled_date scheduled_hour job_class user_name</em></span></pre><p>
						The <code class="literal">job_queue</code> column specifies whether a job is an <code class="literal">at</code> or a <code class="literal">batch</code> job. <code class="literal">a</code> stands for <code class="literal">at</code>, <code class="literal">b</code> stands for <code class="literal">batch</code>.
					</p><p>
						Non-root users only see their own jobs. The root user sees jobs for all users.
					</p><h5 id="br-Deleting_a_Scheduled_Job">Deleting a Scheduled Job</h5><p>
						To delete a scheduled job:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								List pending jobs with the <code class="literal command">atq</code> command:
							</p><pre class="literallayout">~]# atq
26   Thu Feb 23 15:00:00 2017 a root
28   Thu Feb 24 17:30:00 2017 a root</pre></li><li class="listitem">
								Find the job you want to delete by its scheduled time and the user.
							</li><li class="listitem"><p class="simpara">
								Run the <code class="literal command">atrm</code> command, specifying the job by its number:
							</p><pre class="literallayout">~]# atrm 26</pre></li></ol></div><section class="section" id="sect-Controlling_Access_to_At_and_Batch"><div class="titlepage"><div><div><h4 class="title">24.3.2.1.&nbsp;Controlling Access to At and Batch</h4></div></div></div><p>
							You can restrict access to the <code class="literal command">at</code> and <code class="literal command">batch</code> commands for specific users. To do this, put user names into <code class="literal">/etc/at.allow</code> or <code class="literal">/etc/at.deny</code> according to these rules:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Both access control files use the same format: one user name on each line.
								</li><li class="listitem">
									No white space is permitted in either file.
								</li><li class="listitem">
									If the <code class="literal">at.allow</code> file exists, only users listed in the file are allowed to use <code class="literal command">at</code> or <code class="literal command">batch</code>, and the <code class="literal">at.deny</code> file is ignored.
								</li><li class="listitem">
									If <code class="literal">at.allow</code> does not exist, users listed in <code class="literal">at.deny</code> are not allowed to use <code class="literal command">at</code> or <code class="literal command">batch</code>.
								</li><li class="listitem">
									The <code class="literal">root</code> user is not affected by the access control files and can always execute the <code class="literal command">at</code> and <code class="literal command">batch</code> commands.
								</li></ul></div><p>
							The <code class="literal command">at</code> daemon (<code class="literal command">atd</code>) does not have to be restarted if the access control files are modified. The access control files are read each time a user tries to execute the <code class="literal command">at</code> or <code class="literal command">batch</code> commands.
						</p></section></section></section><section class="section" id="sect-Scheduling_a_Job_to_Run_on_System_Load_Drop_Using_batch"><div class="titlepage"><div><div><h2 class="title">24.4.&nbsp;Scheduling a Job to Run on System Load Drop Using batch</h2></div></div></div><p>
					To schedule a one-time task, also called a job, to run when the system load average drops below the specified value, use the <code class="literal">batch</code> utility. This can be useful for performing resource-demanding tasks or for preventing the system from being idle.
				</p><p>
					Users specify <code class="literal">batch</code> jobs using the <span class="strong strong"><strong><span class="application application">batch</span></strong></span> utility. The jobs are then executed by the <code class="literal">atd</code> service.
				</p><section class="section" id="sect-Prerequisites_for_Batch_Jobs"><div class="titlepage"><div><div><h3 class="title">24.4.1.&nbsp;Prerequisites for Batch Jobs</h3></div></div></div><p>
						The <code class="literal">batch</code> utility is provided in the <code class="literal">at</code> package, and <code class="literal">batch</code> jobs are managed by the <code class="literal">atd</code> service. Hence, the prerequisites for <code class="literal">batch</code> jobs are the same as for <code class="literal">at</code> jobs. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Prerequisites_for_At_Jobs" title="24.3.1. Prerequisites for At Jobs">Section&nbsp;24.3.1, “Prerequisites for At Jobs”</a>.
					</p></section><section class="section" id="sect-Scheduling_a_Batch_Job"><div class="titlepage"><div><div><h3 class="title">24.4.2.&nbsp;Scheduling a Batch Job</h3></div></div></div><div class="orderedlist" id="proc-Scheduling_a_Batch_Job"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								A job is always run by some user. Log in as the desired user and run:
							</p><pre class="literallayout">~]# batch</pre></li><li class="listitem"><p class="simpara">
								At the displayed <code class="literal">at&gt;</code> prompt, enter the command to execute and press Enter:
							</p><pre class="literallayout">~]# batch
at&gt; sh /usr/local/bin/my-script.sh</pre><p class="simpara">
								Repeat this step for every command you want to execute.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The <code class="literal">at&gt;</code> prompt shows which shell it will use:
								</p><pre class="literallayout">warning: commands will be executed using /bin/sh</pre><p>
									The <span class="strong strong"><strong><span class="application application">batch</span></strong></span> utility uses the shell set in user’s SHELL environment variable, or the user’s login shell, or <code class="literal">/bin/sh</code>, whichever is found first.
								</p></div></div></li><li class="listitem">
								Press Ctrl+D on an empty line to finish specifying the job.
							</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If the set of commands or the script tries to display information to standard output, the output is emailed to the user.
						</p></div></div><h5 id="br-Changing_the_Default_System_Load_Average_Limit">Changing the Default System Load Average Limit</h5><p>
						By default, <code class="literal">batch</code> jobs start when system load average drops below 0.8. This setting is kept in the <code class="literal">atq</code> service. To change the system load limit:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To the <code class="literal">/etc/sysconfig/atd</code> file, add this line:
							</p><pre class="literallayout">OPTS='-l <span class="emphasis"><em>x</em></span>'</pre><p class="simpara">
								Substitute <span class="emphasis"><em>x</em></span> with the new load average. For example:
							</p><pre class="literallayout">OPTS='-l 0.5'</pre></li><li class="listitem"><p class="simpara">
								Restart the <code class="literal">atq</code> service:
							</p><pre class="literallayout"># systemctl restart atq</pre></li></ol></div><h5 id="viewing_pending_jobs">Viewing Pending Jobs</h5><p>
						To view the list of pending jobs, use the <code class="literal command">atq</code> command. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#br-Viewing_Pending_Jobs" title="Viewing Pending Jobs">the section called “Viewing Pending Jobs”</a>.
					</p><h5 id="deleting_a_scheduled_job">Deleting a Scheduled Job</h5><p>
						To delete a scheduled job, use the <code class="literal command">atrm</code> command. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#br-Deleting_a_Scheduled_Job" title="Deleting a Scheduled Job">the section called “Deleting a Scheduled Job”</a>.
					</p><h5 id="controlling_access_to_batch">Controlling Access to Batch</h5><p>
						You can also restrict the usage of the <code class="literal">batch</code> utility. This is done for the <code class="literal">batch</code> and <code class="literal">at</code> utilities together. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Controlling_Access_to_At_and_Batch" title="24.3.2.1. Controlling Access to At and Batch">Section&nbsp;24.3.2.1, “Controlling Access to At and Batch”</a>.
					</p></section></section><section class="section" id="s1-one-time_script_on_next_boot_using_systemd_unit_file"><div class="titlepage"><div><div><h2 class="title">24.5.&nbsp;Scheduling a Job to Run on Next Boot Using a systemd Unit File</h2></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">cron</span></strong></span>, <span class="strong strong"><strong><span class="application application">anacron</span></strong></span>, <span class="strong strong"><strong><span class="application application">at</span></strong></span>, and <span class="strong strong"><strong><span class="application application">batch</span></strong></span> utilities allow scheduling jobs for specific times or for when system workload reaches a certain level. It is also possible to create a job that will run during the next system boot. This is done by creating a <code class="literal">systemd</code> unit file that specifies the script to run and its dependencies.
				</p><p>
					To configure a script to run on the next boot:
				</p><div class="orderedlist" id="proc-scheduling_one-time_job_on_next_boot"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">systemd</code> unit file that specifies at which stage of the boot process to run the script. This example shows a unit file with a reasonable set of <code class="literal">Wants=</code> and <code class="literal">After=</code> dependencies:
						</p><pre class="literallayout">~]# cat /etc/systemd/system/one-time.service
[Unit]
# The script needs to execute after:
# network interfaces are configured
Wants=network-online.target
After=network-online.target
# all remote filesystems (NFS/_netdev) are mounted
After=remote-fs.target
# name (DNS) and user resolution from remote databases (AD/LDAP) are available
After=nss-user-lookup.target nss-lookup.target
# the system clock has synchronized
After=time-sync.target

[Service]
Type=oneshot
ExecStart=/usr/local/bin/foobar.sh

[Install]
WantedBy=multi-user.target</pre><p class="simpara">
							If you use this example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									substitute <code class="literal">/usr/local/bin/foobar.sh</code> with the name of your script
								</li><li class="listitem"><p class="simpara">
									modify the set of <code class="literal">After=</code> entries if necessary
								</p><p class="simpara">
									For information on specifying the stage of boot, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Managing_Services_with_systemd-Unit_Files" title="10.6. Creating and Modifying systemd Unit Files">Section&nbsp;10.6, “Creating and Modifying systemd Unit Files”</a>.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							If you want the <code class="literal">systemd</code> service to stay active after executing the script, add the <code class="literal">RemainAfterExit=yes</code> line to the <code class="literal">[Service]</code> section:
						</p><pre class="literallayout">[Service]
Type=oneshot
<span class="emphasis"><em>RemainAfterExit=yes</em></span>
ExecStart=/usr/local/bin/foobar.sh</pre></li><li class="listitem"><p class="simpara">
							Reload the <code class="literal">systemd</code>daemon:
						</p><pre class="literallayout">~]# systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							Enable the <code class="literal">systemd</code> service:
						</p><pre class="literallayout">~]# systemctl enable one-time.service</pre></li><li class="listitem"><p class="simpara">
							Create the script to execute:
						</p><pre class="literallayout">~]# cat /usr/local/bin/foobar.sh
#!/bin/bash

touch /root/test_file</pre></li><li class="listitem"><p class="simpara">
							If you want the script to run during the next boot only, and not on every boot, add a line that disables the <code class="literal">systemd</code> unit:
						</p><pre class="literallayout">#!/bin/bash

touch /root/test_file
<span class="emphasis"><em>systemctl disable one-time.service</em></span></pre></li><li class="listitem"><p class="simpara">
							Make the script executable:
						</p><pre class="literallayout">~]# chmod +x /usr/local/bin/foobar.sh</pre></li></ol></div></section><section class="section" id="sect-Automating_System_Tasks-Resources"><div class="titlepage"><div><div><h2 class="title">24.6.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information on automating system tasks on Red Hat Enterprise Linux, see the resources listed below.
				</p><h4 id="installed_documentation_2">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>cron</strong></span> - The manual page for the <span class="strong strong"><strong><span class="application application">crond</span></strong></span> daemon documents how <code class="literal">crond</code> works and how to change its behavior.
						</li><li class="listitem">
							<span class="strong strong"><strong>crontab</strong></span> - The manual page for the <span class="strong strong"><strong><span class="application application">crontab</span></strong></span> utility provides a complete list of supported options.
						</li><li class="listitem">
							<span class="strong strong"><strong>crontab</strong></span>(5) - This section of the manual page for the <span class="strong strong"><strong><span class="application application">crontab</span></strong></span> utility documents the format of <code class="literal">crontab</code> files.
						</li></ul></div></section></section><section class="chapter" id="ch-abrt"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;25.&nbsp;Automatic Bug Reporting Tool (ABRT)</h2></div></div></div><section class="section" id="sect-abrt-intro"><div class="titlepage"><div><div><h2 class="title">25.1.&nbsp;Introduction to ABRT</h2></div></div></div><p>
					The <span class="strong strong"><strong><span class="application application">Automatic Bug Reporting Tool</span></strong></span>, commonly abbreviated as <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>, is a set of tools that is designed to help users detect and report application crashes. Its main purpose is to ease the process of reporting issues and finding solutions. In this context, the solution can be a Bugzilla ticket, a knowledge-base article, or a suggestion to update a package to a version containing a fix.
				</p><p>
					<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> consists of the <code class="literal">abrtd</code> daemon and a number of system services and utilities for processing, analyzing, and reporting detected problems. The daemon runs silently in the background most of the time and springs into action when an application crashes or a kernel oops is detected. The daemon then collects the relevant problem data, such as a core file if there is one, the crashing application’s command line parameters, and other data of forensic utility.
				</p><p>
					<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> currently supports the detection of crashes in applications written in the C, C++, Java, Python, and Ruby programming languages, as well as X.Org crashes, kernel oopses, and kernel panics. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-detecting-sw-problems" title="25.4. Detecting Software Problems">Section&nbsp;25.4, “Detecting Software Problems”</a> for more detailed information on the types of failures and crashes supported, and the way the various types of crashes are detected.
				</p><p>
					The identified problems can be reported to a remote issue tracker, and the reporting can be configured to happen automatically whenever an issue is detected. Problem data can also be stored locally or on a dedicated system and reviewed, reported, and deleted manually by the user. The reporting tools can send problem data to a Bugzilla database or the Red Hat Technical Support (RHTSupport) website. The tools can also upload it using <code class="literal">FTP</code> or <code class="literal">SCP</code>, send it as an email, or write it to a file.
				</p><p>
					The <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> component that handles existing problem data (as opposed to, for example, the creation of new problem data) is a part of a separate project, <span class="strong strong"><strong><span class="application application">libreport</span></strong></span>. The <span class="strong strong"><strong><span class="application application">libreport</span></strong></span> library provides a generic mechanism for analyzing and reporting problems, and it is used by applications other than <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> as well. However, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> and <span class="strong strong"><strong><span class="application application">libreport</span></strong></span> operation and configuration are closely integrated. They are, therefore, discussed as one in this document.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Note that <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> report is generated only when core dump is generated. Core dump is generated only for some signals. For example, SIGKILL (-9) does not generate core dump, so <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> cannot catch this fail. For more information about signals and core dump generating, see man 7 signal.
					</p></div></div></section><section class="section" id="sect-abrt-installation"><div class="titlepage"><div><div><h2 class="title">25.2.&nbsp;Installing ABRT and Starting its Services</h2></div></div></div><p>
					In order to use <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>, ensure that the <span class="strong strong"><strong><span class="package package">abrt-desktop</span></strong></span> or the <span class="strong strong"><strong><span class="package package">abrt-cli</span></strong></span> package is installed on your system. The <span class="strong strong"><strong><span class="package package">abrt-desktop</span></strong></span> package provides a graphical user interface for <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>, and the <span class="strong strong"><strong><span class="package package">abrt-cli</span></strong></span> package contains a tool for using <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> on the command line. You can also install both. The general workflow with both the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI and the command line tool is procedurally similar and follows the same pattern.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Please note that installing the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> packages overwrites the <code class="literal">/proc/sys/kernel/core_pattern</code> file, which can contain a template used to name core-dump files. The content of this file will be overwritten to:
					</p><pre class="literallayout">|/usr/libexec/abrt-hook-ccpp %s %c %p %u %g %t e</pre></div></div><p>
					See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Installing" title="9.2.4. Installing Packages">Section&nbsp;9.2.4, “Installing Packages”</a> for general information on how to install packages using the <span class="strong strong"><strong><span class="application application">Yum</span></strong></span> package manager.
				</p><section class="section" id="sect-abrt-installation-gui"><div class="titlepage"><div><div><h3 class="title">25.2.1.&nbsp;Installing the ABRT GUI</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> <span class="emphasis"><em>graphical user interface</em></span> provides an easy-to-use front end for working in a desktop environment. You can install the required package by running the following command as the <code class="literal">root</code> user:
					</p><pre class="literallayout">~]# yum install abrt-desktop</pre><p>
						Upon installation, the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> notification applet is configured to start automatically when your graphical desktop session starts. You can verify that the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> applet is running by issuing the following command in a terminal:
					</p><pre class="literallayout">~]$ ps -el | grep abrt-applet
0 S  500 2036 1824 0 80  0 - 61604 poll_s ?    00:00:00 abrt-applet</pre><p>
						If the applet is not running, you can start it manually in your current desktop session by running the <code class="literal">abrt-applet</code> program:
					</p><pre class="literallayout">~]$ <code class="literal command">abrt-applet &amp;</code>
[1] 2261</pre></section><section class="section" id="sect-abrt-installation-cli"><div class="titlepage"><div><div><h3 class="title">25.2.2.&nbsp;Installing ABRT for the Command Line</h3></div></div></div><p>
						The <span class="emphasis"><em>command line interface</em></span> is useful on headless machines, remote systems connected over a network, or in scripts. You can install the required package by running the following command as the <code class="literal">root</code> user:
					</p><pre class="literallayout">~]# yum install abrt-cli</pre></section><section class="section" id="sect-abrt-installation-supp-tools"><div class="titlepage"><div><div><h3 class="title">25.2.3.&nbsp;Installing Supplementary ABRT Tools</h3></div></div></div><p>
						To receive email notifications about crashes detected by <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>, you need to have the <span class="strong strong"><strong><span class="package package">libreport-plugin-mailx</span></strong></span> package installed. You can install it by executing the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install libreport-plugin-mailx</pre><p>
						By default, it sends notifications to the <code class="literal">root</code> user at the local machine. The email destination can be configured in the <code class="literal">/etc/libreport/plugins/mailx.conf</code> file.
					</p><p>
						To have notifications displayed in your console at login time, install the <span class="strong strong"><strong><span class="package package">abrt-console-notification</span></strong></span> package as well.
					</p><p>
						<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> can detect, analyze, and report various types of software failures. By default, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> is installed with support for the most common types of failures, such as crashes of C and C++ applications. Support for other types of failures is provided by independent packages. For example, to install support for detecting exceptions in applications written using the Java language, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install abrt-java-connector</pre><p>
						See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-detecting-sw-problems" title="25.4. Detecting Software Problems">Section&nbsp;25.4, “Detecting Software Problems”</a> for a list of languages and software projects which <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> supports. The section also includes a list of all corresponding packages that enable the detection of the various types of failures.
					</p></section><section class="section" id="sect-abrt-starting"><div class="titlepage"><div><div><h3 class="title">25.2.4.&nbsp;Starting the ABRT Services</h3></div></div></div><p>
						The <code class="literal">abrtd</code> daemon requires the <code class="literal">abrt</code> user to exist for file system operations in the <code class="literal">/var/spool/abrt</code> directory. When the <span class="strong strong"><strong><span class="package package">abrt</span></strong></span> package is installed, it automatically creates the <code class="literal">abrt</code> user whose UID and GID is 173, if such user does not already exist. Otherwise, the <code class="literal">abrt</code> user can be created manually. In that case, any UID and GID can be chosen, because <code class="literal">abrtd</code> does not require a specific UID and GID.
					</p><p>
						The <code class="literal">abrtd</code> daemon is configured to start at boot time. You can use the following command to verify its current status:
					</p><pre class="literallayout">~]$ <code class="literal command">systemctl is-active abrtd.service</code>
active</pre><p>
						If <code class="literal command">systemctl</code> returns <code class="literal">inactive</code> or <code class="literal">unknown</code>, the daemon is not running. You can start it for the current session by entering the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# systemctl start abrtd.service</pre><p>
						You can use the same commands to start or check status of related error-detection services. For example, make sure the <code class="literal">abrt-ccpp</code> service is running if you want <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> to detect C or C++ crashes. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-detecting-sw-problems" title="25.4. Detecting Software Problems">Section&nbsp;25.4, “Detecting Software Problems”</a> for a list of all available <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> detection services and their respective packages.
					</p><p>
						With the exception of the <code class="literal">abrt-vmcore</code> and <code class="literal">abrt-pstoreoops</code> services, which are only started when a kernel panic or kernel oops occurs, all <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> services are automatically enabled and started at boot time when their respective packages are installed. You can disable or enable any <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> service by using the <code class="literal command">systemctl</code> utility as described in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a>.
					</p></section><section class="section" id="sect-abrt-crash_detection_test"><div class="titlepage"><div><div><h3 class="title">25.2.5.&nbsp;Testing ABRT Crash Detection</h3></div></div></div><p>
						To test that <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> works properly, use the <code class="literal command">kill</code> command to send the SEGV signal to terminate a process. For example, start a <code class="literal">sleep</code> process and terminate it with the <code class="literal command">kill</code> command in the following way:
					</p><pre class="literallayout">~]$ <code class="literal command">sleep 100 &amp;</code>
[1] 2823
~]$ <code class="literal command">kill -s SIGSEGV 2823</code></pre><p>
						<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> detects a crash shortly after executing the <code class="literal command">kill</code> command, and, provided a graphical session is running, the user is notified of the detected problem by the <span class="strong strong"><strong>GUI</strong></span> notification applet. On the command line, you can check that the crash was detected by running the <code class="literal command">abrt-cli list</code> command or by examining the crash dump created in the <code class="literal">/var/spool/abrt/</code> directory. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-handling-problems" title="25.5. Handling Detected Problems">Section&nbsp;25.5, “Handling Detected Problems”</a> for more information on how to work with detected crashes.
					</p></section></section><section class="section" id="sect-abrt-config"><div class="titlepage"><div><div><h2 class="title">25.3.&nbsp;Configuring ABRT</h2></div></div></div><p>
					A problem life cycle is driven by <span class="emphasis"><em>events</em></span> in <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>. For example:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Event #1 — a problem-data directory is created.
						</li><li class="listitem">
							Event #2 — problem data is analyzed.
						</li><li class="listitem">
							Event #3 — the problem is reported to Bugzilla.
						</li></ul></div><p>
					Whenever a problem is detected, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> compares it with all existing problem data and determines whether that same problem has already been recorded. If it has, the existing problem data is updated, and the most recent (duplicate) problem is not recorded again. If the problem is not recognized by <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>, a <span class="emphasis"><em>problem-data directory</em></span> is created. A problem-data directory typically consists of files such as: <code class="literal">analyzer</code>, <code class="literal">architecture</code>, <code class="literal">coredump</code>, <code class="literal">cmdline</code>, <code class="literal">executable</code>, <code class="literal">kernel</code>, <code class="literal">os_release</code>, <code class="literal">reason</code>, <code class="literal">time</code>, and <code class="literal">uid</code>.
				</p><p>
					Other files, such as <code class="literal">backtrace</code>, can be created during the analysis of the problem, depending on which analyzer method is used and its configuration settings. Each of these files holds specific information about the system and the problem itself. For example, the <code class="literal">kernel</code> file records the version of a crashed kernel.
				</p><p>
					After the problem-data directory is created and problem data gathered, you can process the problem using either the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI, or the <span class="strong strong"><strong><span class="application application">abrt-cli</span></strong></span> utility for the command line. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-handling-problems" title="25.5. Handling Detected Problems">Section&nbsp;25.5, “Handling Detected Problems”</a> for more information about the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> tools provided for working with recorded problems.
				</p><section class="section" id="sect-abrt-config-events"><div class="titlepage"><div><div><h3 class="title">25.3.1.&nbsp;Configuring Events</h3></div></div></div><p>
						<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> events use <span class="emphasis"><em>plugins</em></span> to carry out the actual reporting operations. Plugins are compact utilities that the events call to process the content of problem-data directories. Using plugins, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> is capable of reporting problems to various destinations, and almost every reporting destination requires some configuration. For instance, Bugzilla requires a user name, password, and a <span class="strong strong"><strong>URL</strong></span> pointing to an instance of the Bugzilla service.
					</p><p>
						Some configuration details can have default values (such as a Bugzilla URL), but others cannot have sensible defaults (for example, a user name). <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> looks for these settings in configuration files, such as <code class="literal">report_Bugzilla.conf</code>, in the <code class="literal">/etc/libreport/events/</code> or <code class="literal">$HOME/.cache/abrt/events/</code> directories for system-wide or user-specific settings respectively. The configuration files contain pairs of directives and values.
					</p><p>
						These files are the bare minimum necessary for running events and processing the problem-data directories. The <code class="literal command">gnome-abrt</code> and <code class="literal command">abrt-cli</code> tools read the configuration data from these files and pass it to the events they run.
					</p><p>
						Additional information about events (such as their description, names, types of parameters that can be passed to them as environment variables, and other properties) is stored in <code class="literal"><span class="emphasis"><em>event_name</em></span>.xml</code> files in the <code class="literal">/usr/share/libreport/events/</code> directory. These files are used by both <span class="strong strong"><strong><span class="application application">gnome-abrt</span></strong></span> and <span class="strong strong"><strong><span class="application application">abrt-cli</span></strong></span> to make the user interface more friendly. Do not edit these files unless you want to modify the standard installation. If you intend to do that, copy the file to be modified to the <code class="literal">/etc/libreport/events/</code> directory and modify the new file. These files can contain the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								a user-friendly event name and description (Bugzilla, Report to Bugzilla bug tracker),
							</li><li class="listitem">
								a list of items in a problem-data directory that are required for the event to succeed,
							</li><li class="listitem">
								a default and mandatory selection of items to send or not send,
							</li><li class="listitem">
								whether the <span class="strong strong"><strong>GUI</strong></span> should prompt for data review,
							</li><li class="listitem">
								what configuration options exist, their types (string, Boolean, and so on), default value, prompt string, and so on; this lets the <span class="strong strong"><strong>GUI</strong></span> build appropriate configuration dialogs.
							</li></ul></div><p>
						For example, the <code class="literal">report_Logger</code> event accepts an output filename as a parameter. Using the respective <code class="literal"><span class="emphasis"><em>event_name</em></span>.xml</code> file, the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI determines which parameters can be specified for a selected event and allows the user to set the values for these parameters. The values are saved by the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI and reused on subsequent invocations of these events. Note that the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI saves configuration options using the <span class="strong strong"><strong><span class="application application">GNOME Keyring</span></strong></span> tool and by passing them to events, it overrides data from text configuration files.
					</p><p>
						To open the graphical <code class="literal">Configuration</code> window, choose <span class="guimenu">Automatic Bug Reporting Tool</span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu">Preferences</span> → <span class="guimenuitem"><!--Empty--></span> from within a running instance of the <span class="strong strong"><strong><span class="application application">gnome-abrt</span></strong></span> application. This window shows a list of events that can be selected during the reporting process when using the <span class="strong strong"><strong>GUI</strong></span>. When you select one of the configurable events, you can click the <span class="guibutton">Configure</span> button and modify the settings for that event.
					</p><div class="figure" id="figu-ABRT-config-events"><p class="title"><strong>Figure&nbsp;25.1.&nbsp;Configuring ABRT Events</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ABRT-config-events.png" alt="A screenshot of a configuration window in the ABRT GUI application."></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							All files in the <code class="literal">/etc/libreport/</code> directory hierarchy are world-readable and are meant to be used as global settings. Thus, it is not advisable to store user names, passwords, or any other sensitive data in them. The per-user settings (set in the <span class="strong strong"><strong>GUI</strong></span> application and readable by the owner of <code class="literal">$HOME</code> only) are safely stored in <span class="strong strong"><strong><span class="application application">GNOME Keyring</span></strong></span>, or they can be stored in a text configuration file in <code class="literal">$HOME/.abrt/</code> for use with <code class="literal command">abrt-cli</code>.
						</p></div></div><p>
						The following table shows a selection of the default analyzing, collecting, and reporting events provided by the standard installation of <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>. The table lists each event’s name, identifier, configuration file from the <code class="literal">/etc/libreport/events.d/</code> directory, and a brief description. Note that while the configuration files use the event identifiers, the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI refers to the individual events using their names. Note also that not all of the events can be set up using the <span class="strong strong"><strong>GUI</strong></span>. For information on how to define a custom event, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-config-custom" title="25.3.2. Creating Custom Events">Section&nbsp;25.3.2, “Creating Custom Events”</a>.
					</p><div class="table" id="tab-abrt-events-standard"><p class="title"><strong>Table&nbsp;25.1.&nbsp;Standard ABRT Events</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569344986704" scope="col">Name</th><th align="left" valign="top" id="idm140569344985616" scope="col">Identifier and Configuration File</th><th align="left" valign="top" id="idm140569344984560" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										uReport
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										report_uReport
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Uploads a μReport to the <span class="strong strong"><strong><span class="application application">FAF</span></strong></span> server.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Mailx
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										report_Mailx
									</p>
									 <p>
										<code class="literal">mailx_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Sends the problem report via the <span class="strong strong"><strong><span class="application application">Mailx</span></strong></span> utility to a specified email address.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Bugzilla
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										report_Bugzilla
									</p>
									 <p>
										<code class="literal">bugzilla_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Reports the problem to the specified installation of the <span class="strong strong"><strong><span class="application application">Bugzilla</span></strong></span> bug tracker.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Red Hat Customer Support
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										report_RHTSupport
									</p>
									 <p>
										<code class="literal">rhtsupport_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Reports the problem to the Red Hat Technical Support system.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Analyze C or C++ Crash
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										analyze_CCpp
									</p>
									 <p>
										<code class="literal">ccpp_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Sends the core dump to a remote retrace server for analysis or performs a local analysis if the remote one fails.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Report uploader
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										report_Uploader
									</p>
									 <p>
										<code class="literal">uploader_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Uploads a tarball (<code class="literal">.tar.gz</code>) archive with problem data to the chosen destination using the <code class="literal">FTP</code> or the <code class="literal">SCP</code> protocol.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Analyze VM core
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										analyze_VMcore
									</p>
									 <p>
										<code class="literal">vmcore_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Runs the <span class="strong strong"><strong><span class="application application">GDB</span></strong></span> (the GNU debugger) on the problem data of a kernel oops and generates a <code class="literal">backtrace</code> of the kernel.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Local GNU Debugger
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										analyze_LocalGDB
									</p>
									 <p>
										<code class="literal">ccpp_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Runs <span class="strong strong"><strong><span class="application application">GDB</span></strong></span> (the GNU debugger) on the problem data of an application and generates a <code class="literal">backtrace</code> of the program.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Collect .xsession-errors
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										analyze_xsession_errors
									</p>
									 <p>
										<code class="literal">ccpp_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Saves relevant lines from the <code class="literal">~/.xsession-errors</code> file to the problem report.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Logger
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										report_Logger
									</p>
									 <p>
										<code class="literal">print_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Creates a problem report and saves it to a specified local file.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140569344986704"> <p>
										Kerneloops.org
									</p>
									 </td><td align="left" valign="top" headers="idm140569344985616"> <p>
										report_Kerneloops
									</p>
									 <p>
										<code class="literal">koops_event.conf</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140569344984560"> <p>
										Sends a kernel problem to the oops tracker at kerneloops.org.
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="sect-abrt-config-custom"><div class="titlepage"><div><div><h3 class="title">25.3.2.&nbsp;Creating Custom Events</h3></div></div></div><p>
						Each event is defined by one rule structure in a respective configuration file. The configuration files are typically stored in the <code class="literal">/etc/libreport/events.d/</code> directory. These configuration files are loaded by the main configuration file, <code class="literal">/etc/libreport/report_event.conf</code>. There is no need to edit the default configuration files because abrt will run the scripts contained in <code class="literal">/etc/libreport/events.d/</code>. This file accepts shell metacharacters (for example, *, $, ?) and interprets relative paths relatively to its location.
					</p><p>
						Each <span class="emphasis"><em>rule</em></span> starts with a line with a non-space leading character, and all subsequent lines starting with the <code class="literal">space</code> character or the <code class="literal">tab</code> character are considered a part of this rule. Each <span class="emphasis"><em>rule</em></span> consists of two parts, a <span class="emphasis"><em>condition</em></span> part and a <span class="emphasis"><em>program</em></span> part. The condition part contains conditions in one of the following forms:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>VAR</em></span>=<span class="emphasis"><em>VAL</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>VAR</em></span>!=<span class="emphasis"><em>VAL</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>VAL</em></span>~=<span class="emphasis"><em>REGEX</em></span>
							</li></ul></div><p>
						where:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>VAR</em></span> is either the EVENT key word or a name of a problem-data directory element (such as <code class="literal">executable</code>, <code class="literal">package</code>, <code class="literal">hostname</code>, and so on),
							</li><li class="listitem">
								<span class="emphasis"><em>VAL</em></span> is either a name of an event or a problem-data element, and
							</li><li class="listitem">
								<span class="emphasis"><em>REGEX</em></span> is a regular expression.
							</li></ul></div><p>
						The program part consists of program names and shell-interpretable code. If all conditions in the condition part are valid, the program part is run in the shell. The following is an <span class="emphasis"><em>event</em></span> example:
					</p><pre class="literallayout">EVENT=post-create date &gt; /tmp/dt
    echo $HOSTNAME <code class="literal">uname -r</code></pre><p>
						This event would overwrite the contents of the <code class="literal">/tmp/dt</code> file with the current date and time and print the host name of the machine and its kernel version on the standard output.
					</p><p>
						Here is an example of a more complex event, which is actually one of the predefined events. It saves relevant lines from the <code class="literal">~/.xsession-errors</code> file to the problem report of any problem for which the <code class="literal">abrt-ccpp</code> service has been used, provided the crashed application had any X11 libraries loaded at the time of the crash:
					</p><pre class="literallayout">EVENT=analyze_xsession_errors analyzer=CCpp dso_list~=.<span class="strong strong"><strong>/libX11.</strong></span>
    test -f ~/.xsession-errors || { echo "No ~/.xsession-errors"; exit 1; }
    test -r ~/.xsession-errors || { echo "Can't read ~/.xsession-errors"; exit 1; }
    executable=<code class="literal">cat executable</code> &amp;&amp;
    base_executable=${executable##*/} &amp;&amp;
    grep -F -e "$base_executable" ~/.xsession-errors | tail -999 &gt;xsession_errors &amp;&amp;
    echo "Element 'xsession_errors' saved"</pre><p>
						The set of possible events is not definitive. System administrators can add events according to their need in the <code class="literal">/etc/libreport/events.d/</code> directory.
					</p><p>
						Currently, the following event names are provided with the standard <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> and <span class="strong strong"><strong><span class="application application">libreport</span></strong></span> installations:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">post-create</code></span></dt><dd>
									This event is run by <code class="literal">abrtd</code> to process newly created problem-data directories. When the <code class="literal">post-create</code> event is run, <code class="literal">abrtd</code> checks whether the new problem data matches any of the already existing problem directories. If such a problem directory exists, it is updated and the new problem data is discarded. Note that if the script in any definition of the <code class="literal">post-create</code> event exits with a non-zero value, <code class="literal">abrtd</code> will terminate the process and will drop the problem data.
								</dd><dt><span class="term"><code class="literal">notify</code>, <code class="literal">notify-dup</code></span></dt><dd>
									The <code class="literal">notify</code> event is run following the completion of <code class="literal">post-create</code>. When the event is run, the user can be sure that the problem deserves their attention. The <code class="literal">notify-dup</code> is similar, except it is used for duplicate occurrences of the same problem.
								</dd><dt><span class="term"><code class="literal">analyze_<span class="emphasis"><em>name_suffix</em></span></code></span></dt><dd>
									where <span class="emphasis"><em>name_suffix</em></span> is the replaceable part of the event name. This event is used to process collected data. For example, the <code class="literal">analyze_LocalGDB</code> event uses the GNU Debugger (<span class="strong strong"><strong><span class="application application">GDB</span></strong></span>) utility to process the core dump of an application and produce a backtrace of the crash.
								</dd><dt><span class="term"><code class="literal">collect_<span class="emphasis"><em>name_suffix</em></span></code></span></dt><dd><pre class="literallayout">{blank}</pre><p class="simpara">
									…where <span class="emphasis"><em>name_suffix</em></span> is the adjustable part of the event name. This event is used to collect additional information on problems.
								</p></dd><dt><span class="term"><code class="literal">report_<span class="emphasis"><em>name_suffix</em></span></code></span></dt><dd><pre class="literallayout">{blank}</pre><p class="simpara">
									…where <span class="emphasis"><em>name_suffix</em></span> is the adjustable part of the event name. This event is used to report a problem.
								</p></dd></dl></div></section><section class="section" id="sect-abrt-tasks-automatic_reporting"><div class="titlepage"><div><div><h3 class="title">25.3.3.&nbsp;Setting Up Automatic Reporting</h3></div></div></div><p>
						<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> can be configured to send initial anonymous reports, or <span class="emphasis"><em>μReports</em></span>, of any detected issues or crashes automatically without any user interaction. When automatic reporting is turned on, the so called μReport, which is normally sent at the beginning of the crash-reporting process, is sent immediately after a crash is detected. This prevents duplicate support cases based on identical crashes. To enable the autoreporting feature, issue the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# abrt-auto-reporting enabled</pre><p>
						The above command sets the <code class="literal option">AutoreportingEnabled</code> directive in the <code class="literal">/etc/abrt/abrt.conf</code> configuration file to <code class="literal">yes</code>. This system-wide setting applies to all users of the system. Note that by enabling this option, automatic reporting will also be enabled in the graphical desktop environment. To only enable autoreporting in the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI, switch the <code class="literal">Automatically send uReport</code> option to <code class="literal">YES</code> in the <code class="literal">Problem Reporting Configuration</code> window. To open this window, choose <span class="guimenu">Automatic Bug Reporting Tool</span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu">ABRT Configuration</span> → <span class="guimenuitem"><!--Empty--></span> from within a running instance of the <span class="strong strong"><strong><span class="application application">gnome-abrt</span></strong></span> application. To launch the application, go to <span class="guimenu">Applications</span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu">Sundry</span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu"><code class="literal">Automatic Bug Reporting Tool</code></span> → <span class="guimenuitem"><!--Empty--></span>.
					</p><div class="figure" id="figu-ABRT-config-reporting"><p class="title"><strong>Figure&nbsp;25.2.&nbsp;Configuring ABRT Problem Reporting</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ABRT-config-reporting.png" alt="A screenshot of a configuration window in the ABRT GUI application."></div></div></div><p>
						Upon detection of a crash, by default, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> submits a μReport with basic information about the problem to Red Hat’s <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> server. The server determines whether the problem is known and either provides a short description of the problem along with a <span class="strong strong"><strong>URL</strong></span> of the reported case if known, or invites the user to report it if not known.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							A μReport (microreport) is a <span class="strong strong"><strong>JSON</strong></span> object representing a problem, such as a binary crash or a kernel oops. These reports are designed to be brief, machine readable, and completely anonymous, which is why they can be used for automated reporting. The μReports make it possible to keep track of bug occurrences, but they usually do not provide enough information for engineers to fix the bug. A full bug report is needed for a support case to be opened.
						</p></div></div><p>
						To change the default behavior of the autoreporting facility from sending a μReport, modify the value of the <code class="literal option">AutoreportingEvent</code> directive in the <code class="literal">/etc/abrt/abrt.conf</code> configuration file to point to a different <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> event. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#tab-abrt-events-standard" title="Table 25.1. Standard ABRT Events">Table&nbsp;25.1, “Standard ABRT Events”</a> for an overview of the standard events.
					</p></section></section><section class="section" id="sect-abrt-detecting-sw-problems"><div class="titlepage"><div><div><h2 class="title">25.4.&nbsp;Detecting Software Problems</h2></div></div></div><p>
					<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> is capable of detecting, analyzing, and processing crashes in applications written in a variety of different programming languages. Many of the packages that contain the support for detecting the various types of crashes are installed automatically when either one of the main <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> packages (<span class="strong strong"><strong><span class="package package">abrt-desktop</span></strong></span>, <span class="strong strong"><strong><span class="package package">abrt-cli</span></strong></span>) is installed. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-abrt-installation" title="25.2. Installing ABRT and Starting its Services">Section&nbsp;25.2, “Installing ABRT and Starting its Services”</a> for instructions on how to install <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>. See the table below for a list of the supported types of crashes and the respective packages.
				</p><div class="table" id="tab-abrt-supported"><p class="title"><strong>Table&nbsp;25.2.&nbsp;Supported Programming Languages and Software Projects</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140569344804144" scope="col">Langauge/Project</th><th align="left" valign="top" id="idm140569344803056" scope="col">Package</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									C or C++
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">abrt-addon-ccpp</span></strong></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									Python
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">abrt-addon-python</span></strong></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									Ruby
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">rubygem-abrt</span></strong></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									Java
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">abrt-java-connector</span></strong></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									X.Org
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">abrt-addon-xorg</span></strong></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									Linux (kernel oops)
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">abrt-addon-kerneloops</span></strong></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									Linux (kernel panic)
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">abrt-addon-vmcore</span></strong></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140569344804144"> <p>
									Linux (persistent storage)
								</p>
								 </td><td align="left" valign="top" headers="idm140569344803056"> <p>
									<span class="strong strong"><strong><span class="package package">abrt-addon-pstoreoops</span></strong></span>
								</p>
								 </td></tr></tbody></table></div></div><section class="section" id="sect-abrt-supported-ccpp"><div class="titlepage"><div><div><h3 class="title">25.4.1.&nbsp;Detecting C and C++ Crashes</h3></div></div></div><p>
						The <code class="literal">abrt-ccpp</code> service installs its own core-dump handler, which, when started, overrides the default value of the kernel’s <code class="literal">core_pattern</code> variable, so that C and C++ crashes are handled by <code class="literal">abrtd</code>. If you stop the <code class="literal">abrt-ccpp</code> service, the previously specified value of <code class="literal">core_pattern</code> is reinstated.
					</p><p>
						By default, the <code class="literal">/proc/sys/kernel/core_pattern</code> file contains the string <code class="literal">core</code>, which means that the kernel produces files with the <code class="literal">core.</code> prefix in the current directory of the crashed process. The <code class="literal">abrt-ccpp</code> service overwrites the <code class="literal">core_pattern</code> file to contain the following command:
					</p><pre class="literallayout">|/usr/libexec/abrt-hook-ccpp %s %c %p %u %g %t e</pre><p>
						This command instructs the kernel to pipe the core dump to the <code class="literal command">abrt-hook-ccpp</code> program, which stores it in <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span>'s dump location and notifies the <code class="literal">abrtd</code> daemon of the new crash. It also stores the following files from the <code class="literal">/proc/<span class="emphasis"><em>PID</em></span>/</code> directory (where <span class="emphasis"><em>PID</em></span> is the ID of the crashed process) for debugging purposes: <code class="literal">maps</code>, <code class="literal">limits</code>, <code class="literal">cgroup</code>, <code class="literal">status</code>. See <span class="strong strong"><strong>proc</strong></span>(5) for a description of the format and the meaning of these files.
					</p></section><section class="section" id="sect-abrt-supported-python"><div class="titlepage"><div><div><h3 class="title">25.4.2.&nbsp;Detecting Python Exceptions</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="package package">abrt-addon-python</span></strong></span> package installs a custom exception handler for Python applications. The Python interpreter then automatically imports the <code class="literal">abrt.pth</code> file installed in <code class="literal">/usr/lib64/python2.7/site-packages/</code>, which in turn imports <code class="literal">abrt_exception_handler.py</code>. This overrides Python’s default <code class="literal">sys.excepthook</code> with a custom handler, which forwards unhandled exceptions to <code class="literal">abrtd</code> via its Socket API.
					</p><p>
						To disable the automatic import of site-specific modules, and thus prevent the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> custom exception handler from being used when running a Python application, pass the <code class="literal option">-S</code> option to the Python interpreter:
					</p><pre class="literallayout">~]$ <code class="literal command">python -S <span class="emphasis"><em>file.py</em></span></code></pre><p>
						In the above command, replace <span class="emphasis"><em>file.py</em></span> with the name of the Python script you want to execute without the use of site-specific modules.
					</p></section><section class="section" id="sect-abrt-supported-ruby"><div class="titlepage"><div><div><h3 class="title">25.4.3.&nbsp;Detecting Ruby Exceptions</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="package package">rubygem-abrt</span></strong></span> package registers a custom handler using the <code class="literal">at_exit</code> feature, which is executed when a program ends. This allows for checking for possible unhandled exceptions. Every time an unhandled exception is captured, the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> handler prepares a bug report, which can be submitted to Red Hat Bugzilla using standard <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> tools.
					</p></section><section class="section" id="sect-abrt-supported-java"><div class="titlepage"><div><div><h3 class="title">25.4.4.&nbsp;Detecting Java Exceptions</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> Java Connector is a <span class="strong strong"><strong>JVM</strong></span> agent that reports uncaught Java exceptions to <code class="literal">abrtd</code>. The agent registers several <span class="strong strong"><strong>JVMTI</strong></span> event callbacks and has to be loaded into the <span class="strong strong"><strong>JVM</strong></span> using the <code class="literal option">-agentlib</code> command line parameter. Note that the processing of the registered callbacks negatively impacts the performance of the application. Use the following command to have <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> catch exceptions from a Java class:
					</p><pre class="literallayout">~]$ <code class="literal command">java -agentlib:abrt-java-connector=abrt=on <span class="emphasis"><em>$MyClass</em></span> -platform.jvmtiSupported true</code></pre><p>
						In the above command, replace <span class="emphasis"><em>$MyClass</em></span> with the name of the Java class you want to test. By passing the <code class="literal option">abrt=on</code> option to the connector, you ensure that the exceptions are handled by <code class="literal">abrtd</code>. In case you want to have the connector output the exceptions to standard output, omit this option.
					</p></section><section class="section" id="sect-abrt-supported-xorg"><div class="titlepage"><div><div><h3 class="title">25.4.5.&nbsp;Detecting X.Org Crashes</h3></div></div></div><p>
						The <code class="literal">abrt-xorg</code> service collects and processes information about crashes of the <span class="strong strong"><strong><span class="application application">X.Org server</span></strong></span> from the <code class="literal">/var/log/Xorg.0.log</code> file. Note that no report is generated if a blacklisted <span class="strong strong"><strong><span class="application application">X.org</span></strong></span> module is loaded. Instead, a <code class="literal">not-reportable</code> file is created in the problem-data directory with an appropriate explanation. You can find the list of offending modules in the <code class="literal">/etc/abrt/plugins/xorg.conf</code> file. Only proprietary graphics-driver modules are blacklisted by default.
					</p></section><section class="section" id="sect-abrt-supported-oops"><div class="titlepage"><div><div><h3 class="title">25.4.6.&nbsp;Detecting Kernel Oopses and Panics</h3></div></div></div><p>
						By checking the output of kernel logs, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> is able to catch and process the so-called kernel oopses — non-fatal deviations from the correct behavior of the Linux kernel. This functionality is provided by the <code class="literal">abrt-oops</code> service.
					</p><p>
						<span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> can also detect and process kernel panics — fatal, non-recoverable errors that require a reboot, using the <code class="literal">abrt-vmcore</code> service. The service only starts when a <code class="literal">vmcore</code> file (a kernel-core dump) appears in the <code class="literal">/var/crash/</code> directory. When a core-dump file is found, <code class="literal">abrt-vmcore</code> creates a new <code class="literal">problem-data directory</code> in the <code class="literal">/var/spool/abrt/</code> directory and copies the core-dump file to the newly created problem-data directory. After the <code class="literal">/var/crash/</code> directory is searched, the service is stopped.
					</p><p>
						For <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> to be able to detect a kernel panic, the <code class="literal">kdump</code> service must be enabled on the system. The amount of memory that is reserved for the kdump kernel has to be set correctly. You can set it using the <span class="strong strong"><strong><span class="application application">system-config-kdump</span></strong></span> graphical tool or by specifying the <code class="literal option">crashkernel</code> parameter in the list of kernel options in the GRUB 2 menu. For details on how to enable and configure <code class="literal">kdump</code>, see the <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Kernel_Crash_Dump_Guide/">Red Hat Enterprise Linux 7 Kernel Crash Dump Guide</a>. For information on making changes to the GRUB 2 menu see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Working_with_the_GRUB_2_Boot_Loader" title="Chapter 26. Working with GRUB 2">Chapter&nbsp;26, <em>Working with GRUB 2</em></a>.
					</p><p>
						Using the <code class="literal">abrt-pstoreoops</code> service, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> is capable of collecting and processing information about kernel panics, which, on systems that support <span class="emphasis"><em>pstore</em></span>, is stored in the automatically-mounted <code class="literal">/sys/fs/pstore/</code> directory. The platform-dependent pstore interface (persistent storage) provides a mechanism for storing data across system reboots, thus allowing for preserving kernel panic information. The service starts automatically when kernel crash-dump files appear in the <code class="literal">/sys/fs/pstore/</code> directory.
					</p></section></section><section class="section" id="sect-abrt-handling-problems"><div class="titlepage"><div><div><h2 class="title">25.5.&nbsp;Handling Detected Problems</h2></div></div></div><p>
					Problem data saved by <code class="literal">abrtd</code> can be viewed, reported, and deleted using either the command line tool, <code class="literal command">abrt-cli</code>, or the graphical tool, <code class="literal command">gnome-abrt</code>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Note that <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> identifies duplicate problems by comparing new problems with all locally saved problems. For a repeating crash, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> requires you to act upon it only once. However, if you delete the crash dump of that problem, the next time this specific problem occurs, <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> will treat it as a new crash: <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> will alert you about it, prompt you to fill in a description, and report it. To avoid having <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> notifying you about a recurring problem, do not delete its problem data.
					</p></div></div><section class="section" id="sect-abrt-handling-problems-cli"><div class="titlepage"><div><div><h3 class="title">25.5.1.&nbsp;Using the Command Line Tool</h3></div></div></div><p>
						In the command line environment, the user is notified of new crashes on login, provided they have the <span class="strong strong"><strong><span class="package package">abrt-console-notification</span></strong></span> package installed. The console notification looks like the following:
					</p><pre class="literallayout">ABRT has detected 1 problem(s). For more info run: abrt-cli list --since 1398783164</pre><p>
						To view detected problems, enter the <code class="literal command">abrt-cli list</code> command:
					</p><pre class="literallayout">~]$ <code class="literal command">abrt-cli list</code>
id 6734c6f1a1ed169500a7bfc8bd62aabaf039f9aa
Directory:   /var/tmp/abrt/ccpp-2014-04-21-09:47:51-3430
count:     1
executable:   /usr/bin/sleep
package:    coreutils-8.22-11.el7
time:      Mon 21 Apr 2014 09:47:51 AM EDT
uid:      1000
Run 'abrt-cli report /var/tmp/abrt/ccpp-2014-04-21-09:47:51-3430' for creating a case in Red Hat Customer Portal</pre><p>
						Each crash listed in the output of the <code class="literal command">abrt-cli list</code> command has a unique identifier and a directory that can be used for further manipulation using <code class="literal command">abrt-cli</code>.
					</p><p>
						To view information about just one particular problem, use the <code class="literal command">abrt-cli info</code> command:
					</p><pre class="literallayout">    abrt-cli info -d directory_or_id</pre><p>
						To increase the amount of information displayed when using both the <code class="literal command">list</code> and <code class="literal command">info</code> sub-commands, pass them the <code class="literal option">-d</code> (<code class="literal option">--detailed</code>) option, which shows all stored information about the problems listed, including respective <code class="literal">backtrace</code> files if they have already been generated.
					</p><p>
						To analyze and report a certain problem, use the <code class="literal command">abrt-cli report</code> command:
					</p><pre class="literallayout">    abrt-cli report directory_or_id</pre><p>
						Upon invocation of the above command, you will be asked to provide your credentials for opening a support case with Red Hat Customer Support. Next, <code class="literal command">abrt-cli</code> opens a text editor with the content of the report. You can see what is being reported, and you can fill in instructions on how to reproduce the crash and other comments. You should also check the backtrace because the backtrace might be sent to a public server and viewed by anyone, depending on the problem-reporter event settings.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can choose which text editor is used to check the reports. <code class="literal command">abrt-cli</code> uses the editor defined in the <code class="literal">ABRT_EDITOR</code> environment variable. If the variable is not defined, it checks the <code class="literal">VISUAL</code> and <code class="literal">EDITOR</code> variables. If none of these variables is set, the <code class="literal command">vi</code> editor is used. You can set the preferred editor in your <code class="literal">.bashrc</code> configuration file. For example, if you prefer <span class="strong strong"><strong><span class="application application">GNU Emacs</span></strong></span>, add the following line to the file:
						</p><pre class="literallayout">export <code class="literal">VISUAL</code>=<code class="literal">emacs</code></pre></div></div><p>
						When you are done with the report, save your changes and close the editor. If you have reported your problem to the Red Hat Customer Support database, a problem case is filed in the database. From now on, you will be informed about the problem-resolution progress via email you provided during the process of reporting. You can also monitor the problem case using the URL that is provided to you when the problem case is created or via emails received from Red Hat Support.
					</p><p>
						If you are certain that you do not want to report a particular problem, you can delete it. To delete a problem, so that <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> does not keep information about it, use the command:
					</p><pre class="literallayout">    abrt-cli rm directory_or_id</pre><p>
						To display help about a particular <code class="literal command">abrt-cli</code> command, use the <code class="literal option">--help</code> option:
					</p><pre class="literallayout">    <code class="literal command">abrt-cli <span class="emphasis"><em>command</em></span> --help</code></pre></section><section class="section" id="sect-abrt-handling-problems-gui"><div class="titlepage"><div><div><h3 class="title">25.5.2.&nbsp;Using the GUI</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> daemon broadcasts a <code class="literal">D-Bus</code> message whenever a problem report is created. If the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> applet is running in a graphical desktop environment, it catches this message and displays a notification dialog on the desktop. You can open the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI using this dialog by clicking on the <span class="guibutton">Report</span> button. You can also open the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI by selecting the <span class="guimenu">Applications</span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu">Sundry</span> → <span class="guisubmenu"><!--Empty--></span> → <span class="guisubmenu"><code class="literal">Automatic Bug Reporting Tool</code></span> → <span class="guimenuitem"><!--Empty--></span> menu item.
					</p><p>
						Alternatively, you can run the <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI from the command line as follows:
					</p><pre class="literallayout">~]$ <code class="literal command">gnome-abrt &amp;</code></pre><p>
						The <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> GUI window displays a list of detected problems. Each problem entry consists of the name of the failing application, the reason why the application crashed, and the date of the last occurrence of the problem.
					</p><div class="figure" id="figu-ABRT-GUI"><p class="title"><strong>Figure&nbsp;25.3.&nbsp;ABRT GUI</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/ABRT-GUI.png" alt="A screenshot of the ABRT GUI application."></div></div></div><p>
						To access a detailed problem description, double-click on a problem-report line or click on the <span class="guibutton">Report</span> button while the respective problem line is selected. You can then follow the instructions to proceed with the process of describing the problem, determining how it should be analyzed, and where it should be reported. To discard a problem, click on the <span class="guibutton">Delete</span> button.
					</p></section></section><section class="section" id="sect-abrt-additional-resources"><div class="titlepage"><div><div><h2 class="title">25.6.&nbsp;Additional Resources</h2></div></div></div><p>
					For more information about <span class="strong strong"><strong><span class="application application">ABRT</span></strong></span> and related topics, see the resources listed below.
				</p><h4 id="brid-abrt-resources-installed">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>abrtd</strong></span>(8) — The manual page for the <code class="literal">abrtd</code> daemon provides information about options that can be used with the daemon.
						</li><li class="listitem">
							<span class="strong strong"><strong>abrt_event.conf</strong></span>(5) — The manual page for the <code class="literal">abrt_event.conf</code> configuration file describes the format of its directives and rules and provides reference information about event meta-data configuration in XML files.
						</li></ul></div><h4 id="brid-abrt-resources-online">Online Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/">Red Hat Enterprise Linux 7 Networking Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Networking Guide</span></em></span> for Red Hat Enterprise Linux 7 documents relevant information regarding the configuration and administration of network interfaces and network services on this system.
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Kernel_Crash_Dump_Guide/">Red Hat Enterprise Linux 7 Kernel Crash Dump Guide</a> — The <span class="emphasis"><em><span class="citetitle citetitle">Kernel Crash Dump Guide</span></em></span> for Red Hat Enterprise Linux 7 documents how to configure, test, and use the <code class="literal">kdump</code> crash recovery service and provides a brief overview of how to analyze the resulting core dump using the <span class="strong strong"><strong><span class="application application">crash</span></strong></span> debugging utility.
						</li></ul></div><h4 id="brid-abrt-resources-also">See Also</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Viewing_and_Managing_Log_Files" title="Chapter 23. Viewing and Managing Log Files">Chapter&nbsp;23, <em>Viewing and Managing Log Files</em></a> describes the configuration of the <code class="literal">rsyslog</code> daemon and the systemd journal and explains how to locate, view, and monitor system logs.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-yum" title="Chapter 9. Yum">Chapter&nbsp;9, <em>Yum</em></a> describes how to use the <span class="strong strong"><strong><span class="application application">Yum</span></strong></span> package manager to search, install, update, and uninstall packages on the command line.
						</li><li class="listitem">
							<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#chap-Managing_Services_with_systemd" title="Chapter 10. Managing Services with systemd">Chapter&nbsp;10, <em>Managing Services with systemd</em></a> provides an introduction to <code class="literal">systemd</code> and documents how to use the <code class="literal command">systemctl</code> command to manage system services, configure systemd targets, and execute power management commands.
						</li></ul></div></section></section></div><div class="part" id="part-Kernel_Customization_with_Bootloader"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;VII.&nbsp;Kernel Customization with Bootloader</h1></div></div></div><div class="partintro" id="idm140569344588752"><div><!--Empty--></div><p>
				This part describes how to use the GRUB 2 bootloader to assist administrators with kernel customization.
			</p></div><section class="chapter" id="ch-Working_with_the_GRUB_2_Boot_Loader"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;26.&nbsp;Working with GRUB 2</h2></div></div></div><p>
				Red Hat Enterprise Linux 7 is distributed with version 2 of the GNU GRand Unified Bootloader (GRUB 2), which allows the user to select an operating system or kernel to be loaded at system boot time. GRUB 2 also allows the user to pass arguments to the kernel.
			</p><section class="section" id="sec-Introduction_to_GRUB_2"><div class="titlepage"><div><div><h2 class="title">26.1.&nbsp;Introduction to GRUB 2</h2></div></div></div><p>
					GRUB 2 reads its configuration from the <code class="literal">/boot/grub2/grub.cfg</code> file on traditional BIOS-based machines and from the <code class="literal">/boot/efi/EFI/redhat/grub.cfg</code> file on UEFI machines. This file contains menu information.
				</p><p>
					The GRUB 2 configuration file, <code class="literal">grub.cfg</code>, is generated during installation, or by invoking the <span class="strong strong"><strong><span class="application application">/usr/sbin/grub2-mkconfig</span></strong></span> utility, and is automatically updated by <code class="literal command">grubby</code> each time a new kernel is installed. When regenerated manually using <span class="strong strong"><strong><span class="application application">grub2-mkconfig</span></strong></span>, the file is generated according to the template files located in <code class="literal">/etc/grub.d/</code>, and custom settings in the <code class="literal">/etc/default/grub</code> file. Edits of <code class="literal">grub.cfg</code> will be lost any time <span class="strong strong"><strong><span class="application application">grub2-mkconfig</span></strong></span> is used to regenerate the file, so care must be taken to reflect any manual changes in <code class="literal">/etc/default/grub</code> as well.
				</p><p>
					Normal operations on <code class="literal">grub.cfg</code>, such as the removal and addition of new kernels, should be done using the <code class="literal command">grubby</code> tool and, for scripts, using <code class="literal command">new-kernel-pkg</code> tool. If you use <code class="literal command">grubby</code> to modify the default kernel the changes will be inherited when new kernels are installed. For more information on <code class="literal command">grubby</code>, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Making_Persistent_Changes_to_a_GRUB_2_Menu_Using_the_grubby_Tool" title="26.4. Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool">Section&nbsp;26.4, “Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool”</a>.
				</p><p>
					The <code class="literal">/etc/default/grub</code> file is used by the <code class="literal command">grub2-mkconfig</code> tool, which is used by <code class="literal">anaconda</code> when creating <code class="literal">grub.cfg</code> during the installation process, and can be used in the event of a system failure, for example if the boot loader configurations need to be recreated. In general, it is not recommended to replace the <code class="literal">grub.cfg</code> file by manually running <code class="literal">grub2-mkconfig</code> except as a last resort. Note that any manual changes to <code class="literal">/etc/default/grub</code> require rebuilding the <code class="literal">grub.cfg</code> file.
				</p><h4 id="bh-Menu_Entries_in_grub_cfg">Menu Entries in grub.cfg</h4><p>
					Among various code snippets and directives, the <code class="literal">grub.cfg</code> configuration file contains one or more <code class="literal">menuentry</code> blocks, each representing a single GRUB 2 boot menu entry. These blocks always start with the <code class="literal">menuentry</code> keyword followed by a title, list of options, and an opening curly bracket, and end with a closing curly bracket. Anything between the opening and closing bracket should be indented. For example, the following is a sample <code class="literal">menuentry</code> block for Red Hat Enterprise Linux 7 with Linux kernel 3.8.0-0.40.el7.x86_64:
				</p><pre class="literallayout">menuentry 'Red Hat Enterprise Linux Server' --class red --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-simple-c60731dc-9046-4000-9182-64bdcce08616' {
    load_video
    set gfxpayload=keep
    insmod gzio
    insmod part_msdos
    insmod xfs
    set root='hd0,msdos1'
    if [ x$feature_platform_search_hint = xy ]; then
     search --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1 --hint='hd0,msdos1' 19d9e294-65f8-4e37-8e73-d41d6daa6e58
    else
     search --no-floppy --fs-uuid --set=root 19d9e294-65f8-4e37-8e73-d41d6daa6e58
    fi
    echo  'Loading Linux 3.8.0-0.40.el7.x86_64 ...'
    linux16  /vmlinuz-3.8.0-0.40.el7.x86_64 root=/dev/mapper/rhel-root ro rd.md=0 rd.dm=0 rd.lvm.lv=rhel/swap crashkernel=auto rd.luks=0 vconsole.keymap=us rd.lvm.lv=rhel/root rhgb quiet
    echo  'Loading initial ramdisk ...'
    initrd /initramfs-3.8.0-0.40.el7.x86_64.img
}</pre><p>
					Each <code class="literal">menuentry</code> block that represents an installed Linux kernel contains <code class="literal">linux</code> on 64-bit IBM POWER Series, <code class="literal">linux16</code> on x86_64 BIOS-based systems, and <code class="literal">linuxefi</code> on UEFI-based systems. Then the <code class="literal">initrd</code> directives followed by the path to the kernel and the <code class="literal">initramfs</code> image respectively. If a separate <code class="literal">/boot</code> partition was created, the paths to the kernel and the <code class="literal">initramfs</code> image are relative to <code class="literal">/boot</code>. In the example above, the <code class="literal">initrd /initramfs-3.8.0-0.40.el7.x86_64.img</code> line means that the <code class="literal">initramfs</code> image is actually located at <code class="literal">/boot/initramfs-3.8.0-0.40.el7.x86_64.img</code> when the <code class="literal">root</code> file system is mounted, and likewise for the kernel path.
				</p><p>
					The kernel version number as given on the <code class="literal">linux16 /vmlinuz-kernel_version</code> line must match the version number of the <code class="literal">initramfs</code> image given on the <code class="literal">initrd /initramfs-kernel_version.img</code> line of each <code class="literal">menuentry</code> block. For more information on how to verify the initial RAM disk image, see see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/kernel_administration_guide/index#sec-Verifying_the_Initial_RAM_File_System_Image">Red Hat Enterprise 7 Kernel Administration Guide</a>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In <code class="literal">menuentry</code> blocks, the <code class="literal">initrd</code> directive must point to the location (relative to the <code class="literal">/boot/</code> directory if it is on a separate partition) of the <code class="literal">initramfs</code> file corresponding to the same kernel version. This directive is called <code class="literal">initrd</code> because the previous tool which created initial RAM disk images, <code class="literal command">mkinitrd</code>, created what were known as <code class="literal">initrd</code> files. The <code class="literal">grub.cfg</code> directive remains <code class="literal">initrd</code> to maintain compatibility with other tools. The file-naming convention of systems using the <code class="literal command">dracut</code> utility to create the initial RAM disk image is <code class="literal">initramfs-<span class="emphasis"><em>kernel_version</em></span>.img</code>.
					</p><p>
						For information on using <span class="strong strong"><strong><span class="application application">Dracut</span></strong></span>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/kernel_administration_guide/index#sec-Verifying_the_Initial_RAM_File_System_Image">Red Hat Enterprise 7 Kernel Administration Guide</a>.
					</p></div></div></section><section class="section" id="sec-Configuring_the_GRUB_2_Boot_Loader"><div class="titlepage"><div><div><h2 class="title">26.2.&nbsp;Configuring GRUB 2</h2></div></div></div><p>
					Changes to the GRUB 2 menu can be made temporarily at boot time, made persistent for a single system while the system is running, or as part of making a new GRUB 2 configuration file.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							To make non-persistent changes to the GRUB 2 menu, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Making_Temporary_Changes_to_a_GRUB_2_Menu" title="26.3. Making Temporary Changes to a GRUB 2 Menu">Section&nbsp;26.3, “Making Temporary Changes to a GRUB 2 Menu”</a>.
						</li><li class="listitem">
							To make persistent changes to a running system, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Making_Persistent_Changes_to_a_GRUB_2_Menu_Using_the_grubby_Tool" title="26.4. Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool">Section&nbsp;26.4, “Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool”</a>.
						</li><li class="listitem">
							For information on making and customizing a GRUB 2 configuration file, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Customizing_the_GRUB_2_Configuration_File" title="26.5. Customizing the GRUB 2 Configuration File">Section&nbsp;26.5, “Customizing the GRUB 2 Configuration File”</a>.
						</li></ul></div></section><section class="section" id="sec-Making_Temporary_Changes_to_a_GRUB_2_Menu"><div class="titlepage"><div><div><h2 class="title">26.3.&nbsp;Making Temporary Changes to a GRUB 2 Menu</h2></div></div></div><div id="proc-Making_Temporary_Changes_to_Kernel_Menu_Entry" class="formalpara"><p class="title"><strong>Making Temporary Changes to a Kernel Menu Entry</strong></p><p>
						To change kernel parameters only during a single boot process, proceed as follows:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Start the system and, on the GRUB 2 boot screen, move the cursor to the menu entry you want to edit, and press the <span class="keycap"><strong>e</strong></span> key for edit.
						</li><li class="listitem">
							Move the cursor down to find the kernel command line. The kernel command line starts with <code class="literal">linux</code> on 64-Bit IBM Power Series, <code class="literal">linux16</code> on x86-64 BIOS-based systems, or <code class="literal">linuxefi</code> on UEFI systems.
						</li><li class="listitem"><p class="simpara">
							Move the cursor to the end of the line.
						</p><p class="simpara">
							Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>a</strong></span> and <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span> to jump to the start and end of the line, respectively. On some systems, <span class="keycap"><strong>Home</strong></span> and <span class="keycap"><strong>End</strong></span> might also work.
						</p></li><li class="listitem"><p class="simpara">
							Edit the kernel parameters as required. For example, to run the system in emergency mode, add the <span class="emphasis"><em>emergency</em></span> parameter at the end of the <code class="literal">linux16</code> line:
						</p><pre class="literallayout">linux16   /vmlinuz-3.10.0-0.rc4.59.el7.x86_64 root=/dev/mapper/rhel-root ro rd.md=0 rd.dm=0 rd.lvm.lv=rhel/swap crashkernel=auto rd.luks=0 vconsole.keymap=us rd.lvm.lv=rhel/root rhgb quiet <span class="emphasis"><em>emergency</em></span></pre><p class="simpara">
							The <code class="literal option">rhgb</code> and <code class="literal option">quiet</code> parameters can be removed in order to enable system messages.
						</p><p class="simpara">
							These settings are not persistent and apply only for a single boot. To make persistent changes to a menu entry on a system, use the <code class="literal command">grubby</code> tool. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh-Adding_and_Removing_Arguments_from_a_GRUB_2_Menu_Entry" title="Adding and Removing Arguments from a GRUB 2 Menu Entry">the section called “Adding and Removing Arguments from a GRUB 2 Menu Entry”</a> for more information on using <code class="literal command">grubby</code>.
						</p></li></ol></div></section><section class="section" id="sec-Making_Persistent_Changes_to_a_GRUB_2_Menu_Using_the_grubby_Tool"><div class="titlepage"><div><div><h2 class="title">26.4.&nbsp;Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool</h2></div></div></div><p>
					The <code class="literal command">grubby</code> tool can be used to read information from, and make persistent changes to, the <code class="literal">grub.cfg</code> file. It enables, for example, changing GRUB 2 menu entries to specify what arguments to pass to a kernel on system start and changing the default kernel.
				</p><p>
					In Red Hat Enterprise Linux 7, if <code class="literal command">grubby</code> is invoked manually without specifying a GRUB 2 configuration file, it defaults to searching for <code class="literal">/etc/grub2.cfg</code>, which is a symbolic link to the <code class="literal">grub.cfg</code> file, whose location is architecture dependent. If that file cannot be found it will search for an architecture dependent default.
				</p><h4 id="bh-Listing_the_Default_Kernel">Listing the Default Kernel</h4><p>
					To find out the file name of the default kernel, enter a command as follows:
				</p><pre class="literallayout">~]# grubby --default-kernel
/boot/vmlinuz-3.10.0-229.4.2.el7.x86_64</pre><p>
					To find out the index number of the default kernel, enter a command as follows:
				</p><pre class="literallayout">~]# grubby --default-index
0</pre><h4 id="bh-Changing_the_Default_Boot_Entry">Changing the Default Boot Entry</h4><p>
					To make a persistent change in the kernel designated as the default kernel, use the <code class="literal command">grubby</code> command as follows:
				</p><pre class="literallayout">~]# grubby --set-default /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64</pre><h4 id="bh-Viewing_the_GRUB_2_Menu_Entry_for_a_Kernel">Viewing the GRUB 2 Menu Entry for a Kernel</h4><p>
					To list all the kernel menu entries, enter a command as follows:
				</p><pre class="literallayout">~]$ <code class="literal command">grubby --info=ALL</code></pre><p>
					On UEFI systems, all <code class="literal command">grubby</code> commands must be entered as <code class="literal">root</code>.
				</p><p>
					To view the GRUB 2 menu entry for a specific kernel, enter a command as follows:
				</p><pre class="literallayout">~]$ grubby --info /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64
index=0
kernel=/boot/vmlinuz-3.10.0-229.4.2.el7.x86_64
args="ro rd.lvm.lv=rhel/root crashkernel=auto rd.lvm.lv=rhel/swap vconsole.font=latarcyrheb-sun16 vconsole.keymap=us rhgb quiet LANG=en_US.UTF-8"
root=/dev/mapper/rhel-root
initrd=/boot/initramfs-3.10.0-229.4.2.el7.x86_64.img
title=Red Hat Enterprise Linux Server (3.10.0-229.4.2.el7.x86_64) 7.0 (Maipo)</pre><p>
					Try tab completion to see the available kernels within the <code class="literal">/boot/</code> directory.
				</p><h4 id="bh-Adding_and_Removing_Arguments_from_a_GRUB_2_Menu_Entry">Adding and Removing Arguments from a GRUB 2 Menu Entry</h4><p>
					The <code class="literal option">--update-kernel</code> option can be used to update a menu entry when used in combination with <code class="literal option">--args</code> to add new arguments and <code class="literal option">--remove-arguments</code> to remove existing arguments. These options accept a quoted space-separated list. The command to simultaneously add and remove arguments a from GRUB 2 menu entry has the follow format:
				</p><pre class="literallayout">grubby --remove-args="<span class="emphasis"><em>argX argY</em></span>" --args="<span class="emphasis"><em>argA argB</em></span>" --update-kernel /boot/<span class="emphasis"><em>kernel</em></span></pre><p>
					To add and remove arguments from a kernel’s GRUB 2 menu entry, use a command as follows:
				</p><pre class="literallayout">~]# grubby --remove-args="rhgb quiet" --args=console=ttyS0,115200 --update-kernel /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64</pre><p>
					This command removes the Red Hat graphical boot argument, enables boot message to be seen, and adds a serial console. As the console arguments will be added at the end of the line, the new console will take precedence over any other consoles configured.
				</p><p>
					To review the changes, use the <code class="literal option">--info</code> command option as follows:
				</p><pre class="literallayout">~]# grubby --info /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64
index=0
kernel=/boot/vmlinuz-3.10.0-229.4.2.el7.x86_64
args="ro rd.lvm.lv=rhel/root crashkernel=auto rd.lvm.lv=rhel/swap vconsole.font=latarcyrheb-sun16 vconsole.keymap=us LANG=en_US.UTF-8 <span class="emphasis"><em>ttyS0,115200</em></span>"
root=/dev/mapper/rhel-root
initrd=/boot/initramfs-3.10.0-229.4.2.el7.x86_64.img
title=Red Hat Enterprise Linux Server (3.10.0-229.4.2.el7.x86_64) 7.0 (Maipo)</pre><h4 id="bh-Updating_All_Kernel_Menus_with_the_Same_Arguments">Updating All Kernel Menus with the Same Arguments</h4><p>
					To add the same kernel boot arguments to all the kernel menu entries, enter a command as follows:
				</p><pre class="literallayout">~]# grubby --update-kernel=ALL --args=console=ttyS0,115200</pre><p>
					The <code class="literal option">--update-kernel</code> parameter also accepts DEFAULT or a comma separated list of kernel index numbers.
				</p><h4 id="bh-Changing_a_Kernel_Argument">Changing a Kernel Argument</h4><p>
					To change a value in an existing kernel argument, specify the argument again, changing the value as required. For example, to change the virtual console font size, use a command as follows:
				</p><pre class="literallayout">~]# grubby --args=vconsole.font=latarcyrheb-sun32 --update-kernel /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64
index=0
kernel=/boot/vmlinuz-3.10.0-229.4.2.el7.x86_64
args="ro rd.lvm.lv=rhel/root crashkernel=auto rd.lvm.lv=rhel/swap vconsole.font=<span class="emphasis"><em>latarcyrheb-sun32</em></span> vconsole.keymap=us LANG=en_US.UTF-8"
root=/dev/mapper/rhel-root
initrd=/boot/initramfs-3.10.0-229.4.2.el7.x86_64.img
title=Red Hat Enterprise Linux Server (3.10.0-229.4.2.el7.x86_64) 7.0 (Maipo)</pre><p>
					See the <code class="literal">grubby(8)</code> manual page for more command options.
				</p></section><section class="section" id="sec-Customizing_the_GRUB_2_Configuration_File"><div class="titlepage"><div><div><h2 class="title">26.5.&nbsp;Customizing the GRUB 2 Configuration File</h2></div></div></div><p>
					GRUB 2 scripts search the user’s computer and build a boot menu based on what operating systems the scripts find. To reflect the latest system boot options, the boot menu is rebuilt automatically when the kernel is updated or a new kernel is added.
				</p><p>
					However, users may want to build a menu containing specific entries or to have the entries in a specific order. GRUB 2 allows basic customization of the boot menu to give users control of what actually appears on the screen.
				</p><p>
					GRUB 2 uses a series of scripts to build the menu; these are located in the <code class="literal">/etc/grub.d/</code> directory. The following files are included:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">00_header</code>, which loads GRUB 2 settings from the <code class="literal">/etc/default/grub</code> file.
						</li><li class="listitem">
							<code class="literal">01_users</code>, which reads the superuser password from the <code class="literal">user.cfg</code> file. In Red Hat Enterprise Linux 7.0 and 7.1, this file was only created when boot password was defined in the kickstart file during installation, and it included the defined password in plain text.
						</li><li class="listitem">
							<code class="literal">10_linux</code>, which locates kernels in the default partition of Red Hat Enterprise Linux.
						</li><li class="listitem">
							<code class="literal">30_os-prober</code>, which builds entries for operating systems found on other partitions.
						</li><li class="listitem">
							<code class="literal">40_custom</code>, a template, which can be used to create additional menu entries.
						</li></ul></div><p>
					Scripts from the <code class="literal">/etc/grub.d/</code> directory are read in alphabetical order and can be therefore renamed to change the boot order of specific menu entries.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						To hide the list of bootable kernels, do not set <code class="literal option">GRUB_TIMEOUT</code> to 0 in <code class="literal">/etc/default/grub</code>. With such setting, the system always boots immediately on the default menu entry, and if the default kernel fails to boot, it is not possible to boot an older kernel.
					</p><p>
						Instead, to prevent GRUB 2 from displaying the list of bootable kernels when the system starts up, set the <code class="literal option">GRUB_TIMEOUT_STYLE</code> option in the <code class="literal">/etc/default/grub</code> file as follows:
					</p><pre class="literallayout">GRUB_TIMEOUT_STYLE=hidden</pre><p>
						To display the list when booting, press and hold any alphanumeric key when the BIOS information is displayed using the keyboard or other serial console, and GRUB 2 will present you with the GRUB 2 menu.
					</p></div></div><section class="section" id="sec-Changing_the_Default_Boot_Entry"><div class="titlepage"><div><div><h3 class="title">26.5.1.&nbsp;Changing the Default Boot Entry</h3></div></div></div><p>
						By default, the key for the <code class="literal">GRUB_DEFAULT</code> directive in the <code class="literal">/etc/default/grub</code> file is the word <code class="literal">saved</code>. This instructs GRUB 2 to load the kernel specified by the <code class="literal option">saved_entry</code> directive in the GRUB 2 environment file, located at <code class="literal">/boot/grub2/grubenv</code>. You can set another GRUB 2 record to be the default, using the <code class="literal command">grub2-set-default</code> command, which will update the GRUB 2 environment file.
					</p><p>
						By default, the <code class="literal option">saved_entry</code> value is set to the name of latest installed kernel of package type <span class="strong strong"><strong><span class="package package">kernel</span></strong></span>. This is defined in <code class="literal">/etc/sysconfig/kernel</code> by the <code class="literal">UPDATEDEFAULT</code> and <code class="literal">DEFAULTKERNEL</code> directives. The file can be viewed by the <code class="literal">root</code> user as follows:
					</p><pre class="literallayout">~]# cat /etc/sysconfig/kernel
# UPDATEDEFAULT specifies if new-kernel-pkg should make
# new kernels the default
UPDATEDEFAULT=yes

# DEFAULTKERNEL specifies the default kernel package type
DEFAULTKERNEL=kernel</pre><p>
						The <code class="literal">DEFAULTKERNEL</code> directive specifies what package type will be used as the default. Installing a package of type <span class="strong strong"><strong><span class="package package">kernel-debug</span></strong></span> will not change the default kernel while the <code class="literal">DEFAULTKERNEL</code> is set to package type <span class="strong strong"><strong><span class="package package">kernel</span></strong></span>.
					</p><p>
						GRUB 2 supports using a numeric value as the key for the <code class="literal option">saved_entry</code> directive to change the default order in which the operating systems are loaded. To specify which operating system should be loaded first, pass its number to the <code class="literal command">grub2-set-default</code> command. For example:
					</p><pre class="literallayout">~]# grub2-set-default <code class="literal">2</code></pre><p>
						Note that the position of a menu entry in the list is denoted by a number starting with zero; therefore, in the example above, the third entry will be loaded. This value will be overwritten by the name of the next kernel to be installed.
					</p><p>
						To force a system to always use a particular menu entry, use the menu entry name as the key to the <code class="literal">GRUB_DEFAULT</code> directive in the <code class="literal">/etc/default/grub</code> file. To list the available menu entries, run the following command as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# awk -F\' '$1=="menuentry " {print $2}' /etc/grub2.cfg</pre><p>
						The file name <code class="literal">/etc/grub2.cfg</code> is a symbolic link to the <code class="literal">grub.cfg</code> file, whose location is architecture dependent. For reliability reasons, the symbolic link is not used in other examples in this chapter. It is better to use absolute paths when writing to a file, especially when repairing a system.
					</p><p>
						Changes to <code class="literal">/etc/default/grub</code> require rebuilding the <code class="literal">grub.cfg</code> file as follows:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On BIOS-based machines, issue the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
								On UEFI-based machines, issue the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</pre></li></ul></div></section><section class="section" id="sec-Editing_a_Menu_Entry"><div class="titlepage"><div><div><h3 class="title">26.5.2.&nbsp;Editing a Menu Entry</h3></div></div></div><p>
						If required to prepare a new GRUB 2 file with different parameters, edit the values of the <code class="literal">GRUB_CMDLINE_LINUX</code> key in the <code class="literal">/etc/default/grub</code> file. Note that you can specify multiple parameters for the <code class="literal">GRUB_CMDLINE_LINUX</code> key, similarly to adding the parameters in the GRUB 2 boot menu. For example:
					</p><pre class="literallayout">GRUB_CMDLINE_LINUX="console=tty0 console=ttyS0,9600n8"</pre><p>
						Where <code class="literal option">console=tty0</code> is the first virtual terminal and <code class="literal option">console=ttyS0</code> is the serial terminal to be used.
					</p><p>
						Changes to <code class="literal">/etc/default/grub</code> require rebuilding the <code class="literal">grub.cfg</code> file as follows:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On BIOS-based machines, issue the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
								On UEFI-based machines, issue the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</pre></li></ul></div></section><section class="section" id="sec-Adding_a_new_Entry"><div class="titlepage"><div><div><h3 class="title">26.5.3.&nbsp;Adding a new Entry</h3></div></div></div><p>
						When executing the <code class="literal command">grub2-mkconfig</code> command, GRUB 2 searches for Linux kernels and other operating systems based on the files located in the <code class="literal">/etc/grub.d/</code> directory. The <code class="literal">/etc/grub.d/10_linux</code> script searches for installed Linux kernels on the same partition. The <code class="literal">/etc/grub.d/30_os-prober</code> script searches for other operating systems. Menu entries are also automatically added to the boot menu when updating the kernel.
					</p><p>
						The <code class="literal">40_custom</code> file located in the <code class="literal">/etc/grub.d/</code> directory is a template for custom entries and looks as follows:
					</p><pre class="literallayout">#!/bin/sh
exec tail -n +3 $0
# This file provides an easy way to add custom menu entries. Simply type the
# menu entries you want to add after this comment. Be careful not to change
# the 'exec tail' line above.</pre><p>
						This file can be edited or copied. Note that as a minimum, a valid menu entry must include at least the following:
					</p><pre class="literallayout"><span class="emphasis"><em>menuentry</em></span> "&lt;Title&gt;"<span class="emphasis"><em>{</em></span>
&lt;Data&gt;
<span class="emphasis"><em>}</em></span></pre></section><section class="section" id="sec-Using_only_a_Custom_Menu"><div class="titlepage"><div><div><h3 class="title">26.5.4.&nbsp;Creating a Custom Menu</h3></div></div></div><p>
						If you do not want menu entries to be updated automatically, you can create a custom menu.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Before proceeding, back up the contents of the <code class="literal">/etc/grub.d/</code> directory in case you need to revert the changes later.
						</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Note that modifying the <code class="literal">/etc/default/grub</code> file does not have any effect on creating custom menus.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								On BIOS-based machines, copy the contents of <code class="literal">/boot/grub2/grub.cfg</code>, or, on UEFI machines, copy the contents of <code class="literal">/boot/efi/EFI/redhat/grub.cfg</code>. Put the content of the <code class="literal">grub.cfg</code> into the <code class="literal">/etc/grub.d/40_custom</code> file below the existing header lines. The executable part of the <code class="literal">40_custom</code> script has to be preserved.
							</li><li class="listitem"><p class="simpara">
								From the content put into the <code class="literal">/etc/grub.d/40_custom</code> file, only the <code class="literal">menuentry</code> blocks are needed to create the custom menu. The <code class="literal">/boot/grub2/grub.cfg</code> and <code class="literal">/boot/efi/EFI/redhat/grub.cfg</code> files might contain function specifications and other content above and below the <code class="literal">menuentry</code> blocks. If you put these unnecessary lines into the <code class="literal">40_custom</code> file in the previous step, erase them.
							</p><p class="simpara">
								This is an example of a custom <code class="literal">40_custom</code> script:
							</p><pre class="literallayout">#!/bin/sh
exec tail -n +3 $0
# This file provides an easy way to add custom menu entries. Simply type the
# menu entries you want to add after this comment. Be careful not to change
# the 'exec tail' line above.

menuentry 'First custom entry' --class red --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-3.10.0-67.el7.x86_64-advanced-32782dd0-4b47-4d56-a740-2076ab5e5976' {
    load_video
    set gfxpayload=keep
    insmod gzio
    insmod part_msdos
    insmod xfs
    set root='hd0,msdos1'
    if [ x$feature_platform_search_hint = xy ]; then
     search --no-floppy --fs-uuid --set=root --hint='hd0,msdos1' 7885bba1-8aa7-4e5d-a7ad-821f4f52170a
    else
     search --no-floppy --fs-uuid --set=root 7885bba1-8aa7-4e5d-a7ad-821f4f52170a
    fi
    linux16 /vmlinuz-3.10.0-67.el7.x86_64 root=/dev/mapper/rhel-root ro rd.lvm.lv=rhel/root vconsole.font=latarcyrheb-sun16 rd.lvm.lv=rhel/swap vconsole.keymap=us crashkernel=auto rhgb quiet LANG=en_US.UTF-8
    initrd16 /initramfs-3.10.0-67.el7.x86_64.img
}
menuentry 'Second custom entry' --class red --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-0-rescue-07f43f20a54c4ce8ada8b70d33fd001c-advanced-32782dd0-4b47-4d56-a740-2076ab5e5976' {
    load_video
    insmod gzio
    insmod part_msdos
    insmod xfs
    set root='hd0,msdos1'
    if [ x$feature_platform_search_hint = xy ]; then
     search --no-floppy --fs-uuid --set=root --hint='hd0,msdos1' 7885bba1-8aa7-4e5d-a7ad-821f4f52170a
    else
     search --no-floppy --fs-uuid --set=root 7885bba1-8aa7-4e5d-a7ad-821f4f52170a
    fi
    linux16 /vmlinuz-0-rescue-07f43f20a54c4ce8ada8b70d33fd001c root=/dev/mapper/rhel-root ro rd.lvm.lv=rhel/root vconsole.font=latarcyrheb-sun16 rd.lvm.lv=rhel/swap vconsole.keymap=us crashkernel=auto rhgb quiet
    initrd16 /initramfs-0-rescue-07f43f20a54c4ce8ada8b70d33fd001c.img
}</pre></li><li class="listitem"><p class="simpara">
								Remove all files from the <code class="literal">/etc/grub.d/</code> directory except the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">00_header</code>,
									</li><li class="listitem">
										<code class="literal">40_custom</code>,
									</li><li class="listitem">
										<code class="literal">01_users</code> (if it exists),
									</li><li class="listitem"><p class="simpara">
										and <code class="literal">README</code>.
									</p><p class="simpara">
										Alternatively, if you want to keep the files in the <code class="literal">/etc/grub2.d/</code> directory, make them unexecutable by running the <code class="literal command">chmod a-x &lt;file_name&gt;</code> command.
									</p></li></ul></div></li><li class="listitem">
								Edit, add, or remove menu entries in the <code class="literal">40_custom</code> file as desired.
							</li><li class="listitem"><p class="simpara">
								Rebuild the <code class="literal">grub.cfg</code> file by running the <code class="literal command">grub2-mkconfig -o</code> command as follows:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										On BIOS-based machines, issue the following command as <code class="literal">root</code>:
									</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
										On UEFI-based machines, issue the following command as <code class="literal">root</code>:
									</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</pre></li></ul></div></li></ol></div></section></section><section class="section" id="sec-Protecting_GRUB_2_with_a_Password"><div class="titlepage"><div><div><h2 class="title">26.6.&nbsp;Protecting GRUB 2 with a Password</h2></div></div></div><p>
					GRUB 2 offers two types of password protection:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Password is required for modifying menu entries <span class="emphasis"><em>but not</em></span> for booting existing menu entries;
						</li><li class="listitem">
							Password is required for modifying menu entries <span class="emphasis"><em>and</em></span> for booting one, several, or all menu entries.
						</li></ul></div><h4 id="configuring_grub_2_to_require_a_password_only_for_modifying_entries">Configuring GRUB 2 to Require a Password only for Modifying Entries</h4><p>
					To require password authentication for modifying GRUB 2 entries, follow these steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">grub2-setpassword</code> command as root:
						</p><pre class="literallayout">~]# grub2-setpassword</pre></li><li class="listitem"><p class="simpara">
							Enter and confirm the password:
						</p><pre class="literallayout">Enter password:
Confirm password:</pre></li></ol></div><p>
					Following this procedure creates a <code class="literal">/boot/grub2/user.cfg</code> file that contains the hash of the password. The user for this password, <code class="literal">root</code>, is defined in the <code class="literal">/boot/grub2/grub.cfg</code> file. With this change, modifying a boot entry during booting requires you to specify the <code class="literal">root</code> user name and your password.
				</p><h4 id="configuring_grub_2_to_require_a_password_for_modifying_and_booting_entries">Configuring GRUB 2 to Require a Password for Modifying and Booting Entries</h4><p>
					Setting a password using the <code class="literal command">grub2-setpassword</code> prevents menu entries from unauthorized modification but not from unauthorized booting. To also require password for booting an entry, follow these steps after setting the password with <code class="literal command">grub2-setpassword</code>:
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						If you forget your GRUB 2 password, you will not be able to boot the entries you reconfigure in the following procedure.
					</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Open the <code class="literal">/boot/grub2/grub.cfg</code> file.
						</li><li class="listitem">
							Find the boot entry that you want to protect with password by searching for lines beginning with <code class="literal">menuentry</code>.
						</li><li class="listitem"><p class="simpara">
							Delete the <code class="literal option">--unrestricted</code> parameter from the menu entry block, for example:
						</p><pre class="literallayout">[file contents truncated]
menuentry 'Red Hat Enterprise Linux Server (3.10.0-327.18.2.rt56.223.el7_2.x86_64) 7.2 (Maipo)' --class red --class gnu-linux --class gnu --class os <span class="emphasis"><em>--unrestricted</em></span> $menuentry_id_option 'gnulinux-3.10.0-327.el7.x86_64-advanced-c109825c-de2f-4340-a0ef-4f47d19fe4bf' {
    load_video
    set gfxpayload=keep
[file contents truncated]</pre></li><li class="listitem">
							Save and close the file.
						</li></ol></div><p>
					Now even booting the entry requires entering the <code class="literal">root</code> user name and password.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Manual changes to the <code class="literal">/boot/grub2/grub.cfg</code> persist when new kernel versions are installed, but are lost when re-generating <code class="literal">grub.cfg</code> using the <code class="literal command">grub2-mkconfig</code> command. Therefore, to retain password protection, use the above procedure after every use of <code class="literal command">grub2-mkconfig</code>.
					</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you delete the <code class="literal option">--unrestricted</code> parameter from every menu entry in the <code class="literal">/boot/grub2/grub.cfg</code> file, all newly installed kernels will have menu entry created without <code class="literal option">--unrestricted</code> and hence automatically inherit the password protection.
					</p></div></div><h4 id="passwords_set_before_updating_to_red_hat_enterprise_linux_7_2">Passwords Set Before Updating to Red Hat Enterprise Linux 7.2</h4><p>
					The <code class="literal command">grub2-setpassword</code> tool was added in Red Hat Enterprise Linux 7.2 and is now the standard method of setting GRUB 2 passwords. This is in contrast to previous versions of Red Hat Enterprise Linux, where boot entries needed to be manually specified in the <code class="literal">/etc/grub.d/40_custom</code> file, and super users - in the <code class="literal">/etc/grub.d/01_users</code> file.
				</p><h4 id="additional_grub_2_users">Additional GRUB 2 Users</h4><p>
					Booting entries without the <code class="literal option">--unrestricted</code> parameter requires the root password. However, GRUB 2 also enables creating additional non-root users that can boot such entries without providing a password. Modifying the entries still requires the root password. For information on creating such users, see the <a class="link" href="https://www.gnu.org/software/grub/manual/grub.html">GRUB 2 Manual</a>.
				</p></section><section class="section" id="sec-Reinstalling_GRUB_2"><div class="titlepage"><div><div><h2 class="title">26.7.&nbsp;Reinstalling GRUB 2</h2></div></div></div><p>
					Reinstalling GRUB 2 is a convenient way to fix certain problems usually caused by an incorrect installation of GRUB 2, missing files, or a broken system. Other reasons to reinstall GRUB 2 include the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Upgrading from the previous version of GRUB.
						</li><li class="listitem">
							The user requires the GRUB 2 boot loader to control installed operating systems. However, some operating systems are installed with their own boot loaders. Reinstalling GRUB 2 returns control to the desired operating system.
						</li><li class="listitem">
							Adding the boot information to another drive.
						</li></ul></div><section class="section" id="sec-grub2-reinstall_on_BIOS-Based_Machines"><div class="titlepage"><div><div><h3 class="title">26.7.1.&nbsp;Reinstalling GRUB 2 on BIOS-Based Machines</h3></div></div></div><p>
						When using the <code class="literal command">grub2-install</code> command, the boot information is updated and missing files are restored. Note that the files are restored only if they are not corrupted.
					</p><p>
						Use the <code class="literal command">grub2-install <span class="emphasis"><em>device</em></span></code> command to reinstall GRUB 2 if the system is operating normally. For example, if <code class="literal">sda</code> is your <span class="emphasis"><em>device</em></span>:
					</p><pre class="literallayout">~]# grub2-install <code class="literal">/dev/sda</code></pre></section><section class="section" id="sec-grub2-reinstall_on_UEFI-Based_Machines"><div class="titlepage"><div><div><h3 class="title">26.7.2.&nbsp;Reinstalling GRUB 2 on UEFI-Based Machines</h3></div></div></div><p>
						When using the <code class="literal command">yum reinstall grub2-efi shim</code> command, the boot information is updated and missing files are restored. Note that the files are restored only if they are not corrupted.
					</p><p>
						Use the <code class="literal command">yum reinstall grub2-efi shim</code> command to reinstall GRUB 2 if the system is operating normally. For example:
					</p><pre class="literallayout">~]# yum reinstall grub2-efi shim</pre></section><section class="section" id="sec-Resetting_and_Reinstalling_GRUB_2"><div class="titlepage"><div><div><h3 class="title">26.7.3.&nbsp;Resetting and Reinstalling GRUB 2</h3></div></div></div><p>
						This method completely removes all GRUB 2 configuration files and system settings. Apply this method to reset all configuration settings to their default values. Removing of the configuration files and subsequent reinstalling of GRUB 2 fixes failures caused by corrupted files and incorrect configuration. To do so, as <code class="literal">root</code>, follow these steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Run the <code class="literal command">rm /etc/grub.d/*</code> command;
							</li><li class="listitem">
								Run the <code class="literal command">rm /etc/sysconfig/grub</code> command;
							</li><li class="listitem"><p class="simpara">
								For EFI systems <span class="emphasis"><em>only</em></span>, run the following command:
							</p><pre class="literallayout">~]# yum reinstall grub2-efi shim grub2-tools</pre></li><li class="listitem"><p class="simpara">
								For BIOS and EFI systems, run this command:
							</p><pre class="literallayout">~]# yum reinstall grub2-tools</pre></li><li class="listitem"><p class="simpara">
								Rebuild the <code class="literal">grub.cfg</code> file by running the <code class="literal command">grub2-mkconfig -o</code> command as follows:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										On BIOS-based machines, issue the following command as <code class="literal">root</code>:
									</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
										On UEFI-based machines, issue the following command as <code class="literal">root</code>:
									</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</pre></li></ul></div></li><li class="listitem">
								Now follow the procedure in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Reinstalling_GRUB_2" title="26.7. Reinstalling GRUB 2">Section&nbsp;26.7, “Reinstalling GRUB 2”</a> to restore GRUB 2 on the <code class="literal">/boot/</code> partition.
							</li></ol></div></section></section><section class="section" id="sec-Upgrading_from_GRUB_Legacy_to_GRUB_2"><div class="titlepage"><div><div><h2 class="title">26.8.&nbsp;Upgrading from GRUB Legacy to GRUB 2</h2></div></div></div><p>
					When you do an in-place upgrade of Red Hat Enterprise Linux (RHEL) from version 6 to 7, the upgrade from <code class="literal">GRUB Legacy</code> to <code class="literal">GRUB 2</code> does not happen automatically, but it should be done manually. Perform the GRUB upgrade for these reasons:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							In RHEL 7 and later versions, <code class="literal">GRUB Legacy</code> is no longer maintained and does not receive updates.
						</li><li class="listitem">
							<code class="literal">GRUB Legacy</code> is unable to boot on systems without the <code class="literal">/boot/</code> directory.
						</li><li class="listitem">
							<code class="literal">GRUB 2</code> has more features and is more reliable.
						</li><li class="listitem">
							<code class="literal">GRUB 2</code> supports more hardware configurations, file systems, and drive layouts.
						</li></ul></div><h4 id="upgrading_from_grub_legacy_to_grub_2_after_the_in_place_upgrade_of_the_operating_system">Upgrading from GRUB Legacy to GRUB 2 after the in-place upgrade of the operating system</h4><div class="orderedlist" id="after-upgrade_rhel6_to_rhel7"><p class="title"><strong>Upgrading from GRUB Legacy to GRUB 2</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Ensure that the GRUB Legacy package has been uninstalled by the <span class="strong strong"><strong><span class="application application">Red Hat Upgrade Tool</span></strong></span>:
						</p><pre class="literallayout">~]# yum remove grub</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Uninstalling the <span class="strong strong"><strong><span class="package package">grub2</span></strong></span> package does not affect the installed GRUB Legacy bootloader.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Make sure that the <span class="strong strong"><strong><span class="package package">grub2</span></strong></span> package has been installed. If <span class="strong strong"><strong><span class="package package">grub2</span></strong></span> is not on the system after the upgrade to RHEL 7, you can install it manually by running:
						</p><pre class="literallayout">~]# yum install grub2</pre></li><li class="listitem"><p class="simpara">
							If the system boots using EFI, install the following packages if they are missing:
						</p><pre class="literallayout">~]# yum install grub2-efi-x64 shim-x64</pre></li></ol></div><h4 id="generating-the-grub-2-configuration-files">Generating the GRUB 2 configuration files</h4><p>
					This section describes how to add a <code class="literal">GRUB 2</code> configuration without removing the original <code class="literal">GRUB Legacy</code> configuration. The procedure keeps the <code class="literal">GRUB Legacy</code> configuration in case that <code class="literal">GRUB 2</code> does not work correctly.
				</p><div class="orderedlist" id="proc_Installing_the_GRUB_2_configuration_file"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Manually create the <code class="literal">/etc/default/grub</code> file by using one of the following options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Create the <code class="literal">/etc/default/grub</code> file. For details, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/solutions/3185891">How to re-create the missing /etc/default/grub file in Red Hat Enterprise Linux 7?</a></span></em></span> article.
								</li><li class="listitem">
									Copy the <code class="literal">/etc/default/grub</code> file from a similar Red Hat Enterprise Linux 7 system, and adjust the file accordingly.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Depending on your bootloader:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If the system boots using the legacy BIOS, install the <code class="literal">GRUB 2</code> files to the <code class="literal">/boot/grub/</code> directory of the <span class="emphasis"><em>/dev/device_name</em></span> disk:
								</p><pre class="literallayout">~]# grub2-install --grub-setup=/bin/true <span class="emphasis"><em>/dev/device_name</em></span></pre><p class="simpara">
									Substitute <span class="emphasis"><em>/dev/device_name</em></span> with the bootable device file.
								</p><p class="simpara">
									The <code class="literal option">--grub-setup=/bin/true</code> option ensures that the old <code class="literal">GRUB Legacy</code> configuration is not deleted.
								</p></li><li class="listitem"><p class="simpara">
									If the system boots using EFI, create a boot entry for the shim bootloader and change the <code class="literal">BootOrder</code> variable to make the firmware boot GRUB 2 through <code class="literal">shim</code>:
								</p><pre class="literallayout">~]# efibootmgr -c -L 'Red Hat Enterprise Linux 7' -d <span class="emphasis"><em>/dev/device_name</em></span> -p 1 -l '\EFI\redhat\shimx64.efi'</pre><p class="simpara">
									Substitute <span class="emphasis"><em>/dev/device_name</em></span> with the bootable device file.
								</p></li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Note the difference in the configuration file extensions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">.conf</code> is for <code class="literal">GRUB</code>
									</li><li class="listitem">
										<code class="literal">.cfg</code> is for <code class="literal">GRUB 2</code>
									</li></ul></div><p>
								Do not overwrite the old <code class="literal">GRUB</code> configuration file by mistake in the next step.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Generate the <code class="literal">GRUB 2</code> configuration file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If the system uses the legacy BIOS:
								</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
									If the system uses EFI:
								</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								For customizing the generated <code class="literal">GRUB 2</code> configuration file, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Customizing_the_GRUB_2_Configuration_File" title="26.5. Customizing the GRUB 2 Configuration File">Section&nbsp;26.5, “Customizing the GRUB 2 Configuration File”</a>. You should make changes in <code class="literal">/etc/default/grub</code>, not directly in <code class="literal">/boot/grub2/grub.cfg</code>. Otherwise, changes in <code class="literal">/boot/grub2/grub.cfg</code> are lost every time the file is re-generated.
							</p></div></div></li></ol></div><h4 id="testing_grub_2_with_grub_legacy_bootloader_still_installed">Testing GRUB 2 with GRUB Legacy bootloader still installed</h4><p>
					This section describes how to test <code class="literal">GRUB 2</code> without removing the <code class="literal">GRUB Legacy</code> configuration. The <code class="literal">GRUB Legacy</code> configuration needs to stay until <code class="literal">GRUB 2</code> configuration is verified; otherwise the system might become unbootable. To safely test <code class="literal">GRUB 2</code> configuration, we will start <code class="literal">GRUB 2</code> from <code class="literal">GRUB Legacy</code>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This section applies only to the legacy BIOS booting. In case of EFI, boot entries exist for both the old and new bootloaders, and you can boot the old legacy GRUB by choosing the boot entry with the EFI firmware settings.
					</p></div></div><div class="orderedlist" id="proc-loading_grub2_from_grub"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Add a new section into <code class="literal">/boot/grub/grub.conf</code>.
						</p><p class="simpara">
							For systems with a separate <code class="literal">/boot</code> partition, use:
						</p><pre class="literallayout">title GRUB 2 Test
	root <span class="emphasis"><em>(hd0,0)</em></span>
	kernel /grub2/i386-pc/core.img
	boot</pre><p class="simpara">
							Substitute <span class="emphasis"><em>(hd0,0)</em></span> with the <code class="literal">GRUB Legacy</code> bootable device designation.
						</p><p class="simpara">
							For systems without a separate <code class="literal">/boot</code> partition, use:
						</p><pre class="literallayout">title GRUB 2 Test
	root <span class="emphasis"><em>(hd0,0)</em></span>
	kernel /boot/grub2/i386-pc/core.img
	boot</pre><p class="simpara">
							Substitute <span class="emphasis"><em>(hd0,0)</em></span> with the <code class="literal">GRUB Legacy</code> bootable device designation.
						</p></li><li class="listitem">
							Reboot the system.
						</li><li class="listitem">
							When presented with a <code class="literal">GRUB Legacy</code> menu, select the <code class="literal">GRUB 2 Test</code> entry.
						</li><li class="listitem">
							When presented with a <code class="literal">GRUB 2</code> menu, select a kernel to boot.
						</li><li class="listitem">
							If the above did not work, restart, and <span class="emphasis"><em>do not</em></span> choose the <code class="literal">GRUB 2 Test</code> entry on the next boot.
						</li></ol></div><h4 id="replacing_grub_legacy_bootloader_on_systems_that_use_bios">Replacing GRUB Legacy bootloader on systems that use BIOS</h4><p>
					If GRUB 2 works successfully:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Replace the GRUB Legacy bootloader with the GRUB 2 bootloader:
						</p><pre class="literallayout">~]# grub2-install /dev/sdX</pre></li><li class="listitem"><p class="simpara">
							Remove the old GRUB Legacy configuration file:
						</p><pre class="literallayout">~]# rm /boot/grub/grub.conf</pre></li><li class="listitem"><p class="simpara">
							Reboot the system:
						</p><pre class="literallayout">~]# reboot</pre></li></ol></div><h4 id="removing_grub_legacy_on_systems_that_use_efi">Removing GRUB Legacy on systems that use EFI</h4><p>
					If GRUB 2 works successfully:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Check the content of the <code class="literal">/boot/efi/EFI/redhat/</code> directory and remove obsoleted files related only to the Legacy GRUB:
						</p><pre class="literallayout">~]# rm /boot/efi/EFI/redhat/grub.efi
~]# rm /boot/efi/EFI/redhat/grub.conf</pre></li><li class="listitem"><p class="simpara">
							If you performed an in-place upgrade from RHEL 6 to RHEL 7 using the Preupgrade Assistant and Red Hat Upgrade Tool utilities, remove also backup copies of the files mentioned above that end with the <code class="literal">.preupg</code> suffix:
						</p><pre class="literallayout">~]# rm /boot/efi/EFI/redhat/*.preupg</pre></li><li class="listitem"><p class="simpara">
							Find the old boot entry that refers to the <code class="literal">\EFI\redhat\grub.efi</code> file using the <code class="literal">efibootmgr</code> command:
						</p><pre class="literallayout">~]# efibootmgr -v | grep '\\EFI\\redhat\\grub.efi'</pre><p class="simpara">
							Example output:
						</p><pre class="literallayout">Boot0001* Linux    HD(1,GPT,542e410f-cbf2-4cce-9f5d-61c4764a5d54,0x800,0x64000)/File(\EFI\redhat\grub.efi)</pre><p class="simpara">
							The entry number in this case is <code class="literal">0001</code>.
						</p></li><li class="listitem"><p class="simpara">
							Remove the identified boot entry. The following command removes the boot entry from the example above:
						</p><pre class="literallayout">~]# efibootmgr -Bb 0001</pre><p class="simpara">
							If you have more than one such boot entry, remove all identified old boot entries.
						</p></li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						After upgrading to RHEL7 from an older release, such as RHEL6, the operating system is unsupported until manual upgrade of the <span class="strong strong"><strong>GRUB Legacy</strong></span> bootloader to <span class="strong strong"><strong>GRUB 2</strong></span> has been successfully finished. This is due to the fact that installation of packages across major releases is not supported. In case of RHEL 7, only GRUB 2 is supported, developed, and tested; unlike GRUB Legacy from RHEL 6.
					</p></div></div></section><section class="section" id="sec-GRUB_2_over_a_Serial_Console"><div class="titlepage"><div><div><h2 class="title">26.9.&nbsp;GRUB 2 over a Serial Console</h2></div></div></div><p>
					This section describes how to configure <code class="literal">GRUB 2</code> for serial communications on machines with no display or keyboard.
				</p><p>
					To access the <code class="literal">GRUB 2</code> terminal over a serial connection, an additional option must be added to a kernel definition to make that particular kernel monitor a serial connection.
				</p><p>
					For example:
				</p><pre class="literallayout">console=<span class="emphasis"><em>ttyS0,9600n8</em></span></pre><p>
					Where <code class="literal option">console=ttyS0</code> is the serial terminal to be used, <code class="literal option">9600</code> is the baud rate, <code class="literal option">n</code> is for no parity, and <code class="literal option">8</code> is the word length in bits. A much higher baud rate, for example <code class="literal">115200</code>, is preferable for tasks such as following log files.
				</p><p>
					For more information on serial console settings, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh-Working_with_the_GRUB_2_Boot_Loader-Installable_and_External_Documentation" title="Installable and External Documentation">the section called “Installable and External Documentation”</a>
				</p><section class="section" id="sec-Configuring_GRUB_2_for_single_boot"><div class="titlepage"><div><div><h3 class="title">26.9.1.&nbsp;Configuring GRUB 2 for a single boot</h3></div></div></div><p>
						To set the system to use a serial terminal only during a single boot process, when the GRUB 2 boot menu appears, move the cursor to the kernel you want to start, and press the <span class="keycap"><strong>e</strong></span> key to edit the kernel parameters. Remove the <code class="literal">rhgb</code> and <code class="literal">quiet</code> parameters and add console parameters at the end of the <code class="literal">linux16</code> line as follows:
					</p><pre class="literallayout">linux16   /vmlinuz-3.10.0-0.rc4.59.el7.x86_64 root=/dev/mapper/rhel-root ro rd.md=0 rd.dm=0 rd.lvm.lv=rhel/swap crashkernel=auto rd.luks=0 vconsole.keymap=us rd.lvm.lv=rhel/root <span class="emphasis"><em>console=ttyS0,9600</em></span></pre><p>
						These settings are not persistent and apply only for a single boot.
					</p></section><section class="section" id="sec-Configuring_GRUB_2_for_persistent_change"><div class="titlepage"><div><div><h3 class="title">26.9.2.&nbsp;Configuring GRUB 2 for a persistent change</h3></div></div></div><p>
						To make persistent changes to a menu entry on a system, use the <code class="literal command">grubby</code> tool. For example, to update the entry for the default kernel, enter a command as follows:
					</p><pre class="literallayout">~]# grubby --remove-args="rhgb quiet" --args=console=ttyS0,9600 --update-kernel=DEFAULT</pre><p>
						The <code class="literal option">--update-kernel</code> parameter also accepts the keyword <code class="literal">ALL</code> or a comma separated list of kernel index numbers. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#bh-Adding_and_Removing_Arguments_from_a_GRUB_2_Menu_Entry" title="Adding and Removing Arguments from a GRUB 2 Menu Entry">the section called “Adding and Removing Arguments from a GRUB 2 Menu Entry”</a> for more information on using <code class="literal command">grubby</code>.
					</p></section><section class="section" id="sec-Configuring_new_GRUB_2_file"><div class="titlepage"><div><div><h3 class="title">26.9.3.&nbsp;Configuring a new GRUB 2 file</h3></div></div></div><p>
						If required to build a new GRUB 2 configuration file, add the following two lines in the <code class="literal">/etc/default/grub</code> file:
					</p><pre class="literallayout">GRUB_TERMINAL="serial"
GRUB_SERIAL_COMMAND="serial --speed=9600 --unit=0 --word=8 --parity=no --stop=1"</pre><p>
						The first line disables the graphical terminal. Note that specifying the <code class="literal">GRUB_TERMINAL</code> key overrides values of <code class="literal">GRUB_TERMINAL_INPUT</code> and <code class="literal">GRUB_TERMINAL_OUTPUT</code>. On the second line, adjust the baud rate, parity, and other values to fit your environment and hardware. A much higher baud rate, for example <code class="literal">115200</code>, is preferable for tasks such as following log files. Once you have completed the changes in the <code class="literal">/etc/default/grub</code> file, it is necessary to update the GRUB 2 configuration file.
					</p><p>
						Rebuild the <code class="literal">grub.cfg</code> file by running the <code class="literal command">grub2-mkconfig -o</code> command as follows:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On BIOS-based machines, issue the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
								On UEFI-based machines, issue the following command as <code class="literal">root</code>:
							</p><pre class="literallayout">~]# grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</pre></li></ul></div></section><section class="section" id="sec-Using_screen_to_Connect_to_the_Serial_Console"><div class="titlepage"><div><div><h3 class="title">26.9.4.&nbsp;Using screen to Connect to the Serial Console</h3></div></div></div><p>
						The <span class="strong strong"><strong><span class="application application">screen</span></strong></span> tool serves as a capable serial terminal. To install it, run as <code class="literal">root</code>:
					</p><pre class="literallayout">~]# yum install screen</pre><p>
						To connect to your machine using the serial console, use a command in the follow format:
					</p><pre class="literallayout">screen /dev/<span class="emphasis"><em>console_port</em></span> <span class="emphasis"><em>baud_rate</em></span></pre><p>
						By default, if no option is specified, <span class="strong strong"><strong><span class="application application">screen</span></strong></span> uses the standard 9600 baud rate. To set a higher baud rate, enter:
					</p><pre class="literallayout">~]$ screen <code class="literal">/dev/console_port</code> 115200</pre><p>
						Where <span class="emphasis"><em>console_port</em></span> is <code class="literal">ttyS0</code>, or <code class="literal">ttyUSB0</code>, and so on.
					</p><p>
						To end the session in <span class="strong strong"><strong><span class="application application">screen</span></strong></span>, press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>a</strong></span>, type <code class="literal">:quit</code> and press <span class="keycap"><strong>Enter</strong></span>.
					</p><p>
						See the <code class="literal">screen(1)</code> manual page for additional options and detailed information.
					</p></section></section><section class="section" id="sec-Terminal_Menu_Editing_During_Boot"><div class="titlepage"><div><div><h2 class="title">26.10.&nbsp;Terminal Menu Editing During Boot</h2></div></div></div><p>
					Menu entries can be modified and arguments passed to the kernel on boot. This is done using the menu entry editor interface, which is triggered when pressing the <span class="keycap"><strong>e</strong></span> key on a selected menu entry in the boot loader menu. The <span class="keycap"><strong>Esc</strong></span> key discards any changes and reloads the standard menu interface. The <span class="keycap"><strong>c</strong></span> key loads the command line interface.
				</p><p>
					The command line interface is the most basic GRUB 2 interface, but it is also the one that grants the most control. The command line makes it possible to type any relevant GRUB 2 commands followed by the <span class="keycap"><strong>Enter</strong></span> key to execute them. This interface features some advanced features similar to <span class="strong strong"><strong><span class="application application">shell</span></strong></span>, including <span class="keycap"><strong>Tab</strong></span> key completion based on context, and <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>a</strong></span> to move to the beginning of a line and <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span> to move to the end of a line. In addition, the <span class="keycap"><strong>arrow</strong></span>, <span class="keycap"><strong>Home</strong></span>, <span class="keycap"><strong>End</strong></span>, and <span class="keycap"><strong>Delete</strong></span> keys work as they do in the bash shell.
				</p><section class="section" id="sec-Booting_to_Rescue_Mode"><div class="titlepage"><div><div><h3 class="title">26.10.1.&nbsp;Booting to Rescue Mode</h3></div></div></div><p>
						Rescue mode provides a convenient single-user environment and allows you to repair your system in situations when it is unable to complete a normal booting process. In rescue mode, the system attempts to mount all local file systems and start some important system services, but it does not activate network interfaces or allow more users to be logged into the system at the same time. In Red Hat Enterprise Linux 7, rescue mode is equivalent to single user mode and requires the <code class="literal">root</code> password.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								To enter rescue mode during boot, on the GRUB 2 boot screen, press the <span class="keycap"><strong>e</strong></span> key for edit.
							</li><li class="listitem"><p class="simpara">
								Add the following parameter at the end of the <code class="literal">linux</code> line on 64-Bit IBM Power Series, the <code class="literal">linux16</code> line on x86-64 BIOS-based systems, or the <code class="literal">linuxefi</code> line on UEFI systems:
							</p><pre class="literallayout">systemd.unit=rescue.target</pre><p class="simpara">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>a</strong></span> and <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span> to jump to the start and end of the line, respectively. On some systems, <span class="keycap"><strong>Home</strong></span> and <span class="keycap"><strong>End</strong></span> might also work.
							</p><p class="simpara">
								Note that equivalent parameters, <code class="literal">1</code>, <code class="literal">s</code>, and <code class="literal">single</code>, can be passed to the kernel as well.
							</p></li><li class="listitem">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>x</strong></span> to boot the system with the parameter.
							</li></ol></div></section><section class="section" id="sec-Booting_to_Emergency_Mode"><div class="titlepage"><div><div><h3 class="title">26.10.2.&nbsp;Booting to Emergency Mode</h3></div></div></div><p>
						Emergency mode provides the most minimal environment possible and allows you to repair your system even in situations when the system is unable to enter rescue mode. In emergency mode, the system mounts the <code class="literal">root</code> file system only for reading, does not attempt to mount any other local file systems, does not activate network interfaces, and only starts few essential services. In Red Hat Enterprise Linux 7, emergency mode requires the <code class="literal">root</code> password.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								To enter emergency mode, on the GRUB 2 boot screen, press the <span class="keycap"><strong>e</strong></span> key for edit.
							</li><li class="listitem"><p class="simpara">
								Add the following parameter at the end of the <code class="literal">linux</code> line on 64-Bit IBM Power Series, the <code class="literal">linux16</code> line on x86-64 BIOS-based systems, or the <code class="literal">linuxefi</code> line on UEFI systems:
							</p><pre class="literallayout">systemd.unit=emergency.target</pre><p class="simpara">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>a</strong></span> and <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span> to jump to the start and end of the line, respectively. On some systems, <span class="keycap"><strong>Home</strong></span> and <span class="keycap"><strong>End</strong></span> might also work.
							</p><p class="simpara">
								Note that equivalent parameters, <code class="literal">emergency</code> and <code class="literal">-b</code>, can be passed to the kernel as well.
							</p></li><li class="listitem">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>x</strong></span> to boot the system with the parameter.
							</li></ol></div></section><section class="section" id="sec-Booting_to_the_Debug_Shell"><div class="titlepage"><div><div><h3 class="title">26.10.3.&nbsp;Booting to the Debug Shell</h3></div></div></div><p>
						The <code class="literal">systemd</code> debug shell provides a shell very early in the startup process that can be used to diagnose <code class="literal">systemd</code> related boot-up problems. Once in the debug shell, <code class="literal">systemctl</code> commands such as <code class="literal command">systemctl list-jobs</code>, and <code class="literal command">systemctl list-units</code> can be used to look for the cause of boot problems. In addition, the <code class="literal option">debug</code> option can be added to the kernel command line to increase the number of log messages. For <code class="literal">systemd</code>, the kernel command-line option <code class="literal option">debug</code> is now a shortcut for <code class="literal option">systemd.log_level=debug</code>.
					</p><div id="proc-Adding_the_Debug_Shell_Command" class="formalpara"><p class="title"><strong>Adding the Debug Shell Command</strong></p><p>
							To activate the debug shell only for this session, proceed as follows:
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								On the GRUB 2 boot screen, move the cursor to the menu entry you want to edit and press the <span class="keycap"><strong>e</strong></span> key for edit.
							</li><li class="listitem"><p class="simpara">
								Add the following parameter at the end of the <code class="literal">linux</code> line on 64-Bit IBM Power Series, the <code class="literal">linux16</code> line on x86-64 BIOS-based systems, or the <code class="literal">linuxefi</code> line on UEFI systems:
							</p><pre class="literallayout">systemd.debug-shell</pre><p class="simpara">
								Optionally add the <code class="literal option">debug</code> option.
							</p><p class="simpara">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>a</strong></span> and <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span> to jump to the start and end of the line, respectively. On some systems, <span class="keycap"><strong>Home</strong></span> and <span class="keycap"><strong>End</strong></span> might also work.
							</p></li><li class="listitem">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>x</strong></span> to boot the system with the parameter.
							</li></ol></div><p>
						If required, the debug shell can be set to start on every boot by enabling it with the <code class="literal command">systemctl enable debug-shell</code> command. Alternatively, the <code class="literal command">grubby</code> tool can be used to make persistent changes to the kernel command line in the GRUB 2 menu. See <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Making_Persistent_Changes_to_a_GRUB_2_Menu_Using_the_grubby_Tool" title="26.4. Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool">Section&nbsp;26.4, “Making Persistent Changes to a GRUB 2 Menu Using the grubby Tool”</a> for more information on using <code class="literal command">grubby</code>.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Permanently enabling the debug shell is a security risk because no authentication is required to use it. Disable it when the debugging session has ended.
						</p></div></div><div id="proc-Connecting_to_the_Debug_Shell" class="formalpara"><p class="title"><strong>Connecting to the Debug Shell</strong></p><p>
							During the boot process, the <code class="literal">systemd-debug-generator</code> will configure the debug shell on TTY9.
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F9</strong></span> to connect to the debug shell. If working with a virtual machine, sending this key combination requires support from the virtualization application. For example, if using <span class="strong strong"><strong><span class="application application">Virtual Machine Manager</span></strong></span>, select <span class="guimenu">Send Key</span> → <span class="guimenuitem"><code class="literal">Ctrl+Alt+F9</code></span> from the menu.
							</li><li class="listitem">
								The debug shell does not require authentication, therefore a prompt similar to the following should be seen on TTY9: <code class="literal">[root@localhost /]#</code>
							</li><li class="listitem"><p class="simpara">
								If required, to verify you are in the debug shell, enter a command as follows:
							</p><pre class="literallayout">/]# systemctl status $$
● debug-shell.service - Early root shell on /dev/tty9 FOR DEBUGGING ONLY
  Loaded: loaded (/usr/lib/systemd/system/debug-shell.service; disabled; vendor preset: disabled)
  Active: active (running) since Wed 2015-08-05 11:01:48 EDT; 2min ago
   Docs: man:sushell(8)
 Main PID: 450 (bash)
  CGroup: /system.slice/debug-shell.service
      ├─ 450 /bin/bash
      └─1791 systemctl status 450</pre></li><li class="listitem">
								To return to the default shell, if the boot succeeded, press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>.
							</li></ol></div><p>
						To diagnose start up problems, certain <code class="literal">systemd</code> units can be masked by adding <code class="literal command">systemd.mask=<span class="emphasis"><em>unit_name</em></span></code> one or more times on the kernel command line. To start additional processes during the boot process, add <code class="literal command">systemd.wants=<span class="emphasis"><em>unit_name</em></span></code> to the kernel command line. The <code class="literal">systemd-debug-generator(8)</code> manual page describes these options.
					</p></section><section class="section" id="sec-Changing_and_Resetting_the_Root_Password"><div class="titlepage"><div><div><h3 class="title">26.10.4.&nbsp;Changing and Resetting the Root Password</h3></div></div></div><p>
						Setting up the <code class="literal">root</code> password is a mandatory part of the Red Hat Enterprise Linux 7 installation. If you forget or lose the <code class="literal">root</code> password it is possible to reset it, however users who are members of the wheel group can change the <code class="literal">root</code> password as follows:
					</p><pre class="literallayout">~]$ <code class="literal command">sudo passwd root</code></pre><p>
						Note that in GRUB 2, resetting the password is no longer performed in single-user mode as it was in GRUB included in Red Hat Enterprise Linux 6. The <code class="literal">root</code> password is now required to operate in <code class="literal">single-user</code> mode as well as in <code class="literal">emergency</code> mode.
					</p><p>
						Two procedures for resetting the <code class="literal">root</code> password are shown here:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#proc-Resetting_the_Root_Password_Using_an_Installation_Disk" title="Resetting the Root Password Using an Installation Disk">Resetting the Root Password Using an Installation Disk</a> takes you to a shell prompt, without having to edit the GRUB 2 menu. It is the shorter of the two procedures and it is also the recommended method. You can use a boot disk or a normal Red Hat Enterprise Linux 7 installation disk.
							</li><li class="listitem">
								<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#proc-Resetting_the_Root_Password_Using_rd_break" title="Resetting the Root Password Using rd.break">Resetting the Root Password Using rd.break</a> makes use of <code class="literal command">rd.break</code> to interrupt the boot process before control is passed from <code class="literal">initramfs</code> to <code class="literal">systemd</code>. The disadvantage of this method is that it requires more steps, includes having to edit the GRUB 2 menu, and involves choosing between a possibly time consuming SELinux file relabel or changing the SELinux enforcing mode and then restoring the SELinux security context for <code class="literal">/etc/shadow/</code> when the boot completes.
							</li></ul></div><div class="orderedlist" id="proc-Resetting_the_Root_Password_Using_an_Installation_Disk"><p class="title"><strong>Resetting the Root Password Using an Installation Disk</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Start the system and when BIOS information is displayed, select the option for a boot menu and select to boot from the installation disk.
							</li><li class="listitem">
								Choose <code class="literal">Troubleshooting</code>.
							</li><li class="listitem">
								Choose <code class="literal">Rescue a Red Hat Enterprise Linux System</code>.
							</li><li class="listitem">
								Choose <code class="literal">Continue</code> which is the default option. At this point you will be promoted for a passphrase if an encrypted file system is found.
							</li><li class="listitem">
								Press <span class="keycap"><strong>OK</strong></span> to acknowledge the information displayed until the shell prompt appears.
							</li><li class="listitem"><p class="simpara">
								Change the file system <code class="literal">root</code> as follows:
							</p><pre class="literallayout">sh-4.2# chroot /mnt/sysimage</pre></li><li class="listitem">
								Enter the <code class="literal command">passwd</code> command and follow the instructions displayed on the command line to change the <code class="literal">root</code> password.
							</li><li class="listitem"><p class="simpara">
								Remove the <code class="literal">autorelable</code> file to prevent a time consuming SELinux relabel of the disk:
							</p><pre class="literallayout">sh-4.2# rm -f /.autorelabel</pre></li><li class="listitem">
								Enter the <code class="literal command">exit</code> command to exit the <code class="literal command">chroot</code> environment.
							</li><li class="listitem">
								Enter the <code class="literal command">exit</code> command again to resume the initialization and finish the system boot.
							</li></ol></div><div class="orderedlist" id="proc-Resetting_the_Root_Password_Using_rd_break"><p class="title"><strong>Resetting the Root Password Using rd.break</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Start the system and, on the GRUB 2 boot screen, press the <span class="keycap"><strong>e</strong></span> key for edit.
							</li><li class="listitem"><p class="simpara">
								Remove the <code class="literal option">rhgb</code> and <code class="literal option">quiet</code> parameters from the end, or near the end, of the <code class="literal">linux16</code> line, or <code class="literal">linuxefi</code> on UEFI systems.
							</p><p class="simpara">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>a</strong></span> and <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span> to jump to the start and end of the line, respectively. On some systems, <span class="keycap"><strong>Home</strong></span> and <span class="keycap"><strong>End</strong></span> might also work.
							</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
									The <code class="literal option">rhgb</code> and <code class="literal option">quiet</code> parameters must be removed in order to enable system messages.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Add the following parameters at the end of the <code class="literal">linux</code> line on 64-Bit IBM Power Series, the <code class="literal">linux16</code> line on x86-64 BIOS-based systems, or the <code class="literal">linuxefi</code> line on UEFI systems:
							</p><pre class="literallayout">rd.break enforcing=0</pre><p class="simpara">
								Adding the <code class="literal option">enforcing=0</code> option enables omitting the time consuming SELinux relabeling process.
							</p><p class="simpara">
								The <code class="literal">initramfs</code> will stop before passing control to the Linux <span class="strong strong"><strong><span class="package package">kernel</span></strong></span>, enabling you to work with the <code class="literal">root</code> file system.
							</p><p class="simpara">
								Note that the <code class="literal">initramfs</code> prompt will appear on the last console specified on the Linux line.
							</p></li><li class="listitem"><p class="simpara">
								Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>x</strong></span> to boot the system with the changed parameters.
							</p><p class="simpara">
								With an encrypted file system, a password is required at this point. However the password prompt might not appear as it is obscured by logging messages. You can press the <span class="keycap"><strong>Backspace</strong></span> key to see the prompt. Release the key and enter the password for the encrypted file system, while ignoring the logging messages.
							</p><p class="simpara">
								The <code class="literal">initramfs</code> <code class="literal">switch_root</code> prompt appears.
							</p></li><li class="listitem"><p class="simpara">
								The file system is mounted read-only on <code class="literal">/sysroot/</code>. You will not be allowed to change the password if the file system is not writable.
							</p><p class="simpara">
								Remount the file system as writable:
							</p><pre class="literallayout">switch_root:/# mount -o remount,rw /sysroot</pre></li><li class="listitem"><p class="simpara">
								The file system is remounted with write enabled.
							</p><p class="simpara">
								Change the file system’s <code class="literal">root</code> as follows:
							</p><pre class="literallayout">switch_root:/# chroot /sysroot</pre><p class="simpara">
								The prompt changes to <code class="literal">sh-4.2#</code>.
							</p></li><li class="listitem"><p class="simpara">
								Enter the <code class="literal command">passwd</code> command and follow the instructions displayed on the command line to change the <code class="literal">root</code> password.
							</p><p class="simpara">
								Note that if the system is not writable, the <span class="strong strong"><strong><span class="application application">passwd</span></strong></span> tool fails with the following error:
							</p><pre class="literallayout">Authentication token manipulation error</pre></li><li class="listitem"><p class="simpara">
								Updating the password file results in a file with the incorrect SELinux security context. To relabel all files on next system boot, enter the following command:
							</p><pre class="literallayout">sh-4.2# touch /.autorelabel</pre><p class="simpara">
								Alternatively, to save the time it takes to relabel a large disk, you can omit this step provided you included the <code class="literal option">enforcing=0</code> option in step 3.
							</p></li><li class="listitem"><p class="simpara">
								Remount the file system as read only:
							</p><pre class="literallayout">sh-4.2# mount -o remount,ro /</pre></li><li class="listitem">
								Enter the <code class="literal command">exit</code> command to exit the <code class="literal command">chroot</code> environment.
							</li><li class="listitem"><p class="simpara">
								Enter the <code class="literal command">exit</code> command again to resume the initialization and finish the system boot.
							</p><p class="simpara">
								With an encrypted file system, a pass word or phrase is required at this point. However the password prompt might not appear as it is obscured by logging messages. You can press and hold the <span class="keycap"><strong>Backspace</strong></span> key to see the prompt. Release the key and enter the password for the encrypted file system, while ignoring the logging messages.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Note that the SELinux relabeling process can take a long time. A system reboot will occur automatically when the process is complete.
								</p></div></div></li><li class="listitem"><p class="simpara">
								If you added the <code class="literal option">enforcing=0</code> option in step 3 and omitted the <code class="literal command">touch /.autorelabel</code> command in step 8, enter the following command to restore the <code class="literal">/etc/shadow</code> file’s SELinux security context:
							</p><pre class="literallayout">~]# restorecon /etc/shadow</pre><p class="simpara">
								Enter the following commands to turn SELinux policy enforcement back on and verify that it is on:
							</p><pre class="literallayout">~]# setenforce 1
~]# getenforce
Enforcing</pre></li></ol></div></section></section><section class="section" id="sec-UEFI_Secure_Boot"><div class="titlepage"><div><div><h2 class="title">26.11.&nbsp;Unified Extensible Firmware Interface (UEFI) Secure Boot</h2></div></div></div><p>
					The <span class="emphasis"><em>Unified Extensible Firmware Interface</em></span> (<span class="strong strong"><strong>UEFI</strong></span>) Secure Boot technology ensures that the system firmware checks whether the system boot loader is signed with a cryptographic key authorized by a database of public keys contained in the firmware. With signature verification in the next-stage boot loader and kernel, it is possible to prevent the execution of kernel space code which has not been signed by a trusted key.
				</p><p>
					A chain of trust is established from the firmware to the signed drivers and kernel modules as follows. The first-stage boot loader, <code class="literal">shim.efi</code>, is signed by a UEFI private key and authenticated by a public key, signed by a certificate authority (CA), stored in the firmware database. The <code class="literal">shim.efi</code> contains the Red Hat public key, "Red Hat Secure Boot (CA key 1)", which is used to authenticate both the GRUB 2 boot loader, <code class="literal">grubx64.efi</code>, and the Red Hat kernel. The kernel in turn contains public keys to authenticate drivers and modules.
				</p><p>
					Secure Boot is the boot path validation component of the Unified Extensible Firmware Interface (UEFI) specification. The specification defines:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							a programming interface for cryptographically protected UEFI variables in non-volatile storage,
						</li><li class="listitem">
							how the trusted X.509 root certificates are stored in UEFI variables,
						</li><li class="listitem">
							validation of UEFI applications like boot loaders and drivers,
						</li><li class="listitem">
							procedures to revoke known-bad certificates and application hashes.
						</li></ul></div><p>
					UEFI Secure Boot does not prevent the installation or removal of second-stage boot loaders, nor require explicit user confirmation of such changes. Signatures are verified during booting, not when the boot loader is installed or updated. Therefore, UEFI Secure Boot does not stop boot path manipulations, it helps in the detection of unauthorized changes. A new boot loader or kernel will work as long as it is signed by a key trusted by the system.
				</p><section class="section" id="sec-UEFI_Secure_Boot_Support_in_Red_Hat_Enterprise_Linux"><div class="titlepage"><div><div><h3 class="title">26.11.1.&nbsp;UEFI Secure Boot Support in Red Hat Enterprise Linux 7</h3></div></div></div><p>
						Red Hat Enterprise Linux 7 includes support for the UEFI Secure Boot feature, which means that Red Hat Enterprise Linux 7 can be installed and run on systems where UEFI Secure Boot is enabled. On UEFI-based systems with the Secure Boot technology enabled, all drivers that are loaded must be signed with a trusted key, otherwise the system will not accept them. All drivers provided by Red Hat are signed by one of Red Hat’s private keys and authenticated by the corresponding Red Hat public key in the kernel.
					</p><p>
						If you want to load externally built drivers, drivers that are not provided on the Red Hat Enterprise Linux DVD, you must make sure these drivers are signed as well.
					</p><p>
						Information on signing custom drivers is available in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/kernel_administration_guide/chap-documentation-kernel_administration_guide-working_with_kernel_modules#sect-signing-kernel-modules-for-secure-boot">Red Hat Enterprise Linux 7 Kernel Administration Guide</a>.
					</p><h5 id="bh-Restrictions_Imposed_by_Secure_Boot">Restrictions Imposed by UEFI Secure Boot</h5><p>
						As UEFI Secure Boot support in Red Hat Enterprise Linux 7 is designed to ensure that the system only runs kernel mode code after its signature has been properly authenticated, certain restrictions exist.
					</p><p>
						GRUB 2 module loading is disabled as there is no infrastructure for signing and verification of GRUB 2 modules, which means allowing them to be loaded would constitute execution of untrusted code inside the security perimeter that Secure Boot defines. Instead, Red Hat provides a signed GRUB 2 binary that has all the modules supported on Red Hat Enterprise Linux 7 already included.
					</p><p>
						More detailed information is available in the Red Hat Knowledgebase article <a class="link" href="https://access.redhat.com/articles/1351013">Restrictions Imposed by UEFI Secure Boot</a>.
					</p></section></section><section class="section" id="sec-Working_with_the_GRUB_2_Boot_Loader-Additional_Resources"><div class="titlepage"><div><div><h2 class="title">26.12.&nbsp;Additional Resources</h2></div></div></div><p>
					Please see the following resources for more information on the GRUB 2 boot loader:
				</p><h4 id="bh-Working_with_the_GRUB_2_Boot_Loader-Installed_Documentation">Installed Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">/usr/share/doc/grub2-tools-<span class="emphasis"><em>version-number</em></span>/</code> — This directory contains information about using and configuring GRUB 2. <span class="emphasis"><em>version-number</em></span> corresponds to the version of the GRUB 2 package installed.
						</li><li class="listitem">
							<code class="literal command">info grub2</code> — The GRUB 2 info page contains a tutorial, a user reference manual, a programmer reference manual, and a FAQ document about GRUB 2 and its usage.
						</li><li class="listitem">
							<code class="literal">grubby(8)</code> — The manual page for the command-line tool for configuring GRUB and GRUB 2.
						</li><li class="listitem">
							<code class="literal">new-kernel-pkg(8)</code> — The manual page for the tool to script kernel installation.
						</li></ul></div><h4 id="bh-Working_with_the_GRUB_2_Boot_Loader-Installable_and_External_Documentation">Installable and External Documentation</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">/usr/share/doc/kernel-doc-<span class="emphasis"><em>kernel_version</em></span>/Documentation/serial-console.txt</code> — This file, which is provided by the <span class="strong strong"><strong><span class="package package">kernel-doc</span></strong></span> package, contains information on the serial console. Before accessing the kernel documentation, you must run the following command as <code class="literal">root</code>:
						</p><pre class="literallayout">~]# yum install kernel-doc</pre></li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/"> Red Hat Installation Guide</a> — The Installation Guide provides basic information on GRUB 2, for example, installation, terminology, interfaces, and commands.
						</li></ul></div></section></section></div><div class="part" id="part-System_Backup_and_Recovery"><div class="titlepage"><div><div><h1 class="title">Part&nbsp;VIII.&nbsp;System Backup and Recovery</h1></div></div></div><div class="partintro" id="idm140569343885376"><div><!--Empty--></div><p>
				This part describes how to use the Relax-and-Recover (ReaR) disaster recovery and system migration utility.
			</p></div><section class="chapter" id="ch-Relax-and-Recover_ReaR"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;27.&nbsp;Relax-and-Recover (ReaR)</h2></div></div></div><p>
				When a software or hardware failure breaks the system, the system administrator faces three tasks to restore it to the fully functioning state on a new hardware environment:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						booting a rescue system on the new hardware
					</li><li class="listitem">
						replicating the original storage layout
					</li><li class="listitem">
						restoring user and system files
					</li></ol></div><p>
				Most backup software solves only the third problem. To solve the first and second problems, use <span class="emphasis"><em>Relax-and-Recover (ReaR)</em></span>, a disaster recovery and system migration utility.
			</p><p>
				Backup software creates backups. ReaR complements backup software by creating a <span class="emphasis"><em>rescue system</em></span>. Booting the rescue system on a new hardware allows you to issue the <code class="literal command">rear recover</code> command, which starts the recovery process. During this process, ReaR replicates the partition layout and filesystems, prompts for restoring user and system files from the backup created by backup software, and finally installs the boot loader. By default, the rescue system created by ReaR only restores the storage layout and the boot loader, but not the actual user and system files.
			</p><p>
				This chapter describes how to use ReaR.
			</p><section class="section" id="sec-Basic_ReaR_Usage"><div class="titlepage"><div><div><h2 class="title">27.1.&nbsp;Basic ReaR Usage</h2></div></div></div><section class="section" id="installing_rear"><div class="titlepage"><div><div><h3 class="title">27.1.1.&nbsp;Installing ReaR</h3></div></div></div><p>
						Install the <span class="strong strong"><strong><span class="package package">rear</span></strong></span> package by running the following command as root:
					</p><pre class="literallayout">~]# yum install rear</pre></section><section class="section" id="sec-Config_ReaR"><div class="titlepage"><div><div><h3 class="title">27.1.2.&nbsp;Configuring ReaR</h3></div></div></div><p>
						ReaR is configured in the <code class="literal">/etc/rear/local.conf</code> file. Specify the rescue system configuration by adding these lines:
					</p><pre class="literallayout">OUTPUT=<span class="emphasis"><em>output format</em></span>
OUTPUT_URL=<span class="emphasis"><em>output location</em></span></pre><p>
						Substitute <span class="emphasis"><em>output format</em></span> with rescue system format, for example, <code class="literal">ISO</code> for an ISO disk image or <code class="literal">USB</code> for a bootable USB.
					</p><p>
						Substitute <span class="emphasis"><em>output location</em></span> with where it will be put, for example, <code class="literal"><a class="link" href="file:///mnt/rescue_system/">file:///mnt/rescue_system/</a></code> for a local filesystem directory or <code class="literal">sftp://backup:password@192.168.0.0/</code> for an SFTP directory.
					</p><div class="example" id="ex-Configuring_rescue_system_format_and_location"><p class="title"><strong>Example&nbsp;27.1.&nbsp;Configuring Rescue System Format and Location</strong></p><div class="example-contents"><p>
							To configure ReaR to output the rescue system as an ISO image into the <code class="literal">/mnt/rescue_system/</code> directory, add these lines to the <code class="literal">/etc/rear/local.conf</code> file:
						</p><pre class="literallayout">OUTPUT=ISO
OUTPUT_URL=file:///mnt/rescue_system/</pre></div></div><p>
						See section "Rescue Image Configuration" of the rear(8) man page for a list of all options.
					</p><h5 id="brid-iso-specific_configuration">ISO-specific Configuration</h5><p>
						Using the configuration in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-Configuring_rescue_system_format_and_location" title="Example 27.1. Configuring Rescue System Format and Location">Example&nbsp;27.1, “Configuring Rescue System Format and Location”</a> results into two equivalent output files in two locations:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">/var/lib/rear/output/</code> - <code class="literal">rear</code>'s default output location
							</li><li class="listitem">
								<code class="literal">/mnt/rescue_system/<span class="emphasis"><em>HOSTNAME</em></span>/rear-localhost.iso</code> - output location specified in <code class="literal">OUTPUT_URL</code>
							</li></ul></div><p>
						However, usually you need only one ISO image. To make ReaR create an ISO image only in the directory specified by a user, add these lines to <code class="literal">/etc/rear/local.conf</code>:
					</p><pre class="literallayout">OUTPUT=ISO
BACKUP=NETFS
OUTPUT_URL=null
BACKUP_URL="iso:///backup"
ISO_DIR="<span class="emphasis"><em>output location</em></span>"</pre><p>
						Substitute <span class="emphasis"><em>output location</em></span> with the desired location for the output.
					</p></section><section class="section" id="sec-Create_Resc_System"><div class="titlepage"><div><div><h3 class="title">27.1.3.&nbsp;Creating a Rescue System</h3></div></div></div><p>
						The following example shows how to create a rescue system with verbose output:
					</p><pre class="literallayout">~]# rear -v mkrescue
Relax-and-Recover 1.17.2 / Git
Using log file: /var/log/rear/rear-rhel7.log
mkdir: created directory '/var/lib/rear/output'
Creating disk layout
Creating root filesystem layout
TIP: To login as root via ssh you need to set up /root/.ssh/authorized_keys or SSH_ROOT_PASSWORD in your configuration file
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Creating initramfs
Making ISO image
<span class="emphasis"><em>Wrote ISO image: /var/lib/rear/output/rear-rhel7.iso (124M)</em></span>
<span class="emphasis"><em>Copying resulting files to file location</em></span></pre><p>
						With the configuration from <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ex-Configuring_rescue_system_format_and_location" title="Example 27.1. Configuring Rescue System Format and Location">Example&nbsp;27.1, “Configuring Rescue System Format and Location”</a>, ReaR prints the above output. The last two lines confirm that the rescue system has been successfully created and copied to the configured backup location <code class="literal">/mnt/rescue_system/</code>. Because the system’s host name is <code class="literal">rhel7</code>, the backup location now contains directory <code class="literal">rhel7/</code> with the rescue system and auxiliary files:
					</p><pre class="literallayout">~]# ls -lh /mnt/rescue_system/rhel7/
total 124M
-rw-------. 1 root root 202 Jun 10 15:27 README
-rw-------. 1 root root 166K Jun 10 15:27 rear.log
-rw-------. 1 root root 124M Jun 10 15:27 rear-rhel7.iso
-rw-------. 1 root root 274 Jun 10 15:27 VERSION</pre><p>
						Transfer the rescue system to an external medium to not lose it in case of a disaster.
					</p></section><section class="section" id="scheduling_rear"><div class="titlepage"><div><div><h3 class="title">27.1.4.&nbsp;Scheduling ReaR</h3></div></div></div><p>
						To schedule ReaR to regularly create a rescue system using the <span class="strong strong"><strong><span class="application application">cron</span></strong></span> job scheduler, add the following line to the <code class="literal">/etc/crontab</code> file:
					</p><pre class="literallayout"><span class="emphasis"><em>minute hour day_of_month month day_of_week</em></span> root /usr/sbin/rear mkrescue</pre><p>
						Substitute the above command with the cron time specification (described in detail in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-Scheduling_a_Cron_Job" title="24.1.2. Scheduling a Cron Job">Section&nbsp;24.1.2, “Scheduling a Cron Job”</a>).
					</p><div class="example" id="idm140569343830800"><p class="title"><strong>Example&nbsp;27.2.&nbsp;Scheduling ReaR</strong></p><div class="example-contents"><p>
							To make ReaR create a rescue system at 22:00 every weekday, add this line to the <code class="literal">/etc/crontab</code> file:
						</p><pre class="literallayout">0 22 * * 1-5 root /usr/sbin/rear mkrescue</pre></div></div></section><section class="section" id="sec-Perf_Syst_Rescue"><div class="titlepage"><div><div><h3 class="title">27.1.5.&nbsp;Performing a System Rescue</h3></div></div></div><p>
						To perform a restore or migration:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Boot the rescue system on the new hardware. For example, burn the ISO image to a DVD and boot from the DVD.
							</li><li class="listitem"><p class="simpara">
								In the console interface, select the "Recover" option:
							</p><div class="figure" id="fig-rear_rescue_system_menu"><p class="title"><strong>Figure&nbsp;27.1.&nbsp;Rescue system: menu</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rear_rescue_system_menu.png" alt="rear rescue system menu"></div></div></div></li><li class="listitem"><p class="simpara">
								You are taken to the prompt:
							</p><div class="figure" id="fig-rear_rescue_system_prompt"><p class="title"><strong>Figure&nbsp;27.2.&nbsp;Rescue system: prompt</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rear_rescue_system_prompt.png" alt="rear rescue system prompt"></div></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
									Once you have started recovery in the next step, it probably cannot be undone and you may lose anything stored on the physical disks of the system.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Run the <code class="literal command">rear recover</code> command to perform the restore or migration. The rescue system then recreates the partition layout and filesystems:
							</p><div class="figure" id="fig-rear_rescue_system_rear_recover"><p class="title"><strong>Figure&nbsp;27.3.&nbsp;Rescue system: running "rear recover"</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rear_rescue_system_rear_recover.png" alt="rear rescue system rear recover"></div></div></div></li><li class="listitem"><p class="simpara">
								Restore user and system files from the backup into the <code class="literal">/mnt/local/</code> directory.
							</p><div class="example" id="idm140569343804976"><p class="title"><strong>Example&nbsp;27.3.&nbsp;Restoring User and System Files</strong></p><div class="example-contents"><p>
									In this example, the backup file is a <span class="strong strong"><strong><span class="application application">tar</span></strong></span> archive created per instructions in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Configuring_the_Internal_Backup_Method" title="27.2.1.1. Configuring the Internal Backup Method">Section&nbsp;27.2.1.1, “Configuring the Internal Backup Method”</a>. First, copy the archive from its storage, then unpack the files into <code class="literal">/mnt/local/</code>, then delete the archive:
								</p><pre class="literallayout">~]# scp root@192.168.122.7:/srv/backup/rhel7/backup.tar.gz /mnt/local/
~]# tar xf /mnt/local/backup.tar.gz -C /mnt/local/
~]# rm -f /mnt/local/backup.tar.gz</pre><p>
									The new storage has to have enough space both for the archive and the extracted files.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Verify that the files have been restored:
							</p><pre class="literallayout">~]# ls /mnt/local/</pre><div class="figure" id="fig-rear_rescue_system_restoring_backup"><p class="title"><strong>Figure&nbsp;27.4.&nbsp;Rescue system: restoring user and system files from the backup</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rear_rescue_system_restoring_backup.png" alt="rear rescue system restoring backup"></div></div></div></li><li class="listitem"><p class="simpara">
								Ensure that SELinux relabels the files on the next boot:
							</p><pre class="literallayout">~]# touch /mnt/local/.autorelabel</pre><p class="simpara">
								Otherwise you may be unable to log in the system, because the <code class="literal">/etc/passwd</code> file may have the incorrect SELinux context.
							</p></li><li class="listitem"><p class="simpara">
								Finish the recovery by entering <code class="literal command">exit</code>. ReaR will then reinstall the boot loader. After that, reboot the system:
							</p><div class="figure" id="rear_rescue_system_finishing_recovery"><p class="title"><strong>Figure&nbsp;27.5.&nbsp;Rescue system: finishing recovery</strong></p><div class="figure-contents"><div class="mediaobject"><img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rear_rescue_system_finishing_recovery.png" alt="rear rescue system finishing recovery"></div></div></div><p class="simpara">
								Upon reboot, SELinux will relabel the whole filesystem. Then you will be able to log in to the recovered system.
							</p></li></ol></div></section></section><section class="section" id="Integrating_ReaR_with_Backup_Software"><div class="titlepage"><div><div><h2 class="title">27.2.&nbsp;Integrating ReaR with Backup Software</h2></div></div></div><p>
					The main purpose of ReaR is to produce a rescue system, but it can also be integrated with backup software. What integration means is different for the built-in, supported, and unsupported backup methods.
				</p><section class="section" id="sec-BuiltIn_Backup_Method"><div class="titlepage"><div><div><h3 class="title">27.2.1.&nbsp;The Built-in Backup Method</h3></div></div></div><p>
						ReaR includes a built-in, or internal, backup method. This method is fully integrated with ReaR, which has these advantages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								a rescue system and a full-system backup can be created using a single <code class="literal command">rear mkbackup</code> command
							</li><li class="listitem">
								the rescue system restores files from the backup automatically
							</li></ul></div><p>
						As a result, ReaR can cover the whole process of creating both the rescue system and the full-system backup.
					</p><section class="section" id="sec-Configuring_the_Internal_Backup_Method"><div class="titlepage"><div><div><h4 class="title">27.2.1.1.&nbsp;Configuring the Internal Backup Method</h4></div></div></div><p>
							To make ReaR use its internal backup method, add these lines to <code class="literal">/etc/rear/local.conf</code>:
						</p><pre class="literallayout">BACKUP=NETFS
BACKUP_URL=<span class="emphasis"><em>backup location</em></span></pre><p>
							These lines configure ReaR to create an archive with a full-system backup using the <code class="literal command">tar</code> command. Substitute <span class="emphasis"><em>backup location</em></span> with one of the options from the "Backup Software Integration" section of the rear(8) man page. Make sure that the backup location has enough space.
						</p><div class="example" id="idm140569343769504"><p class="title"><strong>Example&nbsp;27.4.&nbsp;Adding tar Backups</strong></p><div class="example-contents"><p>
								To expand the example in <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sec-Basic_ReaR_Usage" title="27.1. Basic ReaR Usage">Section&nbsp;27.1, “Basic ReaR Usage”</a>, configure ReaR to also output a <span class="strong strong"><strong><span class="application application">tar</span></strong></span> full-system backup into the <code class="literal">/srv/backup/</code> directory:
							</p><pre class="literallayout">OUTPUT=ISO
OUTPUT_URL=file:///mnt/rescue_system/
BACKUP=NETFS
BACKUP_URL=file:///srv/backup/</pre></div></div><p>
							The internal backup method allows further configuration.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To keep old backup archives when new ones are created, add this line:
								</p><pre class="literallayout">NETFS_KEEP_OLD_BACKUP_COPY=y</pre></li><li class="listitem"><p class="simpara">
									By default, ReaR creates a full backup on each run. To make the backups incremental, meaning that only the changed files are backed up on each run, add this line:
								</p><pre class="literallayout">BACKUP_TYPE=incremental</pre><p class="simpara">
									This automatically sets <code class="literal command">NETFS_KEEP_OLD_BACKUP_COPY</code> to <code class="literal">y</code>.
								</p></li><li class="listitem"><p class="simpara">
									To ensure that a full backup is done regularly in addition to incremental backups, add this line:
								</p><pre class="literallayout">FULLBACKUPDAY=<span class="emphasis"><em>"Day"</em></span></pre><p class="simpara">
									Substitute <span class="emphasis"><em>"Day"</em></span> with one of the "Mon", "Tue", "Wed", "Thu". "Fri", "Sat", "Sun".
								</p></li><li class="listitem"><p class="simpara">
									ReaR can also include both the rescue system and the backup in the ISO image. To achieve this, set the <code class="literal command">BACKUP_URL</code> directive to <code class="literal">iso:///backup/</code>:
								</p><pre class="literallayout">BACKUP_URL=iso:///backup/</pre><p class="simpara">
									This is the simplest method of full-system backup, because the rescue system does not need the user to fetch the backup during recovery. However, it needs more storage. Also, single-ISO backups cannot be incremental.
								</p><div class="example" id="idm140569343751584"><p class="title"><strong>Example&nbsp;27.5.&nbsp;Configuring Single-ISO Rescue System and Backups</strong></p><div class="example-contents"><p>
										This configuration creates a rescue system and a backup file as a single ISO image and puts it into the <code class="literal">/srv/backup/</code> directory:
									</p><pre class="literallayout">OUTPUT=ISO
OUTPUT_URL=file:///srv/backup/
BACKUP=NETFS
BACKUP_URL=iso:///backup/</pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The ISO image might be large in this scenario. Therefore, Red Hat recommends creating only one ISO image, not two. For details, see <a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#brid-iso-specific_configuration" title="ISO-specific Configuration">the section called “ISO-specific Configuration”</a>.
									</p></div></div></li><li class="listitem"><p class="simpara">
									To use <code class="literal command">rsync</code> instead of <code class="literal command">tar</code>, add this line:
								</p><pre class="literallayout">BACKUP_PROG=rsync</pre><p class="simpara">
									Note that incremental backups are only supported when using <code class="literal command">tar</code>.
								</p></li></ul></div></section><section class="section" id="creating_a_backup_using_the_internal_backup_method"><div class="titlepage"><div><div><h4 class="title">27.2.1.2.&nbsp;Creating a Backup Using the Internal Backup Method</h4></div></div></div><p>
							With <code class="literal">BACKUP=NETFS</code> set, ReaR can create either a rescue system, a backup file, or both.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To create <span class="emphasis"><em>a rescue system only</em></span>, run:
								</p><pre class="literallayout">rear mkrescue</pre></li><li class="listitem"><p class="simpara">
									To create <span class="emphasis"><em>a backup only</em></span>, run:
								</p><pre class="literallayout">rear mkbackuponly</pre></li><li class="listitem"><p class="simpara">
									To create <span class="emphasis"><em>a rescue system and a backup</em></span>, run:
								</p><pre class="literallayout">rear mkbackup</pre></li></ul></div><p>
							Note that triggering backup with ReaR is only possible if using the NETFS method. ReaR cannot trigger other backup methods.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								When restoring, the rescue system created with the <code class="literal command">BACKUP=NETFS</code> setting expects the backup to be present before executing <code class="literal command">rear recover</code>. Hence, once the rescue system boots, copy the backup file into the directory specified in <code class="literal command">BACKUP_URL</code>, unless using a single ISO image. Only then run <code class="literal command">rear recover</code>.
							</p></div></div><p>
							To avoid recreating the rescue system unnecessarily, you can check whether storage layout has changed since the last rescue system was created using these commands:
						</p><pre class="literallayout">~]# rear checklayout
~]# echo $?</pre><p>
							Non-zero status indicates a change in disk layout. Non-zero status is also returned if ReaR configuration has changed.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The <code class="literal command">rear checklayout</code> command does not check whether a rescue system is currently present in the output location, and can return 0 even if it is not there. So it does not guarantee that a rescue system is available, only that the layout has not changed since the last rescue system has been created.
							</p></div></div><div class="example" id="idm140569343723056"><p class="title"><strong>Example&nbsp;27.6.&nbsp;Using rear checklayout</strong></p><div class="example-contents"><p>
								To create a rescue system, but only if the layout has changed, use this command:
							</p><pre class="literallayout">~]# rear checklayout || rear mkrescue</pre></div></div></section></section><section class="section" id="sec-Supported_Backup_Methods"><div class="titlepage"><div><div><h3 class="title">27.2.2.&nbsp;Supported Backup Methods</h3></div></div></div><p>
						In addition to the NETFS internal backup method, ReaR supports several external backup methods. This means that the rescue system restores files from the backup automatically, but the backup creation cannot be triggered using ReaR.
					</p><p>
						For a list and configuration options of the supported external backup methods, see the "Backup Software Integration" section of the rear(8) man page.
					</p></section><section class="section" id="sec-Unsupported_Backup_Methods"><div class="titlepage"><div><div><h3 class="title">27.2.3.&nbsp;Unsupported Backup Methods</h3></div></div></div><p>
						With unsupported backup methods, there are two options:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								The rescue system prompts the user to manually restore the files. This scenario is the one described in "Basic ReaR Usage", except for the backup file format, which may take a different form than a <span class="strong strong"><strong><span class="application application">tar</span></strong></span> archive.
							</li><li class="listitem">
								ReaR executes the custom commands provided by the user. To configure this, set the <code class="literal command">BACKUP</code> directive to <code class="literal command">EXTERNAL</code>. Then specify the commands to be run during backing up and restoration using the <code class="literal command">EXTERNAL_BACKUP</code> and <code class="literal command">EXTERNAL_RESTORE</code> directives. Optionally, also specify the <code class="literal command">EXTERNAL_IGNORE_ERRORS</code> and <code class="literal command">EXTERNAL_CHECK</code> directives. See <code class="literal">/usr/share/rear/conf/default.conf</code> for an example configuration.
							</li></ol></div></section><section class="section" id="creating_multiple_backups"><div class="titlepage"><div><div><h3 class="title">27.2.4.&nbsp;Creating Multiple Backups</h3></div></div></div><p>
						With the version 2.00, ReaR supports creation of multiple backups. Backup methods that support this feature are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">BACKUP=NETFS</code> (internal method)
							</li><li class="listitem">
								<code class="literal">BACKUP=BORG</code> (external method)
							</li></ul></div><p>
						You can specify individual backups with the <code class="literal option">-C</code> option of the <code class="literal command">rear</code> command. The argument is a basename of the additional backup configuration file in the <code class="literal">/etc/rear/</code> directory. The method, destination, and the options for each specific backup are defined in the specific configuration file, not in the main configuration file.
					</p><p>
						To perform the basic recovery of the system:
					</p><div class="orderedlist" id="proc-basic_restore"><p class="title"><strong>Basic recovery of the system</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the ReaR recovery system ISO image together with a backup of the files of the basic system:
							</p><pre class="literallayout"> ~]# rear -C basic_system mkbackup</pre></li><li class="listitem"><p class="simpara">
								Back the files up in the <code class="literal">/home</code> directories:
							</p><pre class="literallayout"> ~]# rear -C home_backup mkbackuponly</pre></li></ol></div><p>
						Note that the specified configuration file should contain the directories needed for a basic recovery of the system, such as <code class="literal">/boot</code>, <code class="literal">/root</code>, and <code class="literal">/usr</code>.
					</p><div id="proc-recovery_shell" class="formalpara"><p class="title"><strong>Recovery of the system in the rear recovery shell</strong></p><p>
							To recover the system in the rear recovery shell, use the following sequence of commands:
						</p></div><pre class="literallayout">~]# rear -C basic_system recover</pre><pre class="literallayout">~]# rear -C home_backup restoreonly</pre></section></section></section><section class="chapter" id="ch-CDP"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;28.&nbsp;Choosing Suitable Red Hat Product</h2></div></div></div><p>
				A Red Hat Cloud Infrastructure or Red Hat Cloud Suite subscription provides access to multiple Red Hat products with complementary feature sets.
			</p><p>
				To determine products appropriate for your organization and use case, you can use <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/cloud-deployment-planner/#/"> Cloud Deployment Planner (CDP)</a></span></em></span>. CDP is an interactive tool which summarizes specific interoperability and feature compatibility considerations across various product releases.
			</p><p>
				To compare supportability of specific features and compatibility of various products depending on Red Hat Enterprise Linux version, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/cloud-deployment-planner/#/matrix"> comprehensive compatibility matrix</a></span></em></span>.
			</p></section><section class="chapter" id="appe-Access-Labs"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;29.&nbsp;Red Hat Customer Portal Labs Relevant to System Administration</h2></div></div></div><p>
				Red Hat Customer Portal Labs are tools designed to help you improve performance, troubleshoot issues, identify security problems, and optimize configuration. This appendix provides an overview of Red Hat Customer Portal relevant to system administration. All Red Hat Customer Portal Labs are available at <a class="link" href="https://access.redhat.com/labs/#?type=product=rhel/">Customer Portal Labs</a>.
			</p><h3 id="iscsi_helper">iSCSI Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/iscsihelper/">iSCSI Helper</a> provides a block-level storage over Internet Protocol (IP) networks, and enables the use of storage pools within server virtualization.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">iSCSI Helper</span></strong></span> to generate a script that prepares the system for its role of an iSCSI target (server) or an iSCSI initiator (client) configured according to the settings that you provide.
			</p><h3 id="ntp_configuration">NTP Configuration</h3><p>
				Use the <a class="link" href="https://access.redhat.com/labs/ntpcc/">NTP (Network Time Protocol) Configuration</a> to set up:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						servers running the NTP service
					</li><li class="listitem">
						clients synchronized with NTP servers
					</li></ul></div><h3 id="samba_configuration_helper">Samba Configuration Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/sambaconfig/">Samba Configuration Helper</a> creates a configuration that provides basic file and printer sharing through Samba:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Click <span class="guibutton">Server</span> to specify basic server settings.
					</li><li class="listitem">
						Click <span class="guibutton">Shares</span> to add the directories that you want to share
					</li><li class="listitem">
						Click <span class="guibutton">Server</span> to add attached printers individually.
					</li></ul></div><h3 id="vnc_configurator">VNC Configurator</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/vncconfig/"> VNC Configurator</a> is designed to install and configure VNC (Virtual Network Computing) server on a Red Hat Enterprise Linux server.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">VNC Configurator</span></strong></span> to generate all-in-one script optimized to install and configure the VNC service on your Red Hat Enterprise Linux server.
			</p><h3 id="bridge_configuration">Bridge Configuration</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/kvmbridgeconfiguration/">Bridge Configuration</a> is designed to configure a bridged network interface for applications such as KVM using Red Hat Enterprise Linux 5.4 or later.
			</p><h3 id="network_bonding_helper">Network Bonding Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/networkbondinghelper/">Network Bonding Helper</a> allows administrators to bind multiple Network Interface Controllers together into a single channel using the bonding kernel module and the bonding network interface.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">Network Bonding Helper</span></strong></span> to enable two or more network interfaces to act as one bonding interface.
			</p><h3 id="lvm_raid_calculator">LVM RAID Calculator</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/lvmraidcalculator/">LVM RAID Calculator</a> determines the optimal parameters for creating logical volumes (LVMs) on a given RAID storage after you specify storage options.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">LVM RAID Calculator</span></strong></span> to generate a sequence of commands that create LVMs on a given RAID storage.
			</p><h3 id="nfs_helper">NFS Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/nfshelper/">NFS Helper</a> simplifies configuring a new NFS server or client. Follow the steps to specify the export and mount options. Then, generate a downloadable NFS configuration script.
			</p><h3 id="load_balancer_configuration_tool">Load Balancer Configuration Tool</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/lbconfig/">Load Balancer Configuration Tool</a> creates an optimal balance between apache-based load balancers and JBoss/Tomcat application servers.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">Load Balancer Configuration Tool</span></strong></span> to generate a configuration file and advice about how you can increase the performance of your environment.
			</p><h3 id="yum_repository_configuration_helper">Yum Repository Configuration Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/yumrepoconfighelper/">Yum Repository Configuration Helper</a> is designed to set up a simple Yum repository.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">Yum Repository Configuration Helper</span></strong></span> to set up:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						a local Yum repository
					</li><li class="listitem">
						a HTTP/FTP-based Yum repository
					</li></ul></div><h3 id="file_system_layout_calculator">File System Layout Calculator</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/fslayoutcalculator">File System Layout Calculator</a> determines the optimal parameters for creating ext3, ext4, and xfs file systems, after you provide storage options that describe your current or planned storage.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">File System Layout Calculator</span></strong></span> to generate a command that creates a file system with provided parameters on the specified RAID storage.
			</p><h3 id="rhel_backup_and_restore_assistant">RHEL Backup and Restore Assistant</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/rbra/">RHEL Backup and Restore Assistant</a> provides information on back-up and restore tools, and common scenarios of Linux usage.
			</p><p>
				Described tools:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">dump and restore</code>: for backing up the ext2, ext3, and ext4 file systems.
					</li><li class="listitem">
						<code class="literal">tar and cpio</code>: for archiving or restoring files and folders, especially when backing up the tape drives.
					</li><li class="listitem">
						<code class="literal">rsync</code>: for performing back-up operations and synchronizing files and directories between locations.
					</li><li class="listitem">
						<code class="literal">dd</code>: for copying files from a source to a destination block by block independently of the file systems or operating systems involved.
					</li></ul></div><p>
				Described scenarios:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Disaster recovery
					</li><li class="listitem">
						Hardware migration
					</li><li class="listitem">
						Partition table backup
					</li><li class="listitem">
						Important folder backup
					</li><li class="listitem">
						Incremental backup
					</li><li class="listitem">
						Differential backup
					</li></ul></div><h3 id="dns_helper">DNS Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/dnshelper/">DNS Helper</a> provides assistance with configuring different types of DNS servers.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">DNS Helper</span></strong></span> to generate a bash script to automatically create and configure the DNS server.
			</p><h3 id="ad_integration_helper_samba_fs_winbind">AD Integration Helper (Samba FS - winbind)</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/adih/">AD Integration Helperr</a> is used for connecting Samba File System server to an Active Directory (AD) server.
			</p><p>
				Use <span class="strong strong"><strong><span class="application application">AD Integration Helper</span></strong></span> to generate a script based on basic AD server information supplied by the user. The generated script configures Samba, Name Service Switch (NSS) and Pluggable Authentication Module (PAM).
			</p><h3 id="red_hat_enterprise_linux_upgrade_helper">Red Hat Enterprise Linux Upgrade Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/rhelupgradehelper/"> Red Hat Enterprise Linux Upgrade Helper</a> is designed to help you with upgrading Red Hat Enterprise Linux from version 6.5/6.6/6.7/6.8 to version 7.x.
			</p><h3 id="registration_assistant">Registration Assistant</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/registrationassistant/">Registration Assistant</a> is designed to help you choose the most suitable registration option for your Red Hat Enterprise Linux environment.
			</p><h3 id="rescue_mode_assistant">Rescue Mode Assistant</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/rescuemodeassistant/">Rescue Mode Assistant</a> is designed to help you solve the following problems in the rescue mode of Red Hat Enterprise Linux:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Reset root password
					</li><li class="listitem">
						Generate a SOS report
					</li><li class="listitem">
						Perform a Filesystem Check(fsck)
					</li><li class="listitem">
						Reinstall GRUB
					</li><li class="listitem">
						Rebuild the Initial Ramdisk Image
					</li><li class="listitem">
						Reduce the size of the root file system
					</li></ul></div><h3 id="kernel_oops_analyzer">Kernel Oops Analyzer</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/kerneloopsanalyzer/">Kernel Oops Analyzer</a> is designed to help you with solving a kernel crash.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">Kernel Oops Analyzer</span></strong></span> to input a text or a file including one or more kernel oops messages and find a solution suitable for your case.
			</p><h3 id="kdump_helper">Kdump Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/kdumphelper/">Kdump Helper</a> is designed to set up the Kdump mechanism.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">Kdump Helper</span></strong></span> to generate a script to set up Kdump to dump data in memory into a dump file called a vmcore.
			</p><h3 id="scsi_decoder">SCSI decoder</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/scsi">SCSI decoder</a> is designed to decode SCSI error messages in the <code class="literal">/log/*</code> files or log file snippets, as these error messages can be hard to understand for the user.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">SCSI decoder</span></strong></span> to individually diagnose each SCSI error message and get solutions to resolve problems efficiently.
			</p><h3 id="red_hat_memory_analyzer">Red Hat Memory Analyzer</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/rhma/">Red Hat Memory Analyzer</a> visualizes memory usage on your system based on information captured by the SAR utility.
			</p><h3 id="multipath_helper">Multipath Helper</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/multipathhelper/">Multipath Helper</a> creates an optimal configuration for multipath devices on Red Hat Enterprise Linux 5, 6, and 7.
			</p><p>
				Use the <span class="strong strong"><strong><span class="application application">Multipath Helper</span></strong></span> to create advanced multipath configurations, such as custom aliases or device blacklists.
			</p><p>
				The Multipath Helper also provides the <code class="literal">multipath.conf</code> file for a review. When you achieve the required configuration, download the installation script to run on your server.
			</p><h3 id="multipath_configuration_visualizer">Multipath Configuration Visualizer</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/mpcv/">Multipath Configuration Visualizer</a> analyzes the files in a SOS report and provides a diagram that visualizes the multipath configuration. Use the <span class="strong strong"><strong><span class="application application">Multipath Configuration Visualizer</span></strong></span> to display:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Hosts components including Host Bus Adapters (HBAs), local devices, and iSCSI devices on the server side
					</li><li class="listitem">
						Storage components on the storage side
					</li><li class="listitem">
						Fabric or Ethernet components between the server and the storage
					</li><li class="listitem">
						Paths to all mentioned components
					</li></ul></div><p>
				You can either upload a SOS report compressed in the .xz, .gz, or .bz2 format, or extract a SOS report in a directory that you then select as the source for a client-side analysis.
			</p><h3 id="red_hat_i_o_usage_visualizer">Red Hat I/O Usage Visualizer</h3><p>
				The <a class="link" href="https://access.redhat.com/labs/rhiou/">Red Hat I/O Usage Visualizer</a> displays a visualization of the I/O device usage statistics captured by the SAR utility.
			</p><h3 id="storage_lvm_configuration_viewer">Storage / LVM configuration viewer</h3><p>
				The <a class="link" href="https://access.redhat.com/labsinfo/slcv">Storage / LVM configuration viewer</a> analyzes the files included in a SOS report and creates a diagram to visualize the Storage/LVM configuration.
			</p></section><section class="chapter" id="app-Revision_History"><div class="titlepage"><div><div><h2 class="title">Chapter&nbsp;30.&nbsp;Revision History</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">0.14-26</code></span></dt><dd><p class="simpara">
							Mon Aug 05 2019, Marie Doleželová (<a class="link" href="mailto:mdolezel@redhat.com">mdolezel@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Preparing document for 7.7 GA publication.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-23</code></span></dt><dd><p class="simpara">
							Mon Aug 13 2018, Marie Doleželová (<a class="link" href="mailto:mdolezel@redhat.com">mdolezel@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Preparing document for 7.6 Beta publication.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-19</code></span></dt><dd><p class="simpara">
							Tue Mar 20 2018, Marie Doleželová (<a class="link" href="mailto:mdolezel@redhat.com">mdolezel@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Preparing document for 7.5 GA publication.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-17</code></span></dt><dd><p class="simpara">
							Tue Dec 5 2017, Marie Doleželová (<a class="link" href="mailto:mdolezel@redhat.com">mdolezel@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Updated Samba section. Added section about Configuring RELP with TLS. Updated section on Upgrading from GRUB Legacy to GRUB 2.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-16</code></span></dt><dd><p class="simpara">
							Mon Aug 8 2017, Marie Doleželová (<a class="link" href="mailto:mdolezel@redhat.com">mdolezel@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Minor fixes throughout the guide, added links to articles dealing with choosing a target for ordering and dependencies of the custom unit files to the chapter "Creating Custom Unit Files".
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-14</code></span></dt><dd><p class="simpara">
							Thu Jul 27 2017, Marie Doleželová (<a class="link" href="mailto:mdolezel@redhat.com">mdolezel@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Document version for 7.4 GA publication.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-8</code></span></dt><dd><p class="simpara">
							Mon Nov 3 2016, Maxim Svistunov (<a class="link" href="mailto:msvistun@redhat.com">msvistun@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Version for 7.3 GA publication.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-7</code></span></dt><dd><p class="simpara">
							Mon Jun 20 2016, Maxim Svistunov (<a class="link" href="mailto:msvistun@redhat.com">msvistun@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Added <span class="emphasis"><em><span class="citetitle citetitle">Relax-and-Recover (ReaR)</span></em></span>; made minor improvements.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-6</code></span></dt><dd><p class="simpara">
							Thu Mar 10 2016, Maxim Svistunov (<a class="link" href="mailto:msvistun@redhat.com">msvistun@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Minor fixes and updates.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-5</code></span></dt><dd><p class="simpara">
							Thu Jan 21 2016, Lenka Špačková (<a class="link" href="mailto:lspackova@redhat.com">lspackova@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Minor factual updates.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-3</code></span></dt><dd><p class="simpara">
							Wed Nov 11 2015, Jana Heves (<a class="link" href="mailto:jheves@redhat.com">jheves@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Version for 7.2 GA release.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-1</code></span></dt><dd><p class="simpara">
							Mon Nov 9 2015, Jana Heves (<a class="link" href="mailto:jheves@redhat.com">jheves@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Minor fixes, added links to RH training courses.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.14-0.3</code></span></dt><dd><p class="simpara">
							Fri Apr 3 2015, Stephen Wadeley (<a class="link" href="mailto:swadeley@redhat.com">swadeley@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Added <span class="emphasis"><em><span class="citetitle citetitle">Registering the System and Managing Subscriptions</span></em></span>, <span class="emphasis"><em><span class="citetitle citetitle">Accessing Support Using the Red Hat Support Tool</span></em></span>, updated <span class="emphasis"><em><span class="citetitle citetitle">Viewing and Managing Log Files</span></em></span>.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.13-2</code></span></dt><dd><p class="simpara">
							Tue Feb 24 2015, Stephen Wadeley (<a class="link" href="mailto:swadeley@redhat.com">swadeley@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Version for 7.1 GA release.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.12-0.6</code></span></dt><dd><p class="simpara">
							Tue Nov 18 2014, Stephen Wadeley (<a class="link" href="mailto:swadeley@redhat.com">swadeley@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Improved <span class="emphasis"><em><span class="citetitle citetitle">TigerVNC</span></em></span>.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.12-0.4</code></span></dt><dd><p class="simpara">
							Mon Nov 10 2014, Stephen Wadeley (<a class="link" href="mailto:swadeley@redhat.com">swadeley@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Improved <span class="emphasis"><em><span class="citetitle citetitle">Yum</span></em></span>, <span class="emphasis"><em><span class="citetitle citetitle">Managing Services with systemd</span></em></span>, <span class="emphasis"><em><span class="citetitle citetitle">OpenLDAP</span></em></span>, <span class="emphasis"><em><span class="citetitle citetitle">Viewing and Managing Log Files</span></em></span>, <span class="emphasis"><em><span class="citetitle citetitle">OProfile</span></em></span>, and <span class="emphasis"><em><span class="citetitle citetitle">Working with the GRUB 2 Boot Loader</span></em></span>.
								</li></ul></div></dd><dt><span class="term"><code class="literal">0.12-0</code></span></dt><dd><p class="simpara">
							Tue 19 Aug 2014, Stephen Wadeley (<a class="link" href="mailto:swadeley@redhat.com">swadeley@redhat.com</a>)
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Red Hat Enterprise Linux 7.0 GA release of the System Administrator’s Guide.
								</li></ul></div></dd></dl></div><section class="section" id="pref-Acknowledgments"><div class="titlepage"><div><div><h2 class="title">30.1.&nbsp;Acknowledgments</h2></div></div></div><p>
					Certain portions of this text first appeared in the <span class="emphasis"><em><span class="citetitle citetitle">Red Hat Enterprise Linux 6 Deployment Guide</span></em></span>, copyright © 2010–2018 Red Hat, Inc., available at <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/index.html">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/index.html</a>.
				</p><p>
					<a class="xref" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#sect-System_Monitoring_Tools-Net-SNMP" title="21.7. Monitoring Performance with Net-SNMP">Section&nbsp;21.7, “Monitoring Performance with Net-SNMP”</a> is based on an article written by Michael Solberg.
				</p></section></section></div><div><!--Empty--></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  <!-- CP_PRIMER_FOOTER -->
            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto affix" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com/">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path class="rh-logo-hat" d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"></path>
                      <path class="rh-logo-band" d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"></path>
                      <path class="rh-logo-type" d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"></path>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com/" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                    <li><a href="https://cloud.redhat.com/" class="cloud-com">cloud.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com/" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden="" href="https://status.redhat.com/" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2021 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                                <li><a id="teconsent" consent="0,1,2" aria-label="Open Cookie Preferences Modal" role="complementary"><a role="link" id="icon-id05395523158578506" tabindex="0" lang="en" aria-label="Cookie Preferences" style="cursor: pointer;">Cookie Preferences</a></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/rh-summit-red-a.svg" alt="Red Hat Summit">
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- TrustArc -->
    <div id="consent_blackbar"></div> 
    <!--googleon: all-->
</div><script src="./System Administrator’s Guide Red Hat Enterprise Linux 7 _ Red Hat Customer Portal_files/v1.7-8834" async="async" crossorigin=""></script>
<!-- /CP_PRIMER_FOOTER -->
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary" rel=" noopener noreferrer">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div>

<div id="wot-new-assistant-container"><div data-reactroot=""></div></div></body></html>