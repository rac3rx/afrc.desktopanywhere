<!DOCTYPE html>
<!-- saved from url=(0094)https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md -->
<html lang="en"><link type="text/css" rel="stylesheet" id="dark-mode-custom-link"><link type="text/css" rel="stylesheet" id="dark-mode-general-link"><style lang="en" type="text/css" id="dark-mode-custom-style"></style><style lang="en" type="text/css" id="dark-mode-native-style"></style><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Linux Cert Management</title><link rel="stylesheet" type="text/css" href="./Linux Cert Management_files/base.css"><link rel="stylesheet" type="text/css" href="./Linux Cert Management_files/doc.css"><link rel="stylesheet" type="text/css" href="./Linux Cert Management_files/prettify.css"><!-- default customHeadTagPart --><link href="./Linux Cert Management_files/css2" rel="stylesheet"></head><span id="warning-container"><i data-reactroot=""></i></span><body class="Site"><header class="Site-header "><div class="Header"><div class="Header-title"></div></div></header><div class="Site-content Site-Content--markdown"><div class="Container"><div class="doc"><h1><a class="h" name="Linux-Cert-Management" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#Linux-Cert-Management"><span></span></a><a class="h" name="linux-cert-management" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#linux-cert-management"><span></span></a>Linux Cert Management</h1><p>The easy way to manage certificates is navigate to <a href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/chrome%3A//settings/search#ssl">chrome://settings/search#ssl</a>. Then click on the “Manage Certificates” button. This will load a built-in interface for managing certificates.</p><p>On Linux, Chromium uses the <a href="https://wiki.mozilla.org/NSS_Shared_DB_And_LINUX">NSS Shared DB</a>. If the built-in manager does not work for you then you can configure certificates with the <a href="http://www.mozilla.org/projects/security/pki/nss/tools/">NSS command line tools</a>.</p><h2><a class="h" name="Details" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#Details"><span></span></a><a class="h" name="details" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#details"><span></span></a>Details</h2><h3><a class="h" name="Get-the-tools" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#Get-the-tools"><span></span></a><a class="h" name="get-the-tools" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#get-the-tools"><span></span></a>Get the tools</h3><ul><li>Debian/Ubuntu: <code class="code">sudo apt-get install libnss3-tools</code></li><li>Fedora: <code class="code">su -c "yum install nss-tools"</code></li><li>Gentoo: <code class="code">su -c "echo 'dev-libs/nss utils' &gt;&gt; /etc/portage/package.use &amp;&amp; emerge dev-libs/nss"</code> (You need to launch all commands below with the <code class="code">nss</code> prefix, e.g., <code class="code">nsscertutil</code>.)</li><li>Opensuse: <code class="code">sudo zypper install mozilla-nss-tools</code></li></ul><h3><a class="h" name="List-all-certificates" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#List-all-certificates"><span></span></a><a class="h" name="list-all-certificates" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#list-all-certificates"><span></span></a>List all certificates</h3><pre class="code">certutil -d sql:$HOME/.pki/nssdb -L
</pre><h4><a class="h" name="Ubuntu-Jaunty-error" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#Ubuntu-Jaunty-error"><span></span></a><a class="h" name="ubuntu-jaunty-error" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#ubuntu-jaunty-error"><span></span></a>Ubuntu Jaunty error</h4><p>Above (and most commands) gives:</p><pre class="code">certutil: function failed: security library: invalid arguments.
</pre><p>Package version 3.12.3.1-0ubuntu0.9.04.2</p><h3><a class="h" name="List-details-of-a-certificate" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#List-details-of-a-certificate"><span></span></a><a class="h" name="list-details-of-a-certificate" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#list-details-of-a-certificate"><span></span></a>List details of a certificate</h3><pre class="code">certutil -d sql:$HOME/.pki/nssdb -L -n &lt;certificate nickname&gt;
</pre><h3><a class="h" name="Add-a-certificate" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#Add-a-certificate"><span></span></a><a class="h" name="add-a-certificate" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#add-a-certificate"><span></span></a>Add a certificate</h3><pre class="code"><span class="pln">certutil </span><span class="pun">-</span><span class="pln">d sql</span><span class="pun">:</span><span class="pln">$HOME</span><span class="pun">/.</span><span class="pln">pki</span><span class="pun">/</span><span class="pln">nssdb </span><span class="pun">-</span><span class="pln">A </span><span class="pun">-</span><span class="pln">t </span><span class="pun">&lt;</span><span class="pln">TRUSTARGS</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">-</span><span class="pln">n </span><span class="pun">&lt;</span><span class="pln">certificate nickname</span><span class="pun">&gt;</span><span class="pln"> \
</span><span class="pun">-</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln">certificate filename</span><span class="pun">&gt;</span><span class="pln">
</span></pre><p>The TRUSTARGS are three strings of zero or more alphabetic characters, separated by commas. They define how the certificate should be trusted for SSL, email, and object signing, and are explained in the <a href="http://www.mozilla.org/projects/security/pki/nss/tools/certutil.html#1034193">certutil docs</a> or <a href="https://blogs.oracle.com/meena/entry/notes_about_trust_flags">Meena's blog post on trust flags</a>.</p><p>For example, to trust a root CA certificate for issuing SSL server certificates, use</p><pre class="code"><span class="pln">certutil </span><span class="pun">-</span><span class="pln">d sql</span><span class="pun">:</span><span class="pln">$HOME</span><span class="pun">/.</span><span class="pln">pki</span><span class="pun">/</span><span class="pln">nssdb </span><span class="pun">-</span><span class="pln">A </span><span class="pun">-</span><span class="pln">t </span><span class="str">"C,,"</span><span class="pln"> </span><span class="pun">-</span><span class="pln">n </span><span class="pun">&lt;</span><span class="pln">certificate nickname</span><span class="pun">&gt;</span><span class="pln"> \
</span><span class="pun">-</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln">certificate filename</span><span class="pun">&gt;</span><span class="pln">
</span></pre><p>To import an intermediate CA certificate, use</p><pre class="code"><span class="pln">certutil </span><span class="pun">-</span><span class="pln">d sql</span><span class="pun">:</span><span class="pln">$HOME</span><span class="pun">/.</span><span class="pln">pki</span><span class="pun">/</span><span class="pln">nssdb </span><span class="pun">-</span><span class="pln">A </span><span class="pun">-</span><span class="pln">t </span><span class="str">",,"</span><span class="pln"> </span><span class="pun">-</span><span class="pln">n </span><span class="pun">&lt;</span><span class="pln">certificate nickname</span><span class="pun">&gt;</span><span class="pln"> \
</span><span class="pun">-</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln">certificate filename</span><span class="pun">&gt;</span><span class="pln">
</span></pre><p>Note: to trust a self-signed server certificate, we should use</p><pre class="code">certutil -d sql:$HOME/.pki/nssdb -A -t "P,," -n &lt;certificate nickname&gt; \
-i &lt;certificate filename&gt;
</pre><p>This should work now, because <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=531160">NSS bug 531160</a> is claimed to be fixed in a related bug report.  If it doesn't work, then to work around the NSS bug, you have to trust it as a CA using the “C,,” trust flags.</p><h4><a class="h" name="Add-a-personal-certificate-and-private-key-for-SSL-client-authentication" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#Add-a-personal-certificate-and-private-key-for-SSL-client-authentication"><span></span></a><a class="h" name="add-a-personal-certificate-and-private-key-for-ssl-client-authentication" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#add-a-personal-certificate-and-private-key-for-ssl-client-authentication"><span></span></a>Add a personal certificate and private key for SSL client authentication</h4><p>Use the command:</p><pre class="code">pk12util -d sql:$HOME/.pki/nssdb -i PKCS12_file.p12
</pre><p>to import a personal certificate and private key stored in a PKCS #12 file. The TRUSTARGS of the personal certificate will be set to “u,u,u”.</p><h3><a class="h" name="Delete-a-certificate" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#Delete-a-certificate"><span></span></a><a class="h" name="delete-a-certificate" href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/docs/linux/cert_management.md#delete-a-certificate"><span></span></a>Delete a certificate</h3><pre class="code">certutil -d sql:$HOME/.pki/nssdb -D -n &lt;certificate nickname&gt;
</pre></div></div></div><!-- default customFooter --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><div class="Footer-links"></div></div></footer><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga('create', 'UA-55762617-15', 'auto'); ga('send', 'pageview', {title: 'Linux Cert Management'});</script><script async="" src="./Linux Cert Management_files/analytics.js"></script><div id="wot-new-assistant-container"><div data-reactroot=""></div></div></body></html>